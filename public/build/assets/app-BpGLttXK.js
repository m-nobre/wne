function nK(B,L){return function(){return B.apply(L,arguments)}}const{toString:IK}=Object.prototype,{getPrototypeOf:vG}=Object,F6=(B=>L=>{const j=IK.call(L);return B[j]||(B[j]=j.slice(8,-1).toLowerCase())})(Object.create(null)),Qm=B=>(B=B.toLowerCase(),L=>F6(L)===B),I6=B=>L=>typeof L===B,{isArray:M_}=Array,FD=I6("undefined");function LK(B){return B!==null&&!FD(B)&&B.constructor!==null&&!FD(B.constructor)&&vu(B.constructor.isBuffer)&&B.constructor.isBuffer(B)}const oK=Qm("ArrayBuffer");function HK(B){let L;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?L=ArrayBuffer.isView(B):L=B&&B.buffer&&oK(B.buffer),L}const VK=I6("string"),vu=I6("function"),sK=I6("number"),L6=B=>B!==null&&typeof B=="object",zK=B=>B===!0||B===!1,P6=B=>{if(F6(B)!=="object")return!1;const L=vG(B);return(L===null||L===Object.prototype||Object.getPrototypeOf(L)===null)&&!(Symbol.toStringTag in B)&&!(Symbol.iterator in B)},UK=Qm("Date"),WK=Qm("File"),ZK=Qm("Blob"),jK=Qm("FileList"),GK=B=>L6(B)&&vu(B.pipe),qK=B=>{let L;return B&&(typeof FormData=="function"&&B instanceof FormData||vu(B.append)&&((L=F6(B))==="formdata"||L==="object"&&vu(B.toString)&&B.toString()==="[object FormData]"))},KK=Qm("URLSearchParams"),[YK,XK,JK,QK]=["ReadableStream","Request","Response","Headers"].map(Qm),eY=B=>B.trim?B.trim():B.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ID(B,L,{allOwnKeys:j=!1}={}){if(B===null||typeof B>"u")return;let q,ne;if(typeof B!="object"&&(B=[B]),M_(B))for(q=0,ne=B.length;q<ne;q++)L.call(null,B[q],q,B);else{const de=j?Object.getOwnPropertyNames(B):Object.keys(B),fe=de.length;let ke;for(q=0;q<fe;q++)ke=de[q],L.call(null,B[ke],ke,B)}}function rK(B,L){L=L.toLowerCase();const j=Object.keys(B);let q=j.length,ne;for(;q-- >0;)if(ne=j[q],L===ne.toLowerCase())return ne;return null}const UC=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,cK=B=>!FD(B)&&B!==UC;function dG(){const{caseless:B}=cK(this)&&this||{},L={},j=(q,ne)=>{const de=B&&rK(L,ne)||ne;P6(L[de])&&P6(q)?L[de]=dG(L[de],q):P6(q)?L[de]=dG({},q):M_(q)?L[de]=q.slice():L[de]=q};for(let q=0,ne=arguments.length;q<ne;q++)arguments[q]&&ID(arguments[q],j);return L}const tY=(B,L,j,{allOwnKeys:q}={})=>(ID(L,(ne,de)=>{j&&vu(ne)?B[de]=nK(ne,j):B[de]=ne},{allOwnKeys:q}),B),nY=B=>(B.charCodeAt(0)===65279&&(B=B.slice(1)),B),oY=(B,L,j,q)=>{B.prototype=Object.create(L.prototype,q),B.prototype.constructor=B,Object.defineProperty(B,"super",{value:L.prototype}),j&&Object.assign(B.prototype,j)},sY=(B,L,j,q)=>{let ne,de,fe;const ke={};if(L=L||{},B==null)return L;do{for(ne=Object.getOwnPropertyNames(B),de=ne.length;de-- >0;)fe=ne[de],(!q||q(fe,B,L))&&!ke[fe]&&(L[fe]=B[fe],ke[fe]=!0);B=j!==!1&&vG(B)}while(B&&(!j||j(B,L))&&B!==Object.prototype);return L},rY=(B,L,j)=>{B=String(B),(j===void 0||j>B.length)&&(j=B.length),j-=L.length;const q=B.indexOf(L,j);return q!==-1&&q===j},cY=B=>{if(!B)return null;if(M_(B))return B;let L=B.length;if(!sK(L))return null;const j=new Array(L);for(;L-- >0;)j[L]=B[L];return j},aY=(B=>L=>B&&L instanceof B)(typeof Uint8Array<"u"&&vG(Uint8Array)),iY=(B,L)=>{const q=(B&&B[Symbol.iterator]).call(B);let ne;for(;(ne=q.next())&&!ne.done;){const de=ne.value;L.call(B,de[0],de[1])}},lY=(B,L)=>{let j;const q=[];for(;(j=B.exec(L))!==null;)q.push(j);return q},uY=Qm("HTMLFormElement"),dY=B=>B.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(j,q,ne){return q.toUpperCase()+ne}),zq=(({hasOwnProperty:B})=>(L,j)=>B.call(L,j))(Object.prototype),mY=Qm("RegExp"),aK=(B,L)=>{const j=Object.getOwnPropertyDescriptors(B),q={};ID(j,(ne,de)=>{let fe;(fe=L(ne,de,B))!==!1&&(q[de]=fe||ne)}),Object.defineProperties(B,q)},fY=B=>{aK(B,(L,j)=>{if(vu(B)&&["arguments","caller","callee"].indexOf(j)!==-1)return!1;const q=B[j];if(vu(q)){if(L.enumerable=!1,"writable"in L){L.writable=!1;return}L.set||(L.set=()=>{throw Error("Can not rewrite read-only method '"+j+"'")})}})},gY=(B,L)=>{const j={},q=ne=>{ne.forEach(de=>{j[de]=!0})};return M_(B)?q(B):q(String(B).split(L)),j},hY=()=>{},pY=(B,L)=>B!=null&&Number.isFinite(B=+B)?B:L,aG="abcdefghijklmnopqrstuvwxyz",Uq="0123456789",iK={DIGIT:Uq,ALPHA:aG,ALPHA_DIGIT:aG+aG.toUpperCase()+Uq},bY=(B=16,L=iK.ALPHA_DIGIT)=>{let j="";const{length:q}=L;for(;B--;)j+=L[Math.random()*q|0];return j};function vY(B){return!!(B&&vu(B.append)&&B[Symbol.toStringTag]==="FormData"&&B[Symbol.iterator])}const yY=B=>{const L=new Array(10),j=(q,ne)=>{if(L6(q)){if(L.indexOf(q)>=0)return;if(!("toJSON"in q)){L[ne]=q;const de=M_(q)?[]:{};return ID(q,(fe,ke)=>{const At=j(fe,ne+1);!FD(At)&&(de[ke]=At)}),L[ne]=void 0,de}}return q};return j(B,0)},CY=Qm("AsyncFunction"),wY=B=>B&&(L6(B)||vu(B))&&vu(B.then)&&vu(B.catch),lK=((B,L)=>B?setImmediate:L?((j,q)=>(UC.addEventListener("message",({source:ne,data:de})=>{ne===UC&&de===j&&q.length&&q.shift()()},!1),ne=>{q.push(ne),UC.postMessage(j,"*")}))(`axios@${Math.random()}`,[]):j=>setTimeout(j))(typeof setImmediate=="function",vu(UC.postMessage)),SY=typeof queueMicrotask<"u"?queueMicrotask.bind(UC):typeof process<"u"&&process.nextTick||lK,Le={isArray:M_,isArrayBuffer:oK,isBuffer:LK,isFormData:qK,isArrayBufferView:HK,isString:VK,isNumber:sK,isBoolean:zK,isObject:L6,isPlainObject:P6,isReadableStream:YK,isRequest:XK,isResponse:JK,isHeaders:QK,isUndefined:FD,isDate:UK,isFile:WK,isBlob:ZK,isRegExp:mY,isFunction:vu,isStream:GK,isURLSearchParams:KK,isTypedArray:aY,isFileList:jK,forEach:ID,merge:dG,extend:tY,trim:eY,stripBOM:nY,inherits:oY,toFlatObject:sY,kindOf:F6,kindOfTest:Qm,endsWith:rY,toArray:cY,forEachEntry:iY,matchAll:lY,isHTMLForm:uY,hasOwnProperty:zq,hasOwnProp:zq,reduceDescriptors:aK,freezeMethods:fY,toObjectSet:gY,toCamelCase:dY,noop:hY,toFiniteNumber:pY,findKey:rK,global:UC,isContextDefined:cK,ALPHABET:iK,generateString:bY,isSpecCompliantForm:vY,toJSONObject:yY,isAsyncFn:CY,isThenable:wY,setImmediate:lK,asap:SY};function Gn(B,L,j,q,ne){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=B,this.name="AxiosError",L&&(this.code=L),j&&(this.config=j),q&&(this.request=q),ne&&(this.response=ne,this.status=ne.status?ne.status:null)}Le.inherits(Gn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Le.toJSONObject(this.config),code:this.code,status:this.status}}});const uK=Gn.prototype,dK={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(B=>{dK[B]={value:B}});Object.defineProperties(Gn,dK);Object.defineProperty(uK,"isAxiosError",{value:!0});Gn.from=(B,L,j,q,ne,de)=>{const fe=Object.create(uK);return Le.toFlatObject(B,fe,function(At){return At!==Error.prototype},ke=>ke!=="isAxiosError"),Gn.call(fe,B.message,L,j,q,ne),fe.cause=B,fe.name=B.name,de&&Object.assign(fe,de),fe};const xY=null;function mG(B){return Le.isPlainObject(B)||Le.isArray(B)}function mK(B){return Le.endsWith(B,"[]")?B.slice(0,-2):B}function Wq(B,L,j){return B?B.concat(L).map(function(ne,de){return ne=mK(ne),!j&&de?"["+ne+"]":ne}).join(j?".":""):L}function EY(B){return Le.isArray(B)&&!B.some(mG)}const TY=Le.toFlatObject(Le,{},null,function(L){return/^is[A-Z]/.test(L)});function H6(B,L,j){if(!Le.isObject(B))throw new TypeError("target must be an object");L=L||new FormData,j=Le.toFlatObject(j,{metaTokens:!0,dots:!1,indexes:!1},!1,function(jt,He){return!Le.isUndefined(He[jt])});const q=j.metaTokens,ne=j.visitor||yt,de=j.dots,fe=j.indexes,At=(j.Blob||typeof Blob<"u"&&Blob)&&Le.isSpecCompliantForm(L);if(!Le.isFunction(ne))throw new TypeError("visitor must be a function");function bt(Xt){if(Xt===null)return"";if(Le.isDate(Xt))return Xt.toISOString();if(!At&&Le.isBlob(Xt))throw new Gn("Blob is not supported. Use a Buffer instead.");return Le.isArrayBuffer(Xt)||Le.isTypedArray(Xt)?At&&typeof Blob=="function"?new Blob([Xt]):Buffer.from(Xt):Xt}function yt(Xt,jt,He){let uo=Xt;if(Xt&&!He&&typeof Xt=="object"){if(Le.endsWith(jt,"{}"))jt=q?jt:jt.slice(0,-2),Xt=JSON.stringify(Xt);else if(Le.isArray(Xt)&&EY(Xt)||(Le.isFileList(Xt)||Le.endsWith(jt,"[]"))&&(uo=Le.toArray(Xt)))return jt=mK(jt),uo.forEach(function(J,hn){!(Le.isUndefined(J)||J===null)&&L.append(fe===!0?Wq([jt],hn,de):fe===null?jt:jt+"[]",bt(J))}),!1}return mG(Xt)?!0:(L.append(Wq(He,jt,de),bt(Xt)),!1)}const Yt=[],Co=Object.assign(TY,{defaultVisitor:yt,convertValue:bt,isVisitable:mG});function Xn(Xt,jt){if(!Le.isUndefined(Xt)){if(Yt.indexOf(Xt)!==-1)throw Error("Circular reference detected in "+jt.join("."));Yt.push(Xt),Le.forEach(Xt,function(uo,Bo){(!(Le.isUndefined(uo)||uo===null)&&ne.call(L,uo,Le.isString(Bo)?Bo.trim():Bo,jt,Co))===!0&&Xn(uo,jt?jt.concat(Bo):[Bo])}),Yt.pop()}}if(!Le.isObject(B))throw new TypeError("data must be an object");return Xn(B),L}function Zq(B){const L={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(B).replace(/[!'()~]|%20|%00/g,function(q){return L[q]})}function yG(B,L){this._pairs=[],B&&H6(B,this,L)}const fK=yG.prototype;fK.append=function(L,j){this._pairs.push([L,j])};fK.toString=function(L){const j=L?function(q){return L.call(this,q,Zq)}:Zq;return this._pairs.map(function(ne){return j(ne[0])+"="+j(ne[1])},"").join("&")};function _Y(B){return encodeURIComponent(B).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function gK(B,L,j){if(!L)return B;const q=j&&j.encode||_Y,ne=j&&j.serialize;let de;if(ne?de=ne(L,j):de=Le.isURLSearchParams(L)?L.toString():new yG(L,j).toString(q),de){const fe=B.indexOf("#");fe!==-1&&(B=B.slice(0,fe)),B+=(B.indexOf("?")===-1?"?":"&")+de}return B}class jq{constructor(){this.handlers=[]}use(L,j,q){return this.handlers.push({fulfilled:L,rejected:j,synchronous:q?q.synchronous:!1,runWhen:q?q.runWhen:null}),this.handlers.length-1}eject(L){this.handlers[L]&&(this.handlers[L]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(L){Le.forEach(this.handlers,function(q){q!==null&&L(q)})}}const hK={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},kY=typeof URLSearchParams<"u"?URLSearchParams:yG,OY=typeof FormData<"u"?FormData:null,AY=typeof Blob<"u"?Blob:null,RY={isBrowser:!0,classes:{URLSearchParams:kY,FormData:OY,Blob:AY},protocols:["http","https","file","blob","url","data"]},CG=typeof window<"u"&&typeof document<"u",fG=typeof navigator=="object"&&navigator||void 0,DY=CG&&(!fG||["ReactNative","NativeScript","NS"].indexOf(fG.product)<0),MY=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",PY=CG&&window.location.href||"http://localhost",NY=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:CG,hasStandardBrowserEnv:DY,hasStandardBrowserWebWorkerEnv:MY,navigator:fG,origin:PY},Symbol.toStringTag,{value:"Module"})),Ml={...NY,...RY};function BY(B,L){return H6(B,new Ml.classes.URLSearchParams,Object.assign({visitor:function(j,q,ne,de){return Ml.isNode&&Le.isBuffer(j)?(this.append(q,j.toString("base64")),!1):de.defaultVisitor.apply(this,arguments)}},L))}function $Y(B){return Le.matchAll(/\w+|\[(\w*)]/g,B).map(L=>L[0]==="[]"?"":L[1]||L[0])}function FY(B){const L={},j=Object.keys(B);let q;const ne=j.length;let de;for(q=0;q<ne;q++)de=j[q],L[de]=B[de];return L}function pK(B){function L(j,q,ne,de){let fe=j[de++];if(fe==="__proto__")return!0;const ke=Number.isFinite(+fe),At=de>=j.length;return fe=!fe&&Le.isArray(ne)?ne.length:fe,At?(Le.hasOwnProp(ne,fe)?ne[fe]=[ne[fe],q]:ne[fe]=q,!ke):((!ne[fe]||!Le.isObject(ne[fe]))&&(ne[fe]=[]),L(j,q,ne[fe],de)&&Le.isArray(ne[fe])&&(ne[fe]=FY(ne[fe])),!ke)}if(Le.isFormData(B)&&Le.isFunction(B.entries)){const j={};return Le.forEachEntry(B,(q,ne)=>{L($Y(q),ne,j,0)}),j}return null}function IY(B,L,j){if(Le.isString(B))try{return(L||JSON.parse)(B),Le.trim(B)}catch(q){if(q.name!=="SyntaxError")throw q}return(0,JSON.stringify)(B)}const LD={transitional:hK,adapter:["xhr","http","fetch"],transformRequest:[function(L,j){const q=j.getContentType()||"",ne=q.indexOf("application/json")>-1,de=Le.isObject(L);if(de&&Le.isHTMLForm(L)&&(L=new FormData(L)),Le.isFormData(L))return ne?JSON.stringify(pK(L)):L;if(Le.isArrayBuffer(L)||Le.isBuffer(L)||Le.isStream(L)||Le.isFile(L)||Le.isBlob(L)||Le.isReadableStream(L))return L;if(Le.isArrayBufferView(L))return L.buffer;if(Le.isURLSearchParams(L))return j.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),L.toString();let ke;if(de){if(q.indexOf("application/x-www-form-urlencoded")>-1)return BY(L,this.formSerializer).toString();if((ke=Le.isFileList(L))||q.indexOf("multipart/form-data")>-1){const At=this.env&&this.env.FormData;return H6(ke?{"files[]":L}:L,At&&new At,this.formSerializer)}}return de||ne?(j.setContentType("application/json",!1),IY(L)):L}],transformResponse:[function(L){const j=this.transitional||LD.transitional,q=j&&j.forcedJSONParsing,ne=this.responseType==="json";if(Le.isResponse(L)||Le.isReadableStream(L))return L;if(L&&Le.isString(L)&&(q&&!this.responseType||ne)){const fe=!(j&&j.silentJSONParsing)&&ne;try{return JSON.parse(L)}catch(ke){if(fe)throw ke.name==="SyntaxError"?Gn.from(ke,Gn.ERR_BAD_RESPONSE,this,null,this.response):ke}}return L}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ml.classes.FormData,Blob:Ml.classes.Blob},validateStatus:function(L){return L>=200&&L<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Le.forEach(["delete","get","head","post","put","patch"],B=>{LD.headers[B]={}});const LY=Le.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),HY=B=>{const L={};let j,q,ne;return B&&B.split(`
`).forEach(function(fe){ne=fe.indexOf(":"),j=fe.substring(0,ne).trim().toLowerCase(),q=fe.substring(ne+1).trim(),!(!j||L[j]&&LY[j])&&(j==="set-cookie"?L[j]?L[j].push(q):L[j]=[q]:L[j]=L[j]?L[j]+", "+q:q)}),L},Gq=Symbol("internals");function $D(B){return B&&String(B).trim().toLowerCase()}function N6(B){return B===!1||B==null?B:Le.isArray(B)?B.map(N6):String(B)}function VY(B){const L=Object.create(null),j=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let q;for(;q=j.exec(B);)L[q[1]]=q[2];return L}const zY=B=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(B.trim());function iG(B,L,j,q,ne){if(Le.isFunction(q))return q.call(this,L,j);if(ne&&(L=j),!!Le.isString(L)){if(Le.isString(q))return L.indexOf(q)!==-1;if(Le.isRegExp(q))return q.test(L)}}function UY(B){return B.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(L,j,q)=>j.toUpperCase()+q)}function WY(B,L){const j=Le.toCamelCase(" "+L);["get","set","has"].forEach(q=>{Object.defineProperty(B,q+j,{value:function(ne,de,fe){return this[q].call(this,L,ne,de,fe)},configurable:!0})})}class Pl{constructor(L){L&&this.set(L)}set(L,j,q){const ne=this;function de(ke,At,bt){const yt=$D(At);if(!yt)throw new Error("header name must be a non-empty string");const Yt=Le.findKey(ne,yt);(!Yt||ne[Yt]===void 0||bt===!0||bt===void 0&&ne[Yt]!==!1)&&(ne[Yt||At]=N6(ke))}const fe=(ke,At)=>Le.forEach(ke,(bt,yt)=>de(bt,yt,At));if(Le.isPlainObject(L)||L instanceof this.constructor)fe(L,j);else if(Le.isString(L)&&(L=L.trim())&&!zY(L))fe(HY(L),j);else if(Le.isHeaders(L))for(const[ke,At]of L.entries())de(At,ke,q);else L!=null&&de(j,L,q);return this}get(L,j){if(L=$D(L),L){const q=Le.findKey(this,L);if(q){const ne=this[q];if(!j)return ne;if(j===!0)return VY(ne);if(Le.isFunction(j))return j.call(this,ne,q);if(Le.isRegExp(j))return j.exec(ne);throw new TypeError("parser must be boolean|regexp|function")}}}has(L,j){if(L=$D(L),L){const q=Le.findKey(this,L);return!!(q&&this[q]!==void 0&&(!j||iG(this,this[q],q,j)))}return!1}delete(L,j){const q=this;let ne=!1;function de(fe){if(fe=$D(fe),fe){const ke=Le.findKey(q,fe);ke&&(!j||iG(q,q[ke],ke,j))&&(delete q[ke],ne=!0)}}return Le.isArray(L)?L.forEach(de):de(L),ne}clear(L){const j=Object.keys(this);let q=j.length,ne=!1;for(;q--;){const de=j[q];(!L||iG(this,this[de],de,L,!0))&&(delete this[de],ne=!0)}return ne}normalize(L){const j=this,q={};return Le.forEach(this,(ne,de)=>{const fe=Le.findKey(q,de);if(fe){j[fe]=N6(ne),delete j[de];return}const ke=L?UY(de):String(de).trim();ke!==de&&delete j[de],j[ke]=N6(ne),q[ke]=!0}),this}concat(...L){return this.constructor.concat(this,...L)}toJSON(L){const j=Object.create(null);return Le.forEach(this,(q,ne)=>{q!=null&&q!==!1&&(j[ne]=L&&Le.isArray(q)?q.join(", "):q)}),j}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([L,j])=>L+": "+j).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(L){return L instanceof this?L:new this(L)}static concat(L,...j){const q=new this(L);return j.forEach(ne=>q.set(ne)),q}static accessor(L){const q=(this[Gq]=this[Gq]={accessors:{}}).accessors,ne=this.prototype;function de(fe){const ke=$D(fe);q[ke]||(WY(ne,fe),q[ke]=!0)}return Le.isArray(L)?L.forEach(de):de(L),this}}Pl.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Le.reduceDescriptors(Pl.prototype,({value:B},L)=>{let j=L[0].toUpperCase()+L.slice(1);return{get:()=>B,set(q){this[j]=q}}});Le.freezeMethods(Pl);function lG(B,L){const j=this||LD,q=L||j,ne=Pl.from(q.headers);let de=q.data;return Le.forEach(B,function(ke){de=ke.call(j,de,ne.normalize(),L?L.status:void 0)}),ne.normalize(),de}function bK(B){return!!(B&&B.__CANCEL__)}function P_(B,L,j){Gn.call(this,B??"canceled",Gn.ERR_CANCELED,L,j),this.name="CanceledError"}Le.inherits(P_,Gn,{__CANCEL__:!0});function vK(B,L,j){const q=j.config.validateStatus;!j.status||!q||q(j.status)?B(j):L(new Gn("Request failed with status code "+j.status,[Gn.ERR_BAD_REQUEST,Gn.ERR_BAD_RESPONSE][Math.floor(j.status/100)-4],j.config,j.request,j))}function ZY(B){const L=/^([-+\w]{1,25})(:?\/\/|:)/.exec(B);return L&&L[1]||""}function jY(B,L){B=B||10;const j=new Array(B),q=new Array(B);let ne=0,de=0,fe;return L=L!==void 0?L:1e3,function(At){const bt=Date.now(),yt=q[de];fe||(fe=bt),j[ne]=At,q[ne]=bt;let Yt=de,Co=0;for(;Yt!==ne;)Co+=j[Yt++],Yt=Yt%B;if(ne=(ne+1)%B,ne===de&&(de=(de+1)%B),bt-fe<L)return;const Xn=yt&&bt-yt;return Xn?Math.round(Co*1e3/Xn):void 0}}function GY(B,L){let j=0,q=1e3/L,ne,de;const fe=(bt,yt=Date.now())=>{j=yt,ne=null,de&&(clearTimeout(de),de=null),B.apply(null,bt)};return[(...bt)=>{const yt=Date.now(),Yt=yt-j;Yt>=q?fe(bt,yt):(ne=bt,de||(de=setTimeout(()=>{de=null,fe(ne)},q-Yt)))},()=>ne&&fe(ne)]}const B6=(B,L,j=3)=>{let q=0;const ne=jY(50,250);return GY(de=>{const fe=de.loaded,ke=de.lengthComputable?de.total:void 0,At=fe-q,bt=ne(At),yt=fe<=ke;q=fe;const Yt={loaded:fe,total:ke,progress:ke?fe/ke:void 0,bytes:At,rate:bt||void 0,estimated:bt&&ke&&yt?(ke-fe)/bt:void 0,event:de,lengthComputable:ke!=null,[L?"download":"upload"]:!0};B(Yt)},j)},qq=(B,L)=>{const j=B!=null;return[q=>L[0]({lengthComputable:j,total:B,loaded:q}),L[1]]},Kq=B=>(...L)=>Le.asap(()=>B(...L)),qY=Ml.hasStandardBrowserEnv?function(){const L=Ml.navigator&&/(msie|trident)/i.test(Ml.navigator.userAgent),j=document.createElement("a");let q;function ne(de){let fe=de;return L&&(j.setAttribute("href",fe),fe=j.href),j.setAttribute("href",fe),{href:j.href,protocol:j.protocol?j.protocol.replace(/:$/,""):"",host:j.host,search:j.search?j.search.replace(/^\?/,""):"",hash:j.hash?j.hash.replace(/^#/,""):"",hostname:j.hostname,port:j.port,pathname:j.pathname.charAt(0)==="/"?j.pathname:"/"+j.pathname}}return q=ne(window.location.href),function(fe){const ke=Le.isString(fe)?ne(fe):fe;return ke.protocol===q.protocol&&ke.host===q.host}}():function(){return function(){return!0}}(),KY=Ml.hasStandardBrowserEnv?{write(B,L,j,q,ne,de){const fe=[B+"="+encodeURIComponent(L)];Le.isNumber(j)&&fe.push("expires="+new Date(j).toGMTString()),Le.isString(q)&&fe.push("path="+q),Le.isString(ne)&&fe.push("domain="+ne),de===!0&&fe.push("secure"),document.cookie=fe.join("; ")},read(B){const L=document.cookie.match(new RegExp("(^|;\\s*)("+B+")=([^;]*)"));return L?decodeURIComponent(L[3]):null},remove(B){this.write(B,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function YY(B){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(B)}function XY(B,L){return L?B.replace(/\/?\/$/,"")+"/"+L.replace(/^\/+/,""):B}function yK(B,L){return B&&!YY(L)?XY(B,L):L}const Yq=B=>B instanceof Pl?{...B}:B;function ZC(B,L){L=L||{};const j={};function q(bt,yt,Yt){return Le.isPlainObject(bt)&&Le.isPlainObject(yt)?Le.merge.call({caseless:Yt},bt,yt):Le.isPlainObject(yt)?Le.merge({},yt):Le.isArray(yt)?yt.slice():yt}function ne(bt,yt,Yt){if(Le.isUndefined(yt)){if(!Le.isUndefined(bt))return q(void 0,bt,Yt)}else return q(bt,yt,Yt)}function de(bt,yt){if(!Le.isUndefined(yt))return q(void 0,yt)}function fe(bt,yt){if(Le.isUndefined(yt)){if(!Le.isUndefined(bt))return q(void 0,bt)}else return q(void 0,yt)}function ke(bt,yt,Yt){if(Yt in L)return q(bt,yt);if(Yt in B)return q(void 0,bt)}const At={url:de,method:de,data:de,baseURL:fe,transformRequest:fe,transformResponse:fe,paramsSerializer:fe,timeout:fe,timeoutMessage:fe,withCredentials:fe,withXSRFToken:fe,adapter:fe,responseType:fe,xsrfCookieName:fe,xsrfHeaderName:fe,onUploadProgress:fe,onDownloadProgress:fe,decompress:fe,maxContentLength:fe,maxBodyLength:fe,beforeRedirect:fe,transport:fe,httpAgent:fe,httpsAgent:fe,cancelToken:fe,socketPath:fe,responseEncoding:fe,validateStatus:ke,headers:(bt,yt)=>ne(Yq(bt),Yq(yt),!0)};return Le.forEach(Object.keys(Object.assign({},B,L)),function(yt){const Yt=At[yt]||ne,Co=Yt(B[yt],L[yt],yt);Le.isUndefined(Co)&&Yt!==ke||(j[yt]=Co)}),j}const CK=B=>{const L=ZC({},B);let{data:j,withXSRFToken:q,xsrfHeaderName:ne,xsrfCookieName:de,headers:fe,auth:ke}=L;L.headers=fe=Pl.from(fe),L.url=gK(yK(L.baseURL,L.url),B.params,B.paramsSerializer),ke&&fe.set("Authorization","Basic "+btoa((ke.username||"")+":"+(ke.password?unescape(encodeURIComponent(ke.password)):"")));let At;if(Le.isFormData(j)){if(Ml.hasStandardBrowserEnv||Ml.hasStandardBrowserWebWorkerEnv)fe.setContentType(void 0);else if((At=fe.getContentType())!==!1){const[bt,...yt]=At?At.split(";").map(Yt=>Yt.trim()).filter(Boolean):[];fe.setContentType([bt||"multipart/form-data",...yt].join("; "))}}if(Ml.hasStandardBrowserEnv&&(q&&Le.isFunction(q)&&(q=q(L)),q||q!==!1&&qY(L.url))){const bt=ne&&de&&KY.read(de);bt&&fe.set(ne,bt)}return L},JY=typeof XMLHttpRequest<"u",QY=JY&&function(B){return new Promise(function(j,q){const ne=CK(B);let de=ne.data;const fe=Pl.from(ne.headers).normalize();let{responseType:ke,onUploadProgress:At,onDownloadProgress:bt}=ne,yt,Yt,Co,Xn,Xt;function jt(){Xn&&Xn(),Xt&&Xt(),ne.cancelToken&&ne.cancelToken.unsubscribe(yt),ne.signal&&ne.signal.removeEventListener("abort",yt)}let He=new XMLHttpRequest;He.open(ne.method.toUpperCase(),ne.url,!0),He.timeout=ne.timeout;function uo(){if(!He)return;const J=Pl.from("getAllResponseHeaders"in He&&He.getAllResponseHeaders()),Ks={data:!ke||ke==="text"||ke==="json"?He.responseText:He.response,status:He.status,statusText:He.statusText,headers:J,config:B,request:He};vK(function(te){j(te),jt()},function(te){q(te),jt()},Ks),He=null}"onloadend"in He?He.onloadend=uo:He.onreadystatechange=function(){!He||He.readyState!==4||He.status===0&&!(He.responseURL&&He.responseURL.indexOf("file:")===0)||setTimeout(uo)},He.onabort=function(){He&&(q(new Gn("Request aborted",Gn.ECONNABORTED,B,He)),He=null)},He.onerror=function(){q(new Gn("Network Error",Gn.ERR_NETWORK,B,He)),He=null},He.ontimeout=function(){let hn=ne.timeout?"timeout of "+ne.timeout+"ms exceeded":"timeout exceeded";const Ks=ne.transitional||hK;ne.timeoutErrorMessage&&(hn=ne.timeoutErrorMessage),q(new Gn(hn,Ks.clarifyTimeoutError?Gn.ETIMEDOUT:Gn.ECONNABORTED,B,He)),He=null},de===void 0&&fe.setContentType(null),"setRequestHeader"in He&&Le.forEach(fe.toJSON(),function(hn,Ks){He.setRequestHeader(Ks,hn)}),Le.isUndefined(ne.withCredentials)||(He.withCredentials=!!ne.withCredentials),ke&&ke!=="json"&&(He.responseType=ne.responseType),bt&&([Co,Xt]=B6(bt,!0),He.addEventListener("progress",Co)),At&&He.upload&&([Yt,Xn]=B6(At),He.upload.addEventListener("progress",Yt),He.upload.addEventListener("loadend",Xn)),(ne.cancelToken||ne.signal)&&(yt=J=>{He&&(q(!J||J.type?new P_(null,B,He):J),He.abort(),He=null)},ne.cancelToken&&ne.cancelToken.subscribe(yt),ne.signal&&(ne.signal.aborted?yt():ne.signal.addEventListener("abort",yt)));const Bo=ZY(ne.url);if(Bo&&Ml.protocols.indexOf(Bo)===-1){q(new Gn("Unsupported protocol "+Bo+":",Gn.ERR_BAD_REQUEST,B));return}He.send(de||null)})},eX=(B,L)=>{const{length:j}=B=B?B.filter(Boolean):[];if(L||j){let q=new AbortController,ne;const de=function(bt){if(!ne){ne=!0,ke();const yt=bt instanceof Error?bt:this.reason;q.abort(yt instanceof Gn?yt:new P_(yt instanceof Error?yt.message:yt))}};let fe=L&&setTimeout(()=>{fe=null,de(new Gn(`timeout ${L} of ms exceeded`,Gn.ETIMEDOUT))},L);const ke=()=>{B&&(fe&&clearTimeout(fe),fe=null,B.forEach(bt=>{bt.unsubscribe?bt.unsubscribe(de):bt.removeEventListener("abort",de)}),B=null)};B.forEach(bt=>bt.addEventListener("abort",de));const{signal:At}=q;return At.unsubscribe=()=>Le.asap(ke),At}},tX=function*(B,L){let j=B.byteLength;if(j<L){yield B;return}let q=0,ne;for(;q<j;)ne=q+L,yield B.slice(q,ne),q=ne},nX=async function*(B,L){for await(const j of oX(B))yield*tX(j,L)},oX=async function*(B){if(B[Symbol.asyncIterator]){yield*B;return}const L=B.getReader();try{for(;;){const{done:j,value:q}=await L.read();if(j)break;yield q}}finally{await L.cancel()}},Xq=(B,L,j,q)=>{const ne=nX(B,L);let de=0,fe,ke=At=>{fe||(fe=!0,q&&q(At))};return new ReadableStream({async pull(At){try{const{done:bt,value:yt}=await ne.next();if(bt){ke(),At.close();return}let Yt=yt.byteLength;if(j){let Co=de+=Yt;j(Co)}At.enqueue(new Uint8Array(yt))}catch(bt){throw ke(bt),bt}},cancel(At){return ke(At),ne.return()}},{highWaterMark:2})},V6=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",wK=V6&&typeof ReadableStream=="function",sX=V6&&(typeof TextEncoder=="function"?(B=>L=>B.encode(L))(new TextEncoder):async B=>new Uint8Array(await new Response(B).arrayBuffer())),SK=(B,...L)=>{try{return!!B(...L)}catch{return!1}},rX=wK&&SK(()=>{let B=!1;const L=new Request(Ml.origin,{body:new ReadableStream,method:"POST",get duplex(){return B=!0,"half"}}).headers.has("Content-Type");return B&&!L}),Jq=64*1024,gG=wK&&SK(()=>Le.isReadableStream(new Response("").body)),$6={stream:gG&&(B=>B.body)};V6&&(B=>{["text","arrayBuffer","blob","formData","stream"].forEach(L=>{!$6[L]&&($6[L]=Le.isFunction(B[L])?j=>j[L]():(j,q)=>{throw new Gn(`Response type '${L}' is not supported`,Gn.ERR_NOT_SUPPORT,q)})})})(new Response);const cX=async B=>{if(B==null)return 0;if(Le.isBlob(B))return B.size;if(Le.isSpecCompliantForm(B))return(await new Request(Ml.origin,{method:"POST",body:B}).arrayBuffer()).byteLength;if(Le.isArrayBufferView(B)||Le.isArrayBuffer(B))return B.byteLength;if(Le.isURLSearchParams(B)&&(B=B+""),Le.isString(B))return(await sX(B)).byteLength},aX=async(B,L)=>{const j=Le.toFiniteNumber(B.getContentLength());return j??cX(L)},iX=V6&&(async B=>{let{url:L,method:j,data:q,signal:ne,cancelToken:de,timeout:fe,onDownloadProgress:ke,onUploadProgress:At,responseType:bt,headers:yt,withCredentials:Yt="same-origin",fetchOptions:Co}=CK(B);bt=bt?(bt+"").toLowerCase():"text";let Xn=eX([ne,de&&de.toAbortSignal()],fe),Xt;const jt=Xn&&Xn.unsubscribe&&(()=>{Xn.unsubscribe()});let He;try{if(At&&rX&&j!=="get"&&j!=="head"&&(He=await aX(yt,q))!==0){let Ks=new Request(L,{method:"POST",body:q,duplex:"half"}),yn;if(Le.isFormData(q)&&(yn=Ks.headers.get("content-type"))&&yt.setContentType(yn),Ks.body){const[te,an]=qq(He,B6(Kq(At)));q=Xq(Ks.body,Jq,te,an)}}Le.isString(Yt)||(Yt=Yt?"include":"omit");const uo="credentials"in Request.prototype;Xt=new Request(L,{...Co,signal:Xn,method:j.toUpperCase(),headers:yt.normalize().toJSON(),body:q,duplex:"half",credentials:uo?Yt:void 0});let Bo=await fetch(Xt);const J=gG&&(bt==="stream"||bt==="response");if(gG&&(ke||J&&jt)){const Ks={};["status","statusText","headers"].forEach(ss=>{Ks[ss]=Bo[ss]});const yn=Le.toFiniteNumber(Bo.headers.get("content-length")),[te,an]=ke&&qq(yn,B6(Kq(ke),!0))||[];Bo=new Response(Xq(Bo.body,Jq,te,()=>{an&&an(),jt&&jt()}),Ks)}bt=bt||"text";let hn=await $6[Le.findKey($6,bt)||"text"](Bo,B);return!J&&jt&&jt(),await new Promise((Ks,yn)=>{vK(Ks,yn,{data:hn,headers:Pl.from(Bo.headers),status:Bo.status,statusText:Bo.statusText,config:B,request:Xt})})}catch(uo){throw jt&&jt(),uo&&uo.name==="TypeError"&&/fetch/i.test(uo.message)?Object.assign(new Gn("Network Error",Gn.ERR_NETWORK,B,Xt),{cause:uo.cause||uo}):Gn.from(uo,uo&&uo.code,B,Xt)}}),hG={http:xY,xhr:QY,fetch:iX};Le.forEach(hG,(B,L)=>{if(B){try{Object.defineProperty(B,"name",{value:L})}catch{}Object.defineProperty(B,"adapterName",{value:L})}});const Qq=B=>`- ${B}`,lX=B=>Le.isFunction(B)||B===null||B===!1,xK={getAdapter:B=>{B=Le.isArray(B)?B:[B];const{length:L}=B;let j,q;const ne={};for(let de=0;de<L;de++){j=B[de];let fe;if(q=j,!lX(j)&&(q=hG[(fe=String(j)).toLowerCase()],q===void 0))throw new Gn(`Unknown adapter '${fe}'`);if(q)break;ne[fe||"#"+de]=q}if(!q){const de=Object.entries(ne).map(([ke,At])=>`adapter ${ke} `+(At===!1?"is not supported by the environment":"is not available in the build"));let fe=L?de.length>1?`since :
`+de.map(Qq).join(`
`):" "+Qq(de[0]):"as no adapter specified";throw new Gn("There is no suitable adapter to dispatch the request "+fe,"ERR_NOT_SUPPORT")}return q},adapters:hG};function uG(B){if(B.cancelToken&&B.cancelToken.throwIfRequested(),B.signal&&B.signal.aborted)throw new P_(null,B)}function eK(B){return uG(B),B.headers=Pl.from(B.headers),B.data=lG.call(B,B.transformRequest),["post","put","patch"].indexOf(B.method)!==-1&&B.headers.setContentType("application/x-www-form-urlencoded",!1),xK.getAdapter(B.adapter||LD.adapter)(B).then(function(q){return uG(B),q.data=lG.call(B,B.transformResponse,q),q.headers=Pl.from(q.headers),q},function(q){return bK(q)||(uG(B),q&&q.response&&(q.response.data=lG.call(B,B.transformResponse,q.response),q.response.headers=Pl.from(q.response.headers))),Promise.reject(q)})}const EK="1.7.7",wG={};["object","boolean","number","function","string","symbol"].forEach((B,L)=>{wG[B]=function(q){return typeof q===B||"a"+(L<1?"n ":" ")+B}});const tK={};wG.transitional=function(L,j,q){function ne(de,fe){return"[Axios v"+EK+"] Transitional option '"+de+"'"+fe+(q?". "+q:"")}return(de,fe,ke)=>{if(L===!1)throw new Gn(ne(fe," has been removed"+(j?" in "+j:"")),Gn.ERR_DEPRECATED);return j&&!tK[fe]&&(tK[fe]=!0,console.warn(ne(fe," has been deprecated since v"+j+" and will be removed in the near future"))),L?L(de,fe,ke):!0}};function uX(B,L,j){if(typeof B!="object")throw new Gn("options must be an object",Gn.ERR_BAD_OPTION_VALUE);const q=Object.keys(B);let ne=q.length;for(;ne-- >0;){const de=q[ne],fe=L[de];if(fe){const ke=B[de],At=ke===void 0||fe(ke,de,B);if(At!==!0)throw new Gn("option "+de+" must be "+At,Gn.ERR_BAD_OPTION_VALUE);continue}if(j!==!0)throw new Gn("Unknown option "+de,Gn.ERR_BAD_OPTION)}}const pG={assertOptions:uX,validators:wG},Y0=pG.validators;class WC{constructor(L){this.defaults=L,this.interceptors={request:new jq,response:new jq}}async request(L,j){try{return await this._request(L,j)}catch(q){if(q instanceof Error){let ne;Error.captureStackTrace?Error.captureStackTrace(ne={}):ne=new Error;const de=ne.stack?ne.stack.replace(/^.+\n/,""):"";try{q.stack?de&&!String(q.stack).endsWith(de.replace(/^.+\n.+\n/,""))&&(q.stack+=`
`+de):q.stack=de}catch{}}throw q}}_request(L,j){typeof L=="string"?(j=j||{},j.url=L):j=L||{},j=ZC(this.defaults,j);const{transitional:q,paramsSerializer:ne,headers:de}=j;q!==void 0&&pG.assertOptions(q,{silentJSONParsing:Y0.transitional(Y0.boolean),forcedJSONParsing:Y0.transitional(Y0.boolean),clarifyTimeoutError:Y0.transitional(Y0.boolean)},!1),ne!=null&&(Le.isFunction(ne)?j.paramsSerializer={serialize:ne}:pG.assertOptions(ne,{encode:Y0.function,serialize:Y0.function},!0)),j.method=(j.method||this.defaults.method||"get").toLowerCase();let fe=de&&Le.merge(de.common,de[j.method]);de&&Le.forEach(["delete","get","head","post","put","patch","common"],Xt=>{delete de[Xt]}),j.headers=Pl.concat(fe,de);const ke=[];let At=!0;this.interceptors.request.forEach(function(jt){typeof jt.runWhen=="function"&&jt.runWhen(j)===!1||(At=At&&jt.synchronous,ke.unshift(jt.fulfilled,jt.rejected))});const bt=[];this.interceptors.response.forEach(function(jt){bt.push(jt.fulfilled,jt.rejected)});let yt,Yt=0,Co;if(!At){const Xt=[eK.bind(this),void 0];for(Xt.unshift.apply(Xt,ke),Xt.push.apply(Xt,bt),Co=Xt.length,yt=Promise.resolve(j);Yt<Co;)yt=yt.then(Xt[Yt++],Xt[Yt++]);return yt}Co=ke.length;let Xn=j;for(Yt=0;Yt<Co;){const Xt=ke[Yt++],jt=ke[Yt++];try{Xn=Xt(Xn)}catch(He){jt.call(this,He);break}}try{yt=eK.call(this,Xn)}catch(Xt){return Promise.reject(Xt)}for(Yt=0,Co=bt.length;Yt<Co;)yt=yt.then(bt[Yt++],bt[Yt++]);return yt}getUri(L){L=ZC(this.defaults,L);const j=yK(L.baseURL,L.url);return gK(j,L.params,L.paramsSerializer)}}Le.forEach(["delete","get","head","options"],function(L){WC.prototype[L]=function(j,q){return this.request(ZC(q||{},{method:L,url:j,data:(q||{}).data}))}});Le.forEach(["post","put","patch"],function(L){function j(q){return function(de,fe,ke){return this.request(ZC(ke||{},{method:L,headers:q?{"Content-Type":"multipart/form-data"}:{},url:de,data:fe}))}}WC.prototype[L]=j(),WC.prototype[L+"Form"]=j(!0)});class SG{constructor(L){if(typeof L!="function")throw new TypeError("executor must be a function.");let j;this.promise=new Promise(function(de){j=de});const q=this;this.promise.then(ne=>{if(!q._listeners)return;let de=q._listeners.length;for(;de-- >0;)q._listeners[de](ne);q._listeners=null}),this.promise.then=ne=>{let de;const fe=new Promise(ke=>{q.subscribe(ke),de=ke}).then(ne);return fe.cancel=function(){q.unsubscribe(de)},fe},L(function(de,fe,ke){q.reason||(q.reason=new P_(de,fe,ke),j(q.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(L){if(this.reason){L(this.reason);return}this._listeners?this._listeners.push(L):this._listeners=[L]}unsubscribe(L){if(!this._listeners)return;const j=this._listeners.indexOf(L);j!==-1&&this._listeners.splice(j,1)}toAbortSignal(){const L=new AbortController,j=q=>{L.abort(q)};return this.subscribe(j),L.signal.unsubscribe=()=>this.unsubscribe(j),L.signal}static source(){let L;return{token:new SG(function(ne){L=ne}),cancel:L}}}function dX(B){return function(j){return B.apply(null,j)}}function mX(B){return Le.isObject(B)&&B.isAxiosError===!0}const bG={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(bG).forEach(([B,L])=>{bG[L]=B});function TK(B){const L=new WC(B),j=nK(WC.prototype.request,L);return Le.extend(j,WC.prototype,L,{allOwnKeys:!0}),Le.extend(j,L,null,{allOwnKeys:!0}),j.create=function(ne){return TK(ZC(B,ne))},j}const ic=TK(LD);ic.Axios=WC;ic.CanceledError=P_;ic.CancelToken=SG;ic.isCancel=bK;ic.VERSION=EK;ic.toFormData=H6;ic.AxiosError=Gn;ic.Cancel=ic.CanceledError;ic.all=function(L){return Promise.all(L)};ic.spread=dX;ic.isAxiosError=mX;ic.mergeConfig=ZC;ic.AxiosHeaders=Pl;ic.formToJSON=B=>pK(Le.isHTMLForm(B)?new FormData(B):B);ic.getAdapter=xK.getAdapter;ic.HttpStatusCode=bG;ic.default=ic;window.axios=ic;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var fX={exports:{}};(function(B){(function(){var L=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},j=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},q=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},ne=function(e,n){return de(function(o,r){return e.eq(n(o),n(r))})},de=function(e){return{eq:e}},fe=de(function(e,n){return e===n}),ke=fe,At=function(e){return de(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,a=0;a<r;a++)if(!e.eq(n[a],o[a]))return!1;return!0})},bt=function(e,n){return ne(At(e),function(o){return q(o,n)})},yt=function(e){return de(function(n,o){var r=Object.keys(n),a=Object.keys(o);if(!bt(ke).eq(r,a))return!1;for(var u=r.length,f=0;f<u;f++){var b=r[f];if(!e.eq(n[b],o[b]))return!1}return!0})},Yt=de(function(e,n){if(e===n)return!0;var o=L(e),r=L(n);return o!==r?!1:j(o)?e===n:o==="array"?At(Yt).eq(e,n):o==="object"?yt(Yt).eq(e,n):!1});const Co=Object.getPrototypeOf,Xn=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},Xt=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&Xn(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},jt=e=>n=>Xt(n)===e,He=e=>n=>typeof n===e,uo=e=>n=>e===n,Bo=(e,n)=>hn(e)&&Xn(e,n,(o,r)=>Co(o)===r),J=jt("string"),hn=jt("object"),Ks=e=>Bo(e,Object),yn=jt("array"),te=uo(null),an=He("boolean"),ss=uo(void 0),An=e=>e==null,Oe=e=>!An(e),Q=He("function"),lc=He("number"),Vn=(e,n)=>{if(yn(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},Ot=()=>{},k=(e,n)=>(...o)=>e(n.apply(null,o)),rs=(e,n)=>o=>e(n(o)),Ke=e=>()=>e,Wo=e=>e,Wt=(e,n)=>e===n;function Be(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const $o=e=>n=>!e(n),uc=e=>()=>{throw new Error(e)},cs=e=>e(),Jr=e=>{e()},De=Ke(!1),it=Ke(!0);class N{constructor(n,o){this.tag=n,this.value=o}static some(n){return new N(!0,n)}static none(){return N.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?N.some(n(this.value)):N.none()}bind(n){return this.tag?n(this.value):N.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:N.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return Oe(n)?N.some(n):N.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}N.singletonNone=new N(!1);const ef=Array.prototype.slice,po=Array.prototype.indexOf,Ss=Array.prototype.push,wo=(e,n)=>po.call(e,n),N_=(e,n)=>{const o=wo(e,n);return o===-1?N.none():N.some(o)},zt=(e,n)=>wo(e,n)>-1,mo=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const a=e[o];if(n(a,o))return!0}return!1},Gt=(e,n)=>{const o=e.length,r=new Array(o);for(let a=0;a<o;a++){const u=e[a];r[a]=n(u,a)}return r},Se=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const a=e[o];n(a,o)}},yu=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},Er=(e,n)=>{const o=[],r=[];for(let a=0,u=e.length;a<u;a++){const f=e[a];(n(f,a)?o:r).push(f)}return{pass:o,fail:r}},Rt=(e,n)=>{const o=[];for(let r=0,a=e.length;r<a;r++){const u=e[r];n(u,r)&&o.push(u)}return o},Td=(e,n,o)=>(yu(e,(r,a)=>{o=n(o,r,a)}),o),Zo=(e,n,o)=>(Se(e,(r,a)=>{o=n(o,r,a)}),o),Ug=(e,n,o)=>{for(let r=0,a=e.length;r<a;r++){const u=e[r];if(n(u,r))return N.some(u);if(o(u,r))break}return N.none()},as=(e,n)=>Ug(e,n,De),dc=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const a=e[o];if(n(a,o))return N.some(o)}return N.none()},Qp=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!yn(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);Ss.apply(n,e[o])}return n},oa=(e,n)=>Qp(Gt(e,n)),ir=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const a=e[o];if(n(a,o)!==!0)return!1}return!0},Fo=e=>{const n=ef.call(e,0);return n.reverse(),n},e1=(e,n)=>Rt(e,o=>!zt(n,o)),Ms=(e,n)=>{const o={};for(let r=0,a=e.length;r<a;r++){const u=e[r];o[String(u)]=n(u,r)}return o},Io=(e,n)=>{const o=ef.call(e,0);return o.sort(n),o},tf=(e,n)=>n>=0&&n<e.length?N.some(e[n]):N.none(),Tr=e=>tf(e,0),Nl=e=>tf(e,e.length-1),mc=Q(Array.from)?Array.from:e=>ef.call(e),_d=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return N.none()},Wg=(e,n)=>{const o=[],r=Q(n)?a=>mo(o,u=>n(u,a)):a=>zt(o,a);for(let a=0,u=e.length;a<u;a++){const f=e[a];r(f)||o.push(f)}return o},Ir=Object.keys,X0=Object.hasOwnProperty,rt=(e,n)=>{const o=Ir(e);for(let r=0,a=o.length;r<a;r++){const u=o[r],f=e[u];n(f,u)}},$n=(e,n)=>sa(e,(o,r)=>({k:r,v:n(o,r)})),sa=(e,n)=>{const o={};return rt(e,(r,a)=>{const u=n(r,a);o[u.k]=u.v}),o},Ac=e=>(n,o)=>{e[o]=n},t1=(e,n,o,r)=>{rt(e,(a,u)=>{(n(a,u)?o:r)(a,u)})},kd=(e,n)=>{const o={},r={};return t1(e,n,Ac(o),Ac(r)),{t:o,f:r}},Eo=(e,n)=>{const o={};return t1(e,n,Ac(o),Ot),o},Cu=(e,n)=>{const o=[];return rt(e,(r,a)=>{o.push(n(r,a))}),o},nf=e=>Cu(e,Wo),bo=(e,n)=>$t(e,n)?N.from(e[n]):N.none(),$t=(e,n)=>X0.call(e,n),fc=(e,n)=>$t(e,n)&&e[n]!==void 0&&e[n]!==null,Od=(e,n,o=Yt)=>yt(o).eq(e,n),n1=e=>{const n={};return Se(e,o=>{n[o]={}}),Ir(n)},J0=e=>e.length!==void 0,Qr=Array.isArray,_r=e=>{if(Qr(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},ms=(e,n,o)=>{if(!e)return!1;if(o=o||e,J0(e)){for(let r=0,a=e.length;r<a;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if($t(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},Gi=(e,n)=>{const o=[];return ms(e,(r,a)=>{o.push(n(r,a,e))}),o},o1=(e,n)=>{const o=[];return ms(e,(r,a)=>{(!n||n(r,a,e))&&o.push(r)}),o},Bl=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},Rc=(e,n,o,r)=>{let a=ss(o)?e[0]:o;for(let u=0;u<e.length;u++)a=n.call(r,a,e[u],u);return a},Ao=(e,n,o)=>{for(let r=0,a=e.length;r<a;r++)if(n.call(o,e[r],r,e))return r;return-1},Ra=e=>e[e.length-1],qi=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},B_=(e,n,o,r)=>{const a=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!a,f=e.isiOS()||e.isAndroid(),b=f||r("(pointer:coarse)"),C=a||!u&&f&&r("(min-device-width:768px)"),S=u||f&&!C,O=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,R=!S&&!C&&!O;return{isiPad:Ke(a),isiPhone:Ke(u),isTablet:Ke(C),isPhone:Ke(S),isTouch:Ke(b),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:Ke(O),isDesktop:Ke(R)}},$_=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},$l=(e,n)=>{const o=$_(e,n);if(!o)return{major:0,minor:0};const r=a=>Number(n.replace(o,"$"+a));return gc(r(1),r(2))},z6=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?ae():$l(e,o)},ae=()=>gc(0,0),gc=(e,n)=>({major:e,minor:n}),of={nu:gc,detect:z6,unknown:ae},jC=(e,n)=>_d(n.brands,o=>{const r=o.brand.toLowerCase();return as(e,a=>{var u;return r===((u=a.brand)===null||u===void 0?void 0:u.toLowerCase())}).map(a=>({current:a.name,version:of.nu(parseInt(o.version,10),0)}))}),Q0=(e,n)=>{const o=String(n).toLowerCase();return as(e,r=>r.search(o))},So=(e,n)=>Q0(e,n).map(o=>{const r=of.detect(o.versionRegexes,n);return{current:o.name,version:r}}),ev=(e,n)=>Q0(e,n).map(o=>{const r=of.detect(o.versionRegexes,n);return{current:o.name,version:r}}),F_=(e,n)=>e.substring(n),Zg=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,sf=(e,n)=>fs(e,n)?F_(e,n.length):e,br=(e,n,o=0,r)=>{const a=e.indexOf(n,o);return a!==-1?ss(r)?!0:a+n.length<=r:!1},fs=(e,n)=>Zg(e,n,0),Fl=(e,n)=>Zg(e,n,e.length-n.length),Da=e=>n=>n.replace(e,""),Ad=Da(/^\s+|\s+$/g),jg=Da(/^\s+/g),rf=Da(/\s+$/g),Jn=e=>e.length>0,Dc=e=>!Jn(e),I_=(e,n)=>n<=0?"":new Array(n+1).join(e),Rd=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?N.none():N.some(o)},wu=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ec=e=>n=>br(n,e),jo=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>br(e,"edge/")&&br(e,"chrome")&&br(e,"safari")&&br(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,wu],search:e=>br(e,"chrome")&&!br(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>br(e,"msie")||br(e,"trident")},{name:"Opera",versionRegexes:[wu,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ec("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ec("firefox")},{name:"Safari",versionRegexes:[wu,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(br(e,"safari")||br(e,"mobile/"))&&br(e,"applewebkit")}],L_=[{name:"Windows",search:ec("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>br(e,"iphone")||br(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ec("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ec("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ec("linux"),versionRegexes:[]},{name:"Solaris",search:ec("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ec("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ec("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],tv={browsers:Ke(jo),oses:Ke(L_)},Un="Edge",Mc="Chromium",Pc="IE",vr="Opera",s1="Firefox",Dd="Safari",Ma=()=>Md({current:void 0,version:of.unknown()}),Md=e=>{const n=e.current,o=e.version,r=a=>()=>n===a;return{current:n,version:o,isEdge:r(Un),isChromium:r(Mc),isIE:r(Pc),isOpera:r(vr),isFirefox:r(s1),isSafari:r(Dd)}},di={unknown:Ma,nu:Md,edge:Ke(Un),chromium:Ke(Mc),ie:Ke(Pc),opera:Ke(vr),firefox:Ke(s1),safari:Ke(Dd)},GC="Windows",nv="iOS",qC="Android",Pa="Linux",Su="macOS",r1="Solaris",c1="FreeBSD",ov="ChromeOS",sv=()=>lr({current:void 0,version:of.unknown()}),lr=e=>{const n=e.current,o=e.version,r=a=>()=>n===a;return{current:n,version:o,isWindows:r(GC),isiOS:r(nv),isAndroid:r(qC),isMacOS:r(Su),isLinux:r(Pa),isSolaris:r(r1),isFreeBSD:r(c1),isChromeOS:r(ov)}},Pd={unknown:sv,nu:lr,windows:Ke(GC),ios:Ke(nv),android:Ke(qC),linux:Ke(Pa),macos:Ke(Su),solaris:Ke(r1),freebsd:Ke(c1),chromeos:Ke(ov)},Il={detect:(e,n,o)=>{const r=tv.browsers(),a=tv.oses(),u=n.bind(C=>jC(r,C)).orThunk(()=>So(r,e)).fold(di.unknown,di.nu),f=ev(a,e).fold(Pd.unknown,Pd.nu),b=B_(f,u,e,o);return{browser:u,os:f,deviceType:b}}},KC=e=>window.matchMedia(e).matches;let H_=qi(()=>Il.detect(window.navigator.userAgent,N.from(window.navigator.userAgentData),KC));const Ki=()=>H_(),ra=window.navigator.userAgent,mi=Ki(),Yi=mi.browser,fi=mi.os,Dt=mi.deviceType,YC=ra.indexOf("Windows Phone")!==-1,qt={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Yi.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Yi.isIE(),windowsPhone:YC,browser:{current:Yi.current,version:Yi.version,isChromium:Yi.isChromium,isEdge:Yi.isEdge,isFirefox:Yi.isFirefox,isIE:Yi.isIE,isOpera:Yi.isOpera,isSafari:Yi.isSafari},os:{current:fi.current,version:fi.version,isAndroid:fi.isAndroid,isChromeOS:fi.isChromeOS,isFreeBSD:fi.isFreeBSD,isiOS:fi.isiOS,isLinux:fi.isLinux,isMacOS:fi.isMacOS,isSolaris:fi.isSolaris,isWindows:fi.isWindows},deviceType:{isDesktop:Dt.isDesktop,isiPad:Dt.isiPad,isiPhone:Dt.isiPhone,isPhone:Dt.isPhone,isTablet:Dt.isTablet,isTouch:Dt.isTouch,isWebView:Dt.isWebView}},Lo=/^\s*|\s*$/g,rv=e=>An(e)?"":(""+e).replace(Lo,""),Ro=(e,n)=>n?n==="array"&&Qr(e)?!0:typeof e===n:e!==void 0,V_=(e,n,o={})=>{const r=J(e)?e.split(n||","):e||[];let a=r.length;for(;a--;)o[r[a]]={};return o},cv=$t,av=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const a in r)if($t(r,a)){const u=r[a];u!==void 0&&(e[a]=u)}}return e},Vt=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),ms(e,(a,u)=>n.call(r,a,u,o)===!1?!1:(Vt(a,n,o,r),!0)))},Ve={trim:rv,isArray:Qr,is:Ro,toArray:_r,makeMap:V_,each:ms,map:Gi,grep:o1,inArray:Bl,hasOwn:cv,extend:av,walk:Vt,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,a=o.length;r<a&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>yn(e)?e:e===""?[]:Gi(e.split(n||","),rv),_addCacheSuffix:e=>{const n=qt.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},Go=(e,n,o=Wt)=>e.exists(r=>o(r,n)),iv=(e,n,o=Wt)=>Kt(e,n,o).getOr(e.isNone()&&n.isNone()),XC=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},Kt=(e,n,o)=>e.isSome()&&n.isSome()?N.some(o(e.getOrDie(),n.getOrDie())):N.none(),Nd=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?N.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):N.none(),gi=(e,n)=>e?N.some(n):N.none(),Ys=typeof window<"u"?window:Function("return this;")(),gs=(e,n)=>{let o=n??Ys;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},Xi=(e,n)=>{const o=e.split(".");return gs(o,n)},z_=(e,n)=>Xi(e,n),a1=(e,n)=>{const o=z_(e,n);if(o==null)throw new Error(e+" not available on this browser");return o},Do=Object.getPrototypeOf,JC=e=>a1("HTMLElement",e),i1=e=>{const n=Xi("ownerDocument.defaultView",e);return hn(e)&&(JC(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Do(e).constructor.name))},Ho=8,xu=9,Eu=11,l1=1,tc=3,wn=e=>e.dom.nodeName.toLowerCase(),QC=e=>e.dom.nodeType,nc=e=>n=>QC(n)===e,ew=e=>QC(e)===Ho||wn(e)==="#comment",u1=e=>vo(e)&&i1(e.dom),vo=nc(l1),Xs=nc(tc),Tu=nc(xu),d1=nc(Eu),Ji=e=>n=>vo(n)&&wn(n)===e,hi=(e,n,o)=>{if(J(o)||an(o)||lc(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},ur=(e,n,o)=>{hi(e.dom,n,o)},Lr=(e,n)=>{const o=e.dom;rt(n,(r,a)=>{hi(o,a,r)})},oc=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},ca=(e,n)=>N.from(oc(e,n)),aa=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},Ps=(e,n)=>{e.dom.removeAttribute(n)},Gg=e=>{const n=e.dom.attributes;return n==null||n.length===0},m1=e=>Zo(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),Bd=(e,n)=>{const o=oc(e,n);return o===void 0||o===""?[]:o.split(" ")},f1=(e,n,o)=>{const a=Bd(e,n).concat([o]);return ur(e,n,a.join(" ")),!0},tw=(e,n,o)=>{const r=Rt(Bd(e,n),a=>a!==o);return r.length>0?ur(e,n,r.join(" ")):Ps(e,n),!1},$d=e=>e.dom.classList!==void 0,_u=e=>Bd(e,"class"),qg=(e,n)=>f1(e,"class",n),hc=(e,n)=>tw(e,"class",n),lv=(e,n)=>zt(_u(e),n)?hc(e,n):qg(e,n),ku=(e,n)=>{$d(e)?e.dom.classList.add(n):qg(e,n)},g1=e=>{($d(e)?e.dom.classList:_u(e)).length===0&&Ps(e,"class")},cf=(e,n)=>{$d(e)?e.dom.classList.remove(n):hc(e,n),g1(e)},uv=(e,n)=>{const o=$d(e)?e.dom.classList.toggle(n):lv(e,n);return g1(e),o},h1=(e,n)=>$d(e)&&e.dom.classList.contains(n),af=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const a="HTML does not have a single root node";throw console.error(a,e),new Error(a)}return lf(r.childNodes[0])},nw=(e,n)=>{const r=(n||document).createElement(e);return lf(r)},ow=(e,n)=>{const r=(n||document).createTextNode(e);return lf(r)},lf=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},K={fromHtml:af,fromTag:nw,fromText:ow,fromDom:lf,fromPoint:(e,n,o)=>N.from(e.dom.elementFromPoint(n,o)).map(lf)},Kg=(e,n)=>{const o=[],r=u=>(o.push(u),n(u));let a=n(e);do a=a.bind(r);while(a.isSome());return o},Bc=(e,n)=>{const o=e.dom;if(o.nodeType!==l1)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},sw=e=>e.nodeType!==l1&&e.nodeType!==xu&&e.nodeType!==Eu||e.childElementCount===0,rw=(e,n)=>{const o=n===void 0?document:n.dom;return sw(o)?[]:Gt(o.querySelectorAll(e),K.fromDom)},U_=(e,n)=>{const o=n===void 0?document:n.dom;return sw(o)?N.none():N.from(o.querySelector(e)).map(K.fromDom)},Sn=(e,n)=>e.dom===n.dom,ia=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},pi=e=>K.fromDom(e.dom.ownerDocument),Ou=e=>Tu(e)?e:pi(e),cw=e=>K.fromDom(Ou(e).dom.documentElement),uf=e=>K.fromDom(Ou(e).dom.defaultView),Ba=e=>N.from(e.dom.parentNode).map(K.fromDom),Yg=e=>N.from(e.dom.parentElement).map(K.fromDom),Fd=(e,n)=>{const o=Q(n)?n:De;let r=e.dom;const a=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,f=K.fromDom(u);if(a.push(f),o(f)===!0)break;r=u}return a},aw=e=>{const n=o=>Rt(o,r=>!Sn(e,r));return Ba(e).map(Js).map(n).getOr([])},Hl=e=>N.from(e.dom.previousSibling).map(K.fromDom),Hr=e=>N.from(e.dom.nextSibling).map(K.fromDom),iw=e=>Fo(Kg(e,Hl)),p1=e=>Kg(e,Hr),Js=e=>Gt(e.dom.childNodes,K.fromDom),pc=(e,n)=>{const o=e.dom.childNodes;return N.from(o[n]).map(K.fromDom)},Vr=e=>pc(e,0),df=e=>pc(e,e.dom.childNodes.length-1),b1=e=>e.dom.childNodes.length,dv=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return K.fromDom(n)},mf=e=>d1(e)&&Oe(e.dom.host),bi=e=>K.fromDom(e.dom.getRootNode()),Xg=e=>mf(e)?e:dv(Ou(e)),W_=e=>mf(e)?e:K.fromDom(Ou(e).dom.body),Z_=e=>{const n=bi(e);return mf(n)?N.some(n):N.none()},j_=e=>K.fromDom(e.dom.host),G_=e=>{if(Oe(e.target)){const n=K.fromDom(e.target);if(vo(n)&&mv(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return Tr(o)}}return N.from(e.target)},mv=e=>Oe(e.dom.shadowRoot),ff=e=>{const n=Xs(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return Z_(K.fromDom(n)).fold(()=>o.body.contains(n),rs(ff,j_))};var lw=(e,n,o,r,a)=>e(o,r)?N.some(o):Q(a)&&a(o)?N.none():n(o,r,a);const To=(e,n,o)=>{let r=e.dom;const a=Q(o)?o:De;for(;r.parentNode;){r=r.parentNode;const u=K.fromDom(r);if(n(u))return N.some(u);if(a(u))break}return N.none()},Vo=(e,n,o)=>lw((a,u)=>u(a),To,e,n,o),Id=(e,n)=>{const o=e.dom;return o.parentNode?Au(K.fromDom(o.parentNode),r=>!Sn(e,r)&&n(r)):N.none()},Au=(e,n)=>{const o=a=>n(K.fromDom(a));return as(e.dom.childNodes,o).map(K.fromDom)},fv=(e,n)=>{const o=r=>{for(let a=0;a<r.childNodes.length;a++){const u=K.fromDom(r.childNodes[a]);if(n(u))return N.some(u);const f=o(r.childNodes[a]);if(f.isSome())return f}return N.none()};return o(e.dom)},Ns=(e,n,o)=>To(e,r=>Bc(r,n),o),St=(e,n)=>U_(n,e),Ru=(e,n,o)=>lw((a,u)=>Bc(a,u),Ns,e,n,o),q_=e=>Ru(e,"[contenteditable]"),la=(e,n=!1)=>ff(e)?e.dom.isContentEditable:q_(e).fold(Ke(n),o=>Mn(o)==="true"),Mn=e=>e.dom.contentEditable,Ld=e=>e.style!==void 0&&Q(e.style.getPropertyValue),Jg=(e,n,o)=>{if(!J(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);Ld(e)&&e.style.setProperty(n,o)},uw=(e,n)=>{Ld(e)&&e.style.removeProperty(n)},gv=(e,n,o)=>{const r=e.dom;Jg(r,n,o)},tn=(e,n)=>{const o=e.dom;rt(n,(r,a)=>{Jg(o,a,r)})},es=(e,n)=>{const o=e.dom,a=window.getComputedStyle(o).getPropertyValue(n);return a===""&&!ff(e)?Qg(o,n):a},Qg=(e,n)=>Ld(e)?e.style.getPropertyValue(n):"",v1=(e,n)=>{const o=e.dom,r=Qg(o,n);return N.from(r).filter(a=>a.length>0)},$c=e=>{const n={},o=e.dom;if(Ld(o))for(let r=0;r<o.style.length;r++){const a=o.style.item(r);n[a]=o.style[a]}return n},bc=(e,n)=>{const o=e.dom;uw(o,n),Go(ca(e,"style").map(Ad),"")&&Ps(e,"style")},$a=e=>e.dom.offsetWidth,co=(e,n)=>{Ba(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},vi=(e,n)=>{Hr(e).fold(()=>{Ba(e).each(a=>{Bs(a,n)})},r=>{co(r,n)})},Hd=(e,n)=>{Vr(e).fold(()=>{Bs(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},Bs=(e,n)=>{e.dom.appendChild(n.dom)},Vd=(e,n)=>{co(e,n),Bs(n,e)},qo=(e,n)=>{Se(n,(o,r)=>{const a=r===0?e:n[r-1];vi(a,o)})},Du=(e,n)=>{Se(n,o=>{Bs(e,o)})},gf=e=>{e.dom.textContent="",Se(Js(e),n=>{ao(n)})},ao=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},Mu=e=>{const n=Js(e);n.length>0&&qo(e,n),ao(e)},dw=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,Js(K.fromDom(r))},hv=e=>Gt(e,K.fromDom),zo=e=>e.dom.innerHTML,y1=(e,n)=>{const r=pi(e).dom,a=K.fromDom(r.createDocumentFragment()),u=dw(n,r);Du(a,u),gf(e),Bs(e,a)},Qi=e=>{const n=K.fromTag("div"),o=K.fromDom(e.dom.cloneNode(!0));return Bs(n,o),zo(n)},pv=(e,n,o,r,a,u,f)=>({target:e,x:n,y:o,stop:r,prevent:a,kill:u,raw:f}),pn=e=>{const n=K.fromDom(G_(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),a=k(r,o);return pv(n,e.clientX,e.clientY,o,r,a,e)},eh=(e,n)=>o=>{e(o)&&n(pn(o))},C1=(e,n,o,r,a)=>{const u=eh(o,r);return e.dom.addEventListener(n,u,a),{unbind:Be(K_,e,n,u,a)}},mw=(e,n,o,r)=>C1(e,n,o,r,!1),K_=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},w1=(e,n)=>({left:e,top:n,translate:(r,a)=>w1(e+r,n+a)}),th=w1,Y_=e=>{const n=e.getBoundingClientRect();return th(n.left,n.top)},Vl=(e,n)=>e!==void 0?e:n!==void 0?n:0,S1=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,a=n.documentElement;if(o===e.dom)return th(o.offsetLeft,o.offsetTop);const u=Vl(r==null?void 0:r.pageYOffset,a.scrollTop),f=Vl(r==null?void 0:r.pageXOffset,a.scrollLeft),b=Vl(a.clientTop,o.clientTop),C=Vl(a.clientLeft,o.clientLeft);return bv(e).translate(f-C,u-b)},bv=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?th(r.offsetLeft,r.offsetTop):ff(e)?Y_(n):th(0,0)},Pu=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return th(o,r)},el=(e,n,o)=>{const a=(o!==void 0?o.dom:document).defaultView;a&&a.scrollTo(e,n)},fw=(e,n)=>{Ki().browser.isSafari()&&Q(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},x1=e=>{const n=e===void 0?window:e;return Ki().browser.isFirefox()?N.none():N.from(n.visualViewport)},hf=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),gw=e=>{const n=e===void 0?window:e,o=n.document,r=Pu(K.fromDom(o));return x1(n).fold(()=>{const a=n.document.documentElement,u=a.clientWidth,f=a.clientHeight;return hf(r.left,r.top,u,f)},a=>hf(Math.max(a.pageLeft,r.left),Math.max(a.pageTop,r.top),a.width,a.height))},zd=(e,n)=>Rt(Js(e),n),E1=(e,n)=>{let o=[];return Se(Js(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(E1(r,n))}),o},zr=(e,n)=>rw(n,e),T1=(e,n,o)=>To(e,n,o).isSome(),hw=(e,n)=>Id(e,n).isSome(),vv=(e,n)=>fv(e,n).isSome();class xs{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,a){if(n){if(!a&&n[o])return n[o];if(n!==this.rootNode){let u=n[r];if(u)return u;for(let f=n.parentNode;f&&f!==this.rootNode;f=f.parentNode)if(u=f[r],u)return u}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const a=n.parentNode;if(a&&a!==this.rootNode)return a}}}const nh="\uFEFF",Es="",oh=e=>e===nh,Fc=e=>e.replace(/\uFEFF/g,""),kt=/^[ \t\r\n]*$/,Fa=e=>kt.test(e),pw=e=>{for(const n of e)if(!oh(n))return!1;return!0},yv=e=>" \f	\v".indexOf(e)!==-1,sh=e=>e===`
`||e==="\r",Cv=(e,n)=>n<e.length&&n>=0?sh(e[n]):!1,Ia=(e,n=4,o=!0,r=!0)=>{const a=I_(" ",n),u=e.replace(/\t/g,a);return Zo(u,(b,C)=>yv(C)||C===Es?b.pcIsSpace||b.str===""&&o||b.str.length===u.length-1&&r||Cv(u,b.str.length+1)?{pcIsSpace:!1,str:b.str+Es}:{pcIsSpace:!0,str:b.str+" "}:{pcIsSpace:sh(C),str:b.str+C},{pcIsSpace:!1,str:""}).str},tl=e=>n=>!!n&&n.nodeType===e,Ud=e=>!!e&&!Object.getPrototypeOf(e),tt=tl(1),La=e=>tt(e)&&u1(K.fromDom(e)),wv=e=>tt(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",pf=e=>{const n=e.toLowerCase();return o=>Oe(o)&&o.nodeName.toLowerCase()===n},Ha=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return zt(n,r)}return!1}},rh=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(tt(r)){const a=r.ownerDocument.defaultView;if(a)for(let u=0;u<o.length;u++){const f=a.getComputedStyle(r,null);if((f?f.getPropertyValue(e):null)===o[u])return!0}}return!1}},Wd=e=>n=>tt(n)&&n.hasAttribute(e),zl=e=>tt(e)&&e.hasAttribute("data-mce-bogus"),ch=e=>tt(e)&&e.getAttribute("data-mce-bogus")==="all",yi=e=>tt(e)&&e.tagName==="TABLE",bw=e=>n=>!!(La(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),_o=Ha(["textarea","input"]),Ne=tl(3),sc=tl(4),Zd=tl(7),Ko=tl(8),bf=tl(9),$s=tl(11),Rn=pf("br"),ah=pf("img"),Te=bw("true"),Dn=bw("false"),_1=Ha(["td","th"]),Ts=Ha(["td","th","caption"]),yr=Ha(["video","audio","object","embed"]),Va=pf("li"),Sv=pf("details"),Nu=pf("summary"),xv={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},Ic=(e,n,o)=>{const r=K.fromDom(n),a=K.fromDom(e),u=o.getWhitespaceElements();return T1(a,b=>$t(u,wn(b)),Be(Sn,r))},kn=e=>tt(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),nl=(e,n)=>tt(e)&&$t(n.getNonEmptyElements(),e.nodeName),ih=Wd("data-mce-bookmark"),_s=e=>Yg(K.fromDom(e)).exists(n=>!la(n)),k1=(e,n,o)=>Fa(e.data)&&!Ic(e,n,o),ol=(e,n,o,r)=>Ne(e)&&!k1(e,n,o)&&(!r.includeZwsp||!pw(e.data)),lh=(e,n,o,r)=>Q(r.isContent)&&r.isContent(n)||nl(n,e)||ih(n)||kn(n)||ol(n,o,e,r)||Dn(n)||Te(n)&&_s(n),Fs=(e,n,o)=>{const r={...xv,...o};if(r.checkRootAsContent&&lh(e,n,n,r))return!1;let a=n.firstChild,u=0;if(!a)return!0;const f=new xs(a,n);do{if(r.skipBogus&&tt(a)){const b=a.getAttribute("data-mce-bogus");if(b){a=f.next(b==="all");continue}}if(Ko(a)){a=f.next(!0);continue}if(Rn(a)){u++,a=f.next();continue}if(lh(e,a,n,r))return!1;a=f.next()}while(a);return u<=1},Or=(e,n,o)=>Fs(e,n.dom,{checkRootAsContent:!0,...o}),le=(e,n,o)=>lh(e,n,n,{includeZwsp:xv.includeZwsp,...o}),io=e=>{let n=e;return{get:()=>n,set:a=>{n=a}}},Ev=e=>{const n=io(N.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(N.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(N.some(b))}}},ts=e=>{const n=io(N.none()),o=()=>n.get().each(b=>clearInterval(b));return{clear:()=>{o(),n.set(N.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(N.some(setInterval(b,e)))}}},Qs=()=>{const e=Ev(Ot);return{...e,on:o=>e.get().each(o)}},er=e=>{const n=e.toLowerCase();return n==="svg"?"svg":n==="math"?"math":"html"},fo=e=>er(e)!=="html",O1=e=>fo(e.nodeName),Bu=e=>er(e.nodeName),vw=["svg","math"],uh=()=>{const e=Qs(),n=()=>e.get().map(Bu).getOr("html");return{track:a=>(O1(a)?e.set(a):e.get().exists(u=>!u.contains(a))&&e.clear(),n()),current:n,reset:()=>{e.clear()}}},vc="data-mce-block",X_=e=>Rt(Ir(e),n=>!/[A-Z]/.test(n)),Tv=e=>Gt(X_(e),n=>{const o=CSS.escape(n);return`${o}:`+Gt(vw,r=>`not(${r} ${o})`).join(":")}).join(","),yw=(e,n)=>Oe(n.querySelector(e))?(n.setAttribute(vc,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(vc),!1),Cw=(e,n)=>{const o=Tv(e.getTransparentElements()),r=Tv(e.getBlockElements());return Rt(n.querySelectorAll(o),a=>yw(r,a))},ww=(e,n,o)=>{var r;const a=o?"lastChild":"firstChild";for(let u=n[a];u;u=u[a])if(Fs(e,u,{checkRootAsContent:!0})){(r=u.parentNode)===null||r===void 0||r.removeChild(u);return}},jd=(e,n,o)=>{const r=document.createRange(),a=n.parentNode;if(a){r.setStartBefore(n),r.setEndBefore(o);const u=r.extractContents();ww(e,u,!0),r.setStartAfter(o),r.setEndAfter(n);const f=r.extractContents();ww(e,f,!1),Fs(e,u,{checkRootAsContent:!0})||a.insertBefore(u,n),Fs(e,o,{checkRootAsContent:!0})||a.insertBefore(o,n),Fs(e,f,{checkRootAsContent:!0})||a.insertBefore(f,n),a.removeChild(n)}},vf=(e,n,o)=>{const r=e.getBlockElements(),a=K.fromDom(n),u=b=>wn(b)in r,f=b=>Sn(b,a);Se(hv(o),b=>{To(b,u,f).each(C=>{const S=zd(b,O=>u(O)&&!e.isValidChild(wn(C),wn(O)));if(S.length>0){const O=Yg(C);Se(S,R=>{To(R,u,f).each(D=>{jd(e,D.dom,R.dom)})}),O.each(R=>Cw(e,R.dom))}})})},VD=(e,n,o)=>{Se([...o,...Gd(e,n)?[n]:[]],r=>Se(zr(K.fromDom(r),r.nodeName.toLowerCase()),a=>{yf(e,a.dom)&&Mu(a)}))},dh=(e,n)=>{const o=Cw(e,n);vf(e,n,o),VD(e,n,o)},_v=(e,n)=>{if(R1(e,n)){const o=Tv(e.getBlockElements());yw(o,n)}},kv=(e,n,o)=>{const r=u=>Sn(u,K.fromDom(n)),a=Fd(K.fromDom(o),r);tf(a,a.length-2).filter(vo).fold(()=>dh(e,n),u=>dh(e,u.dom))},A1=e=>e.hasAttribute(vc),ua=(e,n)=>$t(e.getTransparentElements(),n),R1=(e,n)=>tt(n)&&ua(e,n.nodeName),Gd=(e,n)=>R1(e,n)&&A1(n),yf=(e,n)=>R1(e,n)&&!A1(n),D1=(e,n)=>n.type===1&&ua(e,n.name)&&J(n.attr(vc)),Sw=Ki().browser,Ov=e=>as(e,vo),J_=e=>Sw.isFirefox()&&wn(e)==="table"?Ov(Js(e)).filter(n=>wn(n)==="caption").bind(n=>Ov(p1(n)).map(o=>{const r=o.dom.offsetTop,a=n.dom.offsetTop,u=n.dom.offsetHeight;return r<=a?-u:0})).getOr(0):0,tr=(e,n)=>e.children&&zt(e.children,n),Ci=(e,n,o)=>{let r=0,a=0;const u=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&es(K.fromDom(e),"position")==="static"){const b=n.getBoundingClientRect();return r=b.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,a=b.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:a}}let f=n;for(;f&&f!==o&&f.nodeType&&!tr(f,o);){const b=f;r+=b.offsetLeft||0,a+=b.offsetTop||0,f=b.offsetParent}for(f=n.parentNode;f&&f!==o&&f.nodeType&&!tr(f,o);)r-=f.scrollLeft||0,a-=f.scrollTop||0,f=f.parentNode;a+=J_(K.fromDom(n))}return{x:r,y:a}},$u=(e,n={})=>{let o=0;const r={},a=K.fromDom(e),u=Ou(a),f=Y=>{n.referrerPolicy=Y},b=Y=>{n.contentCssCors=Y},C=Y=>{Bs(Xg(a),Y)},S=Y=>{const re=Xg(a);St(re,"#"+Y).each(ao)},O=Y=>bo(r,Y).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),R=Y=>new Promise((re,ce)=>{let ie;const _e=Ve._addCacheSuffix(Y),Ie=O(_e);r[_e]=Ie,Ie.count++;const st=(ct,Ct)=>{Se(ct,Jr),Ie.status=Ct,Ie.passed=[],Ie.failed=[],ie&&(ie.onload=null,ie.onerror=null,ie=null)},we=()=>st(Ie.passed,2),he=()=>st(Ie.failed,3);if(re&&Ie.passed.push(re),ce&&Ie.failed.push(ce),Ie.status===1)return;if(Ie.status===2){we();return}if(Ie.status===3){he();return}Ie.status=1;const Ae=K.fromTag("link",u.dom);Lr(Ae,{rel:"stylesheet",type:"text/css",id:Ie.id}),n.contentCssCors&&ur(Ae,"crossOrigin","anonymous"),n.referrerPolicy&&ur(Ae,"referrerpolicy",n.referrerPolicy),ie=Ae.dom,ie.onload=we,ie.onerror=he,C(Ae),ur(Ae,"href",_e)}),D=(Y,re)=>{const ce=O(Y);r[Y]=ce,ce.count++;const ie=K.fromTag("style",u.dom);Lr(ie,{rel:"stylesheet",type:"text/css",id:ce.id}),ie.dom.innerHTML=re,C(ie)},I=Y=>Promise.allSettled(Gt(Y,ce=>R(ce).then(Ke(ce)))).then(ce=>{const ie=Er(ce,_e=>_e.status==="fulfilled");return ie.fail.length>0?Promise.reject(Gt(ie.fail,_e=>_e.reason)):Gt(ie.pass,_e=>_e.value)}),z=Y=>{const re=Ve._addCacheSuffix(Y);bo(r,re).each(ce=>{--ce.count===0&&(delete r[re],S(ce.id))})};return{load:R,loadRawCss:D,loadAll:I,unload:z,unloadRawCss:Y=>{bo(r,Y).each(re=>{--re.count===0&&(delete r[Y],S(re.id))})},unloadAll:Y=>{Se(Y,re=>{z(re)})},_setReferrerPolicy:f,_setContentCssCors:b}},M1=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=bi(o).dom;return N.from(e.get(u)).getOrThunk(()=>{const f=$u(u,r);return e.set(u,f),f})}}})(),Lc=e=>e.nodeName.toLowerCase()==="span",mh=(e,n)=>Oe(e)&&(le(n,e)||n.isInline(e.nodeName.toLowerCase())),P1=(e,n,o)=>{const r=new xs(e,n).prev(!1),a=new xs(e,n).next(!1),u=ss(r)||mh(r,o),f=ss(a)||mh(a,o);return u&&f},N1=e=>Lc(e)&&e.getAttribute("data-mce-type")==="bookmark",za=(e,n,o)=>Ne(e)&&e.data.length>0&&P1(e,n,o),Ua=e=>tt(e)?e.childNodes.length>0:!1,xw=e=>$s(e)||bf(e),da=(e,n,o,r)=>{var a;const u=r||n;if(tt(n)&&N1(n))return n;const f=n.childNodes;for(let b=f.length-1;b>=0;b--)da(e,f[b],o,u);if(tt(n)){const b=n.childNodes;b.length===1&&N1(b[0])&&((a=n.parentNode)===null||a===void 0||a.insertBefore(b[0],n))}return!xw(n)&&!le(o,n)&&!Ua(n)&&!za(n,u,o)&&e.remove(n),n},Kd=Ve.makeMap,wi=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,sl=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Yd=/[<>&\"\']/g,Q_=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,fh={128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""},Fu={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},ek={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Yo=e=>{const n=K.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},B1=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let a=0;a<r.length;a+=2){const u=String.fromCharCode(parseInt(r[a],n));if(!Fu[u]){const f="&"+r[a+1]+";";o[u]=f,o[f]=u}}return o}else return},Si=B1("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Xd=(e,n)=>e.replace(n?wi:sl,o=>Fu[o]||o),gh=e=>(""+e).replace(Yd,n=>Fu[n]||n),xi=(e,n)=>e.replace(n?wi:sl,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":Fu[o]||"&#"+o.charCodeAt(0)+";"),nr=(e,n,o)=>{const r=o||Si;return e.replace(n?wi:sl,a=>Fu[a]||r[a]||a)},Lu={encodeRaw:Xd,encodeAllRaw:gh,encodeNumeric:xi,encodeNamed:nr,getEncodeFunc:(e,n)=>{const o=B1(n)||Si,r=(f,b)=>f.replace(b?wi:sl,C=>Fu[C]!==void 0?Fu[C]:o[C]!==void 0?o[C]:C.length>1?"&#"+((C.charCodeAt(0)-55296)*1024+(C.charCodeAt(1)-56320)+65536)+";":"&#"+C.charCodeAt(0)+";"),a=(f,b)=>nr(f,b,o),u=Kd(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?n?a:nr:u.numeric?xi:Xd},decode:e=>e.replace(Q_,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):fh[o]||String.fromCharCode(o)):ek[n]||Si[n]||Yo(n))},Is=(e,n)=>(e=Ve.trim(e),e?e.split(n||" "):[]),F1=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),I1=e=>hn(e)&&e.source&&Object.prototype.toString.call(e)==="[object RegExp]",tk=e=>{const n=o=>yn(o)?Gt(o,n):I1(o)?new RegExp(o.source,o.flags):hn(o)?$n(o,n):o;return n(e)},Ew=e=>{const n=/^(~)?(.+)$/;return oa(Is(e,","),o=>{const r=n.exec(o);if(r){const u=r[1]==="~"?"span":"div",f=r[2];return[{cloneName:u,name:f}]}else return[]})},Hu=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),Jd=e=>{let n,o;n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(n+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",o+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(o=[o,"acronym applet basefont big font strike tt"].join(" "),n=[n,"center dir isindex noframes"].join(" "));const r=[n,o].join(" ");return{blockContent:n,phrasingContent:o,flowContent:r}},rc=e=>{const{blockContent:n,phrasingContent:o,flowContent:r}=Jd(e),a=u=>Object.freeze(u.split(" "));return Object.freeze({blockContent:a(n),phrasingContent:a(o),flowContent:a(r)})},Hc={html4:qi(()=>rc("html4")),html5:qi(()=>rc("html5")),"html5-strict":qi(()=>rc("html5-strict"))},Vc=(e,n)=>{const{blockContent:o,phrasingContent:r,flowContent:a}=Hc[e]();return n==="blocks"?N.some(o):n==="phrasing"?N.some(r):n==="flow"?N.some(a):N.none()},hh=e=>{const n=Hu(e),{phrasingContent:o,flowContent:r}=Jd(e),a={},u=(C,S,O)=>{a[C]={attributes:Ms(S,Ke({})),attributesOrder:S,children:Ms(O,Ke({}))}},f=(C,S="",O="")=>{const R=Is(O),D=Is(C);let I=D.length;const z=[...n,...Is(S)];for(;I--;)u(D[I],z.slice(),R)},b=(C,S)=>{const O=Is(C),R=Is(S);let D=O.length;for(;D--;){const I=a[O[D]];for(let z=0,H=R.length;z<H;z++)I.attributes[R[z]]={},I.attributesOrder.push(R[z])}};return e!=="html5-strict"&&(Se(Is("acronym applet basefont big font strike tt"),O=>{f(O,"",o)}),Se(Is("center dir isindex noframes"),O=>{f(O,"",r)})),f("html","manifest","head body"),f("head","","base command link meta noscript script style title"),f("title hr noscript br"),f("base","href target"),f("link","href rel media hreflang type sizes hreflang"),f("meta","name http-equiv content charset"),f("style","media type scoped"),f("script","src async defer type charset"),f("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),f("dd div","",r),f("address dt caption","",e==="html4"?o:r),f("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),f("blockquote","cite",r),f("ol","reversed start type","li"),f("ul","","li"),f("li","value",r),f("dl","","dt dd"),f("a","href target rel media hreflang type",e==="html4"?o:r),f("q","cite",o),f("ins del","cite datetime",r),f("img","src sizes srcset alt usemap ismap width height"),f("iframe","src name width height",r),f("embed","src type width height"),f("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),f("param","name value"),f("map","name",[r,"area"].join(" ")),f("area","alt coords shape href target rel media hreflang type"),f("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),f("colgroup","span","col"),f("col","span"),f("tbody thead tfoot","","tr"),f("tr","","td th"),f("td","colspan rowspan headers",r),f("th","colspan rowspan headers scope abbr",r),f("form","accept-charset action autocomplete enctype method name novalidate target",r),f("fieldset","disabled form name",[r,"legend"].join(" ")),f("label","form for",o),f("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),f("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),f("select","disabled form multiple name required size","option optgroup"),f("optgroup","disabled label","option"),f("option","disabled label selected value"),f("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),f("menu","type label",[r,"li"].join(" ")),f("noscript","",r),e!=="html4"&&(f("wbr"),f("ruby","",[o,"rt rp"].join(" ")),f("figcaption","",r),f("mark rt rp bdi","",o),f("summary","",[o,"h1 h2 h3 h4 h5 h6"].join(" ")),f("canvas","width height",r),f("data","value",o),f("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),f("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),f("picture","","img source"),f("source","src srcset type media sizes"),f("track","kind src srclang label default"),f("datalist","",[o,"option"].join(" ")),f("article section nav aside main header footer","",r),f("hgroup","","h1 h2 h3 h4 h5 h6"),f("figure","",[r,"figcaption"].join(" ")),f("time","datetime",o),f("dialog","open",r),f("command","type label icon disabled checked radiogroup command"),f("output","for form name",o),f("progress","value max",o),f("meter","value min max low high optimum",o),f("details","open",[r,"summary"].join(" ")),f("keygen","autofocus challenge disabled form keytype name"),u("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(b("script","language xml:space"),b("style","xml:space"),b("object","declare classid code codebase codetype archive standby align border hspace vspace"),b("embed","align name hspace vspace"),b("param","valuetype type"),b("a","charset name rev shape coords"),b("br","clear"),b("applet","codebase archive code object alt name width height align hspace vspace"),b("img","name longdesc align border hspace vspace"),b("iframe","longdesc frameborder marginwidth marginheight scrolling align"),b("font basefont","size color face"),b("input","usemap align"),b("select"),b("textarea"),b("h1 h2 h3 h4 h5 h6 div p legend caption","align"),b("ul","type compact"),b("li","type"),b("ol dl menu dir","compact"),b("pre","width xml:space"),b("hr","align noshade size width"),b("isindex","prompt"),b("table","summary width frame rules cellspacing cellpadding align bgcolor"),b("col","width align char charoff valign"),b("colgroup","width align char charoff valign"),b("thead","align char charoff valign"),b("tr","align char charoff valign bgcolor"),b("th","axis align char charoff valign nowrap bgcolor width height"),b("form","accept"),b("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),b("tfoot","align char charoff valign"),b("tbody","align char charoff valign"),b("area","nohref"),b("body","background bgcolor text link vlink alink")),e!=="html4"&&(b("input button select textarea","autofocus"),b("input textarea","placeholder"),b("a","download"),b("link script img","crossorigin"),b("img","loading"),b("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),e!=="html4"&&Se([a.video,a.audio],C=>{delete C.children.audio,delete C.children.video}),Se(Is("a form meter progress dfn"),C=>{a[C]&&delete a[C].children[C]}),delete a.caption.children.table,delete a.script,a},ph=e=>e==="-"?"remove":"add",Cf=e=>{const n=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return N.from(n.exec(e)).map(o=>({preset:o[1]==="@",name:o[2]}))},Av=e=>{const n=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return oa(Is(e,","),o=>{const r=n.exec(o);if(r){const a=r[1],u=a?ph(a):"replace",f=r[2],b=oa(Is(r[3],"|"),C=>Cf(C).toArray());return[{operation:u,name:f,validChildren:b}]}else return[]})},Tw=(e,n)=>{const o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,r=/[*?+]/,{attributes:a,attributesOrder:u}=n;return Se(Is(e,"|"),f=>{const b=o.exec(f);if(b){const C={},S=b[1],O=b[2].replace(/[\\:]:/g,":"),R=b[3],D=b[4];if(S==="!"&&(n.attributesRequired=n.attributesRequired||[],n.attributesRequired.push(O),C.required=!0),S==="-"){delete a[O],u.splice(Ve.inArray(u,O),1);return}if(R&&(R==="="?(n.attributesDefault=n.attributesDefault||[],n.attributesDefault.push({name:O,value:D}),C.defaultValue=D):R==="~"?(n.attributesForced=n.attributesForced||[],n.attributesForced.push({name:O,value:D}),C.forcedValue=D):R==="<"&&(C.validValues=Ve.makeMap(D,"?"))),r.test(O)){const I=C;n.attributePatterns=n.attributePatterns||[],I.pattern=F1(O),n.attributePatterns.push(I)}else a[O]||u.push(O),a[O]=C}})},_w=(e,n)=>{rt(e.attributes,(o,r)=>{n.attributes[r]=o}),n.attributesOrder.push(...e.attributesOrder)},Rv=(e,n)=>{const o=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return oa(Is(n,","),r=>{const a=o.exec(r);if(a){const u=a[1],f=a[2],b=a[3],C=a[4],S=a[5],O={attributes:{},attributesOrder:[]};if(e.each(R=>_w(R,O)),u==="#"?O.paddEmpty=!0:u==="-"&&(O.removeEmpty=!0),C==="!"&&(O.removeEmptyAttrs=!0),S&&Tw(S,O),b&&(O.outputName=f),f==="@")if(e.isNone())e=N.some(O);else return[];return[b?{name:f,element:O,aliasName:b}:{name:f,element:O}]}else return[]})},wf={},sn=Ve.makeMap,ht=Ve.each,Vu=Ve.extend,L1=Ve.explode,H1=(e,n={})=>{const o=sn(e," ",sn(e.toUpperCase()," "));return Vu(o,n)},Dv=e=>H1("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),V1=(e,n)=>{if(e){const o={};return J(e)&&(e={"*":e}),ht(e,(r,a)=>{o[a]=o[a.toUpperCase()]=n==="map"?sn(r,/[, ]/):L1(r,/[, ]/)}),o}else return},Fn=(e={})=>{var n;const o={},r={};let a=[];const u={},f={},b=(pt,xn,Mo)=>{const Ds=e[pt];if(Ds)return sn(Ds,/[, ]/,sn(Ds.toUpperCase(),/[, ]/));{let Gs=wf[pt];return Gs||(Gs=H1(xn,Mo),wf[pt]=Gs),Gs}},C=(n=e.schema)!==null&&n!==void 0?n:"html5",S=hh(C);e.verify_html===!1&&(e.valid_elements="*[*]");const O=V1(e.valid_styles),R=V1(e.invalid_styles,"map"),D=V1(e.valid_classes,"map"),I=b("whitespace_elements","pre script noscript style textarea video audio iframe object code"),z=b("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),H=b("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),Z=b("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),Y="td th iframe video audio object script code",re=b("non_empty_elements",Y+" pre svg textarea summary",H),ce=b("move_caret_before_on_enter_elements",Y+" table",H),ie="h1 h2 h3 h4 h5 h6",_e=b("text_block_elements",ie+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),Ie=b("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",_e),st=b("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),we=b("transparent_elements","a ins del canvas map"),he=b("wrap_block_elements","pre "+ie);ht("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),pt=>{f[pt]=new RegExp("</"+pt+"[^>]*>","gi")});const Ae=pt=>{const xn=N.from(o["@"]),Mo=/[*?+]/;Se(Rv(xn,pt??""),({name:Ds,element:Gs,aliasName:ws})=>{if(ws&&(o[ws]=Gs),Mo.test(Ds)){const Po=Gs;Po.pattern=F1(Ds),a.push(Po)}else o[Ds]=Gs})},ct=pt=>{a=[],Se(Ir(o),xn=>{delete o[xn]}),Ae(pt)},Ct=(pt,xn)=>{var Mo,Ds;delete wf.text_block_elements,delete wf.block_elements;const Gs=xn.extends?!Oa(xn.extends):!1,ws=xn.extends;if(r[pt]=ws?r[ws]:{},u[pt]=ws??pt,re[pt.toUpperCase()]={},re[pt]={},Gs||(Ie[pt.toUpperCase()]={},Ie[pt]={}),ws&&!o[pt]&&o[ws]){const Po=tk(o[ws]);delete Po.removeEmptyAttrs,delete Po.removeEmpty,o[pt]=Po}else o[pt]={attributesOrder:[],attributes:{}};if(yn(xn.attributes)){const Po=ac=>{No.attributesOrder.push(ac),No.attributes[ac]={}},No=(Mo=o[pt])!==null&&Mo!==void 0?Mo:{};delete No.attributesDefault,delete No.attributesForced,delete No.attributePatterns,delete No.attributesRequired,No.attributesOrder=[],No.attributes={},Se(xn.attributes,ac=>{const Wi=Hu(C);Cf(ac).each(({preset:bu,name:Ol})=>{bu?Ol==="global"&&Se(Wi,Po):Po(Ol)})}),o[pt]=No}if(an(xn.padEmpty)){const Po=(Ds=o[pt])!==null&&Ds!==void 0?Ds:{};Po.paddEmpty=xn.padEmpty,o[pt]=Po}if(yn(xn.children)){const Po={},No=Wi=>{Po[Wi]={}},ac=Wi=>{Vc(C,Wi).each(bu=>{Se(bu,No)})};Se(xn.children,Wi=>{Cf(Wi).each(({preset:bu,name:Ol})=>{bu?ac(Ol):No(Ol)})}),r[pt]=Po}ws&&rt(r,(Po,No)=>{Po[ws]&&(r[No]=Po=Vu({},r[No]),Po[pt]=Po[ws])})},rn=pt=>{Se(Ew(pt??""),({name:xn,cloneName:Mo})=>{Ct(xn,{extends:Mo})})},cn=pt=>{hn(pt)?rt(pt,(xn,Mo)=>Ct(Mo,xn)):J(pt)&&rn(pt)},Pn=pt=>{Se(Av(pt??""),({operation:xn,name:Mo,validChildren:Ds})=>{const Gs=xn==="replace"?{"#comment":{}}:r[Mo],ws=No=>{xn==="remove"?delete Gs[No]:Gs[No]={}},Po=No=>{Vc(C,No).each(ac=>{Se(ac,ws)})};Se(Ds,({preset:No,name:ac})=>{No?Po(ac):ws(ac)}),r[Mo]=Gs})},zn=pt=>{const xn=o[pt];if(xn)return xn;let Mo=a.length;for(;Mo--;){const Ds=a[Mo];if(Ds.pattern.test(pt))return Ds}},Jo=()=>{e.valid_elements?(ct(e.valid_elements),ht(S,(pt,xn)=>{r[xn]=pt.children})):(ht(S,(pt,xn)=>{o[xn]={attributes:pt.attributes,attributesOrder:pt.attributesOrder},r[xn]=pt.children}),ht(Is("strong/b em/i"),pt=>{const xn=Is(pt,"/");o[xn[1]].outputName=xn[0]}),ht(st,(pt,xn)=>{o[xn]&&(e.padd_empty_block_inline_children&&(o[xn].paddInEmptyBlock=!0),o[xn].removeEmpty=!0)}),ht(Is("ol ul blockquote a table tbody"),pt=>{o[pt]&&(o[pt].removeEmpty=!0)}),ht(Is("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),pt=>{o[pt]&&(o[pt].paddEmpty=!0)}),ht(Is("span"),pt=>{o[pt].removeEmptyAttrs=!0})),delete o.svg,cn(e.custom_elements),Pn(e.valid_children),Ae(e.extended_valid_elements),Pn("+ol[ul|ol],+ul[ul|ol]"),ht({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(pt,xn)=>{o[xn]&&(o[xn].parentsRequired=Is(pt))}),e.invalid_elements&&ht(L1(e.invalid_elements),pt=>{o[pt]&&delete o[pt]}),zn("span")||Ae("span[!data-mce-type|*]")},Cs=Ke(O),ar=Ke(R),Ge=Ke(D),vt=Ke(Z),Tn=Ke(Ie),et=Ke(_e),_t=Ke(st),Pt=Ke(Object.seal(H)),Qe=Ke(z),on=Ke(re),dn=Ke(ce),Rs=Ke(I),Zn=Ke(we),Br=Ke(he),Jc=Ke(Object.seal(f)),pu=(pt,xn)=>{const Mo=r[pt.toLowerCase()];return!!(Mo&&Mo[xn.toLowerCase()])},Yr=(pt,xn)=>{const Mo=zn(pt);if(Mo)if(xn){if(Mo.attributes[xn])return!0;const Ds=Mo.attributePatterns;if(Ds){let Gs=Ds.length;for(;Gs--;)if(Ds[Gs].pattern.test(xn))return!0}}else return!0;return!1},Oa=pt=>$t(Tn(),pt),Ui=pt=>!fs(pt,"#")&&Yr(pt)&&!Oa(pt),$r=pt=>$t(Br(),pt)||Ui(pt),Qc=Ke(u);return Jo(),{type:C,children:r,elements:o,getValidStyles:Cs,getValidClasses:Ge,getBlockElements:Tn,getInvalidStyles:ar,getVoidElements:Pt,getTextBlockElements:et,getTextInlineElements:_t,getBoolAttrs:vt,getElementRule:zn,getSelfClosingElements:Qe,getNonEmptyElements:on,getMoveCaretBeforeOnEnterElements:dn,getWhitespaceElements:Rs,getTransparentElements:Zn,getSpecialElements:Jc,isValidChild:pu,isValid:Yr,isBlock:Oa,isInline:Ui,isWrapper:$r,getCustomElements:Qc,addValidElements:Ae,setValidElements:ct,addCustomElements:cn,addValidChildren:Pn}},Mv=e=>({value:kw(e)}),kw=e=>sf(e,"#").toUpperCase(),Pv=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},Ee=e=>{const n=Pv(e.red)+Pv(e.green)+Pv(e.blue);return Mv(n)},Sf=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,Ow=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Qd=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),Aw=(e,n,o,r)=>{const a=parseInt(e,10),u=parseInt(n,10),f=parseInt(o,10),b=parseFloat(r);return Qd(a,u,f,b)},Ul=e=>Sf.test(e)?"rgb":Ow.test(e)?"rgba":"other",z1=e=>{const n=Sf.exec(e);if(n!==null)return N.some(Aw(n[1],n[2],n[3],"1"));const o=Ow.exec(e);return o!==null?N.some(Aw(o[1],o[2],o[3],o[4])):N.none()},em=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,bh=e=>z1(e).map(Ee).map(n=>"#"+n.value).getOr(e),zu=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,a=/\s+$/,u={};let f,b;const C=nh;n&&(f=n.getValidStyles(),b=n.getInvalidStyles());const S=(`\\" \\' \\; \\: ; : `+C).split(" ");for(let R=0;R<S.length;R++)u[S[R]]=C+R,u[C+R]=S[R];const O={parse:R=>{const D={};let I=!1;const z=e.url_converter,H=e.url_converter_scope||O,Z=(we,he,Ae)=>{const ct=D[we+"-top"+he];if(!ct)return;const Ct=D[we+"-right"+he];if(!Ct)return;const rn=D[we+"-bottom"+he];if(!rn)return;const cn=D[we+"-left"+he];if(!cn)return;const Pn=[ct,Ct,rn,cn];let zn=Pn.length-1;for(;zn--&&Pn[zn]===Pn[zn+1];);zn>-1&&Ae||(D[we+he]=zn===-1?Pn[0]:Pn.join(" "),delete D[we+"-top"+he],delete D[we+"-right"+he],delete D[we+"-bottom"+he],delete D[we+"-left"+he])},Y=we=>{const he=D[we];if(!he)return;const Ae=he.indexOf(",")>-1?[he]:he.split(" ");let ct=Ae.length;for(;ct--;)if(Ae[ct]!==Ae[0])return!1;return D[we]=Ae[0],!0},re=(we,he,Ae,ct)=>{Y(he)&&Y(Ae)&&Y(ct)&&(D[we]=D[he]+" "+D[Ae]+" "+D[ct],delete D[he],delete D[Ae],delete D[ct])},ce=we=>(I=!0,u[we]),ie=(we,he)=>(I&&(we=we.replace(/\uFEFF[0-9]/g,Ae=>u[Ae])),he||(we=we.replace(/\\([\'\";:])/g,"$1")),we),_e=we=>String.fromCharCode(parseInt(we.slice(1),16)),Ie=we=>we.replace(/\\[0-9a-f]+/gi,_e),st=(we,he,Ae,ct,Ct,rn)=>{if(Ct=Ct||rn,Ct)return Ct=ie(Ct),"'"+Ct.replace(/\'/g,"\\'")+"'";if(he=ie(he||Ae||ct||""),!e.allow_script_urls){const cn=he.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(cn)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(cn))return""}return z&&(he=z.call(H,he,"style")),"url('"+he.replace(/\'/g,"\\'")+"')"};if(R){R=R.replace(/[\u0000-\u001F]/g,""),R=R.replace(/\\[\"\';:\uFEFF]/g,ce).replace(/\"[^\"]+\"|\'[^\']+\'/g,he=>he.replace(/[;:]/g,ce));let we;for(;we=r.exec(R);){r.lastIndex=we.index+we[0].length;let he=we[1].replace(a,"").toLowerCase(),Ae=we[2].replace(a,"");if(he&&Ae){if(he=Ie(he),Ae=Ie(Ae),he.indexOf(C)!==-1||he.indexOf('"')!==-1||!e.allow_script_urls&&(he==="behavior"||/expression\s*\(|\/\*|\*\//.test(Ae)))continue;he==="font-weight"&&Ae==="700"?Ae="bold":(he==="color"||he==="background-color")&&(Ae=Ae.toLowerCase()),Ul(Ae)==="rgb"&&z1(Ae).each(ct=>{Ae=bh(em(ct)).toLowerCase()}),Ae=Ae.replace(o,st),D[he]=I?ie(Ae,!0):Ae}}Z("border","",!0),Z("border","-width"),Z("border","-color"),Z("border","-style"),Z("padding",""),Z("margin",""),re("border","border-width","border-style","border-color"),D.border==="medium none"&&delete D.border,D["border-image"]==="none"&&delete D["border-image"]}return D},serialize:(R,D)=>{let I="";const z=(Z,Y)=>{const re=Y[Z];if(re)for(let ce=0,ie=re.length;ce<ie;ce++){const _e=re[ce],Ie=R[_e];Ie&&(I+=(I.length>0?" ":"")+_e+": "+Ie+";")}},H=(Z,Y)=>{if(!b||!Y)return!0;let re=b["*"];return re&&re[Z]?!1:(re=b[Y],!(re&&re[Z]))};return D&&f?(z("*",f),z(D,f)):rt(R,(Z,Y)=>{Z&&H(Y,D)&&(I+=(I.length>0?" ":"")+Y+": "+Z+";")}),I}};return O},lo={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},rl=e=>e instanceof Event||Q(e.initEvent),Rw=e=>e.isDefaultPrevented===it||e.isDefaultPrevented===De,Wl=e=>An(e.preventDefault)||rl(e),Nv=(e,n)=>{const o=n??{};for(const r in e)$t(lo,r)||(o[r]=e[r]);return Oe(e.composedPath)&&(o.composedPath=()=>e.composedPath()),Oe(e.getModifierState)&&(o.getModifierState=r=>e.getModifierState(r)),Oe(e.getTargetRanges)&&(o.getTargetRanges=()=>e.getTargetRanges()),o},tm=(e,n,o,r)=>{var a;const u=Nv(n,r);return u.type=e,An(u.target)&&(u.target=(a=u.srcElement)!==null&&a!==void 0?a:o),Wl(n)&&(u.preventDefault=()=>{u.defaultPrevented=!0,u.isDefaultPrevented=it,Q(n.preventDefault)&&n.preventDefault()},u.stopPropagation=()=>{u.cancelBubble=!0,u.isPropagationStopped=it,Q(n.stopPropagation)&&n.stopPropagation()},u.stopImmediatePropagation=()=>{u.isImmediatePropagationStopped=it,u.stopPropagation()},Rw(u)||(u.isDefaultPrevented=u.defaultPrevented===!0?it:De,u.isPropagationStopped=u.cancelBubble===!0?it:De,u.isImmediatePropagationStopped=De)),u},Bv="mce-data-",$v=/^(?:mouse|contextmenu)|click/,Ur=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},xf=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},nk=e=>Oe(e)&&$v.test(e.type),Uu=(e,n)=>{const o=tm(e.type,e,document,n);if(nk(e)&&ss(e.pageX)&&!ss(e.clientX)){const r=o.target.ownerDocument||document,a=r.documentElement,u=r.body,f=o;f.pageX=e.clientX+(a&&a.scrollLeft||u&&u.scrollLeft||0)-(a&&a.clientLeft||u&&u.clientLeft||0),f.pageY=e.clientY+(a&&a.scrollTop||u&&u.scrollTop||0)-(a&&a.clientTop||u&&u.clientTop||0)}return o},ok=(e,n,o)=>{const r=e.document,a={type:"ready"};if(o.domLoaded){n(a);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,f=()=>{xf(e,"DOMContentLoaded",f),xf(e,"load",f),o.domLoaded||(o.domLoaded=!0,n(a)),e=null};u()?f():Ur(e,"DOMContentLoaded",f),o.domLoaded||Ur(e,"load",f)};class nm{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=Bv+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,a){const u=this;let f;const b=window,C=D=>{u.executeHandlers(Uu(D||b.event),S)};if(!n||Ne(n)||Ko(n))return r;let S;n[u.expando]?S=n[u.expando]:(S=u.count++,n[u.expando]=S,u.events[S]={}),a=a||n;const O=o.split(" ");let R=O.length;for(;R--;){let D=O[R],I=C,z=!1,H=!1;if(D==="DOMContentLoaded"&&(D="ready"),u.domLoaded&&D==="ready"&&n.readyState==="complete"){r.call(a,Uu({type:D}));continue}!u.hasFocusIn&&(D==="focusin"||D==="focusout")&&(z=!0,H=D==="focusin"?"focus":"blur",I=Z=>{const Y=Uu(Z||b.event);Y.type=Y.type==="focus"?"focusin":"focusout",u.executeHandlers(Y,S)}),f=u.events[S][D],f?D==="ready"&&u.domLoaded?r(Uu({type:D})):f.push({func:r,scope:a}):(u.events[S][D]=f=[{func:r,scope:a}],f.fakeName=H,f.capture=z,f.nativeHandler=I,D==="ready"?ok(n,I,u):Ur(n,H||D,I,z))}return n=f=null,r}unbind(n,o,r){if(!n||Ne(n)||Ko(n))return this;const a=n[this.expando];if(a){let u=this.events[a];if(o){const f=o.split(" ");let b=f.length;for(;b--;){const C=f[b],S=u[C];if(S){if(r){let O=S.length;for(;O--;)if(S[O].func===r){const R=S.nativeHandler,D=S.fakeName,I=S.capture,z=S.slice(0,O).concat(S.slice(O+1));z.nativeHandler=R,z.fakeName=D,z.capture=I,u[C]=z}}(!r||S.length===0)&&(delete u[C],xf(n,S.fakeName||C,S.nativeHandler,S.capture))}}}else rt(u,(f,b)=>{xf(n,f.fakeName||b,f.nativeHandler,f.capture)}),u={};for(const f in u)if($t(u,f))return this;delete this.events[a];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||Ne(n)||Ko(n))return this;const a=Uu({type:o,target:n},r);do{const u=n[this.expando];u&&this.executeHandlers(a,u),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!a.isPropagationStopped());return this}clean(n){if(!n||Ne(n)||Ko(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],a=r&&r[n.type];if(a)for(let u=0,f=a.length;u<f;u++){const b=a[u];if(b&&b.func.call(b.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}nm.Event=new nm;const U1=Ve.each,sk=Ve.grep,vh="data-mce-style",Ei=Ve.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Ar=(e,n,o)=>{An(o)||o===""?Ps(e,n):ur(e,n,o)},$e=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),Ef=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,a=e.previousSibling;a;a=a.previousSibling){const u=a.nodeType;n&&Ne(a)&&(u===r||!a.data.length)||(o++,r=u)}return o},Ls=(e,n)=>{const o=oc(n,"style"),r=e.serialize(e.parse(o),wn(n));Ar(n,vh,r)},Fv=(e,n)=>lc(e)?$t(Ei,n)?e+"":e+"px":e,Iv=(e,n,o)=>{const r=$e(n);An(o)||o===""?bc(e,r):gv(e,r,Fv(o,r))},Lv=(e,n,o)=>{const r=n.keep_values,a={set:(f,b,C)=>{const S=K.fromDom(f);Q(n.url_converter)&&Oe(b)&&(b=n.url_converter.call(n.url_converter_scope||o(),String(b),C,f));const O="data-mce-"+C;Ar(S,O,b),Ar(S,C,b)},get:(f,b)=>{const C=K.fromDom(f);return oc(C,"data-mce-"+b)||oc(C,b)}},u={style:{set:(f,b)=>{const C=K.fromDom(f);r&&Ar(C,vh,b),Ps(C,"style"),J(b)&&tn(C,e.parse(b))},get:f=>{const b=K.fromDom(f),C=oc(b,vh)||oc(b,"style");return e.serialize(e.parse(C),wn(b))}}};return r&&(u.href=u.src=a),u},Yn=(e,n={})=>{const o={},r=window,a={};let u=0;const f=!0,b=!0,C=M1.forElement(K.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),S=[],O=n.schema?n.schema:Fn({}),R=zu({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),D=n.ownEvents?new nm:nm.Event,I=O.getBlockElements(),z=me=>J(me)?$t(I,me):tt(me)&&($t(I,me.nodeName)||Gd(O,me)),H=me=>me&&e&&J(me)?e.getElementById(me):me,Z=me=>{const ge=H(me);return Oe(ge)?K.fromDom(ge):null},Y=(me,ge,je="")=>{let Fe;const Nt=Z(me);if(Oe(Nt)&&vo(Nt)){const En=__[ge];En&&En.get?Fe=En.get(Nt.dom,ge):Fe=oc(Nt,ge)}return Oe(Fe)?Fe:je},re=me=>{const ge=H(me);return An(ge)?[]:ge.attributes},ce=(me,ge,je)=>{vt(me,Fe=>{if(tt(Fe)){const Nt=K.fromDom(Fe),En=je===""?null:je,Qo=oc(Nt,ge),Al=__[ge];Al&&Al.set?Al.set(Nt.dom,En,ge):Ar(Nt,ge,En),Qo!==En&&n.onSetAttrib&&n.onSetAttrib({attrElm:Nt.dom,attrName:ge,attrValue:En})}})},ie=(me,ge)=>me.cloneNode(ge),_e=()=>n.root_element||e.body,Ie=me=>{const ge=gw(me);return{x:ge.x,y:ge.y,w:ge.width,h:ge.height}},st=(me,ge)=>Ci(e.body,H(me),ge),we=(me,ge,je)=>{vt(me,Fe=>{const Nt=K.fromDom(Fe);Iv(Nt,ge,je),n.update_styles&&Ls(R,Nt)})},he=(me,ge)=>{vt(me,je=>{const Fe=K.fromDom(je);rt(ge,(Nt,En)=>{Iv(Fe,En,Nt)}),n.update_styles&&Ls(R,Fe)})},Ae=(me,ge,je)=>{const Fe=H(me);if(!(An(Fe)||!La(Fe)&&!wv(Fe)))return je?es(K.fromDom(Fe),$e(ge)):(ge=ge.replace(/-(\D)/g,(Nt,En)=>En.toUpperCase()),ge==="float"&&(ge="cssFloat"),Fe.style?Fe.style[ge]:void 0)},ct=me=>{const ge=H(me);if(!ge)return{w:0,h:0};let je=Ae(ge,"width"),Fe=Ae(ge,"height");return(!je||je.indexOf("px")===-1)&&(je="0"),(!Fe||Fe.indexOf("px")===-1)&&(Fe="0"),{w:parseInt(je,10)||ge.offsetWidth||ge.clientWidth,h:parseInt(Fe,10)||ge.offsetHeight||ge.clientHeight}},Ct=me=>{const ge=H(me),je=st(ge),Fe=ct(ge);return{x:je.x,y:je.y,w:Fe.w,h:Fe.h}},rn=(me,ge)=>{if(!me)return!1;const je=yn(me)?me:[me];return mo(je,Fe=>Bc(K.fromDom(Fe),ge))},cn=(me,ge,je,Fe)=>{const Nt=[];let En=H(me);Fe=Fe===void 0;const Qo=je||(_e().nodeName!=="BODY"?_e().parentNode:null);if(J(ge))if(ge==="*")ge=tt;else{const Al=ge;ge=ci=>rn(ci,Al)}for(;En&&!(En===Qo||An(En.nodeType)||bf(En)||$s(En));){if(!ge||ge(En))if(Fe)Nt.push(En);else return[En];En=En.parentNode}return Fe?Nt:null},Pn=(me,ge,je)=>{const Fe=cn(me,ge,je,!1);return Fe&&Fe.length>0?Fe[0]:null},zn=(me,ge,je)=>{let Fe=ge;if(me){J(ge)&&(Fe=Nt=>rn(Nt,ge));for(let Nt=me[je];Nt;Nt=Nt[je])if(Q(Fe)&&Fe(Nt))return Nt}return null},Jo=(me,ge)=>zn(me,ge,"nextSibling"),Cs=(me,ge)=>zn(me,ge,"previousSibling"),ar=me=>Q(me.querySelectorAll),Ge=(me,ge)=>{var je,Fe;const Nt=(Fe=(je=H(ge))!==null&&je!==void 0?je:n.root_element)!==null&&Fe!==void 0?Fe:e;return ar(Nt)?mc(Nt.querySelectorAll(me)):[]},vt=function(me,ge,je){const Fe=je??this;if(yn(me)){const Nt=[];return U1(me,(En,Qo)=>{const Al=H(En);Al&&Nt.push(ge.call(Fe,Al,Qo))}),Nt}else{const Nt=H(me);return Nt?ge.call(Fe,Nt):!1}},Tn=(me,ge)=>{vt(me,je=>{rt(ge,(Fe,Nt)=>{ce(je,Nt,Fe)})})},et=(me,ge)=>{vt(me,je=>{const Fe=K.fromDom(je);y1(Fe,ge)})},_t=(me,ge,je,Fe,Nt)=>vt(me,En=>{const Qo=J(ge)?e.createElement(ge):ge;return Oe(je)&&Tn(Qo,je),Fe&&(!J(Fe)&&Fe.nodeType?Qo.appendChild(Fe):J(Fe)&&et(Qo,Fe)),Nt?Qo:En.appendChild(Qo)}),Pt=(me,ge,je)=>_t(e.createElement(me),me,ge,je,!0),Qe=Lu.decode,on=Lu.encodeAllRaw,dn=(me,ge,je="")=>{let Fe="<"+me;for(const Nt in ge)fc(ge,Nt)&&(Fe+=" "+Nt+'="'+on(ge[Nt])+'"');return Dc(je)&&$t(O.getVoidElements(),me)?Fe+" />":Fe+">"+je+"</"+me+">"},Rs=me=>{const ge=e.createElement("div"),je=e.createDocumentFragment();je.appendChild(ge),me&&(ge.innerHTML=me);let Fe;for(;Fe=ge.firstChild;)je.appendChild(Fe);return je.removeChild(ge),je},Zn=(me,ge)=>vt(me,je=>{const Fe=K.fromDom(je);return ge&&Se(Js(Fe),Nt=>{Xs(Nt)&&Nt.dom.length===0?ao(Nt):co(Fe,Nt)}),ao(Fe),Fe.dom}),Br=me=>vt(me,ge=>{const je=ge.attributes;for(let Fe=je.length-1;Fe>=0;Fe--)ge.removeAttributeNode(je.item(Fe))}),Jc=me=>R.parse(me),pu=(me,ge)=>R.serialize(me,ge),Yr=me=>{if(ji!==Yn.DOM&&e===document){if(o[me])return;o[me]=!0}let ge=e.getElementById("mceDefaultStyles");if(!ge){ge=e.createElement("style"),ge.id="mceDefaultStyles",ge.type="text/css";const je=e.head;je.firstChild?je.insertBefore(ge,je.firstChild):je.appendChild(ge)}ge.styleSheet?ge.styleSheet.cssText+=me:ge.appendChild(e.createTextNode(me))},Oa=me=>{me||(me=""),Se(me.split(","),ge=>{a[ge]=!0,C.load(ge).catch(Ot)})},Ui=(me,ge,je)=>{vt(me,Fe=>{if(tt(Fe)){const Nt=K.fromDom(Fe),En=ge.split(" ");Se(En,Qo=>{Oe(je)?(je?ku:cf)(Nt,Qo):uv(Nt,Qo)})}})},$r=(me,ge)=>{Ui(me,ge,!0)},Qc=(me,ge)=>{Ui(me,ge,!1)},pt=(me,ge)=>{const je=Z(me),Fe=ge.split(" ");return Oe(je)&&ir(Fe,Nt=>h1(je,Nt))},xn=me=>{vt(me,ge=>bc(K.fromDom(ge),"display"))},Mo=me=>{vt(me,ge=>gv(K.fromDom(ge),"display","none"))},Ds=me=>{const ge=Z(me);return Oe(ge)&&Go(v1(ge,"display"),"none")},Gs=me=>(me||"mce_")+u++,ws=me=>{const ge=Z(me);return Oe(ge)?tt(ge.dom)?ge.dom.outerHTML:Qi(ge):""},Po=(me,ge)=>{vt(me,je=>{tt(je)&&(je.outerHTML=ge)})},No=(me,ge)=>{const je=H(ge);return vt(me,Fe=>{const Nt=je==null?void 0:je.parentNode,En=je==null?void 0:je.nextSibling;return Nt&&(En?Nt.insertBefore(Fe,En):Nt.appendChild(Fe)),Fe})},ac=(me,ge,je)=>vt(ge,Fe=>{var Nt;const En=yn(ge)?me.cloneNode(!0):me;return je&&U1(sk(Fe.childNodes),Qo=>{En.appendChild(Qo)}),(Nt=Fe.parentNode)===null||Nt===void 0||Nt.replaceChild(En,Fe),Fe}),Wi=(me,ge)=>{if(me.nodeName!==ge.toUpperCase()){const je=Pt(ge);return U1(re(me),Fe=>{ce(je,Fe.nodeName,Y(me,Fe.nodeName))}),ac(je,me,!0),je}else return me},bu=(me,ge)=>{let je=me;for(;je;){let Fe=ge;for(;Fe&&je!==Fe;)Fe=Fe.parentNode;if(je===Fe)break;je=je.parentNode}return!je&&me.ownerDocument?me.ownerDocument.documentElement:je},Ol=(me,ge,je)=>Ks(ge)?Fs(O,me,{...je,isContent:Nt=>{const En=Nt.nodeName.toLowerCase();return!!ge[En]}}):Fs(O,me,je),Ig=()=>e.createRange(),Lg=(me,ge,je)=>{let Fe=Ig(),Nt,En;if(me&&ge&&me.parentNode&&ge.parentNode){const Qo=me.parentNode;return Fe.setStart(Qo,Ef(me)),Fe.setEnd(ge.parentNode,Ef(ge)),Nt=Fe.extractContents(),Fe=Ig(),Fe.setStart(ge.parentNode,Ef(ge)+1),Fe.setEnd(Qo,Ef(me)+1),En=Fe.extractContents(),Qo.insertBefore(da(ji,Nt,O),me),je?Qo.insertBefore(je,me):Qo.insertBefore(ge,me),Qo.insertBefore(da(ji,En,O),me),Zn(me),je||ge}else return},xd=(me,ge,je,Fe)=>{if(yn(me)){let Nt=me.length;const En=[];for(;Nt--;)En[Nt]=xd(me[Nt],ge,je,Fe);return En}else return n.collect&&(me===e||me===r)&&S.push([me,ge,je,Fe]),D.bind(me,ge,je,Fe||ji)},Zi=(me,ge,je)=>{if(yn(me)){let Fe=me.length;const Nt=[];for(;Fe--;)Nt[Fe]=Zi(me[Fe],ge,je);return Nt}else{if(S.length>0&&(me===e||me===r)){let Fe=S.length;for(;Fe--;){const[Nt,En,Qo]=S[Fe];me===Nt&&(!ge||ge===En)&&(!je||je===Qo)&&D.unbind(Nt,En,Qo)}}return D.unbind(me,ge,je)}},Xm=(me,ge,je)=>D.dispatch(me,ge,je),K0=(me,ge,je)=>D.dispatch(me,ge,je),Hg=me=>{if(me&&La(me)){const ge=me.getAttribute("data-mce-contenteditable");return ge&&ge!=="inherit"?ge:me.contentEditable!=="inherit"?me.contentEditable:null}else return null},ji={doc:e,settings:n,win:r,files:a,stdMode:f,boxModel:b,styleSheetLoader:C,boundEvents:S,styles:R,schema:O,events:D,isBlock:z,root:null,clone:ie,getRoot:_e,getViewPort:Ie,getRect:Ct,getSize:ct,getParent:Pn,getParents:cn,get:H,getNext:Jo,getPrev:Cs,select:Ge,is:rn,add:_t,create:Pt,createHTML:dn,createFragment:Rs,remove:Zn,setStyle:we,getStyle:Ae,setStyles:he,removeAllAttribs:Br,setAttrib:ce,setAttribs:Tn,getAttrib:Y,getPos:st,parseStyle:Jc,serializeStyle:pu,addStyle:Yr,loadCSS:Oa,addClass:$r,removeClass:Qc,hasClass:pt,toggleClass:Ui,show:xn,hide:Mo,isHidden:Ds,uniqueId:Gs,setHTML:et,getOuterHTML:ws,setOuterHTML:Po,decode:Qe,encode:on,insertAfter:No,replace:ac,rename:Wi,findCommonAncestor:bu,run:vt,getAttribs:re,isEmpty:Ol,createRng:Ig,nodeIndex:Ef,split:Lg,bind:xd,unbind:Zi,fire:K0,dispatch:Xm,getContentEditable:Hg,getContentEditableParent:me=>{const ge=_e();let je=null;for(let Fe=me;Fe&&Fe!==ge&&(je=Hg(Fe),je===null);Fe=Fe.parentNode);return je},isEditable:me=>{if(Oe(me)){const ge=tt(me)?me:me.parentElement;return Oe(ge)&&La(ge)&&la(K.fromDom(ge))}else return!1},destroy:()=>{if(S.length>0){let me=S.length;for(;me--;){const[ge,je,Fe]=S[me];D.unbind(ge,je,Fe)}}rt(a,(me,ge)=>{C.unload(ge),delete a[ge]})},isChildOf:(me,ge)=>me===ge||ge.contains(me),dumpRng:me=>"startContainer: "+me.startContainer.nodeName+", startOffset: "+me.startOffset+", endContainer: "+me.endContainer.nodeName+", endOffset: "+me.endOffset},__=Lv(R,n,Ke(ji));return ji};Yn.DOM=Yn(document),Yn.nodeIndex=Ef;const rk=Yn.DOM,om=0,Zl=1,Tf=2,Hv=3;class cl{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const a=rk;let u;const f=()=>{a.remove(S),u&&(u.onerror=u.onload=u=null)},b=()=>{f(),o()},C=()=>{f(),r("Failed to load script: "+n)},S=a.uniqueId();u=document.createElement("script"),u.id=S,u.type="text/javascript",u.src=Ve._addCacheSuffix(n),this.settings.referrerPolicy&&a.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy),u.onload=b,u.onerror=C,(document.getElementsByTagName("head")[0]||document.body).appendChild(u)})}isDone(n){return this.states[n]===Tf}markDone(n){this.states[n]=Tf}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=om),new Promise((a,u)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:a,reject:u})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(C,S)=>{bo(o.scriptLoadedCallbacks,S).each(O=>{Se(O,R=>R[C](S))}),delete o.scriptLoadedCallbacks[S]},a=C=>{const S=Rt(C,O=>O.status==="rejected");return S.length>0?Promise.reject(oa(S,({reason:O})=>yn(O)?O:[O])):Promise.resolve()},u=C=>Promise.allSettled(Gt(C,S=>o.states[S]===Tf?(r("resolve",S),Promise.resolve()):o.states[S]===Hv?(r("reject",S),Promise.reject(S)):(o.states[S]=Zl,o.loadScript(S).then(()=>{o.states[S]=Tf,r("resolve",S);const O=o.queue;return O.length>0?(o.queue=[],u(O).then(a)):Promise.resolve()},()=>(o.states[S]=Hv,r("reject",S),Promise.reject(S)))))),f=C=>(o.loading=!0,u(C).then(S=>{o.loading=!1;const O=o.queueLoadedCallbacks.shift();return N.from(O).each(Jr),a(S)})),b=n1(n);return o.loading?new Promise((C,S)=>{o.queueLoadedCallbacks.push(()=>{f(b).then(C,S)})}):f(b)}}cl.ScriptLoader=new cl;const Dw=(e,n)=>{const o=e.indexOf(n);return o!==-1&&e.indexOf(n,o+1)>o},ns=e=>hn(e)&&$t(e,"raw"),W1=e=>yn(e)&&e.length>1,In={},Vv=io("en"),Wr=()=>bo(In,Vv.get()),_i={getData:()=>$n(In,e=>({...e})),setCode:e=>{e&&Vv.set(e)},getCode:()=>Vv.get(),add:(e,n)=>{let o=In[e];o||(In[e]=o={});const r=Gt(Ir(n),a=>a.toLowerCase());rt(n,(a,u)=>{const f=u.toLowerCase();f!==u&&Dw(r,f)?($t(n,f)||(o[f]=a),o[u]=a):o[f]=a})},translate:e=>{const n=Wr().getOr({}),o=f=>Q(f)?Object.prototype.toString.call(f):r(f)?"":""+f,r=f=>f===""||f===null||f===void 0,a=f=>{const b=o(f);return $t(n,b)?o(n[b]):bo(n,b.toLowerCase()).map(o).getOr(b)},u=f=>f.replace(/{context:\w+}$/,"");if(r(e))return"";if(ns(e))return o(e.raw);if(W1(e)){const f=e.slice(1),b=a(e[0]).replace(/\{([0-9]+)\}/g,(C,S)=>$t(f,S)?o(f[S]):C);return u(b)}return u(a(e))},isRtl:()=>Wr().bind(e=>bo(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>$t(In,e)},Rr=()=>{const e=[],n={},o={},r=[],a=(H,Z)=>{const Y=Rt(r,re=>re.name===H&&re.state===Z);Se(Y,re=>re.resolve())},u=H=>$t(n,H),f=H=>$t(o,H),b=H=>{if(o[H])return o[H].instance},C=(H,Z)=>{const Y=_i.getCode(),re=","+(Z||"")+",";!Y||Z&&re.indexOf(","+Y+",")===-1||cl.ScriptLoader.add(n[H]+"/langs/"+Y+".js")},S=(H,Z)=>{Rr.languageLoad!==!1&&(u(H)?C(H,Z):z(H,"loaded").then(()=>C(H,Z)))},O=(H,Z)=>(e.push(Z),o[H]={instance:Z},a(H,"added"),Z),R=H=>{delete n[H],delete o[H]},D=(H,Z)=>J(Z)?J(H)?{prefix:"",resource:Z,suffix:""}:{prefix:H.prefix,resource:Z,suffix:H.suffix}:Z,I=(H,Z)=>{if(n[H])return Promise.resolve();let Y=J(Z)?Z:Z.prefix+Z.resource+Z.suffix;Y.indexOf("/")!==0&&Y.indexOf("://")===-1&&(Y=Rr.baseURL+"/"+Y),n[H]=Y.substring(0,Y.lastIndexOf("/"));const re=()=>(a(H,"loaded"),Promise.resolve());return o[H]?re():cl.ScriptLoader.add(Y).then(re)},z=(H,Z="added")=>Z==="added"&&f(H)||Z==="loaded"&&u(H)?Promise.resolve():new Promise(Y=>{r.push({name:H,state:Z,resolve:Y})});return{items:e,urls:n,lookup:o,get:b,requireLangPack:S,add:O,remove:R,createUrl:D,load:I,waitFor:z}};Rr.languageLoad=!0,Rr.baseURL="",Rr.PluginManager=Rr(),Rr.ThemeManager=Rr(),Rr.ModelManager=Rr();const kf=(e,n)=>{let o=null;return{cancel:()=>{te(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{te(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},n))}}},j1=(e,n)=>{let o=null;const r=()=>{te(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},n)}}},G1=(e,n,o)=>Ns(e,n,o).isSome(),Of=Ke("mce-annotation"),Wu=Ke("data-mce-annotation"),al=Ke("data-mce-annotation-uid"),Af=Ke("data-mce-annotation-active"),Zu=Ke("data-mce-annotation-classes"),jl=Ke("data-mce-annotation-attrs"),sm=e=>n=>Sn(n,e),yh=(e,n)=>{const o=e.selection.getRng(),r=K.fromDom(o.startContainer),a=K.fromDom(e.getBody()),u=n.fold(()=>"."+Of(),C=>`[${Wu()}="${C}"]`),f=pc(r,o.startOffset).getOr(r);return Ru(f,u,sm(a)).bind(C=>ca(C,`${al()}`).bind(S=>ca(C,`${Wu()}`).map(O=>{const R=zv(e,S);return{uid:S,name:O,elements:R}})))},q1=e=>vo(e)&&h1(e,Of()),Pw=(e,n)=>aa(e,"data-mce-bogus")||G1(e,'[data-mce-bogus="all"]',sm(n)),zv=(e,n)=>{const o=K.fromDom(e.getBody()),r=zr(o,`[${al()}="${n}"]`);return Rt(r,a=>!Pw(a,o))},Rf=(e,n)=>{const o=K.fromDom(e.getBody()),r=zr(o,`[${Wu()}="${n}"]`),a={};return Se(r,u=>{if(!Pw(u,o)){const f=oc(u,al()),b=bo(a,f).getOr([]);a[f]=b.concat([u])}}),a},Nw=(e,n)=>{const o=io({}),r=()=>({listeners:[],previous:Qs()}),a=(R,D)=>{u(R,I=>(D(I),I))},u=(R,D)=>{const I=o.get(),z=bo(I,R).getOrThunk(r),H=D(z);I[R]=H,o.set(I)},f=(R,D,I)=>{a(R,z=>{Se(z.listeners,H=>H(!0,R,{uid:D,nodes:Gt(I,Z=>Z.dom)}))})},b=R=>{a(R,D=>{Se(D.listeners,I=>I(!1,R))})},C=(R,D)=>{Se(zv(e,R),I=>{D?ur(I,Af(),"true"):Ps(I,Af())})},S=j1(()=>{const R=Io(n.getNames());Se(R,D=>{u(D,I=>{const z=I.previous.get();return yh(e,N.some(D)).fold(()=>{z.each(H=>{b(D),I.previous.clear(),C(H,!1)})},({uid:H,name:Z,elements:Y})=>{Go(z,H)||(z.each(re=>C(re,!1)),f(Z,H,Y),I.previous.set(H),C(H,!0))}),{previous:I.previous,listeners:I.listeners}})})},30);return e.on("remove",()=>{S.cancel()}),e.on("NodeChange",()=>{S.throttle()}),{addListener:(R,D)=>{u(R,I=>({previous:I.previous,listeners:I.listeners.concat([D])}))}}},ak=(e,n)=>{const o=Wu(),r=u=>N.from(u.attr(o)).bind(n.lookup),a=u=>{var f,b;u.attr(al(),null),u.attr(Wu(),null),u.attr(Af(),null);const C=N.from(u.attr(jl())).map(D=>D.split(",")).getOr([]),S=N.from(u.attr(Zu())).map(D=>D.split(",")).getOr([]);Se(C,D=>u.attr(D,null));const O=(b=(f=u.attr("class"))===null||f===void 0?void 0:f.split(" "))!==null&&b!==void 0?b:[],R=e1(O,[Of()].concat(S));u.attr("class",R.length>0?R.join(" "):null),u.attr(Zu(),null),u.attr(jl(),null)};e.serializer.addTempAttr(Af()),e.serializer.addAttributeFilter(o,u=>{for(const f of u)r(f).each(b=>{b.persistent===!1&&(f.name==="span"?f.unwrap():a(f))})})},K1=()=>{const e={};return{register:(a,u)=>{e[a]={name:a,settings:u}},lookup:a=>bo(e,a).map(u=>u.settings),getNames:()=>Ir(e)}},Uv=(e,n,o)=>Math.min(Math.max(e,n),o),Ch=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let Wv=0;const Df=e=>{const o=new Date().getTime(),r=Math.floor(Ch()*1e9);return Wv++,e+"_"+r+Wv+String(o)},UD=(e,n)=>{Se(n,o=>{ku(e,o)})},WD=(e,n)=>{Se(n,o=>{cf(e,o)})},Mf=(e,n)=>K.fromDom(e.dom.cloneNode(n)),Za=e=>Mf(e,!1),wh=e=>Mf(e,!0),Bw=(e,n)=>{const o=K.fromTag(n),r=m1(e);return Lr(o,r),o},$w=(e,n)=>{const o=Bw(e,n);vi(e,o);const r=Js(e);return Du(o,r),ao(e),o},Fw=(e,n,o=De)=>{const r=new xs(e,n),a=u=>{let f;do f=r[u]();while(f&&!Ne(f)&&!o(f));return N.from(f).filter(Ne)};return{current:()=>N.from(r.current()).filter(Ne),next:()=>a("next"),prev:()=>a("prev"),prev2:()=>a("prev2")}},rm=(e,n)=>{const o=n||(f=>e.isBlock(f)||Rn(f)||Dn(f)),r=(f,b,C,S)=>{if(Ne(f)){const O=S(f,b,f.data);if(O!==-1)return N.some({container:f,offset:O})}return C().bind(O=>r(O.container,O.offset,C,S))};return{backwards:(f,b,C,S)=>{const O=Fw(f,S??e.getRoot(),o);return r(f,b,()=>O.prev().map(R=>({container:R,offset:R.length})),C).getOrNull()},forwards:(f,b,C,S)=>{const O=Fw(f,S??e.getRoot(),o);return r(f,b,()=>O.next().map(R=>({container:R,offset:0})),C).getOrNull()}}},cm=((e,n)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+n+" value of a "+n+" node");return r(u).getOr("")},r=u=>e(u)?N.from(u.dom.nodeValue):N.none();return{get:o,getOption:r,set:(u,f)=>{if(!e(u))throw new Error("Can only set raw "+n+" value of a "+n+" node");u.dom.nodeValue=f}}})(Xs,"text"),Pf=e=>cm.get(e),Iw=e=>cm.getOption(e),Nf=(e,n)=>cm.set(e,n),ik=["td","th"],Zv=["thead","tbody","tfoot"],Lw=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],Hw=["li","dd","dt"],dr=["ul","ol","dl"],jD=["pre","script","textarea","style"],ju=e=>{let n;return o=>(n=n||Ms(e,it),$t(n,wn(o)))},lk=e=>wn(e)==="table",Gl=e=>vo(e)&&wn(e)==="br",yc=ju(Lw),ki=ju(dr),am=ju(Hw),Vw=ju(Zv),Sh=ju(ik),Y1=ju(jD),Gu=e=>{const n=[];let o=e.dom;for(;o;)n.push(K.fromDom(o)),o=o.lastChild;return n},jv=e=>{const n=zr(e,"br"),o=Rt(Gu(e).slice(-1),Gl);n.length===o.length&&Se(o,ao)},Oi=()=>{const e=K.fromTag("br");return ur(e,"data-mce-bogus","1"),e},il=e=>{gf(e),Bs(e,Oi())},uk=(e,n)=>{df(e).each(o=>{Hl(o).each(r=>{n.isBlock(wn(e))&&Gl(o)&&n.isBlock(wn(r))&&ao(o)})})},ks=nh,xh=oh,ma=Fc,X1=e=>e.insertContent(ks,{preserve_zwsp:!0}),Gv=tt,im=Ne,qu=e=>(im(e)&&(e=e.parentNode),Gv(e)&&e.hasAttribute("data-mce-caret")),ja=e=>im(e)&&xh(e.data),fa=e=>qu(e)||ja(e),zw=e=>e.firstChild!==e.lastChild||!Rn(e.firstChild),dk=(e,n)=>{var o;const a=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(ks),u=e.parentNode;if(n){const f=e.previousSibling;if(im(f)){if(fa(f))return f;if(Cr(f))return f.splitText(f.data.length-1)}u==null||u.insertBefore(a,e)}else{const f=e.nextSibling;if(im(f)){if(fa(f))return f;if(bn(f))return f.splitText(1),f}e.nextSibling?u==null||u.insertBefore(a,e.nextSibling):u==null||u.appendChild(a)}return a},ll=e=>{const n=e.container();return Ne(n)?n.data.charAt(e.offset())===ks||e.isAtStart()&&ja(n.previousSibling):!1},ql=e=>{const n=e.container();return Ne(n)?n.data.charAt(e.offset()-1)===ks||e.isAtEnd()&&ja(n.nextSibling):!1},J1=(e,n,o)=>{var r;const u=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);u.setAttribute("data-mce-caret",o?"before":"after"),u.setAttribute("data-mce-bogus","all"),u.appendChild(Oi().dom);const f=n.parentNode;return o?f==null||f.insertBefore(u,n):n.nextSibling?f==null||f.insertBefore(u,n.nextSibling):f==null||f.appendChild(u),u},bn=e=>im(e)&&e.data[0]===ks,Cr=e=>im(e)&&e.data[e.data.length-1]===ks,lm=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];zl(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},Bf=e=>e&&e.hasAttribute("data-mce-caret")?(lm(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,Qn=e=>qu(e.startContainer),um=Math.round,Kl=e=>e?{left:um(e.left),top:um(e.top),bottom:um(e.bottom),right:um(e.right),width:um(e.width),height:um(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Uw=(e,n)=>(e=Kl(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),mk=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,Ww=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,eo=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:Ww(n.top-e.bottom,e,n)},Eh=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:Ww(n.bottom-e.top,e,n),fk=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,Zw=e=>Zo(e,(n,o)=>n.fold(()=>N.some(o),r=>{const a=Math.min(o.left,r.left),u=Math.min(o.top,r.top),f=Math.max(o.right,r.right),b=Math.max(o.bottom,r.bottom);return N.some({top:u,right:f,bottom:b,left:a,width:f-a,height:b-u})}),N.none()),dm=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),a=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-a)*(o-a))},Ga=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),Th=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},Yl=(e,n)=>{if(tt(e)&&e.hasChildNodes()){const o=e.childNodes,r=Uv(n,0,o.length-1);return o[r]}else return e},ut=(e,n)=>{if(!(n<0&&tt(e)&&e.hasChildNodes()))return Yl(e,n)},jw=new RegExp("[-----------------------------------------------------------------------------------------------------------------------------------]"),Q1=e=>J(e)&&e.charCodeAt(0)>=768&&jw.test(e),Gw=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},qw=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},qv=Te,Kv=Dn,$f=Rn,_h=Ne,mm=Ha(["script","style","textarea"]),eb=Ha(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Ff=Ha(["table"]),tb=fa,qa=e=>tb(e)?!1:_h(e)?!mm(e.parentNode):eb(e)||$f(e)||Ff(e)||nb(e),gk=e=>tt(e)&&e.getAttribute("unselectable")==="true",nb=e=>!gk(e)&&Kv(e),ob=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(nb(o))return!1;if(qv(o))return!0}return!0},hk=e=>nb(e)?!Zo(mc(e.getElementsByTagName("*")),(n,o)=>n||qv(o),!1):!1,pk=e=>eb(e)||hk(e),Kw=(e,n)=>qa(e)&&ob(e,n),kh=tt,Yw=qa,Yv=rh("display","block table"),bk=rh("float","left right"),Oh=qw(kh,Yw,$o(bk)),If=$o(rh("white-space","pre pre-line pre-wrap")),Ku=Ne,sb=Rn,Xv=Yn.nodeIndex,rb=ut,Jv=e=>e?e.createRange():Yn.DOM.createRng(),Qv=e=>J(e)&&/[\r\n\t ]/.test(e),ey=e=>!!e.setStart&&!!e.setEnd,Xw=e=>{const n=e.startContainer,o=e.startOffset;if(Qv(e.toString())&&If(n.parentNode)&&Ne(n)){const r=n.data;if(Qv(r[o-1])||Qv(r[o+1]))return!0}return!1},Cc=e=>{const n=e.ownerDocument,o=Jv(n),r=n.createTextNode(Es),a=e.parentNode;a.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=Kl(o.getBoundingClientRect());return a.removeChild(r),u},fm=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,a=e.endOffset;if(n===o&&Ne(o)&&r===0&&a===1){const u=e.cloneRange();return u.setEndAfter(o),Yu(u)}else return null},Jw=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Yu=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=Kl(r[0]):o=Kl(e.getBoundingClientRect()),!ey(e)&&sb(e)&&Jw(o)?Cc(e):Jw(o)&&ey(e)&&(n=fm(e))!==null&&n!==void 0?n:o},gm=(e,n)=>{const o=Uw(e,n);return o.width=1,o.right=o.left+1,o},ty=e=>{const n=[],o=f=>{f.height!==0&&(n.length>0&&mk(f,n[n.length-1])||n.push(f))},r=(f,b)=>{const C=Jv(f.ownerDocument);if(b<f.data.length){if(Q1(f.data[b]))return;if(Q1(f.data[b-1])&&(C.setStart(f,b),C.setEnd(f,b+1),!Xw(C))){o(gm(Yu(C),!1));return}}b>0&&(C.setStart(f,b-1),C.setEnd(f,b),Xw(C)||o(gm(Yu(C),!1))),b<f.data.length&&(C.setStart(f,b),C.setEnd(f,b+1),Xw(C)||o(gm(Yu(C),!0)))},a=e.container(),u=e.offset();if(Ku(a))return r(a,u),n;if(kh(a))if(e.isAtEnd()){const f=rb(a,u);Ku(f)&&r(f,f.data.length),Oh(f)&&!sb(f)&&o(gm(Yu(f),!1))}else{const f=rb(a,u);if(Ku(f)&&r(f,0),Oh(f)&&e.isAtEnd())return o(gm(Yu(f),!1)),n;const b=rb(e.container(),e.offset()-1);Oh(b)&&!sb(b)&&(Yv(b)||Yv(f)||!Oh(f))&&o(gm(Yu(b),!1)),Oh(f)&&o(gm(Yu(f),!0))}return n},Ce=(e,n,o)=>{const r=()=>(Ku(e),n===0),a=()=>Ku(e)?n>=e.data.length:n>=e.childNodes.length,u=()=>{const O=Jv(e.ownerDocument);return O.setStart(e,n),O.setEnd(e,n),O},f=()=>(o||(o=ty(Ce(e,n))),o),b=()=>f().length>0,C=O=>O&&e===O.container()&&n===O.offset(),S=O=>rb(e,O?n-1:n);return{container:Ke(e),offset:Ke(n),toRange:u,getClientRects:f,isVisible:b,isAtStart:r,isAtEnd:a,isEqual:C,getNode:S}};Ce.fromRangeStart=e=>Ce(e.startContainer,e.startOffset),Ce.fromRangeEnd=e=>Ce(e.endContainer,e.endOffset),Ce.after=e=>Ce(e.parentNode,Xv(e)+1),Ce.before=e=>Ce(e.parentNode,Xv(e)),Ce.isAbove=(e,n)=>Kt(Tr(n.getClientRects()),Nl(e.getClientRects()),eo).getOr(!1),Ce.isBelow=(e,n)=>Kt(Nl(n.getClientRects()),Tr(e.getClientRects()),Eh).getOr(!1),Ce.isAtStart=e=>e?e.isAtStart():!1,Ce.isAtEnd=e=>e?e.isAtEnd():!1,Ce.isTextPosition=e=>e?Ne(e.container()):!1,Ce.isElementPosition=e=>!Ce.isTextPosition(e);const Ka=(e,n)=>{Ne(n)&&n.data.length===0&&e.remove(n)},hm=(e,n,o)=>{n.insertNode(o),Ka(e,o.previousSibling),Ka(e,o.nextSibling)},vk=(e,n,o)=>{const r=N.from(o.firstChild),a=N.from(o.lastChild);n.insertNode(o),r.each(u=>Ka(e,u.previousSibling)),a.each(u=>Ka(e,u.nextSibling))},Ah=(e,n,o)=>{$s(o)?vk(e,n,o):hm(e,n,o)},ga=Ne,Lf=zl,Qw=Yn.nodeIndex,eS=e=>{const n=e.parentNode;return Lf(n)?eS(n):n},wr=e=>e?Rc(e.childNodes,(n,o)=>(Lf(o)&&o.nodeName!=="BR"?n=n.concat(wr(o)):n.push(o),n),[]):[],cb=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&ga(o);)n+=o.data.length;return n},tS=e=>n=>e===n,yk=e=>{let n,o;n=wr(eS(e)),o=Ao(n,tS(e),e),n=n.slice(0,o+1);const r=Rc(n,(a,u,f)=>(ga(u)&&ga(n[f-1])&&a++,a),0);return n=o1(n,Ha([e.nodeName])),o=Ao(n,tS(e),e),o-r},nS=e=>(ga(e)?"text()":e.nodeName.toLowerCase())+"["+yk(e)+"]",Ck=(e,n,o)=>{const r=[];for(let a=n.parentNode;a&&a!==e;a=a.parentNode)r.push(a);return r},oS=(e,n)=>{let o=[],r=n.container(),a=n.offset(),u;if(ga(r))u=cb(r,a);else{const b=r.childNodes;a>=b.length?(u="after",a=b.length-1):u="before",r=b[a]}o.push(nS(r));let f=Ck(e,r);return f=o1(f,$o(zl)),o=o.concat(Gi(f,b=>nS(b))),o.reverse().join("/")+","+u},wk=(e,n,o)=>{let r=wr(e);return r=o1(r,(a,u)=>!ga(a)||!ga(r[u-1])),r=o1(r,Ha([n])),r[o]},Sk=(e,n)=>{let o=e,r=0;for(;ga(o);){const a=o.data.length;if(n>=r&&n<=r+a){e=o,n=n-r;break}if(!ga(o.nextSibling)){e=o,n=a;break}r+=a,o=o.nextSibling}return ga(e)&&n>e.data.length&&(n=e.data.length),Ce(e,n)},sS=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),a=o.length>1?o[1]:"before",u=Rc(r,(f,b)=>{const C=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(b);return C?(C[1]==="text()"&&(C[1]="#text"),wk(f,C[1],parseInt(C[2],10))):null},e);if(!u)return null;if(!ga(u)&&u.parentNode){let f;return a==="after"?f=Qw(u)+1:f=Qw(u),Ce(u.parentNode,f)}return Sk(u,parseInt(a,10))},Hf=Dn,xk=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let a=n.previousSibling;a&&Ne(a);a=a.previousSibling)r+=e(a.data).length;return r},rS=(e,n,o,r,a)=>{const u=a?r.startContainer:r.endContainer;let f=a?r.startOffset:r.endOffset;const b=[],C=e.getRoot();if(Ne(u))b.push(o?xk(n,u,f):f);else{let S=0;const O=u.childNodes;f>=O.length&&O.length&&(S=1,f=Math.max(0,O.length-1)),b.push(e.nodeIndex(O[f],o)+S)}for(let S=u;S&&S!==C;S=S.parentNode)b.push(e.nodeIndex(S,o));return b},Ek=(e,n,o,r)=>{const a=n.dom,u=rS(a,e,o,r,!0),f=n.isForward(),b=Qn(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:u,forward:f,...b};{const C=rS(a,e,o,r,!1);return{start:u,end:C,forward:f,...b}}},xo=(e,n,o)=>{let r=0;return Ve.each(e.select(n),a=>{if(a.getAttribute("data-mce-bogus")!=="all"){if(a===o)return!1;r++;return}}),r},ny=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(tt(o)&&o.nodeName==="TR"){const a=o.childNodes;o=a[Math.min(n?r:r-1,a.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},cS=e=>(ny(e,!0),ny(e,!1),e),aS=(e,n)=>{if(tt(e)&&(e=Yl(e,n),Hf(e)))return e;if(fa(e)){Ne(e)&&qu(e)&&(e=e.parentNode);let o=e.previousSibling;if(Hf(o)||(o=e.nextSibling,Hf(o)))return o}},oy=e=>aS(e.startContainer,e.startOffset)||aS(e.endContainer,e.endOffset),Os=(e,n,o)=>{const r=o.getNode(),a=o.getRng();if(r.nodeName==="IMG"||Hf(r)){const f=r.nodeName;return{name:f,index:xo(o.dom,f,r)}}const u=oy(a);if(u){const f=u.tagName;return{name:f,index:xo(o.dom,f,u)}}return Ek(e,o,n,a)},zc=e=>{const n=e.getRng();return{start:oS(e.dom.getRoot(),Ce.fromRangeStart(n)),end:oS(e.dom.getRoot(),Ce.fromRangeEnd(n)),forward:e.isForward()}},iS=e=>({rng:e.getRng(),forward:e.isForward()}),sy=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},ry=(e,n)=>{const o=e.dom;let r=e.getRng();const a=o.uniqueId(),u=e.isCollapsed(),f=e.getNode(),b=f.nodeName,C=e.isForward();if(b==="IMG")return{name:b,index:xo(o,b,f)};const S=cS(r.cloneRange());if(!u){S.collapse(!1);const R=sy(o,a+"_end",n);Ah(o,S,R)}r=cS(r),r.collapse(!0);const O=sy(o,a+"_start",n);return Ah(o,r,O),e.moveToBookmark({id:a,keep:!0,forward:C}),{id:a,forward:C}},Tk=(e,n,o=!1)=>n===2?Os(ma,o,e):n===3?zc(e):n?iS(e):ry(e,!1),ab=Be(Os,Wo,!0),lS=e=>{const n=u=>u(e),o=Ke(e),r=()=>a,a={tag:!0,inner:e,fold:(u,f)=>f(e),isValue:it,isError:De,map:u=>hs.value(u(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>N.some(e)};return a},Rh=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,a)=>r(e),isValue:De,isError:it,map:n,mapError:r=>hs.error(r(e)),bind:n,exists:De,forall:it,getOr:Wo,or:Wo,getOrThunk:cs,orThunk:cs,getOrDie:uc(String(e)),each:Ot,toOptional:N.none};return o},hs={value:lS,error:Rh,fromOption:(e,n)=>e.fold(()=>Rh(n),lS)},ha={generate:e=>{if(!yn(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return Se(e,(r,a)=>{const u=Ir(r);if(u.length!==1)throw new Error("one and only one name per case");const f=u[0],b=r[f];if(o[f]!==void 0)throw new Error("duplicate key detected:"+f);if(f==="cata")throw new Error("cannot have a case named cata (sorry)");if(!yn(b))throw new Error("case arguments must be an array");n.push(f),o[f]=(...C)=>{const S=C.length;if(S!==b.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+b.length+" ("+b+"), got "+S);return{fold:(...R)=>{if(R.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+R.length);return R[a].apply(null,C)},match:R=>{const D=Ir(R);if(n.length!==D.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+D.join(","));if(!ir(n,z=>zt(D,z)))throw new Error("Not all branches were specified when using match. Specified: "+D.join(", ")+`
Required: `+n.join(", "));return R[f].apply(null,C)},log:R=>{console.log(R,{constructors:n,constructor:f,params:C})}}}}),o}};ha.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const go=e=>{const n=[],o=[];return Se(e,r=>{r.fold(a=>{n.push(a)},a=>{o.push(a)})}),{errors:n,values:o}},ul=e=>e.type==="inline-command"||e.type==="inline-format",Vf=e=>e.type==="block-command"||e.type==="block-format",cy=(e,n)=>(e.type==="block-command"||e.type==="block-format")&&e.trigger===n,Dh=e=>{var n;const o=a=>hs.error({message:a,pattern:e}),r=(a,u,f)=>{if(e.format!==void 0){let b;if(yn(e.format)){if(!ir(e.format,J))return o(a+" pattern has non-string items in the `format` array");b=e.format}else if(J(e.format))b=[e.format];else return o(a+" pattern has non-string `format` parameter");return hs.value(u(b))}else return e.cmd!==void 0?J(e.cmd)?hs.value(f(e.cmd,e.value)):o(a+" pattern has non-string `cmd` parameter"):o(a+" pattern is missing both `format` and `cmd` parameters")};if(!hn(e))return o("Raw pattern is not an object");if(!J(e.start))return o("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!J(e.end))return o("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return o("Inline pattern has empty `start` and `end` parameters");let a=e.start,u=e.end;return u.length===0&&(u=a,a=""),r("Inline",f=>({type:"inline-format",start:a,end:u,format:f}),(f,b)=>({type:"inline-command",start:a,end:u,cmd:f,value:b}))}else{if(e.replacement!==void 0)return J(e.replacement)?e.start.length===0?o("Replacement pattern has empty `start` parameter"):hs.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):o("Replacement pattern has non-string `replacement` parameter");{const a=(n=e.trigger)!==null&&n!==void 0?n:"space";return e.start.length===0?o("Block pattern has empty `start` parameter"):r("Block",u=>({type:"block-format",start:e.start,format:u[0],trigger:a}),(u,f)=>({type:"block-command",start:e.start,cmd:u,value:f,trigger:a}))}}},dS=e=>Rt(e,Vf),Xu=e=>Rt(e,ul),mr=(e,n)=>({inlinePatterns:Xu(e),blockPatterns:dS(e),dynamicPatternsLookup:n}),dl=(e,n)=>({...e,blockPatterns:Rt(e.blockPatterns,o=>cy(o,n))}),mS=e=>{const n=go(Gt(e,Dh));return Se(n.errors,o=>console.error(o.message,o.pattern)),n.values},kk=e=>n=>{const o=e(n);return mS(o)},ay=Ki().deviceType,ib=ay.isTouch(),iy=Yn.DOM,ly=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return Zo(n,(o,r)=>{const a=r.split("="),u=a[0],f=a.length>1?a[1]:u;return o[Ad(u)]=Ad(f),o},{})},lb=e=>Bo(e,RegExp),dt=e=>n=>n.options.get(e),Mh=e=>J(e)||hn(e),uy=(e,n="")=>o=>{const r=J(o);if(r)if(o.indexOf("=")!==-1){const a=ly(o);return{value:bo(a,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},fS=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:uy(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:uy(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=J(o)&&Jn(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=zt(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>an(o)?{valid:!0,value:o}:J(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||J(o)||Vn(o,J);return r?J(o)?{value:Gt(o.split(","),Ad),valid:r}:yn(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:vm(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=J(o)||Vn(o,J);return r?{value:yn(o)?o:Gt(o.split(","),Ad),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=an(o)||J(o);return r?o===!1||ay.isiPhone()||ay.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!ib}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"string"}),n("service_message",{processor:"string"}),n("theme",{processor:o=>o===!1||J(o)||Q(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||J(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("readonly",{processor:"boolean",default:!1}),n("editable_root",{processor:"boolean",default:!0}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("allow_mathml_annotation_encodings",{processor:o=>{const r=Vn(o,J);return r?{value:o,valid:r}:{valid:!1,message:"Must be an array of strings."}},default:[]}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean",default:!0}),n("pad_empty_with_br",{processor:"boolean",default:!1}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:Mh}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:Mh}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:Mh}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:Mh}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>J(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("license_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>Vn(o,hn)||o===!1?{value:mS(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),n("text_patterns_lookup",{processor:o=>Q(o)?{value:kk(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>Vn(o,lb)?{value:o,valid:!0}:lb(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!0}),n("xss_sanitization",{processor:"boolean",default:!0}),n("details_initial_state",{processor:o=>{const r=zt(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("details_serialized_state",{processor:o=>{const r=zt(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("init_content_sync",{processor:"boolean",default:!1}),n("newdocument_content",{processor:"string",default:""}),n("sandbox_iframes",{processor:"boolean",default:!0}),n("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),n("convert_unsafe_embeds",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:_i.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:iy.getAttrib(e.getElement(),"placeholder")})})},Ok=dt("iframe_attrs"),fr=dt("doctype"),gS=dt("document_base_url"),Ju=dt("body_id"),hS=dt("body_class"),dy=dt("content_security_policy"),pS=dt("br_in_pre"),gr=dt("forced_root_block"),Qu=dt("forced_root_block_attrs"),my=dt("newline_behavior"),pm=dt("br_newline_selector"),Ak=dt("no_newline_selector"),ps=dt("keep_styles"),bs=dt("end_container_on_empty_block"),or=dt("automatic_uploads"),vs=dt("images_reuse_filename"),Nn=dt("images_replace_blob_uris"),is=dt("icons"),ub=dt("icons_url"),fy=dt("images_upload_url"),gy=dt("images_upload_base_path"),hy=dt("images_upload_credentials"),bS=dt("images_upload_handler"),vS=dt("content_css_cors"),Ph=dt("referrer_policy"),db=dt("language"),Nh=dt("language_url"),yS=dt("indent_use_margin"),GD=dt("indentation"),bm=dt("content_css"),wc=dt("content_style"),Rk=dt("font_css"),Dk=dt("directionality"),pa=dt("inline_boundaries_selector"),zf=dt("object_resizing"),Uf=dt("resize_img_proportional"),ml=dt("placeholder"),Dr=dt("event_root"),py=dt("service_message"),ed=dt("theme"),CS=dt("theme_url"),mb=dt("model"),by=dt("model_url"),Bh=dt("inline_boundaries"),fb=dt("formats"),wS=dt("preview_styles"),SS=dt("format_empty_lines"),xS=dt("format_noneditable_selector"),$h=dt("custom_ui_selector"),vm=dt("inline"),Fh=dt("hidden_input"),Mk=dt("submit_patch"),vy=dt("add_form_submit_trigger"),Pk=dt("add_unload_trigger"),gb=dt("custom_undo_redo_levels"),Nk=dt("disable_nodechange"),ES=dt("readonly"),Bk=dt("editable_root"),TS=dt("content_css_cors"),Ih=dt("plugins"),_S=dt("external_plugins"),Zr=dt("block_unsupported_drop"),yy=dt("visual"),kS=dt("visual_table_class"),Cy=dt("visual_anchor_class"),Lh=dt("iframe_aria_text"),$k=dt("setup"),Fk=dt("init_instance_callback"),Ik=dt("urlconverter_callback"),hb=dt("auto_focus"),OS=dt("browser_spellcheck"),wy=dt("protect"),Sy=dt("paste_block_drop"),Hh=dt("paste_data_images"),xy=dt("paste_preprocess"),AS=dt("paste_postprocess"),RS=dt("newdocument_content"),DS=dt("paste_webkit_styles"),Lk=dt("paste_remove_styles_if_webkit"),MS=dt("paste_merge_formats"),Ey=dt("smart_paste"),PS=dt("paste_as_text"),td=dt("paste_tab_spaces"),NS=dt("allow_html_data_urls"),Hk=dt("text_patterns"),Vk=dt("text_patterns_lookup"),pb=dt("noneditable_class"),Ya=dt("editable_class"),bb=dt("noneditable_regexp"),vb=dt("preserve_cdata"),Ty=dt("highlight_on_focus"),BS=dt("xss_sanitization"),ls=dt("init_content_sync"),$S=e=>e.options.isSet("text_patterns_lookup"),Wf=e=>Ve.explode(e.options.get("font_size_style_values")),nd=e=>Ve.explode(e.options.get("font_size_classes")),yb=e=>e.options.get("encoding")==="xml",FS=e=>Ve.explode(e.options.get("images_file_types")),zk=dt("table_tab_navigation"),Uk=dt("details_initial_state"),IS=dt("details_serialized_state"),Vh=dt("sandbox_iframes"),_y=e=>e.options.get("sandbox_iframes_exclusions"),Wk=dt("convert_unsafe_embeds"),Zf=dt("license_key"),LS=dt("api_key"),HS=tt,VS=Ne,ky=e=>{const n=e.parentNode;n&&n.removeChild(e)},Cb=e=>{const n=ma(e);return{count:e.length-n.length,text:n}},zS=e=>{let n;for(;(n=e.data.lastIndexOf(ks))!==-1;)e.deleteData(n,1)},od=(e,n)=>(ym(e),n),Zk=(e,n)=>{const o=Cb(e.data.substr(0,n.offset())),r=Cb(e.data.substr(n.offset()));return(o.text+r.text).length>0?(zS(e),Ce(e,n.offset()-o.count)):n},US=(e,n)=>{const o=n.container(),r=N_(mc(o.childNodes),e).map(a=>a<n.offset()?Ce(o,n.offset()-1):n).getOr(n);return ym(e),r},WS=(e,n)=>VS(e)&&n.container()===e?Zk(e,n):od(e,n),wb=(e,n)=>n.container()===e.parentNode?US(e,n):od(e,n),jk=(e,n)=>Ce.isTextPosition(n)?WS(e,n):wb(e,n),ym=e=>{HS(e)&&fa(e)&&(zw(e)?e.removeAttribute("data-mce-caret"):ky(e)),VS(e)&&(zS(e),e.data.length===0&&ky(e))},Sb=Dn,zh=yr,ZS=_1,jf="*[contentEditable=false],video,audio,embed,object",Gf=(e,n,o)=>{const r=Uw(n.getBoundingClientRect(),o);let a,u;if(e.tagName==="BODY"){const b=e.ownerDocument.documentElement;a=e.scrollLeft||b.scrollLeft,u=e.scrollTop||b.scrollTop}else{const b=e.getBoundingClientRect();a=e.scrollLeft-b.left,u=e.scrollTop-b.top}r.left+=a,r.right+=a,r.top+=u,r.bottom+=u,r.width=1;let f=n.offsetWidth-n.clientWidth;return f>0&&(o&&(f*=-1),r.left+=f,r.right+=f),r},Gk=e=>{var n,o;const r=zr(K.fromDom(e),jf);for(let a=0;a<r.length;a++){const u=r[a].dom;let f=u.previousSibling;if(Cr(f)){const b=f.data;b.length===1?(n=f.parentNode)===null||n===void 0||n.removeChild(f):f.deleteData(b.length-1,1)}f=u.nextSibling,bn(f)&&(f.data.length===1?(o=f.parentNode)===null||o===void 0||o.removeChild(f):f.deleteData(0,1))}},jS=(e,n,o,r)=>{const a=Qs();let u,f;const b=gr(e),C=e.dom,S=(H,Z)=>{let Y;if(O(),ZS(Z))return null;if(o(Z)){const re=J1(b,Z,H),ce=Gf(n,Z,H);C.setStyle(re,"top",ce.top),C.setStyle(re,"caret-color","transparent"),f=re;const ie=C.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});C.setStyles(ie,{...ce}),C.add(n,ie),a.set({caret:ie,element:Z,before:H}),H&&C.addClass(ie,"mce-visual-caret-before"),R(),Y=Z.ownerDocument.createRange(),Y.setStart(re,0),Y.setEnd(re,0)}else return f=dk(Z,H),Y=Z.ownerDocument.createRange(),Cm(f.nextSibling)?(Y.setStart(f,0),Y.setEnd(f,0)):(Y.setStart(f,1),Y.setEnd(f,1)),Y;return Y},O=()=>{Gk(n),f&&(ym(f),f=null),a.on(H=>{C.remove(H.caret),a.clear()}),u&&(clearInterval(u),u=void 0)},R=()=>{u=setInterval(()=>{a.on(H=>{r()?C.toggleClass(H.caret,"mce-visual-caret-hidden"):C.addClass(H.caret,"mce-visual-caret-hidden")})},500)};return{show:S,hide:O,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{a.on(H=>{const Z=Gf(n,H.element,H.before);C.setStyles(H.caret,{...Z})})},destroy:()=>clearInterval(u)}},qk=()=>qt.browser.isFirefox(),Cm=e=>Sb(e)||zh(e),qf=e=>(Cm(e)||yi(e)&&qk())&&Yg(K.fromDom(e)).exists(la),Oy=Te,Ay=Dn,Kk=yr,Ry=rh("display","block table table-cell table-row table-caption list-item"),GS=fa,qS=qu,Kf=tt,KS=Ne,xb=qa,sd=e=>e>0,Xl=e=>e<0,Uh=(e,n)=>{let o;for(;o=e(n);)if(!qS(o))return o;return null},Wh=(e,n,o,r,a)=>{const u=new xs(e,r),f=Ay(e)||qS(e);let b;if(Xl(n)){if(f&&(b=Uh(u.prev.bind(u),!0),o(b)))return b;for(;b=Uh(u.prev.bind(u),a);)if(o(b))return b}if(sd(n)){if(f&&(b=Uh(u.next.bind(u),!0),o(b)))return b;for(;b=Uh(u.next.bind(u),a);)if(o(b))return b}return null},Yk=(e,n)=>{const o=a=>Oy(a.dom),r=a=>a.dom===n;return To(K.fromDom(e),o,r).map(a=>a.dom).getOr(n)},Sc=(e,n)=>{for(;e&&e!==n;){if(Ry(e))return e;e=e.parentNode}return null},Ai=(e,n,o)=>Sc(e.container(),o)===Sc(n.container(),o),Dy=(e,n)=>{if(!n)return N.none();const o=n.container(),r=n.offset();return Kf(o)?N.from(o.childNodes[r+e]):N.none()},Xk=(e,n)=>{var o;const a=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(a.setStartBefore(n),a.setEndBefore(n)):(a.setStartAfter(n),a.setEndAfter(n)),a},qD=(e,n,o)=>Sc(n,e)===Sc(o,e),rd=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let a=o;for(;a&&a!==n;){let u=a[r];if(u&&GS(u)&&(u=u[r]),Ay(u)||Kk(u)){if(qD(n,u,a))return u;break}if(xb(u))break;a=a.parentNode}return null},Yf=Be(Xk,!0),sr=Be(Xk,!1),My=(e,n,o)=>{let r;const a=Be(rd,!0,n),u=Be(rd,!1,n),f=o.startContainer,b=o.startOffset;if(qu(f)){const C=KS(f)?f.parentNode:f,S=C.getAttribute("data-mce-caret");if(S==="before"&&(r=C.nextSibling,qf(r)))return Yf(r);if(S==="after"&&(r=C.previousSibling,qf(r)))return sr(r)}if(!o.collapsed)return o;if(Ne(f)){if(GS(f)){if(e===1){if(r=u(f),r)return Yf(r);if(r=a(f),r)return sr(r)}if(e===-1){if(r=a(f),r)return sr(r);if(r=u(f),r)return Yf(r)}return o}if(Cr(f)&&b>=f.data.length-1)return e===1&&(r=u(f),r)?Yf(r):o;if(bn(f)&&b<=1)return e===-1&&(r=a(f),r)?sr(r):o;if(b===f.data.length)return r=u(f),r?Yf(r):o;if(b===0)return r=a(f),r?sr(r):o}return o},Eb=(e,n)=>Dy(e?0:-1,n).filter(Ay),wm=(e,n,o)=>{const r=My(e,n,o);return e===-1?Ce.fromRangeStart(r):Ce.fromRangeEnd(r)},Zh=e=>N.from(e.getNode()).map(K.fromDom),Jk=e=>N.from(e.getNode(!0)).map(K.fromDom),Py=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},jh=(e,n)=>{const o=Ai(e,n);return!o&&Rn(e.getNode())?!0:o};var rr;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(rr||(rr={}));const Ny=Dn,ba=Ne,By=tt,Xf=Rn,Jf=qa,$y=pk,Jl=Kw,Fy=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},Iy=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,Ly=(e,n)=>{if(sd(e)){if(Jf(n.previousSibling)&&!ba(n.previousSibling))return Ce.before(n);if(ba(n))return Ce(n,0)}if(Xl(e)){if(Jf(n.nextSibling)&&!ba(n.nextSibling))return Ce.after(n);if(ba(n))return Ce(n,n.data.length)}return Xl(e)?Xf(n)?Ce.before(n):Ce.after(n):Ce.before(n)},fl=(e,n)=>{const o=n.nextSibling;return o&&Jf(o)?ba(o)?Ce(o,0):Ce.before(o):Tb(rr.Forwards,Ce.after(n),e)},Tb=(e,n,o)=>{let r,a,u,f;if(!By(o)||!n)return null;if(n.isEqual(Ce.after(o))&&o.lastChild){if(f=Ce.after(o.lastChild),Xl(e)&&Jf(o.lastChild)&&By(o.lastChild))return Xf(o.lastChild)?Ce.before(o.lastChild):f}else f=n;const b=f.container();let C=f.offset();if(ba(b)){if(Xl(e)&&C>0)return Ce(b,--C);if(sd(e)&&C<b.length)return Ce(b,++C);r=b}else{if(Xl(e)&&C>0&&(a=Iy(b,C-1),Jf(a)))return!$y(a)&&(u=Wh(a,e,Jl,a),u)?ba(u)?Ce(u,u.data.length):Ce.after(u):ba(a)?Ce(a,a.data.length):Ce.before(a);if(sd(e)&&C<b.childNodes.length&&(a=Iy(b,C),Jf(a)))return Xf(a)?fl(o,a):!$y(a)&&(u=Wh(a,e,Jl,a),u)?ba(u)?Ce(u,0):Ce.before(u):ba(a)?Ce(a,0):Ce.after(a);r=a||f.getNode()}if(r&&(sd(e)&&f.isAtEnd()||Xl(e)&&f.isAtStart())&&(r=Wh(r,e,it,o,!0),Jl(r,o)))return Ly(e,r);a=r&&Wh(r,e,Jl,o);const S=Ra(Rt(Fy(b,o),Ny));return S&&(!a||!S.contains(a))?(sd(e)?f=Ce.after(S):f=Ce.before(S),f):a?Ly(e,a):null},hr=e=>({next:n=>Tb(rr.Forwards,n,e),prev:n=>Tb(rr.Backwards,n,e)}),YS=(e,n,o)=>{const r=e?Ce.before(o):Ce.after(o);return Uc(e,n,r)},Hy=e=>Rn(e)?Ce.before(e):Ce.after(e),Vy=e=>Ce.isTextPosition(e)?e.offset()===0:qa(e.getNode()),XS=e=>{if(Ce.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return qa(e.getNode(!0))},zy=(e,n)=>!Ce.isTextPosition(e)&&!Ce.isTextPosition(n)&&e.getNode()===n.getNode(!0),JS=e=>!Ce.isTextPosition(e)&&Rn(e.getNode()),QS=(e,n,o)=>e?!zy(n,o)&&!JS(n)&&XS(n)&&Vy(o):!zy(o,n)&&Vy(n)&&XS(o),Uc=(e,n,o)=>{const r=hr(n);return N.from(e?r.next(o):r.prev(o))},cd=(e,n,o)=>Uc(e,n,o).bind(r=>Ai(o,r,n)&&QS(e,o,r)?Uc(e,n,r):N.some(r)),ex=(e,n,o,r)=>cd(e,n,o).bind(a=>r(a)?ex(e,n,a,r):N.some(a)),Sm=(e,n)=>{const o=e?n.firstChild:n.lastChild;return Ne(o)?N.some(Ce(o,e?0:o.data.length)):o?qa(o)?N.some(e?Ce.before(o):Hy(o)):YS(e,n,o):N.none()},Mr=Be(Uc,!0),xc=Be(Uc,!1),Pr=Be(Sm,!0),Wc=Be(Sm,!1),_b="_mce_caret",Zc=e=>tt(e)&&e.id===_b,xm=(e,n)=>{let o=n;for(;o&&o!==e;){if(Zc(o))return o;o=o.parentNode}return null},tx=e=>J(e.start),KD=e=>$t(e,"rng"),Qk=e=>$t(e,"id"),Uy=e=>$t(e,"name"),e4=e=>Ve.isArray(e.start),kb=e=>!Uy(e)&&an(e.forward)?e.forward:!0,cr=(e,n)=>(tt(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),Gh=(e,n)=>{const o=N.from(sS(e.getRoot(),n.start)),r=N.from(sS(e.getRoot(),n.end));return Kt(o,r,(a,u)=>{const f=e.createRng();return f.setStart(a.container(),a.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:kb(n)}})},qh=(e,n)=>{var o;const a=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(ks);e.appendChild(a),n.setStart(a,0),n.setEnd(a,0)},ad=e=>!e.hasChildNodes(),Wy=(e,n)=>Wc(e).fold(De,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),Ob=(e,n,o)=>ad(n)&&xm(e,n)?(qh(n,o),!0):!1,Zy=(e,n,o,r)=>{const a=o[n?"start":"end"],u=e.getRoot();if(a){let f=u,b=a[0];for(let C=a.length-1;f&&C>=1;C--){const S=f.childNodes;if(Ob(u,f,r))return!0;if(a[C]>S.length-1)return Ob(u,f,r)?!0:Wy(f,r);f=S[a[C]]}Ne(f)&&(b=Math.min(a[0],f.data.length)),tt(f)&&(b=Math.min(a[0],f.childNodes.length)),n?r.setStart(f,b):r.setEnd(f,b)}return!0},Ab=e=>Ne(e)&&e.data.length>0,jy=(e,n,o)=>{const r=e.get(o.id+"_"+n),a=r==null?void 0:r.parentNode,u=o.keep;if(r&&a){let f,b;if(n==="start"?u?r.hasChildNodes()?(f=r.firstChild,b=1):Ab(r.nextSibling)?(f=r.nextSibling,b=0):Ab(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=a,b=e.nodeIndex(r)+1):(f=a,b=e.nodeIndex(r)):u?r.hasChildNodes()?(f=r.firstChild,b=1):Ab(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=a,b=e.nodeIndex(r)):(f=a,b=e.nodeIndex(r)),!u){const C=r.previousSibling,S=r.nextSibling;Ve.each(Ve.grep(r.childNodes),R=>{Ne(R)&&(R.data=R.data.replace(/\uFEFF/g,""))});let O;for(;O=e.get(o.id+"_"+n);)e.remove(O,!0);if(Ne(S)&&Ne(C)&&!qt.browser.isOpera()){const R=C.data.length;C.appendData(S.data),e.remove(S),f=C,b=R}}return N.some(Ce(f,b))}else return N.none()},Qf=(e,n)=>{const o=e.createRng();return Zy(e,!0,n,o)&&Zy(e,!1,n,o)?N.some({range:o,forward:kb(n)}):N.none()},Ql=(e,n)=>{const o=jy(e,"start",n),r=jy(e,"end",n);return Kt(o,r.or(o),(a,u)=>{const f=e.createRng();return f.setStart(cr(e,a.container()),a.offset()),f.setEnd(cr(e,u.container()),u.offset()),{range:f,forward:kb(n)}})},Kh=(e,n)=>N.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),Em=(e,n)=>{const o=e.dom;if(n){if(e4(n))return Qf(o,n);if(tx(n))return Gh(o,n);if(Qk(n))return Ql(o,n);if(Uy(n))return Kh(o,n);if(KD(n))return N.some({range:n.rng,forward:kb(n)})}return N.none()},eu=(e,n,o)=>Tk(e,n,o),nx=(e,n)=>{Em(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},Ec=e=>tt(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",id=(e=>n=>e===n)(Es),Tm=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,Rb=e=>!Tm(e)&&!id(e)&&!oh(e),Db=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},t4=e=>oa(e,n=>{const o=Th(n);return o?[K.fromDom(o)]:[]}),n4=e=>Db(e).length>1,ox=e=>Rt(t4(e),Sh),sx=e=>zr(e,"td[data-mce-selected],th[data-mce-selected]"),_m=(e,n)=>{const o=sx(n);return o.length>0?o:ox(e)},eg=e=>_m(Db(e.selection.getSel()),K.fromDom(e.getBody())),Yh=(e,n)=>Ns(e,"table",n),o4=e=>{const n=e.startContainer,o=e.startOffset;return Ne(n)?o===0?N.some(K.fromDom(n)):N.none():N.from(n.childNodes[o]).map(K.fromDom)},rx=e=>{const n=e.endContainer,o=e.endOffset;return Ne(n)?o===n.data.length?N.some(K.fromDom(n)):N.none():N.from(n.childNodes[o-1]).map(K.fromDom)},Xh=e=>Vr(e).fold(Ke([e]),n=>[e].concat(Xh(n))),Mb=e=>df(e).fold(Ke([e]),n=>wn(n)==="br"?Hl(n).map(o=>[e].concat(Mb(o))).getOr([]):[e].concat(Mb(n))),qy=(e,n)=>Kt(o4(n),rx(n),(o,r)=>{const a=as(Xh(e),Be(Sn,o)),u=as(Mb(e),Be(Sn,r));return a.isSome()&&u.isSome()}).getOr(!1),cx=(e,n,o,r)=>{const a=o,u=new xs(o,a),f=Eo(e.schema.getMoveCaretBeforeOnEnterElements(),(C,S)=>!zt(["td","th","table"],S.toLowerCase()));let b=o;do{if(Ne(b)&&Ve.trim(b.data).length!==0){r?n.setStart(b,0):n.setEnd(b,b.data.length);return}if(f[b.nodeName]){r?n.setStartBefore(b):b.nodeName==="BR"?n.setEndBefore(b):n.setEndAfter(b);return}}while(b=r?u.next():u.prev());a.nodeName==="BODY"&&(r?n.setStart(a,0):n.setEnd(a,a.childNodes.length))},Pb=e=>{const n=e.selection.getSel();return Oe(n)&&n.rangeCount>0},tg=(e,n)=>{const o=eg(e);o.length>0?Se(o,r=>{const a=r.dom,u=e.dom.createRng();u.setStartBefore(a),u.setEndAfter(a),n(u,!0)}):n(e.selection.getRng(),!1)},ax=(e,n,o)=>{const r=ry(e,n);o(r),e.moveToBookmark(r)},km=e=>lc(e==null?void 0:e.nodeType),Cn=e=>tt(e)&&!Ec(e)&&!Zc(e)&&!zl(e),tu=(e,n)=>{if(Cn(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},ld=(e,n,o)=>{const{selection:r,dom:a}=e,u=r.getNode(),f=Dn(u);ax(r,!0,()=>{n()}),f&&Dn(u)&&a.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&Nb(a,r)},Nb=(e,n)=>{var o,r;const a=n.getRng(),{startContainer:u,startOffset:f}=a,b=n.getNode();if(!tu(e,b)&&tt(u)){const C=u.childNodes,S=e.getRoot();let O;if(f<C.length){const R=C[f];O=new xs(R,(o=e.getParent(R,e.isBlock))!==null&&o!==void 0?o:S)}else{const R=C[C.length-1];O=new xs(R,(r=e.getParent(R,e.isBlock))!==null&&r!==void 0?r:S),O.next(!0)}for(let R=O.current();R;R=O.next()){if(e.getContentEditable(R)==="false")return;if(Ne(R)&&!Qh(R)){a.setStart(R,0),n.setRng(a);return}}}},Ky=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=e[r];e;e=e[r])if(tt(e)||!Qh(e))return e}},Jh=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||Gd(e,n),Om=(e,n,o)=>e.schema.isValidChild(n,o),Qh=(e,n=!1)=>{if(Oe(e)&&Ne(e)){const o=n?e.data.replace(/ /g,""):e.data;return Fa(o)}else return!1},Bb=e=>Oe(e)&&Ne(e)&&e.length===0,ix=(e,n)=>{const o="[data-mce-cef-wrappable]",r=xS(e),a=Dc(r)?o:`${o},${r}`;return Bc(K.fromDom(n),a)},s4=(e,n)=>{const o=e.dom;return Cn(n)&&o.getContentEditable(n)==="false"&&ix(e,n)&&o.select('[contenteditable="true"]',n).length===0},Am=(e,n)=>Q(e)?e(n):(Oe(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),$b=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),ud=(e,n)=>{if(An(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=bh(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},Yy=(e,n,o)=>{const r=e.getStyle(n,o);return ud(r,o)},Xy=(e,n)=>{let o;return e.getParent(n,r=>tt(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},Rm=(e,n,o)=>e.getParents(n,o,e.getRoot()),Jy=(e,n,o)=>{const r=e.formatter.get(n);return Oe(r)&&mo(r,o)},lx=(e,n)=>Jy(e,n,r=>{const a=u=>Q(u)||u.length>1&&u.charAt(0)==="%";return mo(["styles","attributes"],u=>bo(r,u).exists(f=>{const b=yn(f)?f:nf(f);return mo(b,a)}))}),ux=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],a=u=>Eo(u,(f,b)=>mo(r,C=>C===b));return Jy(e,n,u=>{const f=a(u);return Jy(e,o,b=>{const C=a(b);return Od(f,C)})})},gl=e=>fc(e,"block"),dx=e=>gl(e)&&e.wrapper===!0,Fb=e=>gl(e)&&e.wrapper!==!0,va=e=>fc(e,"selector"),Hs=e=>fc(e,"inline"),r4=e=>va(e)&&Hs(e)&&Go(bo(e,"mixed"),!0),Ri=e=>va(e)&&e.expand!==!1&&!Hs(e),c4=e=>{const n=[];let o=e;for(;o;){if(Ne(o)&&o.data!==ks||o.childNodes.length>1)return[];tt(o)&&n.push(o),o=o.firstChild}return n},mx=e=>c4(e).length>0,ep=e=>Zc(e.dom)&&mx(e.dom),ng=Ec,fx=Rm,gx=Qh,YD=Jh,XD=e=>Rn(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,hx=(e,n)=>{let o=n;for(;o;){if(tt(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},nt=(e,n,o,r)=>{const a=n.data;if(e){for(let u=o;u>0;u--)if(r(a.charAt(u-1)))return u}else for(let u=o;u<a.length;u++)if(r(a.charAt(u)))return u;return-1},Vs=(e,n,o)=>nt(e,n,o,r=>id(r)||Tm(r)),Ib=(e,n,o)=>nt(e,n,o,Rb),zs=(e,n,o,r,a,u)=>{let f;const b=e.getParent(o,e.isBlock)||n,C=(O,R,D)=>{const I=rm(e),z=a?I.backwards:I.forwards;return N.from(z(O,R,(H,Z)=>ng(H.parentNode)?-1:(f=H,D(a,H,Z)),b))};return C(o,r,Vs).bind(O=>u?C(O.container,O.offset+(a?-1:0),Ib):N.some(O)).orThunk(()=>f?N.some({container:f,offset:a?0:f.length}):N.none())},ya=(e,n,o,r,a)=>{const u=r[a];Ne(r)&&Dc(r.data)&&u&&(r=u);const f=fx(e,r);for(let b=0;b<f.length;b++)for(let C=0;C<n.length;C++){const S=n[C];if(!(Oe(S.collapsed)&&S.collapsed!==o.collapsed)&&va(S)&&e.is(f[b],S.selector))return f[b]}return r},Qy=(e,n,o,r)=>{var a;let u=o;const f=e.getRoot(),b=n[0];if(gl(b)&&(u=b.wrapper?null:e.getParent(o,b.block,f)),!u){const C=(a=e.getParent(o,"LI,TD,TH,SUMMARY"))!==null&&a!==void 0?a:f;u=e.getParent(Ne(o)?o.parentNode:o,S=>S!==f&&YD(e.schema,S),C)}if(u&&gl(b)&&b.wrapper&&(u=fx(e,u,"ul,ol").reverse()[0]||u),!u)for(u=o;u&&u[r]&&!e.isBlock(u[r])&&(u=u[r],!$b(u,"br")););return u||o},tp=(e,n,o,r)=>{const a=o.parentNode;return Oe(o[r])?!1:a===n||An(a)||e.isBlock(a)?!0:tp(e,n,a,r)},og=(e,n,o,r,a)=>{let u=o;const f=a?"previousSibling":"nextSibling",b=e.getRoot();if(Ne(o)&&!gx(o)&&(a?r>0:r<o.data.length))return o;for(;u;){if(!n[0].block_expand&&e.isBlock(u))return u;for(let C=u[f];C;C=C[f]){const S=Ne(C)&&!tp(e,b,C,f);if(!ng(C)&&!XD(C)&&!gx(C,S))return u}if(u===b||u.parentNode===b){o=u;break}u=u.parentNode}return o},px=e=>ng(e.parentNode)||ng(e),dd=(e,n,o,r=!1)=>{let{startContainer:a,startOffset:u,endContainer:f,endOffset:b}=n;const C=o[0];return tt(a)&&a.hasChildNodes()&&(a=Yl(a,u),Ne(a)&&(u=0)),tt(f)&&f.hasChildNodes()&&(f=Yl(f,n.collapsed?b:b-1),Ne(f)&&(b=f.data.length)),a=hx(e,a),f=hx(e,f),px(a)&&(a=ng(a)?a:a.parentNode,n.collapsed?a=a.previousSibling||a:a=a.nextSibling||a,Ne(a)&&(u=n.collapsed?a.length:0)),px(f)&&(f=ng(f)?f:f.parentNode,n.collapsed?f=f.nextSibling||f:f=f.previousSibling||f,Ne(f)&&(b=n.collapsed?0:f.length)),n.collapsed&&(zs(e,e.getRoot(),a,u,!0,r).each(({container:R,offset:D})=>{a=R,u=D}),zs(e,e.getRoot(),f,b,!1,r).each(({container:R,offset:D})=>{f=R,b=D})),(Hs(C)||C.block_expand)&&((!Hs(C)||!Ne(a)||u===0)&&(a=og(e,o,a,u,!0)),(!Hs(C)||!Ne(f)||b===f.data.length)&&(f=og(e,o,f,b,!1))),Ri(C)&&(a=ya(e,o,n,a,"previousSibling"),f=ya(e,o,n,f,"nextSibling")),(gl(C)||va(C))&&(a=Qy(e,o,a,"previousSibling"),f=Qy(e,o,f,"nextSibling"),gl(C)&&(e.isBlock(a)||(a=og(e,o,a,u,!0),Ne(a)&&(u=0)),e.isBlock(f)||(f=og(e,o,f,b,!1),Ne(f)&&(b=f.data.length)))),tt(a)&&a.parentNode&&(u=e.nodeIndex(a),a=a.parentNode),tt(f)&&f.parentNode&&(b=e.nodeIndex(f)+1,f=f.parentNode),{startContainer:a,startOffset:u,endContainer:f,endOffset:b}},sg=(e,n,o)=>{var r;const a=n.startOffset,u=Yl(n.startContainer,a),f=n.endOffset,b=Yl(n.endContainer,f-1),C=Z=>{const Y=Z[0];Ne(Y)&&Y===u&&a>=Y.data.length&&Z.splice(0,1);const re=Z[Z.length-1];return f===0&&Z.length>0&&re===b&&Ne(re)&&Z.splice(Z.length-1,1),Z},S=(Z,Y,re)=>{const ce=[];for(;Z&&Z!==re;Z=Z[Y])ce.push(Z);return ce},O=(Z,Y)=>e.getParent(Z,re=>re.parentNode===Y,Y),R=(Z,Y,re)=>{const ce=re?"nextSibling":"previousSibling";for(let ie=Z,_e=ie.parentNode;ie&&ie!==Y;ie=_e){_e=ie.parentNode;const Ie=S(ie===Z?ie:ie[ce],ce);Ie.length&&(re||Ie.reverse(),o(C(Ie)))}};if(u===b)return o(C([u]));const D=(r=e.findCommonAncestor(u,b))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(u,b))return R(u,D,!0);if(e.isChildOf(b,u))return R(b,D);const I=O(u,D)||u,z=O(b,D)||b;R(u,I,!0);const H=S(I===u?I:I.nextSibling,"nextSibling",z===b?z.nextSibling:z);H.length&&o(C(H)),R(b,z)},a4=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],i4=e=>Xs(e)&&Pf(e)===ks,l4=(e,n,o,r)=>Ba(n).fold(()=>"skipping",a=>r==="br"||i4(n)?"valid":q1(n)?"existing":Zc(n.dom)?"caret":mo(a4,u=>Bc(n,u))?"valid-block":!Om(e,o,r)||!Om(e,wn(a),o)?"invalid-child":"valid"),bx=(e,n)=>{const o=dd(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},Dm=(e,n,o,r,a,u)=>{const{uid:f=n,...b}=o;ku(e,Of()),ur(e,`${al()}`,f),ur(e,`${Wu()}`,r);const{attributes:C={},classes:S=[]}=a(f,b);if(Lr(e,C),UD(e,S),u){S.length>0&&ur(e,`${Zu()}`,S.join(","));const O=Ir(C);O.length>0&&ur(e,`${jl()}`,O.join(","))}},rg=e=>{cf(e,Of()),Ps(e,`${al()}`),Ps(e,`${Wu()}`),Ps(e,`${Af()}`);const n=ca(e,`${jl()}`).map(r=>r.split(",")).getOr([]),o=ca(e,`${Zu()}`).map(r=>r.split(",")).getOr([]);Se(n,r=>Ps(e,r)),WD(e,o),Ps(e,`${Zu()}`),Ps(e,`${jl()}`)},Mm=(e,n,o,r,a)=>{const u=K.fromTag("span",e);return Dm(u,n,o,r,a,!1),u},Lb=(e,n,o,r,a,u)=>{const f=[],b=Mm(e.getDoc(),o,u,r,a),C=Qs(),S=()=>{C.clear()},O=()=>C.get().getOrThunk(()=>{const z=Za(b);return f.push(z),C.set(z),z}),R=z=>{Se(z,D)},D=z=>{switch(l4(e,z,"span",wn(z))){case"invalid-child":{S();const Z=Js(z);R(Z),S();break}case"valid-block":{S(),Dm(z,o,u,r,a,!0);break}case"valid":{const Z=O();Vd(z,Z);break}}},I=z=>{const H=Gt(z,K.fromDom);R(H)};return sg(e.dom,n,z=>{S(),I(z)}),f},jc=(e,n,o,r)=>{e.undoManager.transact(()=>{const a=e.selection,u=a.getRng(),f=eg(e).length>0,b=Df("mce-annotation");if(u.collapsed&&!f&&bx(e,u),a.getRng().collapsed&&!f){const C=Mm(e.getDoc(),b,r,n,o.decorate);y1(C,Es),a.getRng().insertNode(C.dom),a.select(C.dom)}else ax(a,!1,()=>{tg(e,C=>{Lb(e,C,b,n,o.decorate,r)})})})},Di=e=>{const n=K1();ak(e,n);const o=Nw(e,n),r=Ji("span"),a=u=>{Se(u,f=>{r(f)?Mu(f):rg(f)})};return{register:(u,f)=>{n.register(u,f)},annotate:(u,f)=>{n.lookup(u).each(b=>{jc(e,u,b,f)})},annotationChanged:(u,f)=>{o.addListener(u,f)},remove:u=>{yh(e,N.some(u)).each(({elements:f})=>{const b=e.selection.getBookmark();a(f),e.selection.moveToBookmark(b)})},removeAll:u=>{const f=e.selection.getBookmark();rt(Rf(e,u),(b,C)=>{a(b)}),e.selection.moveToBookmark(f)},getAll:u=>{const f=Rf(e,u);return $n(f,b=>Gt(b,C=>C.dom))}}},Pm=e=>({getBookmark:Be(eu,e),moveToBookmark:Be(nx,e)});Pm.isBookmarkNode=Ec;const cg=(e,n,o)=>o.collapsed?!1:mo(o.getClientRects(),r=>fk(r,e,n)),Hb=(e,n)=>e.dispatch("PreProcess",n),Vb=(e,n)=>e.dispatch("PostProcess",n),u4=e=>{e.dispatch("remove")},d4=e=>{e.dispatch("detach")},m4=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},f4=(e,n,o,r,a)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:a})},vx=(e,n,o,r,a)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:a})},yx=e=>{e.dispatch("PreInit")},e2=e=>{e.dispatch("PostRender")},zb=e=>{e.dispatch("Init")},Sr=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},Ca=(e,n,o)=>{e.dispatch(n,o)},Gc=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},np=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},t2=(e,n)=>e.dispatch("BeforeSetContent",n),Cx=(e,n)=>e.dispatch("SetContent",n),Ub=(e,n)=>e.dispatch("BeforeGetContent",n),g4=(e,n)=>e.dispatch("GetContent",n),Wb=(e,n)=>{e.dispatch("AutocompleterStart",n)},h4=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},Zb=(e,n)=>{e.dispatch("AutocompleterUpdateActiveRange",n)},p4=e=>{e.dispatch("AutocompleterEnd")},b4=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),wx=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),jb=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),qn=(e,n)=>e.dispatch("EditableRootStateChange",{state:n}),ot={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||ot.metaKeyPressed(e),metaKeyPressed:e=>qt.os.isMacOS()||qt.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Mi="data-mce-selected",Sx="table,img,figure.image,hr,video,span.mce-preview-object,details",n2=Math.abs,ag=Math.round,Gb={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},op=e=>e.type==="longpress"||e.type.indexOf("touch")===0,o2=(e,n)=>{const o=n.dom,r=n.getDoc(),a=document,u=n.getBody();let f,b,C,S,O,R,D,I,z,H,Z,Y,re,ce,ie,_e,Ie;const st=Qe=>Oe(Qe)&&(ah(Qe)||o.is(Qe,"figure.image")),we=Qe=>yr(Qe)||o.hasClass(Qe,"mce-preview-object"),he=(Qe,on)=>{if(op(Qe)){const dn=Qe.touches[0];return st(Qe.target)&&!cg(dn.clientX,dn.clientY,on)}else return st(Qe.target)&&!cg(Qe.clientX,Qe.clientY,on)},Ae=Qe=>{const on=Qe.target;he(Qe,n.selection.getRng())&&!Qe.isDefaultPrevented()&&n.selection.select(on)},ct=Qe=>o.hasClass(Qe,"mce-preview-object")&&Oe(Qe.firstElementChild)?[Qe,Qe.firstElementChild]:o.is(Qe,"figure.image")?[Qe.querySelector("img")]:[Qe],Ct=Qe=>{const on=zf(n);return!on||n.mode.isReadOnly()||Qe.getAttribute("data-mce-resize")==="false"||Qe===n.getBody()?!1:o.hasClass(Qe,"mce-preview-object")&&Oe(Qe.firstElementChild)?Bc(K.fromDom(Qe.firstElementChild),on):Bc(K.fromDom(Qe),on)},rn=(Qe,on)=>{if(we(on))return Qe.create("img",{src:qt.transparentSrc});if(yi(on)){const Rs=fs(S.name,"n")?Tr:Nl,Zn=on.cloneNode(!0);return Rs(Qe.select("tr",Zn)).each(Br=>{const Jc=Qe.select("td,th",Br);Qe.setStyle(Br,"height",null),Se(Jc,pu=>Qe.setStyle(pu,"height",null))}),Zn}else return on.cloneNode(!0)},cn=(Qe,on,dn)=>{if(Oe(dn)){const Rs=ct(Qe);Se(Rs,Zn=>{Zn.style[on]||!n.schema.isValid(Zn.nodeName.toLowerCase(),on)?o.setStyle(Zn,on,dn):o.setAttrib(Zn,on,""+dn)})}},Pn=(Qe,on,dn)=>{cn(Qe,"width",on),cn(Qe,"height",dn)},zn=Qe=>{let on,dn,Rs,Zn,Br;on=Qe.screenX-R,dn=Qe.screenY-D,ce=on*S[2]+H,ie=dn*S[3]+Z,ce=ce<5?5:ce,ie=ie<5?5:ie,(st(f)||we(f))&&Uf(n)!==!1?Rs=!ot.modifierPressed(Qe):Rs=ot.modifierPressed(Qe),Rs&&(n2(on)>n2(dn)?(ie=ag(ce*Y),ce=ag(ie/Y)):(ce=ag(ie/Y),ie=ag(ce*Y))),Pn(b,ce,ie),Zn=S.startPos.x+on,Br=S.startPos.y+dn,Zn=Zn>0?Zn:0,Br=Br>0?Br:0,o.setStyles(C,{left:Zn,top:Br,display:"block"}),C.innerHTML=ce+" &times; "+ie,S[2]<0&&b.clientWidth<=ce&&o.setStyle(b,"left",I+(H-ce)),S[3]<0&&b.clientHeight<=ie&&o.setStyle(b,"top",z+(Z-ie)),on=u.scrollWidth-_e,dn=u.scrollHeight-Ie,on+dn!==0&&o.setStyles(C,{left:Zn-on,top:Br-dn}),re||(f4(n,f,H,Z,"corner-"+S.name),re=!0)},Jo=()=>{const Qe=re;re=!1,Qe&&(cn(f,"width",ce),cn(f,"height",ie)),o.unbind(r,"mousemove",zn),o.unbind(r,"mouseup",Jo),a!==r&&(o.unbind(a,"mousemove",zn),o.unbind(a,"mouseup",Jo)),o.remove(b),o.remove(C),o.remove(O),Cs(f),Qe&&(vx(n,f,ce,ie,"corner-"+S.name),o.setAttrib(f,"style",o.getAttrib(f,"style"))),n.nodeChanged()},Cs=Qe=>{et();const on=o.getPos(Qe,u),dn=on.x,Rs=on.y,Zn=Qe.getBoundingClientRect(),Br=Zn.width||Zn.right-Zn.left,Jc=Zn.height||Zn.bottom-Zn.top;f!==Qe&&(Ge(),f=Qe,ce=ie=0);const pu=n.dispatch("ObjectSelected",{target:Qe});Ct(Qe)&&!pu.isDefaultPrevented()?rt(Gb,(Yr,Oa)=>{const Ui=Qc=>{const pt=ct(f)[0];R=Qc.screenX,D=Qc.screenY,H=pt.clientWidth,Z=pt.clientHeight,Y=Z/H,S=Yr,S.name=Oa,S.startPos={x:Br*Yr[0]+dn,y:Jc*Yr[1]+Rs},_e=u.scrollWidth,Ie=u.scrollHeight,O=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(O,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),b=rn(o,f),o.addClass(b,"mce-clonedresizable"),o.setAttrib(b,"data-mce-bogus","all"),b.contentEditable="false",o.setStyles(b,{left:dn,top:Rs,margin:0}),Pn(b,Br,Jc),b.removeAttribute(Mi),u.appendChild(b),o.bind(r,"mousemove",zn),o.bind(r,"mouseup",Jo),a!==r&&(o.bind(a,"mousemove",zn),o.bind(a,"mouseup",Jo)),C=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},H+" &times; "+Z)};let $r=o.get("mceResizeHandle"+Oa);$r&&o.remove($r),$r=o.add(u,"div",{id:"mceResizeHandle"+Oa,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Oa+"-resize; margin:0; padding:0"}),o.bind($r,"mousedown",Qc=>{Qc.stopImmediatePropagation(),Qc.preventDefault(),Ui(Qc)}),Yr.elm=$r,o.setStyles($r,{left:Br*Yr[0]+dn-$r.offsetWidth/2,top:Jc*Yr[1]+Rs-$r.offsetHeight/2})}):Ge(!1)},ar=kf(Cs,0),Ge=(Qe=!0)=>{ar.cancel(),et(),f&&Qe&&f.removeAttribute(Mi),rt(Gb,(on,dn)=>{const Rs=o.get("mceResizeHandle"+dn);Rs&&(o.unbind(Rs),o.remove(Rs))})},vt=(Qe,on)=>o.isChildOf(Qe,on),Tn=Qe=>{if(re||n.removed||n.composing)return;const on=Qe.type==="mousedown"?Qe.target:e.getNode(),dn=Ru(K.fromDom(on),Sx).map(Zn=>Zn.dom).filter(Zn=>o.isEditable(Zn.parentElement)||Zn.nodeName==="IMG"&&o.isEditable(Zn)).getOrUndefined(),Rs=Oe(dn)?o.getAttrib(dn,Mi,"1"):"1";if(Se(o.select(`img[${Mi}],hr[${Mi}]`),Zn=>{Zn.removeAttribute(Mi)}),Oe(dn)&&vt(dn,u)&&n.hasFocus()){_t();const Zn=e.getStart(!0);if(vt(Zn,dn)&&vt(e.getEnd(!0),dn)){o.setAttrib(dn,Mi,Rs),ar.throttle(dn);return}}Ge()},et=()=>{rt(Gb,Qe=>{Qe.elm&&(o.unbind(Qe.elm),delete Qe.elm)})},_t=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{_t(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Tn),n.on("keyup compositionend",Qe=>{f&&f.nodeName==="TABLE"&&Tn(Qe)}),n.on("hide blur",Ge),n.on("contextmenu longpress",Ae,!0)}),n.on("remove",et),{isResizable:Ct,showResizeRect:Cs,hideResizeRect:Ge,updateResizeRect:Tn,destroy:()=>{ar.cancel(),f=b=O=null}}},xx=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},s2=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},Ex=(e,n,o)=>{const r=e.document.createRange();return xx(r,n),s2(r,o),r},sp=(e,n,o,r,a)=>{const u=e.document.createRange();return u.setStart(n.dom,o),u.setEnd(r.dom,a),u},Nm=ha.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),qb=(e,n,o)=>n(K.fromDom(o.startContainer),o.startOffset,K.fromDom(o.endContainer),o.endOffset),v4=(e,n)=>n.match({domRange:o=>({ltr:Ke(o),rtl:N.none}),relative:(o,r)=>({ltr:qi(()=>Ex(e,o,r)),rtl:qi(()=>N.some(Ex(e,r,o)))}),exact:(o,r,a,u)=>({ltr:qi(()=>sp(e,o,r,a,u)),rtl:qi(()=>N.some(sp(e,a,u,o,r)))})}),y4=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(a=>a.collapsed===!1).map(a=>Nm.rtl(K.fromDom(a.endContainer),a.endOffset,K.fromDom(a.startContainer),a.startOffset)).getOrThunk(()=>qb(e,Nm.ltr,o)):qb(e,Nm.ltr,o)},C4=(e,n)=>{const o=v4(e,n);return y4(e,o)};Nm.ltr,Nm.rtl;const pr={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},ig=(e,n,o)=>{var r;return N.from((r=e.caretPositionFromPoint)===null||r===void 0?void 0:r.call(e,n,o)).bind(a=>{if(a.offsetNode===null)return N.none();const u=e.createRange();return u.setStart(a.offsetNode,a.offset),u.collapse(),N.some(u)})},JD=(e,n,o)=>{var r;return N.from((r=e.caretRangeFromPoint)===null||r===void 0?void 0:r.call(e,n,o))},w4=(e,n,o)=>e.caretPositionFromPoint?ig(e,n,o):e.caretRangeFromPoint?JD(e,n,o):N.none(),S4=(e,n,o)=>{const r=e.document;return w4(r,n,o).map(a=>pr.create(K.fromDom(a.startContainer),a.startOffset,K.fromDom(a.endContainer),a.endOffset))},fn=ha.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),x4=(e,n,o,r)=>e.fold(n,o,r),E4=e=>e.fold(Wo,Wo,Wo),r2=fn.before,QD=fn.on,eM=fn.after,md={before:r2,on:QD,after:eM,cata:x4,getStart:E4},rp=ha.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),T4=e=>rp.exact(e.start,e.soffset,e.finish,e.foffset),_4=e=>e.match({domRange:n=>K.fromDom(n.startContainer),relative:(n,o)=>md.getStart(n),exact:(n,o,r,a)=>n}),c2=rp.domRange,Kb=rp.relative,Yb=rp.exact,tM=e=>{const n=_4(e);return uf(n)},k4=pr.create,cp={domRange:c2,relative:Kb,exact:Yb,exactFromRange:T4,getWin:tM,range:k4},a2=(e,n)=>{const o=wn(e);return o==="input"?md.after(e):zt(["br","img"],o)?n===0?md.before(e):md.after(e):md.on(e,n)},O4=(e,n)=>{const o=e.fold(md.before,a2,md.after),r=n.fold(md.before,a2,md.after);return cp.relative(o,r)},Tx=(e,n,o,r)=>{const a=a2(e,n),u=a2(o,r);return cp.relative(a,u)},Mt=e=>e.match({domRange:n=>{const o=K.fromDom(n.startContainer),r=K.fromDom(n.endContainer);return Tx(o,n.startOffset,r,n.endOffset)},relative:O4,exact:Tx}),Xb=(e,n)=>{const r=document.createDocumentFragment();return Se(e,a=>{r.appendChild(a.dom)}),K.fromDom(r)},l=e=>{const n=cp.getWin(e).dom,o=(a,u,f,b)=>sp(n,a,u,f,b),r=Mt(e);return C4(n,r).match({ltr:o,rtl:o})},m=(e,n,o)=>S4(e,n,o),p=(e,n,o)=>{const r=uf(K.fromDom(o));return m(r.dom,e,n).map(a=>{const u=o.createRange();return u.setStart(a.start.dom,a.soffset),u.setEnd(a.finish.dom,a.foffset),u}).getOrUndefined()},v=(e,n)=>Oe(e)&&Oe(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,x=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},_=(e,n,o)=>x(e,n,o)!==null,M=(e,n,o)=>_(e,n,r=>r.nodeName===o),F=(e,n)=>fa(e)&&!_(e,n,Zc),U=(e,n,o)=>{const r=n.parentNode;if(r){const a=new xs(n,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=a[o?"prev":"next"]();)if(Rn(u))return!0}return!1},X=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},ue=(e,n)=>{let o=n;for(;o&&o!==e;){if(Dn(o))return!0;o=o.parentNode}return!1},Pe=(e,n,o,r,a)=>{const u=e.getRoot(),f=e.schema.getNonEmptyElements(),b=a.parentNode;let C,S;if(!b)return N.none();const O=e.getParent(b,e.isBlock)||u;if(r&&Rn(a)&&n&&e.isEmpty(O))return N.some(Ce(b,e.nodeIndex(a)));const R=new xs(a,O);for(;S=R[r?"prev":"next"]();){if(e.getContentEditableParent(S)==="false"||F(S,u))return N.none();if(Ne(S)&&S.data.length>0)return M(S,u,"A")?N.none():N.some(Ce(S,r?S.data.length:0));if(e.isBlock(S)||f[S.nodeName.toLowerCase()])return N.none();C=S}return Ko(C)?N.none():o&&C?N.some(Ce(C,0)):N.none()},Xe=(e,n,o,r)=>{const a=e.getRoot();let u,f=!1,b=o?r.startContainer:r.endContainer,C=o?r.startOffset:r.endOffset;const S=tt(b)&&C===b.childNodes.length,O=e.schema.getNonEmptyElements();let R=o;if(fa(b))return N.none();if(tt(b)&&C>b.childNodes.length-1&&(R=!1),bf(b)&&(b=a,C=0),b===a){if(R&&(u=b.childNodes[C>0?C-1:0],u&&(fa(u)||O[u.nodeName]||yi(u))))return N.none();if(b.hasChildNodes()){if(C=Math.min(!R&&C>0?C-1:C,b.childNodes.length-1),b=b.childNodes[C],C=Ne(b)&&S?b.data.length:0,!n&&b===a.lastChild&&yi(b)||ue(a,b)||fa(b)||Sv(b))return N.none();if(b.hasChildNodes()&&!yi(b)){u=b;const D=new xs(b,a);do{if(Dn(u)||fa(u)){f=!1;break}if(Ne(u)&&u.data.length>0){C=R?0:u.data.length,b=u,f=!0;break}if(O[u.nodeName.toLowerCase()]&&!Ts(u)){C=e.nodeIndex(u),b=u.parentNode,R||C++,f=!0;break}}while(u=R?D.next():D.prev())}}}return n&&(Ne(b)&&C===0&&Pe(e,S,n,!0,b).each(D=>{b=D.container(),C=D.offset(),f=!0}),tt(b)&&(u=b.childNodes[C],u||(u=b.childNodes[C-1]),u&&Rn(u)&&!X(u,"A")&&!U(e,u,!1)&&!U(e,u,!0)&&Pe(e,S,n,!0,u).each(D=>{b=D.container(),C=D.offset(),f=!0}))),R&&!n&&Ne(b)&&C===b.data.length&&Pe(e,S,n,!1,b).each(D=>{b=D.container(),C=D.offset(),f=!0}),f&&b?N.some(Ce(b,C)):N.none()},qe=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),a=Ce.fromRangeStart(n);return Xe(e,o,!0,r).each(u=>{(!o||!Ce.isAbove(a,u))&&r.setStart(u.container(),u.offset())}),o||Xe(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),v(n,r)?N.none():N.some(r)},ze=(e,n)=>e.splitText(n),ft=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,a=e.endOffset;if(n===r&&Ne(n)){if(o>0&&o<n.data.length)if(r=ze(n,o),n=r.previousSibling,a>o){a=a-o;const u=ze(r,a).previousSibling;n=r=u,a=u.data.length,o=0}else a=0}else if(Ne(n)&&o>0&&o<n.data.length&&(n=ze(n,o),o=0),Ne(r)&&a>0&&a<r.data.length){const u=ze(r,a).previousSibling;r=u,a=u.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:a}},Re=e=>({walk:(u,f)=>sg(e,u,f),split:ft,expand:(u,f={type:"word"})=>{if(f.type==="word"){const b=dd(e,u,[{inline:"span"}]),C=e.createRng();return C.setStart(b.startContainer,b.startOffset),C.setEnd(b.endContainer,b.endOffset),C}return u},normalize:u=>qe(e,u).fold(De,f=>(u.setStart(f.startContainer,f.startOffset),u.setEnd(f.endContainer,f.endOffset),!0))});Re.compareRanges=v,Re.getCaretRangeFromPoint=p,Re.getSelectedNode=Th,Re.getNode=Yl;const Ze=((e,n)=>{const o=(b,C)=>{if(!lc(C)&&!C.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+C);const S=b.dom;Ld(S)&&(S.style[e]=C+"px")},r=b=>{const C=n(b);if(C<=0||C===null){const S=es(b,e);return parseFloat(S)||0}return C},a=r,u=(b,C)=>Zo(C,(S,O)=>{const R=es(b,O),D=R===void 0?0:parseInt(R,10);return isNaN(D)?S:S+D},0);return{set:o,get:r,getOuter:a,aggregate:u,max:(b,C,S)=>{const O=u(b,S);return C>O?C-O:0}}})("height",e=>{const n=e.dom;return ff(e)?n.getBoundingClientRect().height:n.offsetHeight}),Ft=e=>Ze.get(e),gn=()=>K.fromDom(document),Ln=(e,n)=>e.view(n).fold(Ke([]),r=>{const a=e.owner(r),u=Ln(e,a);return[r].concat(u)}),to=(e,n)=>{const o=n.owner(e);return Ln(n,o)};var Pi=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?N.none():N.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(K.fromDom)},owner:e=>Ou(e)});const Bm=e=>{const n=gn(),o=Pu(n),r=to(e,Pi),a=bv(e),u=Td(r,(f,b)=>{const C=bv(b);return{left:f.left+C.left,top:f.top+C.top}},{left:0,top:0});return th(u.left+a.left+o.left,u.top+a.top+o.top)},hl=e=>wn(e)==="textarea",Kn=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),jr=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},Gr=(e,n)=>{const o=Js(e);if(o.length===0||hl(e))return{element:e,offset:n};if(n<o.length&&!hl(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return hl(r)?{element:e,offset:n}:wn(r)==="img"?{element:r,offset:1}:Xs(r)?{element:r,offset:Pf(r).length}:{element:r,offset:Js(r).length}}},wa=(e,n)=>{const o=S1(e),r=Ft(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},Jt=(e,n)=>{const o=Gr(e,n),r=K.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+ks+"</span>");return co(o.element,r),wa(r,()=>ao(r))},cc=e=>wa(K.fromDom(e),Ot),ys=(e,n,o,r)=>{xr(e,(a,u)=>nu(e,n,o,r),o)},Jb=(e,n,o,r,a)=>{const u={elm:r.element.dom,alignToTop:a};if(Kn(e,u))return;const f=Pu(n).top;o(e,n,f,r,a),jr(e,u)},nu=(e,n,o,r)=>{const a=K.fromDom(e.getBody()),u=K.fromDom(e.getDoc());$a(a);const f=Jt(K.fromDom(o.startContainer),o.startOffset);Jb(e,u,n,f,r),f.cleanup()},nn=(e,n,o,r)=>{const a=K.fromDom(e.getDoc());Jb(e,a,o,cc(n),r)},xr=(e,n,o)=>{const r=o.startContainer,a=o.startOffset,u=o.endContainer,f=o.endOffset;n(K.fromDom(r),K.fromDom(u));const b=e.dom.createRng();b.setStart(r,a),b.setEnd(u,f),e.selection.setRng(o)},Qb=(e,n,o,r,a)=>{const u=n.pos;if(r)el(u.left,u.top,a);else{const f=u.top-o+n.height;el(-e.getBody().getBoundingClientRect().left,f,a)}},e0=(e,n,o,r,a,u)=>{const f=r+o,b=a.pos.top,C=a.bottom,S=C-b>=r;b<o?Qb(e,a,r,u!==!1,n):b>f?Qb(e,a,r,S?u!==!1:u===!0,n):C>f&&!S&&Qb(e,a,r,u===!0,n)},_x=(e,n,o,r,a)=>{const u=uf(n).dom.innerHeight;e0(e,n,o,u,r,a)},fd=(e,n,o,r,a)=>{const u=uf(n).dom.innerHeight;e0(e,n,o,u,r,a);const f=Bm(r.element),b=gw(window);f.top<b.y?fw(r.element,a!==!1):f.top>b.bottom&&fw(r.element,a===!0)},$m=(e,n,o)=>ys(e,_x,n,o),t0=(e,n,o)=>nn(e,n,_x,o),A4=(e,n,o)=>ys(e,fd,n,o),ap=(e,n,o)=>nn(e,n,fd,o),U6=(e,n,o)=>{(e.inline?t0:ap)(e,n,o)},Fm=(e,n,o)=>{(e.inline?$m:A4)(e,n,o)},ip=(e,n=!1)=>e.dom.focus({preventScroll:n}),nM=e=>{const n=bi(e).dom;return e.dom===n.activeElement},kx=(e=gn())=>N.from(e.dom.activeElement).map(K.fromDom),W6=e=>kx(bi(e)).filter(n=>e.dom.contains(n.dom)),oM=(e,n)=>{const o=Xs(n)?Pf(n).length:Js(n).length+1;return e>o?o:e<0?0:e},Z6=e=>cp.range(e.start,oM(e.soffset,e.start),e.finish,oM(e.foffset,e.finish)),R4=(e,n)=>!Ud(n.dom)&&(ia(e,n)||Sn(e,n)),j6=e=>n=>R4(e,n.start)&&R4(e,n.finish),G6=e=>e.inline||qt.browser.isFirefox(),sM=e=>cp.range(K.fromDom(e.startContainer),e.startOffset,K.fromDom(e.endContainer),e.endOffset),D4=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?N.none():N.from(n.getRangeAt(0))).map(sM)},M4=e=>{const n=uf(e);return D4(n.dom).filter(j6(e))},P4=(e,n)=>N.from(n).filter(j6(e)).map(Z6),rM=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),N.some(n)}catch{return N.none()}},i2=e=>{const n=G6(e)?M4(K.fromDom(e.getBody())):N.none();e.bookmark=n.isSome()?n:e.bookmark},Ox=e=>(e.bookmark?e.bookmark:N.none()).bind(o=>P4(K.fromDom(e.getBody()),o)).bind(rM),Ax=e=>{Ox(e).each(n=>e.selection.setRng(n))},N4={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},q6=(e,n)=>(lc(n)||(n=0),setTimeout(e,n)),cM=(e,n)=>(lc(n)||(n=0),setInterval(e,n)),Xa={setEditorTimeout:(e,n,o)=>q6(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=cM(()=>{e.removed?clearInterval(r):n()},o);return r}},aM=e=>e.type==="nodechange"&&e.selectionChange,iM=(e,n)=>{const o=()=>{n.throttle()};Yn.DOM.bind(document,"mouseup",o),e.on("remove",()=>{Yn.DOM.unbind(document,"mouseup",o)})},lM=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},K6=(e,n)=>{lM(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{aM(o)||i2(e)})},Y6=e=>{const n=kf(()=>{i2(e)},0);e.on("init",()=>{e.inline&&iM(e,n),K6(e,n)}),e.on("remove",()=>{n.cancel()})};let n0;const B4=Yn.DOM,X6=e=>tt(e)&&N4.isEditorUIElement(e),$4=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},Rx=(e,n)=>{const o=$h(e);return B4.getParent(n,a=>X6(a)||(o?e.dom.is(a,o):!1))!==null},F4=e=>{try{const n=bi(K.fromDom(e.getElement()));return kx(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},Dx=(e,n)=>{const o=n.editor;Y6(o);const r=(a,u)=>{if(Ty(a)&&a.inline!==!0){const f=K.fromDom(a.getContainer());u(f,"tox-edit-focus")}};o.on("focusin",()=>{const a=e.focusedEditor;$4(F4(o))&&r(o,ku),a!==o&&(a&&a.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:a}),o.focus(!0))}),o.on("focusout",()=>{Xa.setEditorTimeout(o,()=>{const a=e.focusedEditor;(!$4(F4(o))||a!==o)&&r(o,cf),!Rx(o,F4(o))&&a===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),n0||(n0=a=>{const u=e.activeEditor;u&&G_(a).each(f=>{const b=f;b.ownerDocument===document&&b!==document.body&&!Rx(u,b)&&e.focusedEditor===u&&(u.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},B4.bind(document,"focusin",n0))},uM=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&n0&&(B4.unbind(document,"focusin",n0),n0=null)},J6=e=>{e.on("AddEditor",Be(Dx,e)),e.on("RemoveEditor",Be(uM,e))},dM=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),mM=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="false")!==null,Q6=e=>e.collapsed?N.from(Yl(e.startContainer,e.startOffset)).map(K.fromDom):N.none(),e8=(e,n)=>Q6(n).bind(o=>Vw(o)?N.some(o):ia(e,o)?N.none():N.some(e)),fM=(e,n)=>{e8(K.fromDom(e.getBody()),n).bind(o=>Pr(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},Mx=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},t8=e=>nM(e)||W6(e).isSome(),gM=e=>Oe(e.iframeElement)&&nM(K.fromDom(e.iframeElement)),hM=e=>{const n=e.getBody();return n&&t8(K.fromDom(n))},Px=e=>{const n=bi(K.fromDom(e.getElement()));return kx(n).filter(o=>!$4(o.dom)&&Rx(e,o.dom)).isSome()},o0=e=>e.inline?hM(e):gM(e),pM=e=>o0(e)||Px(e),I4=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable();const a=f=>{Ox(f).each(b=>{f.selection.setRng(b),r=b})};!o0(e)&&e.hasEditableRoot()&&a(e);const u=dM(e,n.getNode());if(u&&e.dom.isChildOf(u,o)){mM(e,u)||Mx(o),Mx(u),e.hasEditableRoot()||a(e),fM(e,r),L4(e);return}e.inline||(qt.browser.isOpera()||Mx(o),e.getWin().focus()),(qt.browser.isFirefox()||e.inline)&&(Mx(o),fM(e,r)),L4(e)},L4=e=>e.editorManager.setActive(e),bM=(e,n)=>{e.removed||(n?L4(e):I4(e))},H4=(e,n)=>n.collapsed?e.isEditable(n.startContainer):e.isEditable(n.startContainer)&&e.isEditable(n.endContainer),V4=(e,n,o,r,a)=>{const u=o?n.startContainer:n.endContainer,f=o?n.startOffset:n.endOffset;return N.from(u).map(K.fromDom).map(b=>!r||!n.collapsed?pc(b,a(b,f)).getOr(b):b).bind(b=>vo(b)?N.some(b):Ba(b).filter(vo)).map(b=>b.dom).getOr(e)},vM=(e,n,o=!1)=>V4(e,n,!0,o,(r,a)=>Math.min(b1(r),a)),yM=(e,n,o=!1)=>V4(e,n,!1,o,(r,a)=>a>0?a-1:a),CM=(e,n)=>{const o=e;for(;e&&Ne(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},n8=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const a=n.startOffset,u=n.endOffset;let f=n.commonAncestorContainer;n.collapsed||(o===r&&u-a<2&&o.hasChildNodes()&&(f=o.childNodes[a]),Ne(o)&&Ne(r)&&(o.length===a?o=CM(o.nextSibling,!0):o=o.parentNode,u===0?r=CM(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(f=o)));const b=Ne(f)?f.parentNode:f;return La(b)?b:e},Nx=(e,n,o,r)=>{const a=[],u=e.getRoot(),f=e.getParent(o||vM(u,n,n.collapsed),e.isBlock),b=e.getParent(r||yM(u,n,n.collapsed),e.isBlock);if(f&&f!==u&&a.push(f),f&&b&&f!==b){let C;const S=new xs(f,u);for(;(C=S.next())&&C!==b;)e.isBlock(C)&&a.push(C)}return b&&f!==b&&b!==u&&a.push(b),a},wM=(e,n,o)=>N.from(n).bind(r=>N.from(r.parentNode).map(a=>{const u=e.nodeIndex(r),f=e.createRng();return f.setStart(a,u),f.setEnd(a,u+1),o&&(cx(e,f,r,!0),cx(e,f,r,!1)),f})),Bx=(e,n)=>Gt(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),SM={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},l2=(e,n,o)=>{const r=o?"lastChild":"firstChild",a=o?"prev":"next";if(e[r])return e[r];if(e!==n){let u=e[a];if(u)return u;for(let f=e.parent;f&&f!==n;f=f.parent)if(u=f[a],u)return u}},o8=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!Fa(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},xM=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class _c{static create(n,o){const r=new _c(n,SM[n]||1);return o&&rt(o,(a,u)=>{r.attr(u,a)}),r}constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!J(n))return Oe(n)&&rt(n,(u,f)=>{r.attr(f,u)}),r;const a=r.attributes;if(a){if(o!==void 0){if(o===null){if(n in a.map){delete a.map[n];let u=a.length;for(;u--;)if(a[u].name===n)return a.splice(u,1),r}return r}if(n in a.map){let u=a.length;for(;u--;)if(a[u].name===n){a[u].value=o;break}}else a.push({name:n,value:o});return a.map[n]=o,r}return a.map[n]}}clone(){const n=this,o=new _c(n.name,n.type),r=n.attributes;if(r){const a=[];a.map={};for(let u=0,f=r.length;u<f;u++){const b=r[u];b.name!=="id"&&(a[a.length]={name:b.name,value:b.value},a.map[b.name]=b.value)}o.attributes=a}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,a=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):a&&(a.next=r),o.lastChild===n?(o.lastChild=a,a&&(a.next=null)):r&&(r.prev=a),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const a=o.parent||this;return r?(o===a.firstChild?a.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===a.lastChild?a.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=a,n}getAll(n){const o=this,r=[];for(let a=o.firstChild;a;a=l2(a,o))a.name===n&&r.push(a);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let a=n.firstChild;a;a=l2(a,n))o.push(a);let r=o.length;for(;r--;){const a=o[r];a.parent=a.firstChild=a.lastChild=a.next=a.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var a;const u=this;let f=u.firstChild;if(xM(u))return!1;if(f)do{if(f.type===1){if(f.attr("data-mce-bogus"))continue;if(n[f.name]||xM(f))return!1}if(f.type===8||f.type===3&&!o8(f)||f.type===3&&f.parent&&o[f.parent.name]&&Fa((a=f.value)!==null&&a!==void 0?a:"")||r&&r(f))return!1}while(f=l2(f,u));return!0}walk(n){return l2(this,null,n)}}const s8=Ve.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),EM=e=>J(e.nodeValue)&&e.nodeValue.includes(ks),TM=e=>`${e.length===0?"":`${Gt(e,n=>`[${n}]`).join(",")},`}[data-mce-bogus="all"]`,r8=(e,n)=>n.querySelectorAll(TM(e)),_M=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,n=>EM(n)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),kM=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,n=>{if(EM(n)){const o=n.parentNode;return o&&$t(s8,o.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),c8=e=>_M(e).nextNode()!==null,a8=e=>kM(e).nextNode()!==null,i8=(e,n)=>n.querySelector(TM(e))!==null,$x=(e,n)=>{Se(r8(e,n),o=>{const r=K.fromDom(o);oc(r,"data-mce-bogus")==="all"?ao(r):Se(e,a=>{aa(r,a)&&Ps(r,a)})})},z4=e=>{let n=e.nextNode();for(;n!==null;)n.nodeValue=null,n=e.nextNode()},OM=k(z4,_M),l8=k(z4,kM),AM=(e,n)=>{const o=[{condition:Be(i8,n),action:Be($x,n)},{condition:c8,action:OM},{condition:a8,action:l8}];let r=e,a=!1;return Se(o,({condition:u,action:f})=>{u(r)&&(a||(r=e.cloneNode(!0),a=!0),f(r))}),r},RM=e=>{const n=zr(e,"[data-mce-bogus]");Se(n,o=>{oc(o,"data-mce-bogus")==="all"?ao(o):Gl(o)?(co(o,K.fromText(nh)),ao(o)):Mu(o)})},DM=e=>{const n=zr(e,"input");Se(n,o=>{Ps(o,"name")})},u8=(e,n)=>{const o=gr(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s||<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},d8=(e,n)=>{const o=e.getDoc(),r=bi(K.fromDom(e.getBody())),a=K.fromTag("div",o);ur(a,"data-mce-bogus","all"),tn(a,{position:"fixed",left:"-9999999px",top:"0"}),y1(a,n.innerHTML),RM(a),DM(a);const u=W_(r);Bs(u,a);const f=ma(a.dom.innerText);return ao(a),f},MM=(e,n,o)=>{let r;return n.format==="raw"?r=Ve.trim(ma(AM(o,e.serializer.getTempAttrs()).innerHTML)):n.format==="text"?r=d8(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=u8(e,e.serializer.serialize(o,n)),n.format!=="text"&&!Y1(K.fromDom(o))&&J(r)?Ve.trim(r):r},m8=(e,n)=>N.from(e.getBody()).fold(Ke(n.format==="tree"?new _c("body",11):""),o=>MM(e,n,o)),U4=Ve.makeMap,W4=e=>{const n=[];e=e||{};const o=e.indent,r=U4(e.indent_before||""),a=U4(e.indent_after||""),u=Lu.getEncodeFunc(e.entity_encoding||"raw",e.entities),f=e.element_format!=="xhtml";return{start:(b,C,S)=>{if(o&&r[b]&&n.length>0){const O=n[n.length-1];O.length>0&&O!==`
`&&n.push(`
`)}if(n.push("<",b),C)for(let O=0,R=C.length;O<R;O++){const D=C[O];n.push(" ",D.name,'="',u(D.value,!0),'"')}if(!S||f?n[n.length]=">":n[n.length]=" />",S&&o&&a[b]&&n.length>0){const O=n[n.length-1];O.length>0&&O!==`
`&&n.push(`
`)}},end:b=>{let C;n.push("</",b,">"),o&&a[b]&&n.length>0&&(C=n[n.length-1],C.length>0&&C!==`
`&&n.push(`
`))},text:(b,C)=>{b.length>0&&(n[n.length]=C?b:u(b))},cdata:b=>{n.push("<![CDATA[",b,"]]>")},comment:b=>{n.push("<!--",b,"-->")},pi:(b,C)=>{C?n.push("<?",b," ",u(C),"?>"):n.push("<?",b,"?>"),o&&n.push(`
`)},doctype:b=>{n.push("<!DOCTYPE",b,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},lg=(e={},n=Fn())=>{const o=W4(e);return e.validate="validate"in e?e.validate:!0,{serialize:a=>{const u=e.validate,f={3:C=>{var S;o.text((S=C.value)!==null&&S!==void 0?S:"",C.raw)},8:C=>{var S;o.comment((S=C.value)!==null&&S!==void 0?S:"")},7:C=>{o.pi(C.name,C.value)},10:C=>{var S;o.doctype((S=C.value)!==null&&S!==void 0?S:"")},4:C=>{var S;o.cdata((S=C.value)!==null&&S!==void 0?S:"")},11:C=>{let S=C;if(S=S.firstChild)do b(S);while(S=S.next)}};o.reset();const b=C=>{var S;const O=f[C.type];if(O)O(C);else{const R=C.name,D=R in n.getVoidElements();let I=C.attributes;if(u&&I&&I.length>1){const z=[];z.map={};const H=n.getElementRule(C.name);if(H){for(let Z=0,Y=H.attributesOrder.length;Z<Y;Z++){const re=H.attributesOrder[Z];if(re in I.map){const ce=I.map[re];z.map[re]=ce,z.push({name:re,value:ce})}}for(let Z=0,Y=I.length;Z<Y;Z++){const re=I[Z].name;if(!(re in z.map)){const ce=I.map[re];z.map[re]=ce,z.push({name:re,value:ce})}}I=z}}if(o.start(R,I,D),fo(R))J(C.value)&&o.text(C.value,!0),o.end(R);else if(!D){let z=C.firstChild;if(z){(R==="pre"||R==="textarea")&&z.type===3&&((S=z.value)===null||S===void 0?void 0:S[0])===`
`&&o.text(`
`,!0);do b(z);while(z=z.next)}o.end(R)}}};return a.type===1&&!e.inner?b(a):a.type===3?f[3](a):f[11](a),o.getContent()}}},PM=new Set;Se(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{PM.add(n)});const NM=new Set;Se(["background-color"],n=>{NM.add(n)});const BM=["font","text-decoration","text-emphasis"],f8=(e,n)=>e.parseStyle(e.getAttrib(n,"style")),s0=(e,n)=>Ir(f8(e,n)),g8=e=>PM.has(e),h8=e=>NM.has(e),$M=(e,n)=>mo(s0(e,n),o=>g8(o)),p8=(e,n)=>$M(e,n)&&mo(s0(e,n),o=>h8(o)),b8=e=>Rt(e,n=>mo(BM,o=>fs(n,o))),v8=(e,n,o)=>{const r=s0(e,n),a=s0(e,o),u=f=>{var b,C;const S=(b=e.getStyle(n,f))!==null&&b!==void 0?b:"",O=(C=e.getStyle(o,f))!==null&&C!==void 0?C:"";return Jn(S)&&Jn(O)&&S!==O};return mo(r,f=>{const b=C=>mo(C,S=>S===f);if(!b(a)&&b(BM)){const C=b8(a);return mo(C,u)}else return u(f)})},FM=(e,n,o)=>N.from(o.container()).filter(Ne).exists(r=>{const a=e?0:-1;return n(r.data.charAt(o.offset()+a))}),Z4=Be(FM,!0,Tm),j4=Be(FM,!1,Tm),y8=e=>{const n=e.container();return Ne(n)&&(n.data.length===0||xh(n.data)&&Pm.isBookmarkNode(n.parentNode))},ug=(e,n)=>o=>Dy(e?0:-1,o).filter(n).isSome(),IM=e=>ah(e)&&es(K.fromDom(e),"display")==="block",LM=e=>Dn(e)&&!ch(e),xt=ug(!0,IM),HM=ug(!1,IM),r0=ug(!0,yr),u2=ug(!1,yr),Fx=ug(!0,yi),G4=ug(!1,yi),dg=ug(!0,LM),mg=ug(!1,LM),C8=e=>e.slice(0,-1),w8=(e,n,o)=>ia(n,e)?C8(Fd(e,r=>o(r)||Sn(r,n))):[],d2=(e,n)=>w8(e,n,De),gd=(e,n)=>[e].concat(d2(e,n)),VM=(e,n,o)=>ex(e,n,o,y8),S8=e=>n=>e.isBlock(wn(n)),Ht=(e,n,o)=>as(gd(K.fromDom(n.container()),e),S8(o)),zM=(e,n,o,r)=>VM(e,n.dom,o).forall(a=>Ht(n,o,r).fold(()=>!Ai(a,o,n.dom),u=>!Ai(a,o,n.dom)&&ia(u,K.fromDom(a.container())))),Zt=(e,n,o,r)=>Ht(n,o,r).fold(()=>VM(e,n.dom,o).forall(a=>!Ai(a,o,n.dom)),a=>VM(e,a.dom,o).isNone()),Ix=Be(Zt,!1),x8=Be(Zt,!0),EG=Be(zM,!1),E8=Be(zM,!0),TG=e=>Zh(e).exists(Gl),q4=(e,n,o,r)=>{const a=Rt(gd(K.fromDom(o.container()),n),f=>r.isBlock(wn(f))),u=Tr(a).getOr(n);return Uc(e,u.dom,o).filter(TG)},K4=(e,n,o)=>Zh(n).exists(Gl)||q4(!0,e,n,o).isSome(),Lx=(e,n,o)=>Jk(n).exists(Gl)||q4(!1,e,n,o).isSome(),Bt=Be(q4,!1),T8=Be(q4,!0),UM=e=>Ce.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),WM=(e,n,o)=>{const r=Rt(gd(K.fromDom(n.container()),e),a=>o.isBlock(wn(a)));return Tr(r).getOr(e)},c0=(e,n,o)=>UM(n)?j4(n):j4(n)||xc(WM(e,n,o).dom,n).exists(j4),Y4=(e,n,o)=>UM(n)?Z4(n):Z4(n)||Mr(WM(e,n,o).dom,n).exists(Z4),_8=e=>zt(["pre","pre-wrap"],e),X4=e=>Zh(e).bind(n=>Vo(n,vo)).exists(n=>_8(es(n,"white-space"))),k8=(e,n)=>xc(e.dom,n).isNone(),ZM=(e,n)=>Mr(e.dom,n).isNone(),O8=(e,n,o)=>k8(e,n)||ZM(e,n)||Ix(e,n,o)||x8(e,n,o)||Lx(e,n,o)||K4(e,n,o),_G=e=>Oe(e)&&Dn(e)&&Ry(e),A8=(e,n)=>o=>_G(new xs(o,e)[n]()),R8=(e,n)=>{const o=Mr(e.dom,n).getOr(n),r=A8(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},D8=(e,n)=>{const o=xc(e.dom,n).getOr(n),r=A8(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},jM=(e,n,o)=>X4(n)?!1:O8(e,n,o)||c0(e,n,o)||Y4(e,n,o),m2=(e,n,o)=>X4(n)?!1:Ix(e,n,o)||EG(e,n,o)||Lx(e,n,o)||c0(e,n,o)||D8(e,n),GM=e=>{const n=e.container(),o=e.offset();return Ne(n)&&o<n.data.length?Ce(n,o+1):e},f2=(e,n,o)=>X4(n)?!1:x8(e,n,o)||E8(e,n,o)||K4(e,n,o)||Y4(e,n,o)||R8(e,n),en=(e,n,o)=>m2(e,n,o)||f2(e,GM(n),o),J4=(e,n)=>id(e.charAt(n)),g2=(e,n)=>Tm(e.charAt(n)),qM=e=>{const n=e.container();return Ne(n)&&br(n.data,Es)},KM=e=>{const n=e.split("");return Gt(n,(o,r)=>id(o)&&r>0&&r<n.length-1&&Rb(n[r-1])&&Rb(n[r+1])?" ":o).join("")},Q4=(e,n,o,r)=>{const a=n.data,u=Ce(n,0);return!o&&J4(a,0)&&!en(e,u,r)?(n.data=" "+a.slice(1),!0):o&&g2(a,0)&&m2(e,u,r)?(n.data=Es+a.slice(1),!0):!1},YM=e=>{const n=e.data,o=KM(n);return o!==n?(e.data=o,!0):!1},e3=(e,n,o,r)=>{const a=n.data,u=Ce(n,a.length-1);return!o&&J4(a,a.length-1)&&!en(e,u,r)?(n.data=a.slice(0,-1)+" ",!0):o&&g2(a,a.length-1)&&f2(e,u,r)?(n.data=a.slice(0,-1)+Es,!0):!1},M8=(e,n,o)=>{const r=n.container();if(!Ne(r))return N.none();if(qM(n)){const a=Q4(e,r,!1,o)||YM(r)||e3(e,r,!1,o);return gi(a,n)}else if(en(e,n,o)){const a=Q4(e,r,!0,o)||e3(e,r,!0,o);return gi(a,n)}else return N.none()},XM=e=>{const n=K.fromDom(e.getBody());e.selection.isCollapsed()&&M8(n,Ce.fromRangeStart(e.selection.getRng()),e.schema).each(o=>{e.selection.setRng(o.toRange())})},JM=(e,n,o,r)=>{if(o===0)return;const a=K.fromDom(e),u=To(a,S=>r.isBlock(wn(S))).getOr(a),f=e.data.slice(n,n+o),b=n+o>=e.data.length&&f2(u,Ce(e,e.data.length),r),C=n===0&&m2(u,Ce(e,0),r);e.replaceData(n,o,Ia(f,4,C,b))},Hx=(e,n,o)=>{const r=e.data.slice(n),a=r.length-jg(r).length;JM(e,n,a,o)},t3=(e,n,o)=>{const r=e.data.slice(0,n),a=r.length-rf(r).length;JM(e,n-a,a,o)},n3=(e,n,o,r,a=!0)=>{const u=rf(e.data).length,f=a?e:n,b=a?n:e;return a?f.appendData(b.data):f.insertData(0,b.data),ao(K.fromDom(b)),r&&Hx(f,u,o),f},P8=(e,n)=>{const o=e.container(),r=e.offset();return!Ce.isTextPosition(e)&&o===n.parentNode&&r>Ce.before(n).offset()},N8=(e,n)=>P8(n,e)?Ce(n.container(),n.offset()-1):n,B8=e=>Ne(e)?Ce(e,0):Ce.before(e),$8=e=>Ne(e)?Ce(e,e.data.length):Ce.after(e),Vx=e=>qa(e.previousSibling)?N.some($8(e.previousSibling)):e.previousSibling?Wc(e.previousSibling):N.none(),zx=e=>qa(e.nextSibling)?N.some(B8(e.nextSibling)):e.nextSibling?Pr(e.nextSibling):N.none(),F8=(e,n)=>N.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>xc(e,Ce.before(o))).orThunk(()=>Mr(e,Ce.after(n))),I8=(e,n)=>Mr(e,Ce.after(n)).orThunk(()=>xc(e,Ce.before(n))),L8=(e,n)=>Vx(n).orThunk(()=>zx(n)).orThunk(()=>F8(e,n)),H8=(e,n)=>zx(n).orThunk(()=>Vx(n)).orThunk(()=>I8(e,n)),V8=(e,n,o)=>e?H8(n,o):L8(n,o),z8=(e,n,o)=>V8(e,n,o).map(Be(N8,o)),QM=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},U8=e=>n=>n.dom===e,e5=(e,n)=>n&&$t(e.schema.getBlockElements(),wn(n)),W8=(e,n,o)=>{if(Or(e,n)){const r=K.fromHtml('<br data-mce-bogus="1">');return o?Se(Js(n),a=>{ep(a)||ao(a)}):gf(n),Bs(n,r),N.some(Ce.before(r.dom))}else return N.none()},Z8=(e,n,o,r)=>{const a=Hl(e).filter(Xs),u=Hr(e).filter(Xs);return ao(e),Nd(a,u,n,(f,b,C)=>{const S=f.dom,O=b.dom,R=S.data.length;return n3(S,O,o,r),C.container()===O?Ce(S,R):C}).orThunk(()=>(r&&(a.each(f=>t3(f.dom,f.dom.length,o)),u.each(f=>Hx(f.dom,0,o))),n))},lp=(e,n)=>$t(e.schema.getTextInlineElements(),wn(n)),up=(e,n,o,r=!0,a=!1)=>{const u=z8(n,e.getBody(),o.dom),f=To(o,Be(e5,e),U8(e.getBody())),b=Z8(o,u,e.schema,lp(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):f.bind(C=>W8(e.schema,C,a)).fold(()=>{r&&QM(e,n,b)},C=>{r&&QM(e,n,N.some(C))})},t5=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,j8=e=>t5.test(e),dp=(e,n)=>Bc(K.fromDom(n),pa(e))&&!Gd(e.schema,n)&&e.dom.isEditable(n),o3=e=>{var n;return Yn.DOM.getStyle(e,"direction",!0)==="rtl"||j8((n=e.textContent)!==null&&n!==void 0?n:"")},n5=(e,n,o)=>Rt(Yn.DOM.getParents(o.container(),"*",n),e),Im=(e,n,o)=>{const r=n5(e,n,o);return N.from(r[r.length-1])},o5=(e,n,o)=>{const r=Sc(n,e),a=Sc(o,e);return Oe(r)&&r===a},kc=e=>ll(e)||ql(e),Ni=(e,n)=>{const o=n.container(),r=n.offset();return e?ja(o)?Ne(o.nextSibling)?Ce(o.nextSibling,0):Ce.after(o):ll(n)?Ce(o,r+1):n:ja(o)?Ne(o.previousSibling)?Ce(o.previousSibling,o.previousSibling.data.length):Ce.before(o):ql(n)?Ce(o,r-1):n},s5=Be(Ni,!0),r5=Be(Ni,!1),c5=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},G8=e=>{e.execCommand("delete")},hd=e=>c5(e,"Delete"),a5=e=>c5(e,"ForwardDelete"),q8=e=>n=>Go(Ba(n),e,Sn),ko=e=>yc(e)||am(e),mp=(e,n)=>ia(e,n)?Vo(n,ko,q8(e)):N.none(),fg=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},i5=(e,n,o)=>Kt(Pr(o),Wc(o),(r,a)=>{const u=Ni(!0,r),f=Ni(!1,a),b=Ni(!1,n);return e?Mr(o,b).exists(C=>C.isEqual(f)&&n.isEqual(u)):xc(o,b).exists(C=>C.isEqual(u)&&n.isEqual(f))}).getOr(!0),fp=e=>(ew(e)?Hl(e):df(e)).bind(fp).orThunk(()=>N.some(e)),Ja=(e,n,o,r=!0)=>{var a;n.deleteContents();const u=fp(o).getOr(o),f=K.fromDom((a=e.dom.getParent(u.dom,e.dom.isBlock))!==null&&a!==void 0?a:o.dom);if(f.dom===e.getBody()?fg(e,r):Or(e.schema,f,{checkRootAsContent:!1})&&(il(f),r&&e.selection.setCursorLocation(f.dom,0)),!Sn(o,f)){const b=Go(Ba(f),o)?[]:aw(f);Se(b.concat(Js(o)),C=>{!Sn(C,f)&&!ia(C,f)&&Or(e.schema,C)&&ao(C)})}},h2=e=>n=>Sn(e,n),Wn=e=>zr(e,"td,th"),a0=(e,n)=>Yh(K.fromDom(e),n),l5=e=>Kt(e.startTable,e.endTable,(n,o)=>{const r=vv(n,u=>Sn(u,o)),a=vv(o,u=>Sn(u,n));return!r&&!a?e:{...e,startTable:r?N.none():e.startTable,endTable:a?N.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),u5=e=>l5(e),s3=(e,n)=>{const o=a0(e.startContainer,n),r=a0(e.endContainer,n),a=o.isSome(),u=r.isSome(),f=Kt(o,r,Sn).getOr(!1);return u5({startTable:o,endTable:r,isStartInTable:a,isEndInTable:u,isSameTable:f,isMultiTable:!f&&a&&u})},p2=(e,n)=>({start:e,end:n}),r3=(e,n,o)=>({rng:e,table:n,cells:o}),gp=ha.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),hp=(e,n)=>Ru(K.fromDom(e),"td,th",n),Ux=e=>!Sn(e.start,e.end),c3=(e,n)=>Yh(e.start,n).bind(o=>Yh(e.end,n).bind(r=>gi(Sn(o,r),o))),d5=(e,n)=>!Ux(e)&&c3(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),m5=(e,n)=>{const o=hp(e.startContainer,n),r=hp(e.endContainer,n);return Kt(o,r,p2)},f5=e=>n=>Yh(n,e).bind(o=>Nl(Wn(o)).map(r=>p2(n,r))),g5=e=>n=>Yh(n,e).bind(o=>Tr(Wn(o)).map(r=>p2(r,n))),gg=e=>n=>c3(n,e).map(o=>r3(n,o,Wn(o))),a3=(e,n,o,r)=>{if(o.collapsed||!e.forall(Ux))return N.none();if(n.isSameTable){const a=e.bind(gg(r));return N.some({start:a,end:a})}else{const a=hp(o.startContainer,r),u=hp(o.endContainer,r),f=a.bind(f5(r)).bind(gg(r)),b=u.bind(g5(r)).bind(gg(r));return N.some({start:f,end:b})}},Wx=(e,n)=>dc(e,o=>Sn(o,n)),i3=e=>Kt(Wx(e.cells,e.rng.start),Wx(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),K8=(e,n,o)=>e.exists(r=>d5(r,o)&&qy(r.start,n)),l3=(e,n)=>{const{startTable:o,endTable:r}=n,a=e.cloneRange();return o.each(u=>a.setStartAfter(u.dom)),r.each(u=>a.setEndBefore(u.dom)),a},h5=(e,n,o,r)=>a3(e,n,o,r).bind(({start:a,end:u})=>a.or(u)).bind(a=>{const{isSameTable:u}=n,f=i3(a).getOr([]);if(u&&a.cells.length===f.length)return N.some(gp.fullTable(a.table));if(f.length>0){if(u)return N.some(gp.partialTable(f,N.none()));{const b=l3(o,n);return N.some(gp.partialTable(f,N.some({...n,rng:b})))}}else return N.none()}),p5=(e,n,o,r)=>a3(e,n,o,r).bind(({start:a,end:u})=>{const f=a.bind(i3).getOr([]),b=u.bind(i3).getOr([]);if(f.length>0&&b.length>0){const C=l3(o,n);return N.some(gp.multiTable(f,b,C))}else return N.none()}),Zx=(e,n)=>{const o=h2(e),r=m5(n,o),a=s3(n,o);return K8(r,n,o)?r.map(u=>gp.singleCellTable(n,u.start)):a.isMultiTable?p5(r,a,n,o):h5(r,a,n,o)},u3=e=>Se(e,n=>{Ps(n,"contenteditable"),il(n)}),b5=(e,n)=>N.from(e.dom.getParent(n,e.dom.isBlock)).map(K.fromDom),v5=(e,n,o)=>{o.each(r=>{n?ao(r):(il(r),e.selection.setCursorLocation(r.dom,0))})},jx=(e,n,o,r)=>{const a=o.cloneRange();r?(a.setStart(o.startContainer,o.startOffset),a.setEndAfter(n.dom.lastChild)):(a.setStartBefore(n.dom.firstChild),a.setEnd(o.endContainer,o.endOffset)),Gx(e,a,n,!1).each(u=>u())},d3=e=>{const n=eg(e),o=K.fromDom(e.selection.getNode());_1(o.dom)&&Or(e.schema,o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&mo(n,r=>Sn(r,o))&&ur(o,"data-mce-selected","1")},m3=(e,n,o)=>N.some(()=>{const r=e.selection.getRng(),a=o.bind(({rng:u,isStartInTable:f})=>{const b=b5(e,f?u.endContainer:u.startContainer);u.deleteContents(),v5(e,f,b.filter(Be(Or,e.schema)));const C=f?n[0]:n[n.length-1];return jx(e,C,r,f),Or(e.schema,C)?N.none():N.some(f?n.slice(1):n.slice(0,-1))}).getOr(n);u3(a),d3(e)}),y5=(e,n,o,r)=>N.some(()=>{const a=e.selection.getRng(),u=n[0],f=o[o.length-1];jx(e,u,a,!0),jx(e,f,a,!1);const b=Or(e.schema,u)?n:n.slice(1),C=Or(e.schema,f)?o:o.slice(0,-1);u3(b.concat(C)),r.deleteContents(),d3(e)}),Gx=(e,n,o,r=!0)=>N.some(()=>{Ja(e,n,o,r)}),C5=(e,n)=>N.some(()=>up(e,!1,n)),w5=(e,n,o)=>Zx(n,o).bind(r=>r.fold(Be(Gx,e),Be(C5,e),Be(m3,e),Be(y5,e))),f3=(e,n)=>b2(e,n),S5=(e,n,o,r)=>qx(n,r).fold(()=>w5(e,n,o),a=>f3(e,a)),x5=(e,n,o)=>{const r=K.fromDom(e.getBody()),a=e.selection.getRng();return o.length!==0?m3(e,o,N.none()):S5(e,r,a,n)},g3=(e,n)=>as(gd(n,e),Sh),qx=(e,n)=>as(gd(n,e),Ji("caption")),E5=(e,n,o,r,a)=>cd(o,e.getBody(),a).bind(u=>g3(n,K.fromDom(u.getNode())).bind(f=>Sn(f,r)?N.none():N.some(Ot))),b2=(e,n)=>N.some(()=>{il(n),e.selection.setCursorLocation(n.dom,0)}),h3=(e,n,o,r)=>Pr(e.dom).bind(a=>Wc(e.dom).map(u=>n?o.isEqual(a)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(a))).getOr(!0),Kx=(e,n)=>b2(e,n),p3=(e,n,o)=>qx(e,K.fromDom(o.getNode())).fold(()=>N.some(Ot),r=>gi(!Sn(r,n),Ot)),Yx=(e,n,o,r,a)=>cd(o,e.getBody(),a).fold(()=>N.some(Ot),u=>h3(r,o,a,u)?Kx(e,r):p3(n,r,u)),T5=(e,n,o,r)=>{const a=Ce.fromRangeStart(e.selection.getRng());return g3(o,r).bind(u=>Or(e.schema,u,{checkRootAsContent:!1})?b2(e,u):E5(e,o,n,u,a))},Xx=(e,n,o,r)=>{const a=Ce.fromRangeStart(e.selection.getRng());return Or(e.schema,r)?b2(e,r):Yx(e,o,n,r,a)},Jx=(e,n)=>e?Fx(n):G4(n),v2=(e,n)=>{const o=Ce.fromRangeStart(e.selection.getRng());return Jx(n,o)||Uc(n,e.getBody(),o).exists(r=>Jx(n,r))},b3=(e,n,o)=>{const r=K.fromDom(e.getBody());return qx(r,o).fold(()=>T5(e,n,r,o).orThunk(()=>gi(v2(e,n),Ot)),a=>Xx(e,n,r,a))},Qx=(e,n)=>{const o=K.fromDom(e.selection.getStart(!0)),r=eg(e);return e.selection.isCollapsed()&&r.length===0?b3(e,n,o):x5(e,o,r)},pl=(e,n)=>{let o=n;for(;o&&o!==e;){if(Te(o)||Dn(o))return o;o=o.parentNode}return null},v3=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],y3=Ve.each,hg=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,f)=>{if(u.nodeName!==f.nodeName||u.nodeType!==f.nodeType)return!1;const b=S=>{const O={};return y3(n.getAttribs(S),R=>{const D=R.nodeName.toLowerCase();D!=="style"&&!a(D)&&(O[D]=n.getAttrib(S,D))}),O},C=(S,O)=>{for(const R in S)if($t(S,R)){const D=O[R];if(ss(D)||S[R]!==D)return!1;delete O[R]}for(const R in O)if($t(O,R))return!1;return!0};return tt(u)&&tt(f)&&(!C(b(u),b(f))||!C(n.parseStyle(n.getAttrib(u,"style")),n.parseStyle(n.getAttrib(f,"style"))))?!1:!Ec(u)&&!Ec(f)},a=u=>mo(v3,f=>fs(u,f))||o.has(u);return{compare:r,isAttributeInternal:a}},Lm=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),_5=e=>e.name==="summary",Y8=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},k5=(e,n,o,r)=>{const a=o.name;for(let u=0,f=e.length;u<f;u++){const b=e[u];if(b.name===a){const C=r.nodes[a];C?C.nodes.push(o):r.nodes[a]={filter:b,nodes:[o]}}}if(o.attributes)for(let u=0,f=n.length;u<f;u++){const b=n[u],C=b.name;if(C in o.attributes.map){const S=r.attributes[C];S?S.nodes.push(o):r.attributes[C]={filter:b,nodes:[o]}}}},O5=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&Y8(o,a=>{k5(e,n,a,r)}),r},C3=(e,n)=>{const o=(r,a)=>{rt(r,u=>{const f=mc(u.nodes);Se(u.filter.callbacks,b=>{for(let C=f.length-1;C>=0;C--){const S=f[C];(!(a?S.attr(u.filter.name)!==void 0:S.name===u.filter.name)||An(S.parent))&&f.splice(C,1)}f.length>0&&b(f,u.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},A5=(e,n,o,r={})=>{const a=O5(e,n,o);C3(a,r)},w3=(e,n,o,r)=>{if((e.pad_empty_with_br||n.insert)&&o(r)){const u=new _c("br",1);n.insert&&u.attr("data-mce-bogus","1"),r.empty().append(u)}else r.empty().append(new _c("#text",3)).value=Es},pg=e=>{var n;return bg(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===Es},bg=(e,n)=>{const o=e==null?void 0:e.firstChild;return Oe(o)&&o===e.lastChild&&o.name===n},kG=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},As=(e,n,o,r)=>r.isEmpty(n,o,a=>kG(e,a)),X8=(e,n)=>Oe(e)&&(n(e)||e.name==="br"),J8=e=>{let n;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(n=o)}return N.from(n)},ou=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const a of r)o&&!n.isValidChild(o.name,a.name)&&ou(a,n,o);e.unwrap()}},On=(e,n,o,r=Ot)=>{const a=n.getTextBlockElements(),u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=Ve.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),C=new Set,S=O=>O!==o&&!b[O.name];for(let O=0;O<e.length;O++){const R=e[O];let D,I,z;if(!R.parent||C.has(R))continue;if(a[R.name]&&R.parent.name==="li"){let Z=R.next;for(;Z&&a[Z.name];){Z.name="li",C.add(Z),R.parent.insert(Z,R.parent);Z=Z.next}R.unwrap();continue}const H=[R];for(D=R.parent;D&&!n.isValidChild(D.name,R.name)&&S(D);D=D.parent)H.push(D);if(D&&H.length>1)if(S3(n,R,D))ou(R,n);else{H.reverse(),I=H[0].clone(),r(I);let Z=I;for(let Y=0;Y<H.length-1;Y++){n.isValidChild(Z.name,H[Y].name)&&Y>0?(z=H[Y].clone(),r(z),Z.append(z)):z=Z;for(let re=H[Y].firstChild;re&&re!==H[Y+1];){const ce=re.next;z.append(re),re=ce}Z=z}As(n,u,f,I)?D.insert(R,H[0],!0):(D.insert(I,H[0],!0),D.insert(R,I)),D=H[0],(As(n,u,f,D)||bg(D,"br"))&&D.empty().remove()}else if(R.parent){if(R.name==="li"){let Z=R.prev;if(Z&&(Z.name==="ul"||Z.name==="ol")){Z.append(R);continue}if(Z=R.next,Z&&(Z.name==="ul"||Z.name==="ol")&&Z.firstChild){Z.insert(R,Z.firstChild,!0);continue}const Y=new _c("ul",1);r(Y),R.wrap(Y);continue}if(n.isValidChild(R.parent.name,"div")&&n.isValidChild("div",R.name)){const Z=new _c("div",1);r(Z),R.wrap(Z)}else ou(R,n)}}},OG=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},S3=(e,n,o=n.parent)=>o?e.children[n.name]&&!e.isValidChild(o.name,n.name)||n.name==="a"&&OG(o,"a")?!0:_5(o)&&Lm(n)?!((o==null?void 0:o.firstChild)===n&&(o==null?void 0:o.lastChild)===n):!1:!1,Q8=(e,n,o,r)=>{const a=document.createRange();return a.setStart(e,n),a.setEnd(o,r),a},ho=e=>{const n=Ce.fromRangeStart(e),o=Ce.fromRangeEnd(e),r=e.commonAncestorContainer;return Uc(!1,r,o).map(a=>!Ai(n,o,r)&&Ai(n,a,r)?Q8(n.container(),n.offset(),a.container(),a.offset()):e).getOr(e)},eE=e=>e.collapsed?e:ho(e),y2=e=>Oe(e.firstChild)&&e.firstChild===e.lastChild,C2=e=>e.name==="br"||e.value===Es,w2=(e,n)=>e.getBlockElements()[n.name]&&y2(n)&&C2(n.firstChild),S2=(e,n)=>{const o=e.getNonEmptyElements();return Oe(n)&&(n.isEmpty(o)||w2(e,n))},R5=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),S2(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},AG=e=>{var n,o;const r=e.firstChild,a=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),a&&a.id==="mce_marker"&&((o=a.parentNode)===null||o===void 0||o.removeChild(a)),e},RG=(e,n,o)=>{const r=n.serialize(o),a=e.createFragment(r);return AG(a)},DG=e=>{var n;return Rt((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},MG=e=>e.data===Es||Rn(e),e7=e=>Oe(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&MG(e.firstChild),PG=e=>!e.firstChild||e7(e),t7=e=>e.length>0&&PG(e[e.length-1])?e.slice(0,-1):e,x3=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},NG=(e,n)=>!!x3(e,n),n7=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},Uo=(e,n)=>{const o=Ce.before(e),a=hr(n).next(o);return a?a.toRange():null},E3=(e,n)=>{const o=Ce.after(e),a=hr(n).prev(o);return a?a.toRange():null},D5=(e,n,o,r)=>{const a=n7(e,r),u=e.parentNode;return u&&(u.insertBefore(a[0],e),Ve.each(n,f=>{u.insertBefore(f,e)}),u.insertBefore(a[1],e),u.removeChild(e)),E3(n[n.length-1],o)},o7=(e,n,o)=>{const r=e.parentNode;return r&&Ve.each(n,a=>{r.insertBefore(a,e)}),Uo(e,o)},s7=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),E3(n[0],o)),r7=(e,n,o,r)=>{const a=RG(n,e,r),u=x3(n,o.startContainer),f=t7(DG(a.firstChild)),b=1,C=2,S=n.getRoot(),O=R=>{const D=Ce.fromRangeStart(o),I=hr(n.getRoot()),z=R===b?I.prev(D):I.next(D),H=z==null?void 0:z.getNode();return H?x3(n,H)!==u:!0};return u?O(b)?o7(u,f,S):O(C)?s7(u,f,S,n):D5(u,f,S,o):null},Sa=["pre"],bl=(e,n,o,r)=>{var a;const u=n.firstChild,f=n.lastChild,b=f.attr("data-mce-type")==="bookmark"?f.prev:f,C=u===b,S=zt(Sa,u.name);if(C&&S){const O=u.attr("contenteditable")!=="false",R=((a=e.getParent(o,e.isBlock))===null||a===void 0?void 0:a.nodeName.toLowerCase())===u.name,D=N.from(pl(r,o)).forall(Te);return O&&R&&D}else return!1},tE=_1,T3=(e,n,o)=>{if(Oe(o)){const r=e.getParent(n.endContainer,tE);return o===r&&qy(K.fromDom(o),n)}else return!1},_3=(e,n,o)=>{var r;if(o.getAttribute("data-mce-bogus")==="all")(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o);else{const a=o.firstChild,u=o.lastChild;!a||a===u&&a.nodeName==="BR"?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})}},nE=(e,n,o)=>{N.from(e.getParent(n,"td,th")).map(K.fromDom).each(r=>uk(r,o))},M5=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const a=e.getBody(),u=hg(e),f="*[data-mce-fragment]",b=r.select(f);Ve.each(b,C=>{const S=D=>Oe(o[D.nodeName.toLowerCase()]),O=D=>D.childNodes.length===1;if((D=>!($M(r,D)||p8(r,D)))(C)&&S(C)&&O(C)){const D=s0(r,C),I=(Y,re)=>ir(Y,ce=>zt(re,ce)),z=Y=>O(C)&&r.is(Y,f)&&S(Y)&&(Y.nodeName===C.nodeName&&I(D,s0(r,Y))||z(Y.children[0])),H=Y=>Oe(Y)&&Y!==a&&(u.compare(C,Y)||H(Y.parentElement)),Z=Y=>Oe(Y)&&Y!==a&&r.is(Y,f)&&(v8(r,C,Y)||Z(Y.parentElement));(z(C.children[0])||H(C.parentElement)&&!Z(C.parentElement))&&r.remove(C,!0)}})}},x2=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},oE=e=>{Ve.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},k3=e=>!!e.getAttribute("data-mce-fragment"),P5=(e,n)=>Oe(n)&&!e.schema.getVoidElements()[n.nodeName],E2=(e,n)=>{var o,r,a;let u;const f=e.dom,b=e.selection;if(!n)return;b.scrollIntoView(n);const C=pl(e.getBody(),n);if(C&&f.getContentEditable(C)==="false"){f.remove(n),b.select(C);return}let S=f.createRng();const O=n.previousSibling;if(Ne(O)){S.setStart(O,(r=(o=O.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const I=n.nextSibling;Ne(I)&&(O.appendData(I.data),(a=I.parentNode)===null||a===void 0||a.removeChild(I))}else S.setStartBefore(n),S.setEndBefore(n);const R=I=>{let z=Ce.fromRangeStart(I);return z=hr(e.getBody()).next(z),z==null?void 0:z.toRange()},D=f.getParent(n,f.isBlock);if(f.remove(n),D&&f.isEmpty(D)){const I=tE(D);gf(K.fromDom(D)),S.setStart(D,0),S.setEnd(D,0),!I&&!k3(D)&&(u=R(S))?(S=u,f.remove(D)):f.add(D,f.create("br",I?{}:{"data-mce-bogus":"1"}))}b.setRng(S)},c7=e=>{const n=e.dom,o=eE(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,tE);T3(n,o,r)?Gx(e,o,K.fromDom(r)):o.startContainer===o.endContainer&&o.endOffset-o.startOffset===1&&Ne(o.startContainer.childNodes[o.startOffset])?o.deleteContents():e.getDoc().execCommand("Delete",!1)},a7=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return N.some(n);return N.none()},su=(e,n,o)=>{var r;return mo(o.children(),Lm)&&((r=e.getParent(n,e.isBlock))===null||r===void 0?void 0:r.nodeName)==="SUMMARY"},xa=(e,n,o)=>{var r,a;const u=e.selection,f=e.dom,b=e.parser,C=o.merge,S=lg({validate:!0},e.schema),O='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';o.preserve_zwsp||(n=ma(n)),n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,O);let R=u.getRng();const D=R.startContainer,I=e.getBody();D===I&&u.isCollapsed()&&f.isBlock(I.firstChild)&&P5(e,I.firstChild)&&f.isEmpty(I.firstChild)&&(R=f.createRng(),R.setStart(I.firstChild,0),R.setEnd(I.firstChild,0),u.setRng(R)),u.isCollapsed()||c7(e);const z=u.getNode(),H={context:z.nodeName.toLowerCase(),data:o.data,insert:!0},Z=b.parse(n,H);if(o.paste===!0&&R5(e.schema,Z)&&NG(f,z))return R=r7(S,f,u.getRng(),Z),R&&u.setRng(R),n;o.paste===!0&&bl(f,Z,z,e.getBody())&&((r=Z.firstChild)===null||r===void 0||r.unwrap()),x2(Z);let Y=Z.lastChild;if(Y&&Y.attr("id")==="mce_marker"){const re=Y;for(Y=Y.prev;Y&&Y.name!=="table";Y=Y.walk(!0))if(Y.type===3||!f.isBlock(Y.name)){Y.parent&&e.schema.isValidChild(Y.parent.name,"span")&&Y.parent.insert(re,Y,Y.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(z),!H.invalid&&!su(f,z,Z))n=S.serialize(Z),_3(e,n,z);else{e.selection.setContent(O);let re=u.getNode(),ce;const ie=e.getBody();for(bf(re)?re=ce=ie:ce=re;ce&&ce!==ie;)re=ce,ce=ce.parentNode;n=re===ie?ie.innerHTML:f.getOuterHTML(re);const _e=b.parse(n),Ie=a7(_e),st=Ie.bind(J8).getOr(_e);Ie.each(ct=>ct.replace(Z));const we=Z.children(),he=(a=Z.parent)!==null&&a!==void 0?a:_e;Z.unwrap();const Ae=Rt(we,ct=>S3(e.schema,ct,he));On(Ae,e.schema,st),A5(b.getNodeFilters(),b.getAttributeFilters(),_e),n=S.serialize(_e),re===ie?f.setHTML(ie,n):f.setOuterHTML(re,n)}return M5(e,C),E2(e,f.get("mce_marker")),oE(e.getBody()),nE(f,u.getStart(),e.schema),kv(e.schema,e.getBody(),u.getStart()),n},vg=e=>e instanceof _c,Bi=e=>{o0(e)&&Pr(e.getBody()).each(n=>{const o=n.getNode(),r=yi(o)?Pr(o).getOr(n):n;e.selection.setRng(r.toRange())})},O3=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&Bi(e)},no=(e,n,o,r)=>{if(o=ma(o),o.length===0||/^\s+$/.test(o)){const a='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+a+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+a+"</li>");const u=gr(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(o=a,o=e.dom.createHTML(u,Qu(e),o)):o||(o=a),O3(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=lg({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const a=Y1(K.fromDom(n))?o:Ve.trim(o);return O3(e,a,r.no_selection),{content:a,html:a}}},i7=(e,n,o,r)=>{A5(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const a=lg({validate:!1},e.schema).serialize(o),u=ma(Y1(K.fromDom(n))?a:Ve.trim(a));return O3(e,u,r.no_selection),{content:o,html:u}},pp=(e,n,o)=>N.from(e.getBody()).map(r=>vg(n)?i7(e,r,n,o):no(e,r,n,o)).getOr({content:n,html:vg(o.content)?"":o.content}),i0=e=>Q(e)?e:De,N5=(e,n,o)=>{let r=e.dom;const a=i0(o);for(;r.parentNode;){r=r.parentNode;const u=K.fromDom(r),f=n(u);if(f.isSome())return f;if(a(u))break}return N.none()},T2=(e,n,o)=>{const r=n(e),a=i0(o);return r.orThunk(()=>a(e)?N.none():N5(e,n,a))},_2=$b,B5=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let a=0;a<r.length;a++){const u=r[a];if(va(u)&&u.inherit===!1&&e.dom.is(n,u.selector))return!0}return!1},k2=(e,n,o,r,a)=>{const u=e.dom.getRoot();if(n===u)return!1;const f=e.dom.getParent(n,b=>B5(e,b,o)?!0:b.parentNode===u||!!ru(e,b,o,r,!0));return!!ru(e,f,o,r,a)},sE=(e,n,o)=>Hs(o)&&_2(n,o.inline)||gl(o)&&_2(n,o.block)?!0:va(o)?tt(n)&&e.is(n,o.selector):!1,A3=(e,n,o,r,a,u)=>{const f=o[r],b=r==="attributes";if(Q(o.onmatch))return o.onmatch(n,o,r);if(f){if(J0(f)){for(let C=0;C<f.length;C++)if(b?e.getAttrib(n,f[C]):Yy(e,n,f[C]))return!0}else for(const C in f)if($t(f,C)){const S=b?e.getAttrib(n,C):Yy(e,n,C),O=Am(f[C],u),R=An(S)||Dc(S);if(R&&An(O))continue;if(a&&R&&!o.exact||(!a||o.exact)&&!_2(S,ud(O,C)))return!1}}return!0},ru=(e,n,o,r,a)=>{const u=e.formatter.get(o),f=e.dom;if(u&&tt(n))for(let b=0;b<u.length;b++){const C=u[b];if(sE(e.dom,n,C)&&A3(f,n,C,"attributes",a,r)&&A3(f,n,C,"styles",a,r)){const S=C.classes;if(S){for(let O=0;O<S.length;O++)if(!e.dom.hasClass(n,Am(S[O],r)))return}return C}}},O2=(e,n,o,r,a)=>{if(r)return k2(e,r,n,o,a);if(r=e.selection.getNode(),k2(e,r,n,o,a))return!0;const u=e.selection.getStart();return!!(u!==r&&k2(e,u,n,o,a))},$5=(e,n,o)=>{const r=[],a={},u=e.selection.getStart();return e.dom.getParent(u,f=>{for(let b=0;b<n.length;b++){const C=n[b];!a[C]&&ru(e,f,C,o)&&(a[C]=!0,r.push(C))}},e.dom.getRoot()),r},rE=(e,n)=>{const o=a=>Sn(a,K.fromDom(e.getBody())),r=(a,u)=>ru(e,a.dom,u)?N.some(u):N.none();return N.from(e.selection.getStart(!0)).bind(a=>T2(K.fromDom(a),u=>_d(n,f=>r(u,f)),o)).getOrNull()},l7=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o&&e.selection.isEditable()){const a=e.selection.getStart(),u=Rm(r,a);for(let f=o.length-1;f>=0;f--){const b=o[f];if(!va(b))return!0;for(let C=u.length-1;C>=0;C--)if(r.is(u[C],b.selector))return!0}}return!1},u7=(e,n,o)=>Zo(o,(r,a)=>{const u=lx(e,a);return e.formatter.matchNode(n,a,{},u)?r.concat([a]):r},[]),A2=ks,d7=(e,n)=>e.importNode(n,!0),F5=e=>{if(e){const n=new xs(e,e);for(let o=n.current();o;o=n.next())if(Ne(o))return o}return null},cE=e=>{const n=K.fromTag("span");return Lr(n,{id:_b,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Bs(n,K.fromText(A2)),n},m7=e=>{const n=F5(e);return n&&n.data.charAt(0)===A2&&n.deleteData(0,1),n},R3=(e,n,o)=>{const r=e.dom,a=e.selection;if(mx(n))up(e,!1,K.fromDom(n),o,!0);else{const u=a.getRng(),f=r.getParent(n,r.isBlock),b=u.startContainer,C=u.startOffset,S=u.endContainer,O=u.endOffset,R=m7(n);r.remove(n,!0),b===R&&C>0&&u.setStart(R,C-1),S===R&&O>0&&u.setEnd(R,O-1),f&&r.isEmpty(f)&&il(K.fromDom(f)),a.setRng(u)}},aE=(e,n,o)=>{const r=e.dom,a=e.selection;if(n)R3(e,n,o);else if(n=xm(e.getBody(),a.getStart()),!n)for(;n=r.get(_b);)R3(e,n,o)},f7=(e,n,o)=>{var r,a;const u=e.dom,f=u.getParent(o,Be(Jh,e.schema));f&&u.isEmpty(f)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(jv(K.fromDom(o)),u.isEmpty(o)?(a=o.parentNode)===null||a===void 0||a.replaceChild(n,o):u.insertAfter(n,o))},D3=(e,n)=>(e.appendChild(n),n),l0=(e,n)=>{var o;const r=Td(e,(u,f)=>D3(u,f.cloneNode(!1)),n),a=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return D3(r,a.createTextNode(A2))},g7=(e,n,o,r,a,u)=>{const f=e.formatter,b=e.dom,C=Rt(Ir(f.get()),R=>R!==r&&!br(R,"removeformat")),S=u7(e,o,C);if(Rt(S,R=>!ux(e,R,r)).length>0){const R=o.cloneNode(!1);return b.add(n,R),f.remove(r,a,R,u),b.remove(R),N.some(R)}else return N.none()},I5=e=>Nf(e,Pf(e).replace(new RegExp(`${Es}$`)," ")),M3=(e,n)=>{const o=()=>{n!==null&&!e.dom.isEmpty(n)&&Hl(K.fromDom(n)).each(r=>{Xs(r)?I5(r):fv(r,a=>Xs(a)).each(a=>{Xs(a)&&I5(a)})})};e.once("input",r=>{r.data&&!Tm(r.data)&&(r.isComposing?e.once("compositionend",()=>{o()}):o())})},h7=(e,n,o)=>{let r;const a=e.selection,u=e.formatter.get(n);if(!u)return;const f=a.getRng();let b=f.startOffset;const S=f.startContainer.nodeValue;r=xm(e.getBody(),a.getStart());const O=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(S&&b>0&&b<S.length&&O.test(S.charAt(b))&&O.test(S.charAt(b-1))){const R=a.getBookmark();f.collapse(!0);let D=dd(e.dom,f,u);D=ft(D),e.formatter.apply(n,o,D),a.moveToBookmark(R)}else{let R=r?F5(r):null;(!r||(R==null?void 0:R.data)!==A2)&&(r=d7(e.getDoc(),cE(!0).dom),R=r.firstChild,f.insertNode(r),b=1,M3(e,r)),e.formatter.apply(n,o,r),a.setCursorLocation(R,b)}},L5=(e,n,o,r)=>{const a=e.dom,u=e.selection;let f=!1;const b=e.formatter.get(n);if(!b)return;const C=u.getRng(),S=C.startContainer,O=C.startOffset;let R=S;Ne(S)&&(O!==S.data.length&&(f=!0),R=R.parentNode);const D=[];let I;for(;R;){if(ru(e,R,n,o,r)){I=R;break}R.nextSibling&&(f=!0),D.push(R),R=R.parentNode}if(I)if(f){const z=u.getBookmark();C.collapse(!0);let H=dd(a,C,b,!0);H=ft(H),e.formatter.remove(n,o,H,r),u.moveToBookmark(z)}else{const z=xm(e.getBody(),I),H=Oe(z)?a.getParents(I.parentNode,it,z):[],Z=cE(!1).dom;f7(e,Z,z??I);const Y=g7(e,Z,I,n,o,r),re=l0([...D,...Y.toArray(),...H],Z);z&&R3(e,z,Oe(z)),u.setCursorLocation(re,1),M3(e,Z),a.isEmpty(I)&&a.remove(I)}},$i=(e,n,o)=>{const r=e.selection,a=e.getBody();aE(e,null,o),(n===8||n===46)&&r.isCollapsed()&&r.getStart().innerHTML===A2&&aE(e,xm(a,r.getStart()),!0),(n===37||n===39)&&aE(e,xm(a,r.getStart()),!0)},p7=e=>Ne(e)&&Fl(e.data,Es),H5=e=>{e.on("mouseup keydown",n=>{$i(e,n.keyCode,p7(e.selection.getRng().endContainer))})},iE=e=>{const n=cE(!1),o=l0(e,n.dom);return{caretContainer:n,caretPosition:Ce(o,0)}},lE=(e,n)=>{const{caretContainer:o,caretPosition:r}=iE(n);return co(K.fromDom(e),o),ao(K.fromDom(e)),r},V5=(e,n)=>{const{caretContainer:o,caretPosition:r}=iE(n);return e.insertNode(o.dom),r},P3=(e,n)=>{if(Zc(n.dom))return!1;const o=e.schema.getTextInlineElements();return $t(o,wn(n))&&!Zc(n.dom)&&!zl(n.dom)},R2={},z5=Ha(["pre"]),U5=(e,n)=>{R2[e]||(R2[e]=[]),R2[e].push(n)},W5=(e,n)=>{$t(R2,e)&&Se(R2[e],o=>{o(n)})};U5("pre",e=>{const n=e.selection.getRng(),o=a=>u=>{const f=u.previousSibling;return z5(f)&&zt(a,f)},r=(a,u)=>{const f=K.fromDom(u),b=Ou(f).dom;ao(f),Du(K.fromDom(a),[K.fromTag("br",b),K.fromTag("br",b),...Js(f)])};if(!n.collapsed){const a=e.selection.getSelectedBlocks(),u=Rt(Rt(a,z5),o(a));Se(u,f=>{r(f.previousSibling,f)})}});const Qa=["fontWeight","fontStyle","color","fontSize","fontFamily"],b7=e=>hn(e.styles)&&mo(Ir(e.styles),n=>zt(Qa,n)),v7=e=>as(e,n=>Hs(n)&&n.inline==="span"&&b7(n)),y7=(e,n)=>{const o=e.get(n);return yn(o)?v7(o):N.none()},uE=(e,n)=>xc(n,Ce.fromRangeStart(e)).isNone(),Z5=(e,n)=>Mr(n,Ce.fromRangeEnd(e)).exists(o=>!Rn(o.getNode())||Mr(n,o).isSome())===!1,C7=e=>n=>Va(n)&&e.isEditable(n),w7=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return uE(o,n[0])&&Z5(o,n[0])?n:[];{const r=Tr(n).filter(f=>uE(o,f)).toArray(),a=Nl(n).filter(f=>Z5(o,f)).toArray(),u=n.slice(1,-1);return r.concat(u).concat(a)}},N3=e=>Rt(w7(e),C7(e.dom)),vl=e=>Rt(e.getSelectedBlocks(),C7(e.dom)),D2=Ve.each,u0=e=>tt(e)&&!Ec(e)&&!Zc(e)&&!zl(e),dE=(e,n)=>{for(let o=e;o;o=o[n]){if(Ne(o)&&Jn(o.data))return e;if(tt(o)&&!Ec(o))return o}return e},j5=(e,n,o)=>{const r=hg(e),a=La(n)&&e.dom.isEditable(n),u=La(o)&&e.dom.isEditable(o);if(a&&u){const f=dE(n,"previousSibling"),b=dE(o,"nextSibling");if(r.compare(f,b)){for(let C=f.nextSibling;C&&C!==b;){const S=C;C=C.nextSibling,f.appendChild(S)}return e.dom.remove(b),Ve.each(Ve.grep(b.childNodes),C=>{f.appendChild(C)}),f}}return o},B3=(e,n,o,r)=>{var a;if(r&&n.merge_siblings!==!1){const u=(a=j5(e,Ky(r),r))!==null&&a!==void 0?a:r;j5(e,u,Ky(u,!0))}},S7=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";D2(e.select(r,o),a=>{u0(a)&&e.isEditable(a)&&D2(n.styles,(u,f)=>{e.setStyle(a,f,"")})})}},mE=(e,n,o)=>{D2(e.childNodes,r=>{u0(r)&&(n(r)&&o(r),r.hasChildNodes()&&mE(r,n,o))})},$3=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},G5=(e,n)=>o=>!!(o&&Yy(e,o,n)),F3=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),$3(e,r)},bp=ha.generate([{keep:[]},{rename:["name"]},{removed:[]}]),vp=/^(src|href|style)$/,fE=Ve.each,gE=$b,q5=e=>/^(TR|TH|TD)$/.test(e.nodeName),K5=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),Y5=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],a=n[o?"startOffset":"endOffset"];if(tt(r)){const u=r.childNodes.length-1;!o&&a&&a--,r=r.childNodes[a>u?u:a]}return Ne(r)&&o&&a>=r.data.length&&(r=new xs(r,e.getBody()).next()||r),Ne(r)&&!o&&a===0&&(r=new xs(r,e.getBody()).prev()||r),r},X5=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return q5(e)&&r?e.nodeName==="TR"&&r[o]||r:e},I3=(e,n,o,r)=>{var a;const u=e.create(o,r);return(a=n.parentNode)===null||a===void 0||a.insertBefore(u,n),u.appendChild(n),u},J5=(e,n,o,r,a)=>{const u=K.fromDom(n),f=K.fromDom(e.create(r,a)),b=o?p1(u):iw(u);return Du(f,b),o?(co(u,f),Hd(f,u)):(vi(u,f),Bs(f,u)),f.dom},Q5=(e,n)=>n.links&&e.nodeName==="A",eP=(e,n,o)=>{const r=n.parentNode;let a;const u=e.dom,f=gr(e);gl(o)&&r===u.getRoot()&&(!o.list_block||!gE(n,o.list_block))&&Se(mc(n.childNodes),b=>{Om(e,f,b.nodeName.toLowerCase())?a?a.appendChild(b):(a=I3(u,b,f),u.setAttribs(a,Qu(e))):a=null}),!(r4(o)&&!gE(o.inline,n))&&u.remove(n,!0)},hE=(e,n,o)=>lc(e)?{name:n,value:null}:{name:e,value:Am(n,o)},yg=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},tP=(e,n,o,r,a)=>{let u=!1;fE(o.styles,(f,b)=>{const{name:C,value:S}=hE(b,f,r),O=ud(S,C);(o.remove_similar||te(S)||!tt(a)||gE(Yy(e,a,C),O))&&e.setStyle(n,C,""),u=!0}),u&&yg(e,n)},x7=(e,n,o)=>{n==="removeformat"?Se(vl(e.selection),r=>{Se(Qa,a=>e.dom.setStyle(r,a,"")),yg(e.dom,r)}):y7(e.formatter,n).each(r=>{Se(vl(e.selection),a=>tP(e.dom,a,r,o,null))})},M2=(e,n,o,r,a)=>{const u=e.dom,f=hg(e),b=e.schema;if(Hs(n)&&ua(b,n.inline)&&Gd(b,r)&&r.parentElement===e.getBody())return eP(e,r,n),bp.removed();if(!n.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!sE(u,r,n)&&!Q5(r,n))return bp.keep();const C=r,S=n.preserve_attributes;if(Hs(n)&&n.remove==="all"&&yn(S)){const O=Rt(u.getAttribs(C),R=>zt(S,R.name.toLowerCase()));if(u.removeAllAttribs(C),Se(O,R=>u.setAttrib(C,R.name,R.value)),O.length>0)return bp.rename("span")}if(n.remove!=="all"){tP(u,C,n,o,a),fE(n.attributes,(R,D)=>{const{name:I,value:z}=hE(D,R,o);if(n.remove_similar||te(z)||!tt(a)||gE(u.getAttrib(a,I),z)){if(I==="class"){const H=u.getAttrib(C,I);if(H){let Z="";if(Se(H.split(/\s+/),Y=>{/mce\-\w+/.test(Y)&&(Z+=(Z?" ":"")+Y)}),Z){u.setAttrib(C,I,Z);return}}}if(vp.test(I)&&C.removeAttribute("data-mce-"+I),I==="style"&&Ha(["li"])(C)&&u.getStyle(C,"list-style-type")==="none"){C.removeAttribute(I),u.setStyle(C,"list-style-type","none");return}I==="class"&&C.removeAttribute("className"),C.removeAttribute(I)}}),fE(n.classes,R=>{R=Am(R,o),(!tt(a)||u.hasClass(a,R))&&u.removeClass(C,R)});const O=u.getAttribs(C);for(let R=0;R<O.length;R++){const D=O[R].nodeName;if(!f.isAttributeInternal(D))return bp.keep()}}return n.remove!=="none"?(eP(e,C,n),bp.removed()):bp.keep()},nP=(e,n,o,r,a)=>{let u;return n.parentNode&&Se(Rm(e.dom,n.parentNode).reverse(),f=>{if(!u&&tt(f)&&f.id!=="_start"&&f.id!=="_end"){const b=ru(e,f,o,r,a);b&&b.split!==!1&&(u=f)}}),u},oP=(e,n,o,r)=>M2(e,n,o,r,r).fold(Ke(r),a=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,a)),Ke(null)),E7=(e,n,o,r,a,u,f,b)=>{var C,S;let O,R;const D=e.dom;if(o){const I=o.parentNode;for(let z=r.parentNode;z&&z!==I;z=z.parentNode){let H=D.clone(z,!1);for(let Z=0;Z<n.length&&(H=oP(e,n[Z],b,H),H!==null);Z++);H&&(O&&H.appendChild(O),R||(R=H),O=H)}(!f.mixed||!D.isBlock(o))&&(r=(C=D.split(o,r))!==null&&C!==void 0?C:r),O&&R&&((S=a.parentNode)===null||S===void 0||S.insertBefore(O,a),R.appendChild(a),Hs(f)&&B3(e,f,b,O))}return r},sP=(e,n,o,r,a)=>{const u=e.formatter.get(n),f=u[0],b=e.dom,C=e.selection,S=H=>{const Z=nP(e,H,n,o,a);return E7(e,u,Z,H,H,!0,f,o)},O=H=>Ec(H)&&tt(H)&&(H.id==="_start"||H.id==="_end"),R=H=>mo(u,Z=>cu(e,Z,o,H,H)),D=H=>{const Z=mc(H.childNodes),re=R(H)||mo(u,_e=>sE(b,H,_e)),ce=H.parentNode;if(!re&&Oe(ce)&&Ri(f)&&R(ce),f.deep&&Z.length)for(let _e=0;_e<Z.length;_e++)D(Z[_e]);Se(["underline","line-through","overline"],_e=>{tt(H)&&e.dom.getStyle(H,"text-decoration")===_e&&H.parentNode&&Xy(b,H.parentNode)===_e&&cu(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:_e}},void 0,H)})},I=H=>{const Z=b.get(H?"_start":"_end");if(Z){let Y=Z[H?"firstChild":"lastChild"];return O(Y)&&(Y=Y[H?"firstChild":"lastChild"]),Ne(Y)&&Y.data.length===0&&(Y=H?Z.previousSibling||Z.nextSibling:Z.nextSibling||Z.previousSibling),b.remove(Z,!0),Y}else return null},z=H=>{let Z,Y,re=dd(b,H,u,H.collapsed);if(f.split){if(re=ft(re),Z=Y5(e,re,!0),Y=Y5(e,re),Z!==Y){if(Z=X5(Z,!0),Y=X5(Y,!1),K5(b,Z,Y)){const ie=N.from(Z.firstChild).getOr(Z);S(J5(b,ie,!0,"span",{id:"_start","data-mce-type":"bookmark"})),I(!0);return}if(K5(b,Y,Z)){const ie=N.from(Y.lastChild).getOr(Y);S(J5(b,ie,!1,"span",{id:"_end","data-mce-type":"bookmark"})),I(!1);return}Z=I3(b,Z,"span",{id:"_start","data-mce-type":"bookmark"}),Y=I3(b,Y,"span",{id:"_end","data-mce-type":"bookmark"});const ce=b.createRng();ce.setStartAfter(Z),ce.setEndBefore(Y),sg(b,ce,ie=>{Se(ie,_e=>{!Ec(_e)&&!Ec(_e.parentNode)&&S(_e)})}),S(Z),S(Y),Z=I(!0),Y=I()}else Z=Y=S(Z);re.startContainer=Z.parentNode?Z.parentNode:Z,re.startOffset=b.nodeIndex(Z),re.endContainer=Y.parentNode?Y.parentNode:Y,re.endOffset=b.nodeIndex(Y)+1}sg(b,re,ce=>{Se(ce,D)})};if(r){if(km(r)){const H=b.createRng();H.setStartBefore(r),H.setEndAfter(r),z(H)}else z(r);np(e,n,r,o);return}!C.isCollapsed()||!Hs(f)||eg(e).length?(ld(e,()=>tg(e,z),H=>Hs(f)&&O2(e,n,o,H)),e.nodeChanged()):L5(e,n,o,a),x7(e,n,o),np(e,n,r,o)},rP=(e,n,o,r,a)=>{(r||e.selection.isEditable())&&sP(e,n,o,r,a)},cu=(e,n,o,r,a)=>M2(e,n,o,r,a).fold(De,u=>(e.dom.rename(r,u),!0),it),L3=Ve.each,cP=(e,n,o,r)=>{const a=u=>{if(La(u)&&tt(u.parentNode)&&e.isEditable(u)){const f=Xy(e,u.parentNode);e.getStyle(u,"color")&&f?e.setStyle(u,"text-decoration",f):e.getStyle(u,"text-decoration")===f&&e.setStyle(u,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(Ve.walk(r,a,"childNodes"),a(r))},aP=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const a=G5(e,"fontSize");mE(r,u=>a(u)&&e.isEditable(u),F3(e,"backgroundColor",Am(n.styles.backgroundColor,o)))}},pE=(e,n,o,r)=>{if(Hs(n)&&(n.inline==="sub"||n.inline==="sup")){const a=G5(e,"fontSize");mE(r,f=>a(f)&&e.isEditable(f),F3(e,"fontSize",""));const u=Rt(e.select(n.inline==="sup"?"sub":"sup",r),e.isEditable);e.remove(u,!0)}},iP=(e,n,o,r)=>{L3(n,a=>{Hs(a)&&L3(e.dom.select(a.inline,r),u=>{u0(u)&&cu(e,a,o,u,a.exact?u:null)}),S7(e.dom,a,r)})},T7=(e,n,o,r,a)=>{const u=a.parentNode;ru(e,u,o,r)&&cu(e,n,r,a)||n.merge_with_parents&&u&&e.dom.getParent(u,f=>ru(e,f,o,r)?(cu(e,n,r,a),!0):!1)},P2=Ve.each,_7=(e,n,o,r)=>{if(SS(e)&&Hs(n)&&o.parentNode){const a=Dv(e.schema),u=hw(K.fromDom(o),f=>Zc(f.dom));return fc(a,r)&&Fs(e.schema,o.parentNode,{skipBogus:!1,includeZwsp:!0})&&!u}else return!1},lP=(e,n,o,r)=>{if(P2(o.styles,(a,u)=>{e.setStyle(n,u,Am(a,r))}),o.styles){const a=e.getAttrib(n,"style");a&&e.setAttrib(n,"data-mce-style",a)}},bE=(e,n,o,r)=>{const a=e.formatter.get(n),u=a[0],f=!r&&e.selection.isCollapsed(),b=e.dom,C=e.selection,S=(z,H=u)=>{Q(H.onformat)&&H.onformat(z,H,o,r),lP(b,z,H,o),P2(H.attributes,(Z,Y)=>{b.setAttrib(z,Y,Am(Z,o))}),P2(H.classes,Z=>{const Y=Am(Z,o);b.hasClass(z,Y)||b.addClass(z,Y)})},O=(z,H)=>{let Z=!1;return P2(z,Y=>va(Y)?b.getContentEditable(H)==="false"&&!Y.ceFalseOverride||Oe(Y.collapsed)&&Y.collapsed!==f?!0:b.is(H,Y.selector)&&!Zc(H)?(S(H,Y),Z=!0,!1):!0:!1),Z},R=z=>{if(J(z)){const H=b.create(z);return S(H),H}else return null},D=(z,H,Z)=>{const Y=[];let re=!0;const ce=u.inline||u.block,ie=R(ce),_e=we=>dx(u)&&ru(e,we,n,o),Ie=(we,he,Ae)=>{const ct=Fb(u)&&Jh(e.schema,we)&&Om(e,he,ce);return Ae&&ct},st=(we,he,Ae,ct)=>{const Ct=we.nodeName.toLowerCase(),rn=Om(e,ce,Ct)&&Om(e,he,ce),cn=!Z&&Ne(we)&&xh(we.data),Pn=Zc(we),zn=!Hs(u)||!z.isBlock(we);return(Ae||ct)&&rn&&!cn&&!Pn&&zn};sg(z,H,we=>{let he;const Ae=ct=>{let Ct=!1,rn=re,cn=!1;const Pn=ct.parentNode,zn=Pn.nodeName.toLowerCase(),Jo=z.getContentEditable(ct);Oe(Jo)&&(rn=re,re=Jo==="true",Ct=!0,cn=s4(e,ct));const Cs=re&&!Ct;if(Rn(ct)&&!_7(e,u,ct,zn)){he=null,gl(u)&&z.remove(ct);return}if(_e(ct)){he=null;return}if(Ie(ct,zn,Cs)){const ar=z.rename(ct,ce);S(ar),Y.push(ar),he=null;return}if(va(u)){let ar=O(a,ct);if(!ar&&Oe(Pn)&&Ri(u)&&(ar=O(a,Pn)),!Hs(u)||ar){he=null;return}}Oe(ie)&&st(ct,zn,Cs,cn)?(he||(he=z.clone(ie,!1),Pn.insertBefore(he,ct),Y.push(he)),cn&&Ct&&(re=rn),he.appendChild(ct)):(he=null,Se(mc(ct.childNodes),Ae),Ct&&(re=rn),he=null)};Se(we,Ae)}),u.links===!0&&Se(Y,we=>{const he=Ae=>{Ae.nodeName==="A"&&S(Ae,u),Se(mc(Ae.childNodes),he)};he(we)}),Se(Y,we=>{const he=Ct=>{let rn=0;return Se(Ct.childNodes,cn=>{!Bb(cn)&&!Ec(cn)&&rn++}),rn},Ae=Ct=>as(Ct.childNodes,Cn).filter(cn=>z.getContentEditable(cn)!=="false"&&sE(z,cn,u)).map(cn=>{const Pn=z.clone(cn,!1);return S(Pn),z.replace(Pn,Ct,!0),z.remove(cn,!0),Pn}).getOr(Ct),ct=he(we);if((Y.length>1||!z.isBlock(we))&&ct===0){z.remove(we,!0);return}(Hs(u)||gl(u)&&u.wrapper)&&(!u.exact&&ct===1&&(we=Ae(we)),iP(e,a,o,we),T7(e,u,n,o,we),aP(z,u,o,we),cP(z,u,o,we),pE(z,u,o,we),B3(e,u,o,we))})},I=km(r)?r:C.getNode();if(b.getContentEditable(I)==="false"&&!s4(e,I)){r=I,O(a,r),Gc(e,n,r,o);return}if(u){if(r)if(km(r)){if(!O(a,r)){const z=b.createRng();z.setStartBefore(r),z.setEndAfter(r),D(b,dd(b,z,a),!0)}}else D(b,r,!0);else!f||!Hs(u)||eg(e).length?(C.setRng(eE(C.getRng())),ld(e,()=>{tg(e,(z,H)=>{const Z=H?z:dd(b,z,a);D(b,Z,!1)})},it),e.nodeChanged()):h7(e,n,o),y7(e.formatter,n).each(z=>{Se(N3(e.selection),H=>lP(b,H,z,o))});W5(n,e)}Gc(e,n,r,o)},H3=(e,n,o,r)=>{(r||e.selection.isEditable())&&bE(e,n,o,r)},vE=e=>$t(e,"vars"),k7=(e,n)=>{e.set({}),n.on("NodeChange",o=>{z3(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=N.from(o.node).map(a=>km(a)?a:a.startContainer).bind(a=>tt(a)?N.some(a):N.from(a.parentElement)).getOrThunk(()=>uP(n));z3(n,r,e.get())})},uP=e=>e.selection.getStart(),V3=(e,n,o,r,a)=>Ug(n,b=>{const C=e.formatter.matchNode(b,o,a??{},r);return!ss(C)},b=>B5(e,b,o)?!0:r?!1:Oe(e.formatter.matchNode(b,o,a,!0))),yE=(e,n)=>{const o=n??uP(e);return Rt(Rm(e.dom,o),r=>tt(r)&&!zl(r))},z3=(e,n,o)=>{const r=yE(e,n);rt(o,(a,u)=>{const f=b=>{const C=V3(e,r,u,b.similar,vE(b)?b.vars:void 0),S=C.isSome();if(b.state.get()!==S){b.state.set(S);const O=C.getOr(n);vE(b)?b.callback(S,{node:O,format:u,parents:r}):Se(b.callbacks,R=>R(S,{node:O,format:u,parents:r}))}};Se([a.withSimilar,a.withoutSimilar],f),Se(a.withVars,f)})},O7=(e,n,o,r,a,u)=>{const f=n.get();Se(o.split(","),b=>{const C=bo(f,b).getOrThunk(()=>{const O={withSimilar:{state:io(!1),similar:!0,callbacks:[]},withoutSimilar:{state:io(!1),similar:!1,callbacks:[]},withVars:[]};return f[b]=O,O}),S=()=>{const O=yE(e);return V3(e,O,b,a,u).isSome()};if(ss(u)){const O=a?C.withSimilar:C.withoutSimilar;O.callbacks.push(r),O.callbacks.length===1&&O.state.set(S())}else C.withVars.push({state:io(S()),similar:a,vars:u,callback:r})}),n.set(f)},A7=(e,n,o)=>{const r=e.get();Se(n.split(","),a=>bo(r,a).each(u=>{r[a]={withSimilar:{...u.withSimilar,callbacks:Rt(u.withSimilar.callbacks,f=>f!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:Rt(u.withoutSimilar.callbacks,f=>f!==o)},withVars:Rt(u.withVars,f=>f.callback!==o)}})),e.set(r)},R7=(e,n,o,r,a,u)=>(O7(e,n,o,r,a,u),{unbind:()=>A7(n,o,r)}),CE=(e,n,o,r)=>{const a=e.formatter.get(n);a&&(O2(e,n,o,r)&&(!("toggle"in a[0])||a[0].toggle)?rP(e,n,o,r):H3(e,n,o,r))},pd=Ve.explode,dP=()=>{const e={};return{addFilter:(a,u)=>{Se(pd(a),f=>{$t(e,f)||(e[f]={name:f,callbacks:[]}),e[f].callbacks.push(u)})},getFilters:()=>nf(e),removeFilter:(a,u)=>{Se(pd(a),f=>{if($t(e,f))if(Oe(u)){const b=e[f],C=Rt(b.callbacks,S=>S!==u);C.length>0?b.callbacks=C:delete e[f]}else delete e[f]})}}},U3=(e,n)=>{Se(n,o=>{e.attr(o,null)})},us=(e,n,o)=>{e.addNodeFilter("font",r=>{Se(r,a=>{const u=n.parse(a.attr("style")),f=a.attr("color"),b=a.attr("face"),C=a.attr("size");f&&(u.color=f),b&&(u["font-family"]=b),C&&Rd(C).each(S=>{u["font-size"]=o[S-1]}),a.name="span",a.attr("style",n.serialize(u)),U3(a,["color","face","size"])})})},W3=(e,n,o)=>{e.addNodeFilter("strike",r=>{const a=n.type!=="html4";Se(r,u=>{if(a)u.name="s";else{const f=o.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(f))}})})},Z3=(e,n,o)=>{var r;const a=zu();n.convert_fonts_to_spans&&us(e,a,Ve.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),W3(e,o,a)},Hm=(e,n,o)=>{n.inline_styles&&Z3(e,n,o)},mP=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),fP=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},yp=e=>{const[n,...o]=e.split(","),r=o.join(","),a=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(a){const u=a[2]===";base64",f=u?fP(r):decodeURIComponent(r);return N.some({type:a[1],data:f,base64Encoded:u})}else return N.none()},gP=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return N.none()}const a=new Uint8Array(r.length);for(let u=0;u<a.length;u++)a[u]=r.charCodeAt(u);return N.some(new Blob([a],{type:e}))},D7=e=>new Promise((n,o)=>{yp(e).bind(({type:r,data:a,base64Encoded:u})=>gP(r,a,u)).fold(()=>o("Invalid data URI"),n)}),d0=e=>fs(e,"blob:")?mP(e):fs(e,"data:")?D7(e):Promise.reject("Unknown URI format"),hP=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var a;o((a=r.error)===null||a===void 0?void 0:a.message)},r.readAsDataURL(e)});let Cp=0;const M7=e=>"blobid"+Cp++,Vm=(e,n,o)=>yp(e).bind(({data:r,type:a,base64Encoded:u})=>{if(n&&!u)return N.none();{const f=u?r:btoa(r);return o(f,a)}}),pP=(e,n,o)=>{const r=e.create(M7(),n,o);return e.add(r),r},ei=(e,n,o=!1)=>Vm(n,o,(r,a)=>N.from(e.getByData(r,a)).orThunk(()=>gP(a,r).map(u=>pP(e,u,r)))),N2=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(fs(n,"blob:")){const r=e.getByUri(n);return Oe(r)?Promise.resolve(r):d0(n).then(a=>hP(a).then(u=>Vm(u,!1,f=>N.some(pP(e,a,f))).getOrThunk(o)))}else return fs(n,"data:")?ei(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},j3=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,G3=e=>N.from(e.match(j3)).bind(n=>tf(n,1)).map(n=>fs(n,"www.")?n.substring(4):n),bP=(e,n)=>{N.from(e.attr("src")).bind(G3).forall(o=>!zt(n,o))&&e.attr("sandbox","")},m0=(e,n)=>fs(e,`${n}/`),P7=e=>ss(e)?"iframe":m0(e,"image")?"img":m0(e,"video")?"video":m0(e,"audio")?"audio":"iframe",yl=({type:e,src:n,width:o,height:r}={},a,u)=>{const f=P7(e),b=new _c(f,1);return b.attr(f==="audio"?{src:n}:{src:n,width:o,height:r}),(f==="audio"||f==="video")&&b.attr("controls",""),f==="iframe"&&a&&bP(b,u),b},wE=e=>Oe(e.attr("data-mce-bogus")),vP=e=>e.attr("src")===qt.transparentSrc||Oe(e.attr("data-mce-placeholder")),q3=(e,n)=>{const{blob_cache:o}=n;if(o){const r=a=>{const u=a.attr("src");vP(a)||wE(a)||An(u)||ei(o,u,!0).each(f=>{a.attr("src",f.blobUri())})};e.addAttributeFilter("src",a=>Se(a,r))}},K3=(e,n)=>{var o,r;const a=e.schema;e.addAttributeFilter("href",C=>{let S=C.length;const O=D=>D.split(" ").filter(z=>z.length>0).concat(["noopener"]).sort().join(" "),R=D=>{const I=D?Ve.trim(D):"";return/\b(noopener)\b/g.test(I)?I:O(I)};if(!n.allow_unsafe_link_target)for(;S--;){const D=C[S];D.name==="a"&&D.attr("target")==="_blank"&&D.attr("rel",R(D.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",C=>{let S=C.length,O,R,D,I;for(;S--;)if(I=C[S],I.name==="a"&&I.firstChild&&!I.attr("href"))for(D=I.parent,O=I.lastChild;O&&D;)R=O.prev,D.insert(O,I),O=R}),n.fix_list_elements&&e.addNodeFilter("ul,ol",C=>{let S=C.length,O,R;for(;S--;)if(O=C[S],R=O.parent,R&&(R.name==="ul"||R.name==="ol"))if(O.prev&&O.prev.name==="li")O.prev.append(O);else{const D=new _c("li",1);D.attr("style","list-style-type: none"),O.wrap(D)}});const u=a.getValidClasses();n.validate&&u&&e.addAttributeFilter("class",C=>{var S;let O=C.length;for(;O--;){const R=C[O],D=(S=R.attr("class"))!==null&&S!==void 0?S:"",I=Ve.explode(D," ");let z="";for(let H=0;H<I.length;H++){const Z=I[H];let Y=!1,re=u["*"];re&&re[Z]&&(Y=!0),re=u[R.name],!Y&&re&&re[Z]&&(Y=!0),Y&&(z&&(z+=" "),z+=Z)}z.length||(z=null),R.attr("class",z)}}),q3(e,n);const f=(o=n.sandbox_iframes)!==null&&o!==void 0?o:!1,b=Wg((r=n.sandbox_iframes_exclusions)!==null&&r!==void 0?r:[]);n.convert_unsafe_embeds&&e.addNodeFilter("object,embed",C=>Se(C,S=>{S.replace(yl({type:S.attr("type"),src:S.name==="object"?S.attr("data"):S.attr("src"),width:S.attr("width"),height:S.attr("height")},f,b))})),f&&e.addNodeFilter("iframe",C=>Se(C,S=>bP(S,b)))};/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:Cg,setPrototypeOf:SE,isFrozen:N7,getPrototypeOf:yP,getOwnPropertyDescriptor:B7}=Object;let{freeze:Ea,seal:Cl,create:CP}=Object,{apply:wp,construct:Y3}=typeof Reflect<"u"&&Reflect;Ea||(Ea=function(n){return n}),Cl||(Cl=function(n){return n}),wp||(wp=function(n,o,r){return n.apply(o,r)}),Y3||(Y3=function(n,o){return new n(...o)});const B2=Fi(Array.prototype.forEach),xE=Fi(Array.prototype.pop),$2=Fi(Array.prototype.push),F2=Fi(String.prototype.toLowerCase),EE=Fi(String.prototype.toString),wP=Fi(String.prototype.match),I2=Fi(String.prototype.replace),$7=Fi(String.prototype.indexOf),F7=Fi(String.prototype.trim),au=Fi(Object.prototype.hasOwnProperty),Ta=Fi(RegExp.prototype.test),L2=I7(TypeError);function Fi(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),a=1;a<o;a++)r[a-1]=arguments[a];return wp(e,n,r)}}function I7(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return Y3(e,o)}}function oo(e,n){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:F2;SE&&SE(e,null);let r=n.length;for(;r--;){let a=n[r];if(typeof a=="string"){const u=o(a);u!==a&&(N7(n)||(n[r]=u),a=u)}e[a]=!0}return e}function L7(e){for(let n=0;n<e.length;n++)au(e,n)||(e[n]=null);return e}function Sp(e){const n=CP(null);for(const[o,r]of Cg(e))au(e,o)&&(Array.isArray(r)?n[o]=L7(r):r&&typeof r=="object"&&r.constructor===Object?n[o]=Sp(r):n[o]=r);return n}function H2(e,n){for(;e!==null;){const r=B7(e,n);if(r){if(r.get)return Fi(r.get);if(typeof r.value=="function")return Fi(r.value)}e=yP(e)}function o(){return null}return o}const X3=Ea(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),J3=Ea(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),wg=Ea(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),H7=Ea(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Q3=Ea(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),V7=Ea(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),SP=Ea(["#text"]),eO=Ea(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),tO=Ea(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),xP=Ea(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),TE=Ea(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),z7=Cl(/\{\{[\w\W]*|[\w\W]*\}\}/gm),U7=Cl(/<%[\w\W]*|[\w\W]*%>/gm),W7=Cl(/\${[\w\W]*}/gm),Z7=Cl(/^data-[\-\w.\u00B7-\uFFFF]/),j7=Cl(/^aria-[\-\w]+$/),EP=Cl(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),G7=Cl(/^(?:\w+script|data):/i),nO=Cl(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),oO=Cl(/^html$/i),BG=Cl(/^[a-z][.\w]*(-[.\w]+)+$/i);var f0=Object.freeze({__proto__:null,MUSTACHE_EXPR:z7,ERB_EXPR:U7,TMPLIT_EXPR:W7,DATA_ATTR:Z7,ARIA_ATTR:j7,IS_ALLOWED_URI:EP,IS_SCRIPT_OR_DATA:G7,ATTR_WHITESPACE:nO,DOCTYPE_NAME:oO,CUSTOM_ELEMENT:BG});const V2={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},$G=function(){return typeof window>"u"?null:window},FG=function(n,o){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let r=null;const a="data-tt-policy-suffix";o&&o.hasAttribute(a)&&(r=o.getAttribute(a));const u="dompurify"+(r?"#"+r:"");try{return n.createPolicy(u,{createHTML(f){return f},createScriptURL(f){return f}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}};function q7(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$G();const n=mn=>q7(mn);if(n.version="3.1.7",n.removed=[],!e||!e.document||e.document.nodeType!==V2.document)return n.isSupported=!1,n;let{document:o}=e;const r=o,a=r.currentScript,{DocumentFragment:u,HTMLTemplateElement:f,Node:b,Element:C,NodeFilter:S,NamedNodeMap:O=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:R,DOMParser:D,trustedTypes:I}=e,z=C.prototype,H=H2(z,"cloneNode"),Z=H2(z,"remove"),Y=H2(z,"nextSibling"),re=H2(z,"childNodes"),ce=H2(z,"parentNode");if(typeof f=="function"){const mn=o.createElement("template");mn.content&&mn.content.ownerDocument&&(o=mn.content.ownerDocument)}let ie,_e="";const{implementation:Ie,createNodeIterator:st,createDocumentFragment:we,getElementsByTagName:he}=o,{importNode:Ae}=r;let ct={};n.isSupported=typeof Cg=="function"&&typeof ce=="function"&&Ie&&Ie.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Ct,ERB_EXPR:rn,TMPLIT_EXPR:cn,DATA_ATTR:Pn,ARIA_ATTR:zn,IS_SCRIPT_OR_DATA:Jo,ATTR_WHITESPACE:Cs,CUSTOM_ELEMENT:ar}=f0;let{IS_ALLOWED_URI:Ge}=f0,vt=null;const Tn=oo({},[...X3,...J3,...wg,...Q3,...SP]);let et=null;const _t=oo({},[...eO,...tO,...xP,...TE]);let Pt=Object.seal(CP(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Qe=null,on=null,dn=!0,Rs=!0,Zn=!1,Br=!0,Jc=!1,pu=!0,Yr=!1,Oa=!1,Ui=!1,$r=!1,Qc=!1,pt=!1,xn=!0,Mo=!1;const Ds="user-content-";let Gs=!0,ws=!1,Po={},No=null;const ac=oo({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Wi=null;const bu=oo({},["audio","video","img","source","image","track"]);let Ol=null;const Ig=oo({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Lg="http://www.w3.org/1998/Math/MathML",xd="http://www.w3.org/2000/svg",Zi="http://www.w3.org/1999/xhtml";let Xm=Zi,K0=!1,Hg=null;const TD=oo({},[Lg,xd,Zi],EE);let Kp=null;const x6=["application/xhtml+xml","text/html"],_D="text/html";let Xr=null,ji=null;const __=o.createElement("form"),me=function(pe){return pe instanceof RegExp||pe instanceof Function},ge=function(){let pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(ji&&ji===pe)){if((!pe||typeof pe!="object")&&(pe={}),pe=Sp(pe),Kp=x6.indexOf(pe.PARSER_MEDIA_TYPE)===-1?_D:pe.PARSER_MEDIA_TYPE,Xr=Kp==="application/xhtml+xml"?EE:F2,vt=au(pe,"ALLOWED_TAGS")?oo({},pe.ALLOWED_TAGS,Xr):Tn,et=au(pe,"ALLOWED_ATTR")?oo({},pe.ALLOWED_ATTR,Xr):_t,Hg=au(pe,"ALLOWED_NAMESPACES")?oo({},pe.ALLOWED_NAMESPACES,EE):TD,Ol=au(pe,"ADD_URI_SAFE_ATTR")?oo(Sp(Ig),pe.ADD_URI_SAFE_ATTR,Xr):Ig,Wi=au(pe,"ADD_DATA_URI_TAGS")?oo(Sp(bu),pe.ADD_DATA_URI_TAGS,Xr):bu,No=au(pe,"FORBID_CONTENTS")?oo({},pe.FORBID_CONTENTS,Xr):ac,Qe=au(pe,"FORBID_TAGS")?oo({},pe.FORBID_TAGS,Xr):{},on=au(pe,"FORBID_ATTR")?oo({},pe.FORBID_ATTR,Xr):{},Po=au(pe,"USE_PROFILES")?pe.USE_PROFILES:!1,dn=pe.ALLOW_ARIA_ATTR!==!1,Rs=pe.ALLOW_DATA_ATTR!==!1,Zn=pe.ALLOW_UNKNOWN_PROTOCOLS||!1,Br=pe.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Jc=pe.SAFE_FOR_TEMPLATES||!1,pu=pe.SAFE_FOR_XML!==!1,Yr=pe.WHOLE_DOCUMENT||!1,$r=pe.RETURN_DOM||!1,Qc=pe.RETURN_DOM_FRAGMENT||!1,pt=pe.RETURN_TRUSTED_TYPE||!1,Ui=pe.FORCE_BODY||!1,xn=pe.SANITIZE_DOM!==!1,Mo=pe.SANITIZE_NAMED_PROPS||!1,Gs=pe.KEEP_CONTENT!==!1,ws=pe.IN_PLACE||!1,Ge=pe.ALLOWED_URI_REGEXP||EP,Xm=pe.NAMESPACE||Zi,Pt=pe.CUSTOM_ELEMENT_HANDLING||{},pe.CUSTOM_ELEMENT_HANDLING&&me(pe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Pt.tagNameCheck=pe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),pe.CUSTOM_ELEMENT_HANDLING&&me(pe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Pt.attributeNameCheck=pe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),pe.CUSTOM_ELEMENT_HANDLING&&typeof pe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Pt.allowCustomizedBuiltInElements=pe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Jc&&(Rs=!1),Qc&&($r=!0),Po&&(vt=oo({},SP),et=[],Po.html===!0&&(oo(vt,X3),oo(et,eO)),Po.svg===!0&&(oo(vt,J3),oo(et,tO),oo(et,TE)),Po.svgFilters===!0&&(oo(vt,wg),oo(et,tO),oo(et,TE)),Po.mathMl===!0&&(oo(vt,Q3),oo(et,xP),oo(et,TE))),pe.ADD_TAGS&&(vt===Tn&&(vt=Sp(vt)),oo(vt,pe.ADD_TAGS,Xr)),pe.ADD_ATTR&&(et===_t&&(et=Sp(et)),oo(et,pe.ADD_ATTR,Xr)),pe.ADD_URI_SAFE_ATTR&&oo(Ol,pe.ADD_URI_SAFE_ATTR,Xr),pe.FORBID_CONTENTS&&(No===ac&&(No=Sp(No)),oo(No,pe.FORBID_CONTENTS,Xr)),Gs&&(vt["#text"]=!0),Yr&&oo(vt,["html","head","body"]),vt.table&&(oo(vt,["tbody"]),delete Qe.tbody),pe.TRUSTED_TYPES_POLICY){if(typeof pe.TRUSTED_TYPES_POLICY.createHTML!="function")throw L2('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof pe.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw L2('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ie=pe.TRUSTED_TYPES_POLICY,_e=ie.createHTML("")}else ie===void 0&&(ie=FG(I,a)),ie!==null&&typeof _e=="string"&&(_e=ie.createHTML(""));Ea&&Ea(pe),ji=pe}},je=oo({},["mi","mo","mn","ms","mtext"]),Fe=oo({},["annotation-xml"]),Nt=oo({},["title","style","font","a","script"]),En=oo({},[...J3,...wg,...H7]),Qo=oo({},[...Q3,...V7]),Al=function(pe){let Et=ce(pe);(!Et||!Et.tagName)&&(Et={namespaceURI:Xm,tagName:"template"});const t=F2(pe.tagName),s=F2(Et.tagName);return Hg[pe.namespaceURI]?pe.namespaceURI===xd?Et.namespaceURI===Zi?t==="svg":Et.namespaceURI===Lg?t==="svg"&&(s==="annotation-xml"||je[s]):!!En[t]:pe.namespaceURI===Lg?Et.namespaceURI===Zi?t==="math":Et.namespaceURI===xd?t==="math"&&Fe[s]:!!Qo[t]:pe.namespaceURI===Zi?Et.namespaceURI===xd&&!Fe[s]||Et.namespaceURI===Lg&&!je[s]?!1:!Qo[t]&&(Nt[t]||!En[t]):!!(Kp==="application/xhtml+xml"&&Hg[pe.namespaceURI]):!1},ci=function(pe){$2(n.removed,{element:pe});try{ce(pe).removeChild(pe)}catch{Z(pe)}},VC=function(pe,Et){try{$2(n.removed,{attribute:Et.getAttributeNode(pe),from:Et})}catch{$2(n.removed,{attribute:null,from:Et})}if(Et.removeAttribute(pe),pe==="is"&&!et[pe])if($r||Qc)try{ci(Et)}catch{}else try{Et.setAttribute(pe,"")}catch{}},E6=function(pe){let Et=null,t=null;if(Ui)pe="<remove></remove>"+pe;else{const i=wP(pe,/^[\r\n\t ]+/);t=i&&i[0]}Kp==="application/xhtml+xml"&&Xm===Zi&&(pe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+pe+"</body></html>");const s=ie?ie.createHTML(pe):pe;if(Xm===Zi)try{Et=new D().parseFromString(s,Kp)}catch{}if(!Et||!Et.documentElement){Et=Ie.createDocument(Xm,"template",null);try{Et.documentElement.innerHTML=K0?_e:s}catch{}}const c=Et.body||Et.documentElement;return pe&&t&&c.insertBefore(o.createTextNode(t),c.childNodes[0]||null),Xm===Zi?he.call(Et,Yr?"html":"body")[0]:Yr?Et.documentElement:c},kD=function(pe){return st.call(pe.ownerDocument||pe,pe,S.SHOW_ELEMENT|S.SHOW_COMMENT|S.SHOW_TEXT|S.SHOW_PROCESSING_INSTRUCTION|S.SHOW_CDATA_SECTION,null)},T6=function(pe){return pe instanceof R&&(typeof pe.nodeName!="string"||typeof pe.textContent!="string"||typeof pe.removeChild!="function"||!(pe.attributes instanceof O)||typeof pe.removeAttribute!="function"||typeof pe.setAttribute!="function"||typeof pe.namespaceURI!="string"||typeof pe.insertBefore!="function"||typeof pe.hasChildNodes!="function")},_6=function(pe){return typeof b=="function"&&pe instanceof b},Jm=function(pe,Et,t){ct[pe]&&B2(ct[pe],s=>{s.call(n,Et,t,ji)})},k6=function(pe){let Et=null;if(Jm("beforeSanitizeElements",pe,null),T6(pe))return ci(pe),!0;const t=Xr(pe.nodeName);if(Jm("uponSanitizeElement",pe,{tagName:t,allowedTags:vt}),pe.hasChildNodes()&&!_6(pe.firstElementChild)&&Ta(/<[/\w]/g,pe.innerHTML)&&Ta(/<[/\w]/g,pe.textContent)||pe.nodeType===V2.progressingInstruction||pu&&pe.nodeType===V2.comment&&Ta(/<[/\w]/g,pe.data))return ci(pe),!0;if(!vt[t]||Qe[t]){if(!Qe[t]&&OD(t)&&(Pt.tagNameCheck instanceof RegExp&&Ta(Pt.tagNameCheck,t)||Pt.tagNameCheck instanceof Function&&Pt.tagNameCheck(t)))return!1;if(Gs&&!No[t]){const s=ce(pe)||pe.parentNode,c=re(pe)||pe.childNodes;if(c&&s){const i=c.length;for(let d=i-1;d>=0;--d){const g=H(c[d],!0);g.__removalCount=(pe.__removalCount||0)+1,s.insertBefore(g,Y(pe))}}}return ci(pe),!0}return pe instanceof C&&!Al(pe)||(t==="noscript"||t==="noembed"||t==="noframes")&&Ta(/<\/no(script|embed|frames)/i,pe.innerHTML)?(ci(pe),!0):(Jc&&pe.nodeType===V2.text&&(Et=pe.textContent,B2([Ct,rn,cn],s=>{Et=I2(Et,s," ")}),pe.textContent!==Et&&($2(n.removed,{element:pe.cloneNode()}),pe.textContent=Et)),Jm("afterSanitizeElements",pe,null),!1)},O6=function(pe,Et,t){if(xn&&(Et==="id"||Et==="name")&&(t in o||t in __))return!1;if(!(Rs&&!on[Et]&&Ta(Pn,Et))){if(!(dn&&Ta(zn,Et))){if(!et[Et]||on[Et]){if(!(OD(pe)&&(Pt.tagNameCheck instanceof RegExp&&Ta(Pt.tagNameCheck,pe)||Pt.tagNameCheck instanceof Function&&Pt.tagNameCheck(pe))&&(Pt.attributeNameCheck instanceof RegExp&&Ta(Pt.attributeNameCheck,Et)||Pt.attributeNameCheck instanceof Function&&Pt.attributeNameCheck(Et))||Et==="is"&&Pt.allowCustomizedBuiltInElements&&(Pt.tagNameCheck instanceof RegExp&&Ta(Pt.tagNameCheck,t)||Pt.tagNameCheck instanceof Function&&Pt.tagNameCheck(t))))return!1}else if(!Ol[Et]){if(!Ta(Ge,I2(t,Cs,""))){if(!((Et==="src"||Et==="xlink:href"||Et==="href")&&pe!=="script"&&$7(t,"data:")===0&&Wi[pe])){if(!(Zn&&!Ta(Jo,I2(t,Cs,"")))){if(t)return!1}}}}}}return!0},OD=function(pe){return pe!=="annotation-xml"&&wP(pe,ar)},AD=function(pe){Jm("beforeSanitizeAttributes",pe,null);const{attributes:Et}=pe;if(!Et)return;const t={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:et};let s=Et.length;for(;s--;){const c=Et[s],{name:i,namespaceURI:d,value:g}=c,h=Xr(i);let y=i==="value"?g:F7(g);const w=y;if(t.attrName=h,t.attrValue=y,t.keepAttr=!0,t.forceKeepAttr=void 0,Jm("uponSanitizeAttribute",pe,t),y=t.attrValue,t.forceKeepAttr)continue;if(!t.keepAttr){VC(i,pe);continue}if(!Br&&Ta(/\/>/i,y)){VC(i,pe);continue}Jc&&B2([Ct,rn,cn],T=>{y=I2(y,T," ")});const E=Xr(pe.nodeName);if(!O6(E,h,y)){VC(i,pe);continue}if(Mo&&(h==="id"||h==="name")&&(VC(i,pe),y=Ds+y),pu&&Ta(/((--!?|])>)|<\/(style|title)/i,y)){VC(i,pe);continue}if(ie&&typeof I=="object"&&typeof I.getAttributeType=="function"&&!d)switch(I.getAttributeType(E,h)){case"TrustedHTML":{y=ie.createHTML(y);break}case"TrustedScriptURL":{y=ie.createScriptURL(y);break}}if(y!==w)try{d?pe.setAttributeNS(d,i,y):pe.setAttribute(i,y),T6(pe)?ci(pe):xE(n.removed)}catch{}}Jm("afterSanitizeAttributes",pe,null)},eG=function mn(pe){let Et=null;const t=kD(pe);for(Jm("beforeSanitizeShadowDOM",pe,null);Et=t.nextNode();)Jm("uponSanitizeShadowNode",Et,null),!k6(Et)&&(Et.content instanceof u&&mn(Et.content),AD(Et));Jm("afterSanitizeShadowDOM",pe,null)};return n.sanitize=function(mn){let pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Et=null,t=null,s=null,c=null;if(K0=!mn,K0&&(mn="<!-->"),typeof mn!="string"&&!_6(mn))if(typeof mn.toString=="function"){if(mn=mn.toString(),typeof mn!="string")throw L2("dirty is not a string, aborting")}else throw L2("toString is not a function");if(!n.isSupported)return mn;if(Oa||ge(pe),n.removed=[],typeof mn=="string"&&(ws=!1),ws){if(mn.nodeName){const g=Xr(mn.nodeName);if(!vt[g]||Qe[g])throw L2("root node is forbidden and cannot be sanitized in-place")}}else if(mn instanceof b)Et=E6("<!---->"),t=Et.ownerDocument.importNode(mn,!0),t.nodeType===V2.element&&t.nodeName==="BODY"||t.nodeName==="HTML"?Et=t:Et.appendChild(t);else{if(!$r&&!Jc&&!Yr&&mn.indexOf("<")===-1)return ie&&pt?ie.createHTML(mn):mn;if(Et=E6(mn),!Et)return $r?null:pt?_e:""}Et&&Ui&&ci(Et.firstChild);const i=kD(ws?mn:Et);for(;s=i.nextNode();)k6(s)||(s.content instanceof u&&eG(s.content),AD(s));if(ws)return mn;if($r){if(Qc)for(c=we.call(Et.ownerDocument);Et.firstChild;)c.appendChild(Et.firstChild);else c=Et;return(et.shadowroot||et.shadowrootmode)&&(c=Ae.call(r,c,!0)),c}let d=Yr?Et.outerHTML:Et.innerHTML;return Yr&&vt["!doctype"]&&Et.ownerDocument&&Et.ownerDocument.doctype&&Et.ownerDocument.doctype.name&&Ta(oO,Et.ownerDocument.doctype.name)&&(d="<!DOCTYPE "+Et.ownerDocument.doctype.name+`>
`+d),Jc&&B2([Ct,rn,cn],g=>{d=I2(d,g," ")}),ie&&pt?ie.createHTML(d):d},n.setConfig=function(){let mn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ge(mn),Oa=!0},n.clearConfig=function(){ji=null,Oa=!1},n.isValidAttribute=function(mn,pe,Et){ji||ge({});const t=Xr(mn),s=Xr(pe);return O6(t,s,Et)},n.addHook=function(mn,pe){typeof pe=="function"&&(ct[mn]=ct[mn]||[],$2(ct[mn],pe))},n.removeHook=function(mn){if(ct[mn])return xE(ct[mn])},n.removeHooks=function(mn){ct[mn]&&(ct[mn]=[])},n.removeAllHooks=function(){ct={}},n}var TP=q7();const ti=Ve.each,_E=Ve.trim,Sg=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],xg={ftp:21,http:80,https:443,mailto:25},_P=["img","video"],z2=(e,n)=>Oe(e)?!e:Oe(n)?!zt(_P,n):!0,kP=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},os=(e,n,o)=>{const r=kP(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?z2(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class wl{static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),a=/data:([^;]+)/.exec(r[0]);return a&&(o=a[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const a=Lu.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!os(r,a,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(n,o={}){this.path="",this.directory="",n=_E(n),this.settings=o;const r=o.base_uri,a=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){a.source=n;return}const u=n.indexOf("//")===0;if(n.indexOf("/")===0&&!u&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const b=r?r.path:new wl(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+a.toAbsPath(b,n);else{const C=/([^#?]*)([#?]?.*)/.exec(n);C&&(n=(r&&r.protocol||"http")+"://mce_host"+a.toAbsPath(b,C[1])+C[2])}}n=n.replace(/@@/g,"(mce_at)");const f=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);f&&ti(Sg,(b,C)=>{let S=f[C];S&&(S=S.replace(/\(mce_at\)/g,"@@")),a[b]=S}),r&&(a.protocol||(a.protocol=r.protocol),a.userInfo||(a.userInfo=r.userInfo),!a.port&&a.host==="mce_host"&&(a.port=r.port),(!a.host||a.host==="mce_host")&&(a.host=r.host),a.source=""),u&&(a.protocol="")}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new wl(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),a=o.getURI();if(r===a||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===a)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(n,o){const r=new wl(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?xg[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,a="",u,f;const b=n.substring(0,n.lastIndexOf("/")).split("/"),C=o.split("/");if(b.length>=C.length){for(u=0,f=b.length;u<f;u++)if(u>=C.length||b[u]!==C[u]){r=u+1;break}}if(b.length<C.length){for(u=0,f=C.length;u<f;u++)if(u>=b.length||b[u]!==C[u]){r=u+1;break}}if(r===1)return o;for(u=0,f=b.length-(r-1);u<f;u++)a+="../";for(u=r-1,f=C.length;u<f;u++)u!==r-1?a+="/"+C[u]:a+=C[u];return a}toAbsPath(n,o){let r=0;const a=/\/$/.test(o)?"/":"",u=n.split("/"),f=o.split("/"),b=[];ti(u,R=>{R&&b.push(R)});const C=[];for(let R=f.length-1;R>=0;R--)if(!(f[R].length===0||f[R]===".")){if(f[R]===".."){r++;continue}if(r>0){r--;continue}C.push(f[R])}const S=b.length-r;let O;return S<=0?O=Fo(C).join("/"):O=b.slice(0,S).join("/")+"/"+Fo(C).join("/"),O.indexOf("/")!==0&&(O="/"+O),a&&O.lastIndexOf("/")!==O.length-1&&(O+=a),O}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const K7=Ve.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Eg="data-mce-type";let xp=0;const Ep=(e,n,o,r,a)=>{var u,f,b,C;const S=n.validate,O=o.getSpecialElements();e.nodeType===Ho&&!n.allow_conditional_comments&&/^\[if/i.test((u=e.nodeValue)!==null&&u!==void 0?u:"")&&(e.nodeValue=" "+e.nodeValue);const R=(f=a==null?void 0:a.tagName)!==null&&f!==void 0?f:e.nodeName.toLowerCase();if(r!=="html"&&o.isValid(r)){Oe(a)&&(a.allowedTags[R]=!0);return}if(e.nodeType!==l1||R==="body")return;const D=K.fromDom(e),I=aa(D,Eg),z=oc(D,"data-mce-bogus");if(!I&&J(z)){z==="all"?ao(D):Mu(D);return}const H=o.getElementRule(R);if(S&&!H){$t(O,R)?ao(D):Mu(D);return}else Oe(a)&&(a.allowedTags[R]=!0);if(S&&H&&!I){if(Se((b=H.attributesForced)!==null&&b!==void 0?b:[],Z=>{ur(D,Z.name,Z.value==="{$uid}"?`mce_${xp++}`:Z.value)}),Se((C=H.attributesDefault)!==null&&C!==void 0?C:[],Z=>{aa(D,Z.name)||ur(D,Z.name,Z.value==="{$uid}"?`mce_${xp++}`:Z.value)}),H.attributesRequired&&!mo(H.attributesRequired,Z=>aa(D,Z))){Mu(D);return}if(H.removeEmptyAttrs&&Gg(D)){Mu(D);return}H.outputName&&H.outputName!==R&&$w(D,H.outputName)}},sO=(e,n,o,r,a)=>{const u=e.tagName.toLowerCase(),{attrName:f,attrValue:b}=a;a.keepAttr=kE(n,o,r,u,f,b),a.keepAttr?(a.allowedAttributes[f]=!0,cO(f,o)&&(a.attrValue=f),n.allow_svg_data_urls&&fs(b,"data:image/svg+xml")&&(a.forceKeepAttr=!0)):rO(e,f)&&(a.forceKeepAttr=!0)},kE=(e,n,o,r,a,u)=>o!=="html"&&!fo(r)?!0:!(a in K7&&os(e,u,r))&&(!e.validate||n.isValid(r,a)||fs(a,"data-")||fs(a,"aria-")),rO=(e,n)=>e.hasAttribute(Eg)&&(n==="id"||n==="class"||n==="style"),cO=(e,n)=>e in n.getBoolAttrs(),Y7=(e,n,o,r)=>{const{attributes:a}=e;for(let u=a.length-1;u>=0;u--){const f=a[u],b=f.name,C=f.value;!kE(n,o,r,e.tagName.toLowerCase(),b,C)&&!rO(e,b)?e.removeAttribute(b):cO(b,o)&&e.setAttribute(b,b)}},X7=(e,n,o)=>{const r=TP();return r.addHook("uponSanitizeElement",(a,u)=>{Ep(a,e,n,o.track(a),u)}),r.addHook("uponSanitizeAttribute",(a,u)=>{sO(a,e,n,o.current(),u)}),r},OP=(e,n)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[],SAFE_FOR_XML:!1}};return r.PARSER_MEDIA_TYPE=n,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},J7=e=>{const n=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(r=>`xlink:${r}`),o={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:n};TP().sanitize(e,o)},Q7=(e,n)=>{const o={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}},r=TP();r.addHook("uponSanitizeElement",(a,u)=>{var f;const b=(f=u.tagName)!==null&&f!==void 0?f:a.nodeName.toLowerCase(),C=n.allow_mathml_annotation_encodings;if(b==="annotation"&&yn(C)&&C.length>0){const S=a.getAttribute("encoding");J(S)&&zt(C,S)&&(u.allowedTags[b]=!0)}}),r.sanitize(e,o)},eL=e=>n=>{const o=Bu(n);if(o==="svg")J7(n);else if(o==="math")Q7(n,e);else throw new Error("Not a namespace element")},tL=(e,n)=>{const o=uh();if(e.sanitize){const r=X7(e,n,o);return{sanitizeHtmlElement:(u,f)=>{r.sanitize(u,OP(e,f)),r.removed=[],o.reset()},sanitizeNamespaceElement:eL(e)}}else return{sanitizeHtmlElement:(u,f)=>{const b=document.createNodeIterator(u,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let C;for(;C=b.nextNode();){const S=o.track(C);Ep(C,e,n,S),tt(C)&&Y7(C,e,n,S)}o.reset()},sanitizeNamespaceElement:Ot}},AP=Ve.makeMap,aO=Ve.extend,RP=(e,n,o,r)=>{const a=e.name,u=a in o&&a!=="title"&&a!=="textarea"&&a!=="noscript",f=n.childNodes;for(let b=0,C=f.length;b<C;b++){const S=f[b],O=new _c(S.nodeName.toLowerCase(),S.nodeType);if(tt(S)){const R=S.attributes;for(let D=0,I=R.length;D<I;D++){const z=R[D];O.attr(z.name,z.value)}fo(O.name)&&(r(S),O.value=S.innerHTML)}else Ne(S)?(O.value=S.data,u&&(O.raw=!0)):(Ko(S)||sc(S)||Zd(S))&&(O.value=S.data);fo(O.name)||RP(O,S,o,r),e.append(O)}},U2=(e,n,o)=>{const r=[];for(let a=e,u=a;a;u=a,a=a.walk()){const f=a;Se(n,b=>b(f)),An(f.parent)&&f!==e?a=u:r.push(f)}for(let a=r.length-1;a>=0;a--){const u=r[a];Se(o,f=>f(u))}},DP=(e,n,o,r)=>{const a=o.validate,u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=aO(AP("script,style,head,html,body,title,meta,param"),n.getBlockElements()),C=Dv(n),S=/[ \t\r\n]+/g,O=/^[ \t\r\n]+/,R=/[ \t\r\n]+$/,D=re=>{let ce=re.parent;for(;Oe(ce);){if(ce.name in f)return!0;ce=ce.parent}return!1},I=re=>{let ce=re;for(;Oe(ce);){if(ce.name in C)return As(n,u,f,ce);ce=ce.parent}return!1},z=re=>re.name in b||D1(n,re)||fo(re.name)&&re.parent===e,H=(re,ce)=>{const ie=ce?re.prev:re.next;return Oe(ie)||An(re.parent)?!1:z(re.parent)&&(re.parent!==e||r.isRootContent===!0)};return[re=>{var ce;if(re.type===3&&!D(re)){let ie=(ce=re.value)!==null&&ce!==void 0?ce:"";ie=ie.replace(S," "),(X8(re.prev,z)||H(re,!0))&&(ie=ie.replace(O,"")),ie.length===0||ie===" "&&re.prev&&re.prev.type===Ho&&re.next&&re.next.type===Ho?re.remove():re.value=ie}},re=>{var ce;if(re.type===1){const ie=n.getElementRule(re.name);if(a&&ie){const _e=As(n,u,f,re);ie.paddInEmptyBlock&&_e&&I(re)?w3(o,r,z,re):ie.removeEmpty&&_e?z(re)?re.remove():re.unwrap():ie.paddEmpty&&(_e||pg(re))&&w3(o,r,z,re)}}else if(re.type===3&&!D(re)){let ie=(ce=re.value)!==null&&ce!==void 0?ce:"";(re.next&&z(re.next)||H(re,!1))&&(ie=ie.replace(R,"")),ie.length===0?re.remove():re.value=ie}}]},nL=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},Tp=(e={},n=Fn())=>{const o=dP(),r=dP(),a={validate:!0,root_name:"body",sanitize:!0,...e},u=new DOMParser,f=tL(a,n),b=(ce,ie,_e="html")=>{const Ie=_e==="xhtml"?"application/xhtml+xml":"text/html",st=$t(n.getSpecialElements(),ie.toLowerCase()),we=st?`<${ie}>${ce}</${ie}>`:ce,he=()=>_e==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${we}</body></html>`:/^[\s]*<head/i.test(ce)||/^[\s]*<html/i.test(ce)||/^[\s]*<!DOCTYPE/i.test(ce)?`<html>${we}</html>`:`<body>${we}</body>`,Ae=u.parseFromString(he(),Ie).body;return f.sanitizeHtmlElement(Ae,Ie),st?Ae.firstChild:Ae},C=o.addFilter,S=o.getFilters,O=o.removeFilter,R=r.addFilter,D=r.getFilters,I=r.removeFilter,z=(ce,ie)=>{S3(n,ce)&&ie.push(ce)},H=(ce,ie)=>{const _e=J(ie.attr(Eg)),Ie=ie.type===1&&!$t(ce,ie.name)&&!D1(n,ie)&&!fo(ie.name);return ie.type===3||Ie&&!_e},Z=(ce,ie)=>{const _e=aO(AP("script,style,head,html,body,title,meta,param"),n.getBlockElements()),Ie=/^[ \t\r\n]+/,st=/[ \t\r\n]+$/;let we=ce.firstChild,he=null;const Ae=ct=>{var Ct,rn;ct&&(we=ct.firstChild,we&&we.type===3&&(we.value=(Ct=we.value)===null||Ct===void 0?void 0:Ct.replace(Ie,"")),we=ct.lastChild,we&&we.type===3&&(we.value=(rn=we.value)===null||rn===void 0?void 0:rn.replace(st,"")))};if(n.isValidChild(ce.name,ie.toLowerCase())){for(;we;){const ct=we.next;H(_e,we)?(he||(he=new _c(ie,1),he.attr(a.forced_root_block_attrs),ce.insert(he,we)),he.append(we)):(Ae(he),he=null),we=ct}Ae(he)}},re={schema:n,addAttributeFilter:R,getAttributeFilters:D,removeAttributeFilter:I,addNodeFilter:C,getNodeFilters:S,removeNodeFilter:O,parse:(ce,ie={})=>{var _e;const Ie=a.validate,st=(_e=ie.context)!==null&&_e!==void 0?_e:a.root_name,we=b(ce,st,ie.format);dh(n,we);const he=new _c(st,11);RP(he,we,n.getSpecialElements(),f.sanitizeNamespaceElement),we.innerHTML="";const[Ae,ct]=DP(he,n,a,ie),Ct=[],rn=Ie?Jo=>z(Jo,Ct):Ot,cn={nodes:{},attributes:{}},Pn=Jo=>k5(S(),D(),Jo,cn);if(U2(he,[Ae,Pn],[ct,rn]),Ct.reverse(),Ie&&Ct.length>0)if(ie.context){const{pass:Jo,fail:Cs}=Er(Ct,ar=>ar.parent===he);On(Cs,n,he,Pn),ie.invalid=Jo.length>0}else On(Ct,n,he,Pn);const zn=nL(a,ie);return zn&&(he.name==="body"||ie.isRootContent)&&Z(he,zn),ie.invalid||C3(cn,ie),he}};return K3(re,a),Hm(re,a,n),re},oL=e=>vg(e)?lg({validate:!1}).serialize(e):e,iO=(e,n,o)=>{const r=oL(e),a=n(r);if(a.isDefaultPrevented())return a;if(vg(e))if(a.content!==r){const u=Tp({validate:!1,forced_root_block:!1,...o}).parse(a.content,{context:e.name});return{...a,content:u}}else return{...a,content:e};else return a},MP=e=>({sanitize:BS(e),sandbox_iframes:Vh(e),sandbox_iframes_exclusions:_y(e)}),PP=(e,n)=>{if(n.no_events)return hs.value(n);{const o=Ub(e,n);return o.isDefaultPrevented()?hs.error(g4(e,{content:"",...o}).content):hs.value(o)}},lO=(e,n,o)=>o.no_events?n:iO(n,a=>g4(e,{...o,content:a}),MP(e)).content,OE=(e,n)=>{if(n.no_events)return hs.value(n);{const o=iO(n.content,r=>t2(e,{...n,content:r}),MP(e));return o.isDefaultPrevented()?(Cx(e,o),hs.error(void 0)):hs.value(o)}},AE=(e,n,o)=>{o.no_events||Cx(e,{...o,content:n})},RE=(e,n,o)=>({element:e,width:n,rows:o}),uO=(e,n)=>({element:e,cells:n}),NP=(e,n)=>({x:e,y:n}),BP=(e,n)=>ca(e,n).bind(Rd).getOr(1),sL=(e,n,o,r,a)=>{const u=BP(a,"rowspan"),f=BP(a,"colspan"),b=e.rows;for(let C=o;C<o+u;C++){b[C]||(b[C]=uO(wh(r),[]));for(let S=n;S<n+f;S++){const O=b[C].cells;O[S]=C===o&&S===n?a:Za(a)}}},rL=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},dO=(e,n,o)=>{for(;rL(e,n,o);)n++;return n},g0=e=>Zo(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),mO=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const a=o[r].cells;for(let u=0;u<a.length;u++)if(Sn(a[u],n))return N.some(NP(u,r))}return N.none()},fO=(e,n,o,r,a)=>{const u=[],f=e.rows;for(let b=o;b<=a;b++){const C=f[b].cells,S=n<r?C.slice(n,r+1):C.slice(r,n+1);u.push(uO(f[b].element,S))}return u},DE=(e,n,o)=>{const r=n.x,a=n.y,u=o.x,f=o.y,b=a<f?fO(e,r,a,u,f):fO(e,r,f,u,a);return RE(e.element,g0(b),b)},cL=(e,n)=>{const o=Za(e.element),r=K.fromTag("tbody");return Du(r,n),Bs(o,r),o},aL=e=>Gt(e.rows,n=>{const o=Gt(n.cells,a=>{const u=wh(a);return Ps(u,"colspan"),Ps(u,"rowspan"),u}),r=Za(n.element);return Du(r,o),r}),_p=e=>{const n=RE(Za(e),0,[]);return Se(zr(e,"tr"),(o,r)=>{Se(zr(o,"td,th"),(a,u)=>{sL(n,dO(n,u,r),r,o,a)})}),RE(n.element,g0(n.rows),n.rows)},gO=e=>cL(e,aL(e)),$P=(e,n,o)=>mO(e,n).bind(r=>mO(e,o).map(a=>DE(e,r,a))),W2=e=>as(e,n=>wn(n)==="ul"||wn(n)==="ol"),FP=(e,n)=>as(e,o=>wn(o)==="li"&&qy(o,n)).fold(Ke([]),o=>W2(e).map(r=>{const a=K.fromTag(wn(r)),u=Eo($c(r),(f,b)=>fs(b,"list-style"));return tn(a,u),[K.fromTag("li"),a]}).getOr([])),hO=(e,n)=>{const o=Zo(n,(r,a)=>(Bs(a,r),a),e);return n.length>0?Xb([o]):o},IP=e=>am(e)?Ba(e).filter(ki).fold(Ke([]),n=>[e,n]):ki(e)?[e]:[],LP=(e,n,o)=>{const r=K.fromDom(n.commonAncestorContainer),a=gd(r,e),u=Rt(a,C=>o.isWrapper(wn(C))),f=FP(a,n),b=u.concat(f.length?f:IP(r));return Gt(b,Za)},HP=()=>Xb([]),iL=(e,n,o)=>hO(K.fromDom(n.cloneContents()),LP(e,n,o)),lL=(e,n)=>Ns(n,"table",Be(Sn,e)),pO=(e,n)=>lL(e,n[0]).bind(o=>{const r=n[0],a=n[n.length-1],u=_p(o);return $P(u,r,a).map(f=>Xb([gO(f)]))}).getOrThunk(HP),uL=(e,n,o)=>n.length>0&&n[0].collapsed?HP():iL(e,n[0],o),VP=(e,n,o)=>{const r=_m(n,e);return r.length>0?pO(e,r):uL(e,n,o)},ME=(e,n)=>n>=0&&n<e.length&&Tm(e.charAt(n)),zP=e=>ma(e.innerText),dL=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),mL=e=>N.from(e.selection.getRng()).map(n=>{var o;const r=N.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),a=e.getBody(),u=dL(r),f=K.fromDom(n.cloneContents());RM(f),DM(f);const b=e.dom.add(a,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},f.dom),C=zP(b),S=ma((o=b.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(b),ME(S,0)||ME(S,S.length-1)){const O=r.getOr(a),R=zP(O),D=R.indexOf(C);if(D===-1)return C;{const I=ME(R,D-1),z=ME(R,D+C.length);return(I?" ":"")+C+(z?" ":"")}}else return C}).getOr(""),fL=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),a=e.selection.getSel(),u=Bx(e,Db(a)),f=n.contextual?VP(K.fromDom(e.getBody()),u,e.schema).dom:o.cloneContents();return f&&r.appendChild(f),e.selection.serializer.serialize(r,n)},gL=(e,n)=>{if(n.format==="text")return mL(e);{const o=fL(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},hL=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),pL=(e,n,o={})=>{const r=hL(o,n);return PP(e,r).fold(Wo,a=>{const u=gL(e,a);return lO(e,u,a)})},bO=0,UP=1,WP=2,PE=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),a=new Array(o),u=(O,R,D)=>({start:O,end:R,diag:D}),f=(O,R,D,I,z)=>{const H=C(O,R,D,I);if(H===null||H.start===R&&H.diag===R-I||H.end===O&&H.diag===O-D){let Z=O,Y=D;for(;Z<R||Y<I;)Z<R&&Y<I&&e[Z]===n[Y]?(z.push([bO,e[Z]]),++Z,++Y):R-O>I-D?(z.push([WP,e[Z]]),++Z):(z.push([UP,n[Y]]),++Y)}else{f(O,H.start,D,H.start-H.diag,z);for(let Z=H.start;Z<H.end;++Z)z.push([bO,e[Z]]);f(H.end,R,H.end-H.diag,I,z)}},b=(O,R,D,I)=>{let z=O;for(;z-R<I&&z<D&&e[z]===n[z-R];)++z;return u(O,z,R)},C=(O,R,D,I)=>{const z=R-O,H=I-D;if(z===0||H===0)return null;const Z=z-H,Y=H+z,re=(Y%2===0?Y:Y+1)/2;r[1+re]=O,a[1+re]=R+1;let ce,ie,_e,Ie,st;for(ce=0;ce<=re;++ce){for(ie=-ce;ie<=ce;ie+=2){for(_e=ie+re,ie===-ce||ie!==ce&&r[_e-1]<r[_e+1]?r[_e]=r[_e+1]:r[_e]=r[_e-1]+1,Ie=r[_e],st=Ie-O+D-ie;Ie<R&&st<I&&e[Ie]===n[st];)r[_e]=++Ie,++st;if(Z%2!==0&&Z-ce<=ie&&ie<=Z+ce&&a[_e-Z]<=r[_e])return b(a[_e-Z],ie+O-D,R,I)}for(ie=Z-ce;ie<=Z+ce;ie+=2){for(_e=ie+re-Z,ie===Z-ce||ie!==Z+ce&&a[_e+1]<=a[_e-1]?a[_e]=a[_e+1]-1:a[_e]=a[_e-1],Ie=a[_e]-1,st=Ie-O+D-ie;Ie>=O&&st>=D&&e[Ie]===n[st];)a[_e]=Ie--,st--;if(Z%2===0&&-ce<=ie&&ie<=ce&&a[_e]<=r[_e+Z])return b(a[_e],ie+O-D,R,I)}}return null},S=[];return f(0,e.length,0,n.length,S),S},qr=e=>tt(e)?e.outerHTML:Ne(e)?Lu.encodeRaw(e.data,!1):Ko(e)?"<!--"+e.data+"-->":"",bL=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},NE=(e,n,o)=>{const r=bL(n);if(e.hasChildNodes()&&o<e.childNodes.length){const a=e.childNodes[o];e.insertBefore(r,a)}else e.appendChild(r)},kp=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},ZP=(e,n)=>{let o=0;Se(e,r=>{r[0]===bO?o++:r[0]===UP?(NE(n,r[1],o),o++):r[0]===WP&&kp(n,o)})},_a=(e,n)=>Rt(Gt(mc(e.childNodes),k(ma,qr)),o=>o.length>0),Op=(e,n)=>{const o=Gt(mc(n.childNodes),qr);return ZP(PE(o,e),n),n},jP=qi(()=>document.implementation.createHTMLDocument("undo")),vL=e=>e.querySelector("iframe")!==null,GP=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),yL=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),Z2=e=>{const n=e.serializer.getTempAttrs(),o=AM(e.getBody(),n);return vL(o)?GP(_a(o)):yL(ma(o.innerHTML))},Ap=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?Op(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:Oe(r)&&e4(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},j2=e=>e.type==="fragmented"?e.fragments.join(""):e.content,qP=e=>{const n=K.fromTag("body",jP());return y1(n,j2(e)),Se(zr(n,"*[data-mce-bogus]"),Mu),zo(n)},KP=(e,n)=>j2(e)===j2(n),CL=(e,n)=>qP(e)===qP(n),G2=(e,n)=>!e||!n?!1:KP(e,n)?!0:CL(e,n),q2=e=>e.get()===0,BE=(e,n,o)=>{q2(o)&&(e.typing=n)},YP=(e,n)=>{e.typing&&(BE(e,!1,n),e.add())},bd=e=>{e.typing&&(e.typing=!1,e.add())},vO=(e,n,o)=>{q2(n)&&o.set(ab(e.selection))},wL=(e,n,o,r,a,u,f)=>{const b=Z2(e),C=Ve.extend(u||{},b);if(!q2(r)||e.removed)return null;const S=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:C,lastLevel:S,originalEvent:f}).isDefaultPrevented()||S&&G2(S,C))return null;n.data[o.get()]&&a.get().each(D=>{n.data[o.get()].beforeBookmark=D});const O=gb(e);if(O&&n.data.length>O){for(let D=0;D<n.data.length-1;D++)n.data[D]=n.data[D+1];n.data.length--,o.set(n.data.length)}C.bookmark=ab(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(C),o.set(n.data.length-1);const R={level:C,lastLevel:S,originalEvent:f};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",R),e.dispatch("change",R)):e.dispatch("AddUndo",R),C},$E=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},yO=(e,n,o,r,a)=>{if(n.transact(r)){const u=n.data[o.get()].bookmark,f=n.data[o.get()-1];Ap(e,f,!0),n.transact(a)&&(n.data[o.get()-1].beforeBookmark=u)}},XP=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],Ap(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},JP=(e,n,o,r)=>{let a;return n.typing&&(n.add(),n.typing=!1,BE(n,!1,o)),r.get()>0&&(r.set(r.get()-1),a=n.data[r.get()],Ap(e,a,!0),e.setDirty(!0),e.dispatch("Undo",{level:a})),a},QP=e=>{e.clear(),e.add()},SL=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!G2(Z2(e),n.data[0]),xL=(e,n)=>n.get()<e.data.length-1&&!e.typing,EL=(e,n,o)=>(YP(e,n),e.beforeChange(),e.ignore(o),e.add()),TL=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},_L=(e,n)=>{const o=e.dom,r=Oe(n)?n:e.getBody();Se(o.select("table,a",r),a=>{switch(a.nodeName){case"TABLE":const u=kS(e),f=o.getAttrib(a,"border");(!f||f==="0")&&e.hasVisual?o.addClass(a,u):o.removeClass(a,u);break;case"A":if(!o.getAttrib(a,"href")){const b=o.getAttrib(a,"name")||a.id,C=Cy(e);b&&e.hasVisual?o.addClass(a,C):o.removeClass(a,C)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},CO=e=>({init:{bindEvents:Ot},undoManager:{beforeChange:(n,o)=>vO(e,n,o),add:(n,o,r,a,u,f)=>wL(e,n,o,r,a,u,f),undo:(n,o,r)=>JP(e,n,o,r),redo:(n,o)=>XP(e,n,o),clear:(n,o)=>$E(e,n,o),reset:n=>QP(n),hasUndo:(n,o)=>SL(e,n,o),hasRedo:(n,o)=>xL(n,o),transact:(n,o,r)=>EL(n,o,r),ignore:(n,o)=>TL(n,o),extra:(n,o,r,a)=>yO(e,n,o,r,a)},formatter:{match:(n,o,r,a)=>O2(e,n,o,r,a),matchAll:(n,o)=>$5(e,n,o),matchNode:(n,o,r,a)=>ru(e,n,o,r,a),canApply:n=>l7(e,n),closest:n=>rE(e,n),apply:(n,o,r)=>H3(e,n,o,r),remove:(n,o,r,a)=>rP(e,n,o,r,a),toggle:(n,o,r)=>CE(e,n,o,r),formatChanged:(n,o,r,a,u)=>R7(e,n,o,r,a,u)},editor:{getContent:n=>m8(e,n),setContent:(n,o)=>pp(e,n,o),insertContent:(n,o)=>xa(e,n,o),addVisual:n=>_L(e,n)},selection:{getContent:(n,o)=>pL(e,n,o)},autocompleter:{addDecoration:Ot,removeDecoration:Ot},raw:{getModel:()=>N.none()}}),kL=e=>{const n=S=>hn(S)?S:{},{init:o,undoManager:r,formatter:a,editor:u,selection:f,autocompleter:b,raw:C}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(S,O,R)=>r.transact(R),ignore:(S,O)=>r.ignore(O),extra:(S,O,R,D)=>r.extra(R,D)},formatter:{match:(S,O,R,D)=>a.match(S,n(O),D),matchAll:a.matchAll,matchNode:a.matchNode,canApply:S=>a.canApply(S),closest:S=>a.closest(S),apply:(S,O,R)=>a.apply(S,n(O)),remove:(S,O,R,D)=>a.remove(S,n(O)),toggle:(S,O,R)=>a.toggle(S,n(O)),formatChanged:(S,O,R,D,I)=>a.formatChanged(O,R,D,I)},editor:{getContent:S=>u.getContent(S),setContent:(S,O)=>({content:u.setContent(S,O),html:""}),insertContent:(S,O)=>(u.insertContent(S),""),addVisual:u.addVisual},selection:{getContent:(S,O)=>f.getContent(O)},autocompleter:{addDecoration:b.addDecoration,removeDecoration:b.removeDecoration},raw:{getModel:()=>N.some(C.getRawModel())}}},OL=()=>{const e=Ke(null),n=Ke("");return{init:{bindEvents:Ot},undoManager:{beforeChange:Ot,add:e,undo:e,redo:e,clear:Ot,reset:Ot,hasUndo:De,hasRedo:De,transact:e,ignore:Ot,extra:Ot},formatter:{match:De,matchAll:Ke([]),matchNode:Ke(void 0),canApply:De,closest:n,apply:Ot,remove:Ot,toggle:Ot,formatChanged:Ke({unbind:Ot})},editor:{getContent:n,setContent:Ke({content:"",html:""}),insertContent:Ke(""),addVisual:Ot},selection:{getContent:n},autocompleter:{addDecoration:Ot,removeDecoration:Ot},raw:{getModel:Ke(N.none())}}},vd=e=>$t(e.plugins,"rtc"),eN=e=>bo(e.plugins,"rtc").bind(n=>N.from(n.setup)),wO=e=>{const n=e;return eN(e).fold(()=>(n.rtcInstance=CO(e),N.none()),o=>(n.rtcInstance=OL(),N.some(()=>o().then(r=>(n.rtcInstance=kL(r),r.rtc.isRemote)))))},K2=e=>e.rtcInstance?e.rtcInstance:CO(e),Us=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},SO=(e,n,o)=>{Us(e).undoManager.beforeChange(n,o)},tN=(e,n,o,r,a,u,f)=>Us(e).undoManager.add(n,o,r,a,u,f),nN=(e,n,o,r)=>Us(e).undoManager.undo(n,o,r),xO=(e,n,o)=>Us(e).undoManager.redo(n,o),oN=(e,n,o)=>{Us(e).undoManager.clear(n,o)},sN=(e,n)=>{Us(e).undoManager.reset(n)},rN=(e,n,o)=>Us(e).undoManager.hasUndo(n,o),AL=(e,n,o)=>Us(e).undoManager.hasRedo(n,o),EO=(e,n,o,r)=>Us(e).undoManager.transact(n,o,r),RL=(e,n,o)=>{Us(e).undoManager.ignore(n,o)},FE=(e,n,o,r,a)=>{Us(e).undoManager.extra(n,o,r,a)},DL=(e,n,o,r,a)=>Us(e).formatter.match(n,o,r,a),ML=(e,n,o)=>Us(e).formatter.matchAll(n,o),PL=(e,n,o,r,a)=>Us(e).formatter.matchNode(n,o,r,a),cN=(e,n)=>Us(e).formatter.canApply(n),aN=(e,n)=>Us(e).formatter.closest(n),NL=(e,n,o,r)=>{Us(e).formatter.apply(n,o,r)},BL=(e,n,o,r,a)=>{Us(e).formatter.remove(n,o,r,a)},$L=(e,n,o,r)=>{Us(e).formatter.toggle(n,o,r)},FL=(e,n,o,r,a,u)=>Us(e).formatter.formatChanged(n,o,r,a,u),IL=(e,n)=>K2(e).editor.getContent(n),iN=(e,n,o)=>K2(e).editor.setContent(n,o),IG=(e,n,o)=>K2(e).editor.insertContent(n,o),LL=(e,n,o)=>Us(e).selection.getContent(n,o),HL=(e,n)=>Us(e).editor.addVisual(n),lN=e=>Us(e).init.bindEvents(),VL=(e,n={})=>{const o=n.format?n.format:"html";return LL(e,o,n)},uN=e=>e.dom.length===0?(ao(e),N.none()):N.some(e),zL=(e,n)=>e.filter(o=>Pm.isBookmarkNode(o.dom)).bind(n?Hr:Hl),UL=(e,n,o,r,a)=>{const u=e.dom,f=n.dom,b=r?u.length:f.length;r?(n3(u,f,a,!1,!r),o.setStart(f,b)):(n3(f,u,a,!1,!r),o.setEnd(f,b))},dN=(e,n,o)=>{Ba(e).each(r=>{const a=e.dom;n&&m2(r,Ce(a,0),o)?Hx(a,0,o):!n&&f2(r,Ce(a,a.length),o)&&t3(a,a.length,o)})},mN=(e,n,o,r,a)=>{e.bind(u=>((r?t3:Hx)(u.dom,r?u.dom.length:0,a),n.filter(Xs).map(b=>UL(u,b,o,r,a)))).orThunk(()=>zL(n,r).or(n).filter(Xs).map(f=>dN(f,r,a)))},WL=(e,n,o)=>{const r=N.from(n.firstChild).map(K.fromDom),a=N.from(n.lastChild).map(K.fromDom);e.deleteContents(),e.insertNode(n);const u=r.bind(Hl).filter(Xs).bind(uN),f=a.bind(Hr).filter(Xs).bind(uN);mN(u,r,e,!0,o),mN(f,a,e,!1,o),e.collapse(!1)},ZL=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),jL=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),a=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(n.content,{forced_root_block:!1,...a,...n});return lg({validate:!1},e.schema).serialize(u)}else return n.content},GL=(e,n,o={})=>{const r=ZL(o,n);OE(e,r).each(a=>{const u=jL(e,a),f=e.selection.getRng();WL(f,f.createContextualFragment(u),e.schema),e.selection.setRng(f),Fm(e,f),AE(e,u,a)})},qL=(e,n,o)=>{if($t(e,n)){const r=Rt(e[n],a=>a!==o);r.length===0?delete e[n]:e[n]=r}};var LG=(e,n)=>{let o,r;const a=(b,C)=>as(C,S=>e.is(S,b)),u=b=>e.getParents(b,void 0,e.getRoot()),f=()=>{o={},r={},n.on("NodeChange",b=>{const C=b.element,S=u(C),O={};rt(o,(R,D)=>{a(D,S).each(I=>{r[D]||(Se(R,z=>{z(!0,{node:I,selector:D,parents:S})}),r[D]=R),O[D]=R})}),rt(r,(R,D)=>{O[D]||(delete r[D],Se(R,I=>{I(!1,{node:C,selector:D,parents:S})}))})})};return{selectorChangedWithUnbind:(b,C)=>(o||f(),o[b]||(o[b]=[]),o[b].push(C),a(b,u(n.selection.getStart())).each(()=>{r[b]=o[b]}),{unbind:()=>{qL(o,b,C),qL(r,b,C)}})}};const fN=e=>!!(e&&e.ownerDocument)&&ia(K.fromDom(e.ownerDocument),K.fromDom(e)),KL=e=>e?fN(e.startContainer)&&fN(e.endContainer):!1,YL=(e,n,o,r)=>{let a,u;const{selectorChangedWithUnbind:f}=LG(e,r),b=(Ge,vt)=>{const Tn=e.createRng();Oe(Ge)&&Oe(vt)?(Tn.setStart(Ge,vt),Tn.setEnd(Ge,vt),ie(Tn),Y(!1)):(cx(e,Tn,r.getBody(),!0),ie(Tn))},C=Ge=>VL(r,Ge),S=(Ge,vt)=>GL(r,Ge,vt),O=Ge=>vM(r.getBody(),ce(),Ge),R=Ge=>yM(r.getBody(),ce(),Ge),D=(Ge,vt)=>Cs.getBookmark(Ge,vt),I=Ge=>Cs.moveToBookmark(Ge),z=(Ge,vt)=>(wM(e,Ge,vt).each(ie),Ge),H=()=>{const Ge=ce(),vt=re();return!Ge||Ge.item?!1:Ge.compareEndPoints?Ge.compareEndPoints("StartToEnd",Ge)===0:!vt||Ge.collapsed},Z=()=>{if(r.mode.isReadOnly())return!1;const Ge=ce(),vt=r.getBody().querySelectorAll('[data-mce-selected="1"]');return vt.length>0?ir(vt,Tn=>e.isEditable(Tn.parentElement)):H4(e,Ge)},Y=Ge=>{const vt=ce();vt.collapse(!!Ge),ie(vt)},re=()=>n.getSelection?n.getSelection():n.document.selection,ce=()=>{let Ge;const vt=(et,_t,Pt)=>{try{return _t.compareBoundaryPoints(et,Pt)}catch{return-1}},Tn=n.document;if(Oe(r.bookmark)&&!o0(r)){const et=Ox(r);if(et.isSome())return et.map(_t=>Bx(r,[_t])[0]).getOr(Tn.createRange())}try{const et=re();et&&!Ud(et.anchorNode)&&(et.rangeCount>0?Ge=et.getRangeAt(0):Ge=Tn.createRange(),Ge=Bx(r,[Ge])[0])}catch{}if(Ge||(Ge=Tn.createRange()),bf(Ge.startContainer)&&Ge.collapsed){const et=e.getRoot();Ge.setStart(et,0),Ge.setEnd(et,0)}return a&&u&&(vt(Ge.START_TO_START,Ge,a)===0&&vt(Ge.END_TO_END,Ge,a)===0?Ge=u:(a=null,u=null)),Ge},ie=(Ge,vt)=>{if(!KL(Ge))return;const Tn=re();if(Ge=r.dispatch("SetSelectionRange",{range:Ge,forward:vt}).range,Tn){u=Ge;try{Tn.removeAllRanges(),Tn.addRange(Ge)}catch{}vt===!1&&Tn.extend&&(Tn.collapse(Ge.endContainer,Ge.endOffset),Tn.extend(Ge.startContainer,Ge.startOffset)),a=Tn.rangeCount>0?Tn.getRangeAt(0):null}if(!Ge.collapsed&&Ge.startContainer===Ge.endContainer&&(Tn!=null&&Tn.setBaseAndExtent)&&Ge.endOffset-Ge.startOffset<2&&Ge.startContainer.hasChildNodes()){const _t=Ge.startContainer.childNodes[Ge.startOffset];_t&&_t.nodeName==="IMG"&&(Tn.setBaseAndExtent(Ge.startContainer,Ge.startOffset,Ge.endContainer,Ge.endOffset),(Tn.anchorNode!==Ge.startContainer||Tn.focusNode!==Ge.endContainer)&&Tn.setBaseAndExtent(_t,0,_t,1))}r.dispatch("AfterSetSelectionRange",{range:Ge,forward:vt})},_e=Ge=>(S(e.getOuterHTML(Ge)),Ge),Ie=()=>n8(r.getBody(),ce()),st=(Ge,vt)=>Nx(e,ce(),Ge,vt),we=()=>{const Ge=re(),vt=Ge==null?void 0:Ge.anchorNode,Tn=Ge==null?void 0:Ge.focusNode;if(!Ge||!vt||!Tn||Ud(vt)||Ud(Tn))return!0;const et=e.createRng(),_t=e.createRng();try{et.setStart(vt,Ge.anchorOffset),et.collapse(!0),_t.setStart(Tn,Ge.focusOffset),_t.collapse(!0)}catch{return!0}return et.compareBoundaryPoints(et.START_TO_START,_t)<=0},Jo={dom:e,win:n,serializer:o,editor:r,expand:(Ge={type:"word"})=>ie(Re(e).expand(ce(),Ge)),collapse:Y,setCursorLocation:b,getContent:C,setContent:S,getBookmark:D,moveToBookmark:I,select:z,isCollapsed:H,isEditable:Z,isForward:we,setNode:_e,getNode:Ie,getSel:re,setRng:ie,getRng:ce,getStart:O,getEnd:R,getSelectedBlocks:st,normalize:()=>{const Ge=ce(),vt=re();if(!n4(vt)&&Pb(r)){const Tn=qe(e,Ge);return Tn.each(et=>{ie(et,we())}),Tn.getOr(Ge)}return Ge},selectorChanged:(Ge,vt)=>(f(Ge,vt),Jo),selectorChangedWithUnbind:f,getScrollContainer:()=>{let Ge,vt=e.getRoot();for(;vt&&vt.nodeName!=="BODY";){if(vt.scrollHeight>vt.clientHeight){Ge=vt;break}vt=vt.parentNode}return Ge},scrollIntoView:(Ge,vt)=>{Oe(Ge)?U6(r,Ge,vt):Fm(r,ce(),vt)},placeCaretAt:(Ge,vt)=>ie(p(Ge,vt,r.getDoc())),getBoundingClientRect:()=>{const Ge=ce();return Ge.collapsed?Ce.fromRangeStart(Ge).getClientRects()[0]:Ge.getBoundingClientRect()},destroy:()=>{n=a=u=null,ar.destroy()}},Cs=Pm(Jo),ar=o2(Jo,r);return Jo.bookmarkManager=Cs,Jo.controlSelection=ar,Jo},XL=(e,n,o)=>{n.addNodeFilter("br",(r,a,u)=>{const f=Ve.extend({},o.getBlockElements()),b=o.getNonEmptyElements(),C=o.getWhitespaceElements();f.body=1;const S=O=>O.name in f||D1(o,O);for(let O=0,R=r.length;O<R;O++){let D=r[O],I=D.parent;if(I&&S(I)&&D===I.lastChild){let z=D.prev;for(;z;){const H=z.name;if(H!=="span"||z.attr("data-mce-type")!=="bookmark"){H==="br"&&(D=null);break}z=z.prev}if(D&&(D.remove(),As(o,b,C,I))){const H=o.getElementRule(I.name);H&&(H.removeEmpty?I.remove():H.paddEmpty&&w3(e,u,S,I))}}else{let z=D;for(;I&&I.firstChild===z&&I.lastChild===z&&(z=I,!f[I.name]);)I=I.parent;if(z===I){const H=new _c("#text",3);H.value=Es,D.replace(H)}}}})},Xo=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,a)=>{let u=r.length;for(;u--;){const f=r[u];f.attr("tabindex",f.attr("data-mce-tabindex")),f.attr(a,null)}}),e.addAttributeFilter("src,href,style",(r,a)=>{const u="data-mce-"+a,f=n.url_converter,b=n.url_converter_scope;let C=r.length;for(;C--;){const S=r[C];let O=S.attr(u);O!==void 0?(S.attr(a,O.length>0?O:null),S.attr(u,null)):(O=S.attr(a),a==="style"?O=o.serializeStyle(o.parseStyle(O),S.name):f&&(O=f.call(b,O,a,S.name)),S.attr(a,O.length>0?O:null))}}),e.addAttributeFilter("class",r=>{let a=r.length;for(;a--;){const u=r[a];let f=u.attr("class");f&&(f=f.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",f.length>0?f:null))}}),e.addAttributeFilter("data-mce-type",(r,a,u)=>{let f=r.length;for(;f--;){const b=r[f];b.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(N.from(b.firstChild).exists(S=>{var O;return!xh((O=S.value)!==null&&O!==void 0?O:"")})?b.unwrap():b.remove())}}),e.addNodeFilter("script,style",(r,a)=>{var u;const f=C=>C.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let b=r.length;for(;b--;){const C=r[b],S=C.firstChild,O=(u=S==null?void 0:S.value)!==null&&u!==void 0?u:"";if(a==="script"){const R=C.attr("type");R&&C.attr("type",R==="mce-no/type"?null:R.replace(/^mce\-/,"")),n.element_format==="xhtml"&&S&&O.length>0&&(S.value=`// <![CDATA[
`+f(O)+`
// ]]>`)}else n.element_format==="xhtml"&&S&&O.length>0&&(S.value=`<!--
`+f(O)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let a=r.length;for(;a--;){const u=r[a],f=u.value;n.preserve_cdata&&(f==null?void 0:f.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(f.replace(/^\[CDATA\[|\]\]$/g,""))):(f==null?void 0:f.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(f).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,a)=>{let u=r.length;for(;u--;){const f=r[u];f.type===7?f.remove():f.type===1&&a==="input"&&!f.attr("type")&&f.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{Se(r,a=>{a.attr("data-mce-type")==="format-caret"&&(a.isEmpty(e.schema.getNonEmptyElements())?a.remove():a.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,a)=>{let u=r.length;for(;u--;)r[u].attr(a,null)}),n.remove_trailing_brs&&XL(n,e,e.schema)},TO=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},HG=(e,n,o)=>{let r;const a=e.dom;let u=n.cloneNode(!0);const f=document.implementation;if(f.createHTMLDocument){const b=f.createHTMLDocument("");Ve.each(u.nodeName==="BODY"?u.childNodes:[u],C=>{b.body.appendChild(b.importNode(C,!0))}),u.nodeName!=="BODY"?u=b.body.firstChild:u=b.body,r=a.doc,a.doc=b}return Hb(e,{...o,node:u}),r&&(a.doc=r),u},JL=(e,n)=>Oe(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,QL=(e,n,o)=>JL(e,o)?HG(e,n,o):n,h0=(e,n,o)=>{Ve.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,a)=>{let u=r.length;for(;u--;)r[u].attr(a,null)}),n.push(o))},VG=(e,n,o)=>!n.no_events&&e?Vb(e,{...n,content:o}).content:o,zG=(e,n,o)=>{const r=ma(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||Y1(K.fromDom(n))?r:Ve.trim(r)},Nr=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,a=e.parse(n,r);return TO(a),a},gN=(e,n,o)=>lg(e,n).serialize(o),hN=(e,n,o,r,a)=>{const u=gN(n,o,r);return VG(e,a,u)},pN=(e,n)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},a=n&&n.dom?n.dom:Yn.DOM,u=n&&n.schema?n.schema:Fn(r),f=Tp(r,u);Xo(f,r,a);const b=(C,S={})=>{const O={format:"html",...S},R=QL(n,C,O),D=zG(a,R,O),I=Nr(f,D,O);return O.format==="tree"?I:hN(n,r,u,I,O)};return{schema:u,addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,serialize:b,addRules:u.addValidElements,setRules:u.setValidElements,addTempAttr:Be(h0,f,o),getTempAttrs:Ke(o),getNodeFilters:f.getNodeFilters,getAttributeFilters:f.getAttributeFilters,removeNodeFilter:f.removeNodeFilter,removeAttributeFilter:f.removeAttributeFilter}},bN=(e,n)=>{const o=pN(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},eH="html",IE=(e,n)=>({...e,format:n,get:!0,getInner:!0}),tH=(e,n={})=>{const o=n.format?n.format:eH,r=IE(n,o);return PP(e,r).fold(Wo,a=>{const u=IL(e,a);return lO(e,u,a)})},_O="html",nH=(e,n)=>({format:_O,...e,set:!0,content:n}),LE=(e,n,o={})=>{const r=nH(o,n);return OE(e,r).map(a=>{const u=iN(e,a.content,a);return AE(e,u.html,a),u.content}).getOr(n)},vN="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),kO=[],yN="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),HE=[],CN=(e,n)=>{const o=Rt(n,r=>$t(e,r));return Io(o)},oH=e=>{const n=CN(e,vN),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),Io(n)},sH=e=>CN(e,kO),ka=(e,n)=>{const o=Ve.makeMap(e.plugins," "),a=Rt(n,u=>$t(o,u));return Io(a)},rH=e=>ka(e,yN),cH=e=>ka(e,HE.map(n=>n.name)),aH=(e,n)=>{const o=oH(e),r=rH(n),a=r.length>0,u=o.length>0,f=n.theme==="mobile";if(a||u||f){const b=`
- `,C=f?`

Themes:${b}mobile`:"",S=a?`

Plugins:${b}${r.join(b)}`:"",O=u?`

Options:${b}${o.join(b)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+C+S+O)}},iH=e=>as(HE,n=>n.name===e).fold(()=>e,n=>n.replacedWith?`${e}, replaced by ${n.replacedWith}`:e),lH=(e,n)=>{const o=sH(e),r=cH(n),a=r.length>0,u=o.length>0;if(a||u){const f=`
- `,b=a?`

Plugins:${f}${r.map(iH).join(f)}`:"",C=u?`

Options:${f}${o.join(f)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+b+C)}},wN=(e,n)=>{aH(e,n),lH(e,n)},VE=Yn.DOM,uH=e=>{VE.setStyle(e.id,"display",e.orgDisplay)},zE=e=>N.from(e).each(n=>n.destroy()),UE=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},dH=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),VE.unbind(n,"submit reset",e.formEventDelegate))},mH=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),a=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&Oe(a==null?void 0:a.nextSibling)&&VE.remove(a.nextSibling),u4(e),e.editorManager.remove(e),!e.inline&&r&&uH(e),d4(e),VE.remove(e.getContainer()),zE(n),zE(o),e.destroy()}},SN=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),zE(o),zE(r)),dH(e),UE(e),e.destroyed=!0}},WE=(()=>{const e={};return{add:(a,u)=>{e[a]=u},get:a=>e[a]?e[a]:{icons:{}},has:a=>$t(e,a)}})(),p0=Rr.ModelManager,fH=(e,n)=>n.dom[e],EN=(e,n)=>parseInt(es(n,e),10),Y2=Be(fH,"clientWidth"),TN=Be(fH,"clientHeight"),_N=Be(EN,"margin-top"),gH=Be(EN,"margin-left"),kN=e=>e.dom.getBoundingClientRect(),hH=(e,n,o)=>{const r=Y2(e),a=TN(e);return n>=0&&o>=0&&n<=r&&o<=a},pH=(e,n,o,r)=>{const a=kN(n),u=e?a.left+n.dom.clientLeft+gH(n):0,f=e?a.top+n.dom.clientTop+_N(n):0,b=o-u,C=r-f;return{x:b,y:C}},bH=(e,n,o)=>{const r=K.fromDom(e.getBody()),a=e.inline?r:cw(r),u=pH(e.inline,a,n,o);return hH(a,u.x,u.y)},vH=e=>N.from(e).map(K.fromDom),ON=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return vH(n).map(ff).getOr(!1)};var yH=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const AN=e=>{const n=[],o=()=>{const D=e.theme;return D&&D.getNotificationManagerImpl?D.getNotificationManagerImpl():yH()},r=()=>N.from(n[0]),a=(D,I)=>D.type===I.type&&D.text===I.text&&!D.progressBar&&!D.timeout&&!I.progressBar&&!I.timeout,u=()=>{r().each(D=>{D.reposition()})},f=D=>{n.push(D)},b=D=>{dc(n,I=>I===D).each(I=>{n.splice(I,1)})},C=(D,I=!0)=>e.removed||!ON(e)?{}:(I&&e.dispatch("BeforeOpenNotification",{notification:D}),as(n,z=>a(o().getArgs(z),D)).getOrThunk(()=>{e.editorManager.setActive(e);const z=o().open(D,()=>{b(z)},()=>pM(e));return f(z),u(),e.dispatch("OpenNotification",{notification:{...z}}),z})),S=()=>{r().each(D=>{o().close(D),b(D),u()})},O=Ke(n);return(D=>{D.on("SkinLoaded",()=>{const I=py(D);I&&C({text:I,type:"warning",timeout:0},!1),u()}),D.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(u)}),D.on("remove",()=>{Se(n.slice(),I=>{o().close(I)})}),D.addShortcut("alt+F12","Focus to notification",()=>r().map(I=>K.fromDom(I.getEl())).each(I=>ip(I)))})(e),{open:C,close:S,getNotifications:O}},yd=Rr.PluginManager,Tg=Rr.ThemeManager;var RN=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const DN=e=>{let n=[];const o=()=>{const H=e.theme;return H&&H.getWindowManagerImpl?H.getWindowManagerImpl():RN()},r=(H,Z)=>(...Y)=>Z?Z.apply(H,Y):void 0,a=H=>{e.dispatch("OpenWindow",{dialog:H})},u=H=>{e.dispatch("CloseWindow",{dialog:H})},f=H=>{n.push(H),a(H)},b=H=>{u(H),n=Rt(n,Z=>Z!==H),n.length===0&&e.focus()},C=()=>N.from(n[n.length-1]),S=H=>{e.editorManager.setActive(e),i2(e),e.ui.show();const Z=H();return f(Z),Z},O=(H,Z)=>S(()=>o().open(H,Z,b)),R=H=>S(()=>o().openUrl(H,b)),D=(H,Z,Y)=>{const re=o();re.alert(H,r(Y||re,Z))},I=(H,Z,Y)=>{const re=o();re.confirm(H,r(Y||re,Z))},z=()=>{C().each(H=>{o().close(H),b(H)})};return e.on("remove",()=>{Se(n,H=>{o().close(H)})}),{open:O,openUrl:R,alert:D,confirm:I,close:z}},MN=(e,n)=>{e.notificationManager.open({type:"error",text:n})},ZE=(e,n)=>{e._skinLoaded?MN(e,n):e.on("SkinLoaded",()=>{MN(e,n)})},PN=(e,n)=>{ZE(e,_i.translate(["Failed to upload image: {0}",n]))},X2=(e,n,o)=>{Ca(e,n,{message:o}),console.error(o)},J2=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,CH=(e,n,o)=>{X2(e,"PluginLoadError",J2("plugin",n,o))},wH=(e,n,o)=>{X2(e,"IconsLoadError",J2("icons",n,o))},UG=(e,n,o)=>{X2(e,"LanguageLoadError",J2("language",n,o))},iu=(e,n,o)=>{X2(e,"ThemeLoadError",J2("theme",n,o))},OO=(e,n,o)=>{X2(e,"ModelLoadError",J2("model",n,o))},SH=(e,n,o)=>{const r=_i.translate(["Failed to initialize plugin: {0}",n]);Ca(e,"PluginLoadError",{message:r}),jE(r,o),ZE(e,r)},jE=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},xH=e=>/^[a-z0-9\-]+$/i.test(e),AO=e=>"content/"+e+"/content.css",Bn=e=>tinymce.Resource.has(AO(e)),EH=e=>NN(e,bm(e)),Q2=e=>NN(e,Rk(e)),NN=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",a=`content${e.editorManager.suffix}.css`;return Gt(n,u=>Bn(u)?u:xH(u)&&!e.inline?`${o}/${u}/${a}`:e.documentBaseURI.toAbsolute(u))},TH=e=>{e.contentCSS=e.contentCSS.concat(EH(e),Q2(e))},_H=e=>e?mc(e.getElementsByTagName("img")):[],BN=(e,n)=>{const o={};return{findAll:(a,u=it)=>{const f=Rt(_H(a),C=>{const S=C.src;return C.hasAttribute("data-mce-bogus")||C.hasAttribute("data-mce-placeholder")||!S||S===qt.transparentSrc?!1:fs(S,"blob:")?!e.isUploaded(S)&&u(C):fs(S,"data:")?u(C):!1}),b=Gt(f,C=>{const S=C.src;if($t(o,S))return o[S].then(O=>J(O)?O:{image:C,blobInfo:O.blobInfo});{const O=N2(n,S).then(R=>(delete o[S],{image:C,blobInfo:R})).catch(R=>(delete o[S],R));return o[S]=O,O}});return Promise.all(b)}}},zm=()=>{let o={};const r=(D,I)=>({status:D,resultUri:I}),a=D=>D in o;return{hasBlobUri:a,getResultUri:D=>{const I=o[D];return I?I.resultUri:null},isPending:D=>a(D)?o[D].status===1:!1,isUploaded:D=>a(D)?o[D].status===2:!1,markPending:D=>{o[D]=r(1,null)},markUploaded:(D,I)=>{o[D]=r(2,I)},removeFailed:D=>{delete o[D]},destroy:()=>{o={}}}};let Kc=0;const eC=()=>{const e=()=>Math.round(Ch()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},_g=e=>e+Kc+++eC(),Cd=()=>{let e=[];const n=R=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[R.toLowerCase()]||"dat",o=(R,D,I,z,H)=>{if(J(R))return r({id:R,name:z,filename:H,blob:D,base64:I});if(hn(R))return r(R);throw new Error("Unknown input type")},r=R=>{if(!R.blob||!R.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const D=R.id||_g("blobid"),I=R.name||D,z=R.blob;return{id:Ke(D),name:Ke(I),filename:Ke(R.filename||I+"."+n(z.type)),blob:Ke(z),base64:Ke(R.base64),blobUri:Ke(R.blobUri||URL.createObjectURL(z)),uri:Ke(R.uri)}},a=R=>{f(R.id())||e.push(R)},u=R=>as(e,R).getOrUndefined(),f=R=>u(D=>D.id()===R);return{create:o,add:a,get:f,getByUri:R=>u(D=>D.blobUri()===R),getByData:(R,D)=>u(I=>I.base64()===R&&I.blob().type===D),findFirst:u,removeByUri:R=>{e=Rt(e,D=>D.blobUri()===R?(URL.revokeObjectURL(D.blobUri()),!1):!0)},destroy:()=>{Se(e,R=>{URL.revokeObjectURL(R.blobUri())}),e=[]}}},tC=(e,n)=>{const o={},r=(H,Z)=>H?H.replace(/\/$/,"")+"/"+Z.replace(/^\//,""):Z,a=(H,Z)=>new Promise((Y,re)=>{const ce=new XMLHttpRequest;ce.open("POST",n.url),ce.withCredentials=n.credentials,ce.upload.onprogress=_e=>{Z(_e.loaded/_e.total*100)},ce.onerror=()=>{re("Image upload failed due to a XHR Transport error. Code: "+ce.status)},ce.onload=()=>{if(ce.status<200||ce.status>=300){re("HTTP Error: "+ce.status);return}const _e=JSON.parse(ce.responseText);if(!_e||!J(_e.location)){re("Invalid JSON: "+ce.responseText);return}Y(r(n.basePath,_e.location))};const ie=new FormData;ie.append("file",H.blob(),H.filename()),ce.send(ie)}),u=Q(n.handler)?n.handler:a,f=()=>new Promise(H=>{H([])}),b=(H,Z)=>({url:Z,blobInfo:H,status:!0}),C=(H,Z)=>({url:"",blobInfo:H,status:!1,error:Z}),S=(H,Z)=>{Ve.each(o[H],Y=>{Y(Z)}),delete o[H]},O=(H,Z,Y)=>(e.markPending(H.blobUri()),new Promise(re=>{let ce,ie;try{const _e=()=>{ce&&(ce.close(),ie=Ot)},Ie=we=>{_e(),e.markUploaded(H.blobUri(),we),S(H.blobUri(),b(H,we)),re(b(H,we))},st=we=>{_e(),e.removeFailed(H.blobUri()),S(H.blobUri(),C(H,we)),re(C(H,we))};ie=we=>{we<0||we>100||N.from(ce).orThunk(()=>N.from(Y).map(cs)).each(he=>{ce=he,he.progressBar.value(we)})},Z(H,ie).then(Ie,we=>{st(J(we)?{message:we}:we)})}catch(_e){re(C(H,_e))}})),R=H=>H===a,D=H=>{const Z=H.blobUri();return new Promise(Y=>{o[Z]=o[Z]||[],o[Z].push(Y)})},I=(H,Z)=>(H=Ve.grep(H,Y=>!e.isUploaded(Y.blobUri())),Promise.all(Ve.map(H,Y=>e.isPending(Y.blobUri())?D(Y):O(Y,u,Z))));return{upload:(H,Z)=>!n.url&&R(u)?f():I(H,Z)}},GE=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),qE=(e,n)=>tC(n,{url:fy(e),basePath:gy(e),credentials:hy(e),handler:bS(e)}),$N=e=>{const n=zm(),o=qE(e,n);return{upload:(r,a=!0)=>o.upload(r,a?GE(e):void 0)}},FN=(e,n)=>e.dom.isEmpty(n.dom)&&Oe(e.schema.getTextBlockElements()[wn(n)]),kH=e=>n=>{FN(e,n)&&Bs(n,K.fromHtml('<br data-mce-bogus="1" />'))},OH=e=>{const n=Cd();let o,r;const a=zm(),u=[],f=ce=>ie=>e.selection?ce(ie):[],b=ce=>ce+(ce.indexOf("?")===-1?"?":"&")+new Date().getTime(),C=(ce,ie,_e)=>{let Ie=0;do Ie=ce.indexOf(ie,Ie),Ie!==-1&&(ce=ce.substring(0,Ie)+_e+ce.substr(Ie+ie.length),Ie+=_e.length-ie.length+1);while(Ie!==-1);return ce},S=(ce,ie,_e)=>{const Ie=`src="${_e}"${_e===qt.transparentSrc?' data-mce-placeholder="1"':""}`;return ce=C(ce,`src="${ie}"`,Ie),ce=C(ce,'data-mce-src="'+ie+'"','data-mce-src="'+_e+'"'),ce},O=(ce,ie)=>{Se(e.undoManager.data,_e=>{_e.type==="fragmented"?_e.fragments=Gt(_e.fragments,Ie=>S(Ie,ce,ie)):_e.content=S(_e.content,ce,ie)})},R=(ce,ie)=>{const _e=e.convertURL(ie,"src");O(ce.src,ie),Lr(K.fromDom(ce),{src:vs(e)?b(ie):ie,"data-mce-src":_e})},D=()=>(o||(o=qE(e,a)),Z().then(f(ce=>{const ie=Gt(ce,_e=>_e.blobInfo);return o.upload(ie,GE(e)).then(f(_e=>{const Ie=[];let st=!1;const we=Gt(_e,(he,Ae)=>{const{blobInfo:ct,image:Ct}=ce[Ae];let rn=!1;return he.status&&Nn(e)?(he.url&&!br(Ct.src,he.url)&&(st=!0),n.removeByUri(Ct.src),vd(e)||R(Ct,he.url)):he.error&&(he.error.remove&&(O(Ct.src,qt.transparentSrc),Ie.push(Ct),rn=!0),PN(e,he.error.message)),{element:Ct,status:he.status,uploadUri:he.url,blobInfo:ct,removed:rn}});return Ie.length>0&&!vd(e)?e.undoManager.transact(()=>{Se(hv(Ie),he=>{const Ae=Ba(he);ao(he),Ae.each(kH(e)),n.removeByUri(he.dom.src)})}):st&&e.undoManager.dispatchChange(),we}))}))),I=()=>or(e)?D():Promise.resolve([]),z=ce=>ir(u,ie=>ie(ce)),H=ce=>{u.push(ce)},Z=()=>(r||(r=BN(a,n)),r.findAll(e.getBody(),z).then(f(ce=>{const ie=Rt(ce,_e=>J(_e)?(ZE(e,_e),!1):_e.uriType!=="blob");return vd(e)||Se(ie,_e=>{O(_e.image.src,_e.blobInfo.blobUri()),_e.image.src=_e.blobInfo.blobUri(),_e.image.removeAttribute("data-mce-src")}),ie}))),Y=()=>{n.destroy(),a.destroy(),r=o=null},re=ce=>ce.replace(/src="(blob:[^"]+)"/g,(ie,_e)=>{const Ie=a.getResultUri(_e);if(Ie)return'src="'+Ie+'"';let st=n.getByUri(_e);return st||(st=Zo(e.editorManager.get(),(we,he)=>we||he.editorUpload&&he.editorUpload.blobCache.getByUri(_e),void 0)),st?'src="data:'+st.blob().type+";base64,"+st.base64()+'"':ie});return e.on("SetContent",()=>{or(e)?I():Z()}),e.on("RawSaveContent",ce=>{ce.content=re(ce.content)}),e.on("GetContent",ce=>{ce.source_view||ce.format==="raw"||ce.format==="tree"||(ce.content=re(ce.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",ce=>{Se(ce,ie=>{const _e=ie.attr("src");if(!_e||n.getByUri(_e))return;const Ie=a.getResultUri(_e);Ie&&ie.attr("src",Ie)})})}),{blobCache:n,addFilter:H,uploadImages:D,uploadImagesAuto:I,scanForImages:Z,destroy:Y}},IN=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:a=>{n.setStyle(a,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:a=>{n.setStyle(a,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const a={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[f,a,u]:[a,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(a,u,f)=>tt(a)&&a.hasAttribute("href"),onformat:(a,u,f)=>{Ve.each(f,(b,C)=>{n.setAttrib(a,C,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":a=>{var u;return(u=a==null?void 0:a.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Ve.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),a=>{r[a]={block:a,remove:"all"}}),r},RO={remove_similar:!0,inherit:!1},Rp={selector:"td,th",...RO},LN={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...Rp},tablecellverticalalign:{styles:{"vertical-align":"%value"},...Rp},tablecellbordercolor:{styles:{borderColor:"%value"},...Rp},tablecellclass:{classes:["%value"],...Rp},tableclass:{selector:"table",classes:["%value"],...RO},tablecellborderstyle:{styles:{borderStyle:"%value"},...Rp},tablecellborderwidth:{styles:{borderWidth:"%value"},...Rp}},DO=Ke(LN),WG=e=>{const n={},o=f=>Oe(f)?n[f]:n,r=f=>$t(n,f),a=(f,b)=>{f&&(J(f)?(yn(b)||(b=[b]),Se(b,C=>{ss(C.deep)&&(C.deep=!va(C)),ss(C.split)&&(C.split=!va(C)||Hs(C)),ss(C.remove)&&va(C)&&!Hs(C)&&(C.remove="none"),va(C)&&Hs(C)&&(C.mixed=!0,C.block_expand=!0),J(C.classes)&&(C.classes=C.classes.split(/\s+/))}),n[f]=b):rt(f,(C,S)=>{a(S,C)}))},u=f=>(f&&n[f]&&delete n[f],n);return a(IN(e)),a(DO()),a(fb(e)),{get:o,has:r,register:a,unregister:u}},KE=Ve.each,Sl=Yn.DOM,MO=e=>Oe(e)&&hn(e),HN=(e,n)=>{const o=n&&n.schema||Fn({}),r=(C,S)=>{S.classes.length>0&&Sl.addClass(C,S.classes.join(" ")),Sl.setAttribs(C,S.attrs)},a=C=>{const S=J(C)?{name:C,classes:[],attrs:{}}:C,O=Sl.create(S.name);return r(O,S),O},u=(C,S)=>{const O=o.getElementRule(C.nodeName.toLowerCase()),R=O==null?void 0:O.parentsRequired;return R&&R.length?S&&zt(R,S)?S:R[0]:!1},f=(C,S,O)=>{let R;const D=S[0],I=MO(D)?D.name:void 0,z=u(C,I);if(z)I===z?(R=D,S=S.slice(1)):R=z;else if(D)R=D,S=S.slice(1);else if(!O)return C;const H=R?a(R):Sl.create("div");H.appendChild(C),O&&Ve.each(O,Y=>{const re=a(Y);H.insertBefore(re,C)});const Z=MO(R)?R.siblings:void 0;return f(H,S,Z)},b=Sl.create("div");if(e.length>0){const C=e[0],S=a(C),O=MO(C)?C.siblings:void 0;b.appendChild(f(S,e.slice(1),O))}return b},wd=e=>{e=Ve.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,a,u,f,b)=>{switch(a){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":Ve.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(f==="["){const C=b.match(/([\w\-]+)(?:\=\"([^\"]+))?/);C&&(o.attrs[C[1]]=C[2])}return""})),o.name=n||"div",o},ZG=e=>J(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Ve.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=Ve.map(n.split(/(?:~\+|~|\+)/),wd),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],jG=(e,n)=>{let o="",r=wS(e);if(r==="")return"";const a=D=>J(D)?D.replace(/%(\w+)/g,""):"",u=(D,I)=>Sl.getStyle(I??e.getBody(),D,!0);if(J(n)){const D=e.formatter.get(n);if(!D)return"";n=D[0]}if("preview"in n){const D=n.preview;if(D===!1)return"";r=D||r}let f=n.block||n.inline||"span",b;const C=ZG(n.selector);C.length>0?(C[0].name||(C[0].name=f),f=n.selector,b=HN(C,e)):b=HN([f],e);const S=Sl.select(f,b)[0]||b.firstChild;KE(n.styles,(D,I)=>{const z=a(D);z&&Sl.setStyle(S,I,z)}),KE(n.attributes,(D,I)=>{const z=a(D);z&&Sl.setAttrib(S,I,z)}),KE(n.classes,D=>{const I=a(D);Sl.hasClass(S,I)||Sl.addClass(S,I)}),e.dispatch("PreviewFormats"),Sl.setStyles(b,{position:"absolute",left:-65535}),e.getBody().appendChild(b);const O=u("fontSize"),R=/px$/.test(O)?parseInt(O,10):0;return KE(r.split(" "),D=>{let I=u(D,S);if(!(D==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(I)&&(I=u(D),bh(I).toLowerCase()==="#ffffff"))&&!(D==="color"&&bh(I).toLowerCase()==="#000000")){if(D==="font-size"&&/em|%$/.test(I)){if(R===0)return;I=parseFloat(I)/(/%$/.test(I)?100:1)*R+"px"}D==="border"&&I&&(o+="padding:0 2px;"),o+=D+":"+I+";"}}),e.dispatch("AfterPreviewFormats"),Sl.remove(b),o},AH=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},b0=e=>{const n=WG(e),o=io({});return AH(e),H5(e),vd(e)||k7(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,a,u)=>{NL(e,r,a,u)},remove:(r,a,u,f)=>{BL(e,r,a,u,f)},toggle:(r,a,u)=>{$L(e,r,a,u)},match:(r,a,u,f)=>DL(e,r,a,u,f),closest:r=>aN(e,r),matchAll:(r,a)=>ML(e,r,a),matchNode:(r,a,u,f)=>PL(e,r,a,u,f),canApply:r=>cN(e,r),formatChanged:(r,a,u,f)=>FL(e,o,r,a,u,f),getCssText:Be(jG,e)}},VN=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},zN=(e,n,o)=>{const r=io(!1),a=C=>{BE(n,!1,o),n.add({},C)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",C=>{const S=C.command;VN(S)||(YP(n,o),n.beforeChange())}),e.on("ExecCommand",C=>{const S=C.command;VN(S)||a(C)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",a),e.on("dragend",a),e.on("keyup",C=>{const S=C.keyCode;if(C.isDefaultPrevented())return;const O=qt.os.isMacOS()&&C.key==="Meta";(S>=33&&S<=36||S>=37&&S<=40||S===45||C.ctrlKey||O)&&(a(),e.nodeChanged()),(S===46||S===8)&&e.nodeChanged(),r.get()&&n.typing&&!G2(Z2(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",C=>{const S=C.keyCode;if(C.isDefaultPrevented())return;if(S>=33&&S<=36||S>=37&&S<=40||S===45){n.typing&&a(C);return}const O=C.ctrlKey&&!C.altKey||C.metaKey;if((S<16||S>20)&&S!==224&&S!==91&&!n.typing&&!O){n.beforeChange(),BE(n,!0,o),n.add({},C),r.set(!0);return}(qt.os.isMacOS()?C.metaKey:C.ctrlKey&&!C.altKey)&&n.beforeChange()}),e.on("mousedown",C=>{n.typing&&a(C)});const u=C=>C.inputType==="insertReplacementText",f=C=>C.inputType==="insertText"&&C.data===null,b=C=>C.inputType==="insertFromPaste"||C.inputType==="insertFromDrop";e.on("input",C=>{C.inputType&&(u(C)||f(C)||b(C))&&a(C)}),e.on("AddUndo Undo Redo ClearUndos",C=>{C.isDefaultPrevented()||e.nodeChanged()})},UN=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},PO=e=>{const n=Qs(),o=io(0),r=io(0),a={data:[],typing:!1,beforeChange:()=>{SO(e,o,n)},add:(u,f)=>tN(e,a,r,o,n,u,f),dispatchChange:()=>{e.setDirty(!0);const u=Z2(e);u.bookmark=ab(e.selection),e.dispatch("change",{level:u,lastLevel:tf(a.data,r.get()).getOrUndefined()})},undo:()=>nN(e,a,o,r),redo:()=>xO(e,r,a.data),clear:()=>{oN(e,a,r)},reset:()=>{sN(e,a)},hasUndo:()=>rN(e,a,r),hasRedo:()=>AL(e,a,r),transact:u=>EO(e,a,o,u),ignore:u=>{RL(e,o,u)},extra:(u,f)=>{FE(e,a,r,u,f)}};return vd(e)||zN(e,a,o),UN(e),a},RH=[9,27,ot.HOME,ot.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,ot.DOWN,ot.UP,ot.LEFT,ot.RIGHT].concat(qt.browser.isFirefox()?[224]:[]),WN="data-mce-placeholder",Um=e=>e.type==="keydown"||e.type==="keyup",ZN=e=>{const n=e.keyCode;return n===ot.BACKSPACE||n===ot.DELETE},DH=e=>{if(Um(e)){const n=e.keyCode;return!ZN(e)&&(ot.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||zt(RH,n))}else return!1},MH=e=>Um(e)&&!(ZN(e)||e.type==="keyup"&&e.keyCode===229),PH=(e,n,o)=>{if(e.isEmpty(n,void 0,{skipBogus:!1,includeZwsp:!0})){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},NH=e=>{var n;const o=e.dom,r=gr(e),a=(n=ml(e))!==null&&n!==void 0?n:"",u=(f,b)=>{if(DH(f))return;const C=e.getBody(),S=MH(f)?!1:PH(o,C,r);(o.getAttrib(C,WN)!==""!==S||b)&&(o.setAttrib(C,WN,S?a:null),Sr(e,S),e.on(S?"keydown":"keyup",u),e.off(S?"keyup":"keydown",u))};Jn(a)&&e.on("init",f=>{u(f,!0),e.on("change SetContent ExecCommand",u),e.on("paste",b=>Xa.setEditorTimeout(e,()=>u(b)))})},BH=(e,n)=>({block:e,position:n}),$H=(e,n)=>({from:e,to:n}),NO=(e,n)=>{const o=K.fromDom(e),r=K.fromDom(n.container());return mp(o,r).map(a=>BH(a,n))},FH=e=>!(ia(e.to.block,e.from.block)||ia(e.from.block,e.to.block)),YE=e=>!Sn(e.from.block,e.to.block),jN=(e,n)=>Vo(n,a=>Sh(a)||Te(a.dom),a=>Sn(a,e)).filter(vo).getOr(e),IH=(e,n)=>{const o=K.fromDom(e);return Sn(jN(o,n.from.block),jN(o,n.to.block))},GG=e=>Dn(e.from.block.dom)===!1&&Dn(e.to.block.dom)===!1,nC=e=>{const n=o=>yc(o)||A1(o.dom)||am(o);return n(e.from.block)&&n(e.to.block)},LH=(e,n,o,r)=>Rn(r.position.getNode())&&!Or(e,r.block)?Sm(!1,r.block.dom).bind(a=>a.isEqual(r.position)?Uc(o,n,a).bind(u=>NO(n,u)):N.some(r)).getOr(r):r,BO=(e,n,o,r)=>{const a=NO(n,Ce.fromRangeStart(r)),u=a.bind(f=>Uc(o,n,f.position).bind(b=>NO(n,b).map(C=>LH(e,n,o,C))));return Kt(a,u,$H).filter(f=>YE(f)&&IH(n,f)&&GG(f)&&nC(f)&&FH(f))},HH=(e,n,o,r)=>r.collapsed?BO(e,n,o,r):N.none(),VH=(e,n)=>{const o=Js(e);return dc(o,r=>n.isBlock(wn(r))).fold(Ke(o),r=>o.slice(0,r))},GN=(e,n)=>{const o=VH(e,n);return Se(o,ao),o},qN=(e,n,o)=>{const r=gd(o,n);return as(r.reverse(),a=>Or(e,a)).each(ao)},Dp=(e,n)=>Rt(iw(n),o=>!Or(e,o)).length===0,Mp=(e,n,o,r,a)=>{if(Or(r,o))return il(o),Pr(o.dom);Dp(r,a)&&Or(r,n)&&co(a,K.fromTag("br"));const u=xc(o.dom,Ce.before(a.dom));return Se(GN(n,r),f=>{co(a,f)}),qN(r,e,n),u},XE=(e,n)=>e.isInline(wn(n)),JE=(e,n,o,r)=>{if(Or(r,o)){if(Or(r,n)){const f=Td((b=>{const C=(S,O)=>Vr(S).fold(()=>O,R=>XE(r,R)?C(R,O.concat(Za(R))):O);return C(b,[])})(o),(b,C)=>(Vd(b,C),C),Oi());gf(n),Bs(n,f)}return ao(o),Pr(n.dom)}const a=Wc(o.dom);return Se(GN(n,r),u=>{Bs(o,u)}),qN(r,e,n),a},Pp=(e,n)=>{const o=gd(n,e);return N.from(o[o.length-1])},Np=(e,n)=>ia(n,e)?Pp(n,e):N.none(),oC=(e,n)=>{Sm(e,n.dom).bind(o=>N.from(o.getNode())).map(K.fromDom).filter(Gl).each(ao)},sC=(e,n,o,r)=>(oC(!0,n),oC(!1,o),Np(n,o).fold(Be(JE,e,n,o,r),Be(Mp,e,n,o,r))),$O=(e,n,o,r,a)=>n?sC(e,r,o,a):sC(e,o,r,a),rC=(e,n)=>{const o=K.fromDom(e.getBody());return HH(e.schema,o.dom,n,e.selection.getRng()).map(a=>()=>{$O(o,n,a.from.block,a.to.block,e.schema).each(u=>{e.selection.setRng(u.toRange())})})},FO=(e,n,o)=>{const r=n.getRng();return Kt(mp(e,K.fromDom(r.startContainer)),mp(e,K.fromDom(r.endContainer)),(a,u)=>Sn(a,u)?N.none():N.some(()=>{r.deleteContents(),$O(e,!0,a,u,o).each(f=>{n.setRng(f.toRange())})})).getOr(N.none())},IO=(e,n)=>{const o=K.fromDom(n),r=Be(Sn,e);return To(o,Sh,r).isSome()},KN=(e,n)=>IO(e,n.startContainer)||IO(e,n.endContainer),v0=(e,n)=>{const o=xc(e.dom,Ce.fromRangeStart(n)).isNone(),r=Mr(e.dom,Ce.fromRangeEnd(n)).isNone();return!KN(e,n)&&o&&r},YN=e=>N.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),XN=e=>{const n=K.fromDom(e.getBody()),o=e.selection.getRng();return v0(n,o)?YN(e):FO(n,e.selection,e.schema)},QE=(e,n)=>e.selection.isCollapsed()?N.none():XN(e),xl=(e,n,o,r,a)=>N.from(n._selectionOverrides.showCaret(e,o,r,a)),JN=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},y0=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?N.none():N.some(JN(n)),QN=(e,n,o)=>{const r=My(1,e.getBody(),n),a=Ce.fromRangeStart(r),u=a.getNode();if(Cm(u))return xl(1,e,u,!a.isAtEnd(),!1);const f=a.getNode(!0);if(Cm(f))return xl(1,e,f,!1,!1);const b=pl(e.dom.getRoot(),a.getNode());return Cm(b)?xl(1,e,b,!1,o):N.none()},eT=(e,n,o)=>n.collapsed?QN(e,n,o).getOr(n):n,Wm=e=>dg(e)||r0(e),kg=e=>mg(e)||u2(e),El=(e,n)=>{Ne(n)&&n.data.length===0&&e.remove(n)},eB=(e,n,o,r,a,u)=>{xl(r,e,u.getNode(!a),a,!0).each(f=>{if(n.collapsed){const b=n.cloneRange();a?b.setEnd(f.startContainer,f.startOffset):b.setStart(f.endContainer,f.endOffset),b.deleteContents()}else n.deleteContents();e.selection.setRng(f)}),El(e.dom,o)},zH=(e,n)=>{const o=e.selection.getRng();if(!Ne(o.commonAncestorContainer))return N.none();const r=n?rr.Forwards:rr.Backwards,a=hr(e.getBody()),u=Be(Py,n?a.next:a.prev),f=n?Wm:kg,b=wm(r,e.getBody(),o),C=u(b),S=C&&Ni(n,C);if(!S||!jh(b,S))return N.none();if(f(S))return N.some(()=>eB(e,o,b.getNode(),r,n,S));const O=u(S);return O&&f(O)&&jh(S,O)?N.some(()=>eB(e,o,b.getNode(),r,n,O)):N.none()},LO=(e,n)=>zH(e,n),HO=(e,n)=>{const o=e.getBody();return n?Pr(o).filter(dg):Wc(o).filter(mg)},VO=e=>{const n=e.selection.getRng();return!n.collapsed&&(HO(e,!0).exists(o=>o.isEqual(Ce.fromRangeStart(n)))||HO(e,!1).exists(o=>o.isEqual(Ce.fromRangeEnd(n))))},UH=e=>Oe(e)&&(Sh(K.fromDom(e))||am(K.fromDom(e))),ni=ha.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),WH=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return tt(o)&&o.getAttribute("data-mce-caret")===r},ZH=(e,n,o,r,a)=>{const u=f=>a.isInline(f.nodeName.toLowerCase())&&!Ai(o,r,e);return Eb(!n,o).fold(()=>Eb(n,r).fold(De,u),u)},tB=(e,n,o,r,a)=>{const u=a.getNode(!o);return mp(K.fromDom(n),K.fromDom(r.getNode())).map(f=>Or(e,f)?ni.remove(f.dom):ni.moveToElement(u)).orThunk(()=>N.some(ni.moveToElement(u)))},nB=(e,n,o,r)=>Uc(n,e,o).bind(a=>UH(a.getNode())||ZH(e,n,o,a,r)?N.none():n&&Dn(a.getNode())||!n&&Dn(a.getNode(!0))?tB(r,e,n,o,a):n&&mg(o)||!n&&dg(o)?N.some(ni.moveToPosition(a)):N.none()),jH=(e,n)=>An(n)?N.none():e&&Dn(n.nextSibling)?N.some(ni.moveToElement(n.nextSibling)):!e&&Dn(n.previousSibling)?N.some(ni.moveToElement(n.previousSibling)):N.none(),zO=(e,n,o)=>o.fold(r=>N.some(ni.remove(r)),r=>N.some(ni.moveToElement(r)),r=>Ai(n,r,e)?N.none():N.some(ni.moveToPosition(r))),UO=(e,n,o,r)=>WH(n,o)?jH(n,o.getNode(!n)).orThunk(()=>nB(e,n,o,r)):nB(e,n,o,r).bind(a=>zO(e,o,a)),oB=(e,n,o,r)=>{const a=My(n?1:-1,e,o),u=Ce.fromRangeStart(a),f=K.fromDom(e);return!n&&mg(u)?N.some(ni.remove(u.getNode(!0))):n&&dg(u)?N.some(ni.remove(u.getNode())):!n&&dg(u)&&Lx(f,u,r)?Bt(f,u,r).map(b=>ni.remove(b.getNode())):n&&mg(u)&&K4(f,u,r)?T8(f,u,r).map(b=>ni.remove(b.getNode())):UO(e,n,u,r)},GH=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),up(e,n,K.fromDom(o)),!0),qH=(e,n)=>o=>{const r=n?Ce.before(o):Ce.after(o);return e.selection.setRng(r.toRange()),!0},sB=e=>n=>(e.selection.setRng(n.toRange()),!0),WO=(e,n)=>N.from(pl(e.getBody(),n)),ZO=(e,n)=>{const o=e.selection.getNode();return WO(e,o).filter(Dn).fold(()=>oB(e.getBody(),n,e.selection.getRng(),e.schema).map(r=>()=>r.fold(GH(e,n),qH(e,n),sB(e))),()=>N.some(Ot))},rB=e=>{Se(zr(e,".mce-offscreen-selection"),ao)},cB=(e,n)=>{const o=e.selection.getNode();return Dn(o)&&!_1(o)?WO(e,o.parentNode).filter(Dn).fold(()=>N.some(()=>{rB(K.fromDom(e.getBody())),up(e,n,K.fromDom(e.selection.getNode())),fg(e)}),()=>N.some(Ot)):VO(e)?N.some(()=>{Ja(e,e.selection.getRng(),K.fromDom(e.getBody()))}):N.none()},tT=e=>{const n=e.dom,o=e.selection,r=pl(e.getBody(),o.getNode());if(Te(r)&&n.isBlock(r)&&n.isEmpty(r)){const a=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(a),o.setRng(Ce.before(a).toRange())}return!0},jO=(e,n)=>e.selection.isCollapsed()?ZO(e,n):cB(e,n),aB=e=>e.hasOwnProperty("text"),lu=e=>e.hasOwnProperty("marker"),Ii=(e,n)=>{const o=(u,f)=>{if(Ne(u))return{text:u,offset:f};{const b=n(),C=u.childNodes;return f<C.length?(u.insertBefore(b,C[f]),{marker:b,before:!0}):(u.appendChild(b),{marker:b,before:!1})}},r=o(e.endContainer,e.endOffset);return{start:o(e.startContainer,e.startOffset),end:r}},cC=e=>{var n,o;const{start:r,end:a}=e,u=new window.Range;return aB(r)?u.setStart(r.text,r.offset):lu(r)&&(r.before?u.setStartBefore(r.marker):u.setStartAfter(r.marker),(n=r.marker.parentNode)===null||n===void 0||n.removeChild(r.marker)),aB(a)?u.setEnd(a.text,a.offset):lu(a)&&(a.before?u.setEndBefore(a.marker):u.setEndAfter(a.marker),(o=a.marker.parentNode)===null||o===void 0||o.removeChild(a.marker)),u},nT=(e,n)=>{var o;const r=e.dom,a=r.getParent(e.selection.getStart(),r.isBlock),u=r.getParent(e.selection.getEnd(),r.isBlock),f=e.getBody();if(((o=a==null?void 0:a.nodeName)===null||o===void 0?void 0:o.toLowerCase())==="div"&&a&&u&&a===f.firstChild&&u===f.lastChild&&!r.isEmpty(f)){const C=a.cloneNode(!1),S=()=>{if(n?a5(e):hd(e),f.firstChild!==a){const O=Ii(e.selection.getRng(),()=>document.createElement("span"));Array.from(f.childNodes).forEach(R=>C.appendChild(R)),f.appendChild(C),e.selection.setRng(cC(O))}};return N.some(S)}return N.none()},oT=(e,n)=>{const o=Ce.fromRangeStart(e.selection.getRng());return Uc(n,e.getBody(),o).filter(r=>n?xt(r):HM(r)).bind(r=>Dy(n?0:-1,r)).map(r=>()=>e.selection.select(r))},sT=(e,n)=>e.selection.isCollapsed()?oT(e,n):N.none(),Bp=Ne,GO=e=>Bp(e)&&e.data[0]===ks,qO=e=>Bp(e)&&e.data[e.data.length-1]===ks,KO=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(ks)},iB=e=>{var n;if(Bp(e.previousSibling))return qO(e.previousSibling)||e.previousSibling.appendData(ks),e.previousSibling;if(Bp(e))return GO(e)||e.insertData(0,ks),e;{const o=KO(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},rT=e=>{var n,o;if(Bp(e.nextSibling))return GO(e.nextSibling)||e.nextSibling.insertData(0,ks),e.nextSibling;if(Bp(e))return qO(e)||e.appendData(ks),e;{const r=KO(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},C0=(e,n)=>e?iB(n):rT(n),KH=Be(C0,!0),YH=Be(C0,!1),lB=(e,n)=>Ne(e.container())?C0(n,e.container()):C0(n,e.getNode()),uB=(e,n)=>{const o=n.get();return o&&e.container()===o&&ja(o)},cT=(e,n)=>n.fold(o=>{ym(e.get());const r=KH(o);return e.set(r),N.some(Ce(r,r.length-1))},o=>Pr(o).map(r=>{if(uB(r,e)){const a=e.get();return Ce(a,1)}else{ym(e.get());const a=lB(r,!0);return e.set(a),Ce(a,1)}}),o=>Wc(o).map(r=>{if(uB(r,e)){const a=e.get();return Ce(a,a.length-1)}else{ym(e.get());const a=lB(r,!1);return e.set(a),Ce(a,a.length-1)}}),o=>{ym(e.get());const r=YH(o);return e.set(r),N.some(Ce(r,1))}),dB=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return N.none()},Oc=ha.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),aT=(e,n)=>{const o=Sc(n,e);return o||e},XH=(e,n,o)=>{const r=s5(o),a=aT(n,r.container());return Im(e,a,r).fold(()=>Mr(a,r).bind(Be(Im,e,a)).map(u=>Oc.before(u)),N.none)},JH=(e,n)=>xm(e,n)===null,mB=(e,n,o)=>Im(e,n,o).filter(Be(JH,n)),QH=(e,n,o)=>{const r=r5(o);return mB(e,n,r).bind(a=>xc(a,r).isNone()?N.some(Oc.start(a)):N.none())},eV=(e,n,o)=>{const r=s5(o);return mB(e,n,r).bind(a=>Mr(a,r).isNone()?N.some(Oc.end(a)):N.none())},tV=(e,n,o)=>{const r=r5(o),a=aT(n,r.container());return Im(e,a,r).fold(()=>xc(a,r).bind(Be(Im,e,a)).map(u=>Oc.after(u)),N.none)},fB=e=>!o3(aC(e)),Li=(e,n,o)=>dB([XH,QH,eV,tV],[e,n,o]).filter(fB),aC=e=>e.fold(Wo,Wo,Wo,Wo),gB=e=>e.fold(Ke("before"),Ke("start"),Ke("end"),Ke("after")),iT=e=>e.fold(Oc.before,Oc.before,Oc.after,Oc.after),YO=e=>e.fold(Oc.start,Oc.start,Oc.end,Oc.end),nV=(e,n)=>gB(e)===gB(n)&&aC(e)===aC(n),hB=(e,n,o,r,a,u)=>Kt(Im(n,o,r),Im(n,o,a),(f,b)=>f!==b&&o5(o,f,b)?Oc.after(e?f:b):u).getOr(u),oV=(e,n)=>e.fold(it,o=>!nV(o,n)),sV=(e,n,o,r,a)=>{const u=Ni(e,a);return Uc(e,o,u).map(Be(Ni,e)).fold(()=>r.map(iT),C=>Li(n,o,C).map(Be(hB,e,n,o,u,C)).filter(Be(oV,r))).filter(fB)},XO=(e,n)=>e?n.fold(k(N.some,Oc.start),N.none,k(N.some,Oc.after),N.none):n.fold(N.none,k(N.some,Oc.before),N.none,k(N.some,Oc.end)),rV=(e,n,o,r)=>{const a=Ni(e,r),u=Li(n,o,a);return Li(n,o,a).bind(Be(XO,e)).orThunk(()=>sV(e,n,o,u,r))},cV=e=>Q(e.selection.getSel().modify),pB=(e,n,o)=>{const r=e?1:-1;return n.setRng(Ce(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},aV=(e,n)=>{const o=n.selection.getRng(),r=e?Ce.fromRangeEnd(o):Ce.fromRangeStart(o);return cV(n)?e&&ll(r)?pB(!0,n.selection,r):!e&&ql(r)?pB(!1,n.selection,r):!1:!1};var Sd;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Sd||(Sd={}));const lT=(e,n)=>e===rr.Backwards?Fo(n):n,iV=(e,n,o)=>e===rr.Forwards?n.next(o):n.prev(o),uT=(e,n,o,r)=>Rn(r.getNode(n===rr.Forwards))?Sd.Br:Ai(o,r)===!1?Sd.Block:Sd.Wrap,iC=(e,n,o,r)=>{const a=hr(o);let u=r;const f=[];for(;u;){const b=iV(n,a,u);if(!b)break;if(Rn(b.getNode(!1)))return n===rr.Forwards?{positions:lT(n,f).concat([b]),breakType:Sd.Br,breakAt:N.some(b)}:{positions:lT(n,f),breakType:Sd.Br,breakAt:N.some(b)};if(!b.isVisible()){u=b;continue}if(e(u,b)){const C=uT(o,n,u,b);return{positions:lT(n,f),breakType:C,breakAt:N.some(b)}}f.push(b),u=b}return{positions:lT(n,f),breakType:Sd.Eol,breakAt:N.none()}},bB=(e,n,o,r)=>n(o,r).breakAt.map(a=>{const u=n(o,a).positions;return e===rr.Backwards?u.concat(a):[a].concat(u)}).getOr([]),JO=(e,n)=>Zo(e,(o,r)=>o.fold(()=>N.some(r),a=>Kt(Tr(a.getClientRects()),Tr(r.getClientRects()),(u,f)=>{const b=Math.abs(n-u.left);return Math.abs(n-f.left)<=b?r:a}).or(o)),N.none()),$p=(e,n)=>Tr(n.getClientRects()).bind(o=>JO(e,o.left)),lC=Be(iC,Ce.isAbove,-1),uC=Be(iC,Ce.isBelow,1),vB=Be(bB,-1,lC),yB=Be(bB,1,uC),CB=(e,n)=>lC(e,n).breakAt.isNone(),wB=(e,n)=>uC(e,n).breakAt.isNone(),lV=e=>Pr(e).map(n=>[n].concat(uC(e,n).positions)).getOr([]),uV=e=>Wc(e).map(n=>lC(e,n).positions.concat(n)).getOr([]),dV=(e,n)=>$p(vB(e,n),n),mV=(e,n)=>$p(yB(e,n),n),fV=Dn,gV=(e,n)=>Math.abs(e.left-n),Hi=(e,n)=>Math.abs(e.right-n),QO=e=>fc(e,"node"),eA=(e,n)=>Rc(e,(o,r)=>{const a=Math.min(gV(o,n),Hi(o,n)),u=Math.min(gV(r,n),Hi(r,n));return u===a&&QO(r)&&fV(r.node)||u<a?r:o}),SB=e=>{const n=o=>Gt(o,r=>{const a=Kl(r);return a.node=e,a});if(tt(e))return n(e.getClientRects());if(Ne(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},xB=e=>oa(e,SB);var w0;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(w0||(w0={}));const hV=(e,n,o,r)=>{let a=r;for(;a=Wh(a,e,Kw,n);)if(o(a))return},tA=(e,n,o,r,a,u)=>{let f=0;const b=[],C=R=>{let D=xB([R]);e===-1&&(D=D.reverse());for(let I=0;I<D.length;I++){const z=D[I];if(!o(z,S)){if(b.length>0&&n(z,Ra(b))&&f++,z.line=f,a(z))return!0;b.push(z)}}return!1},S=Ra(u.getClientRects());if(!S)return b;const O=u.getNode();return O&&(C(O),hV(e,r,C,O)),b},pV=(e,n)=>n.line>e,bV=(e,n)=>n.line===e,vV=Be(tA,w0.Up,eo,Eh),S0=Be(tA,w0.Down,Eh,eo),nA=e=>Ra(e.getClientRects()),EB=(e,n,o,r)=>{const a=hr(n);let u,f,b,C;const S=[];let O=0;e===1?(u=a.next,f=Eh,b=eo,C=Ce.after(r)):(u=a.prev,f=eo,b=Eh,C=Ce.before(r));const R=nA(C);do{if(!C.isVisible())continue;const D=nA(C);if(b(D,R))continue;S.length>0&&f(D,Ra(S))&&O++;const I=Kl(D);if(I.position=C,I.line=O,o(I))return S;S.push(I)}while(C=u(C));return S},oA=e=>n=>pV(e,n),dC=e=>n=>bV(e,n),Zm=(e,n)=>{e.selection.setRng(n),Fm(e,e.selection.getRng())},sA=(e,n,o)=>N.some(eT(e,n,o)),TB=(e,n,o,r,a,u)=>{const f=n===rr.Forwards,b=hr(e.getBody()),C=Be(Py,f?b.next:b.prev),S=f?r:a;if(!o.collapsed){const z=Th(o);if(u(z))return xl(n,e,z,n===rr.Backwards,!1);if(VO(e)){const H=o.cloneRange();return H.collapse(n===rr.Backwards),N.from(H)}}const O=wm(n,e.getBody(),o);if(S(O))return y0(e,O.getNode(!f));let R=C(O);const D=Qn(o);if(R)R=Ni(f,R);else return D?N.some(o):N.none();if(S(R))return xl(n,e,R.getNode(!f),f,!1);const I=C(R);return I&&S(I)&&jh(R,I)?xl(n,e,I.getNode(!f),f,!1):D?sA(e,R.toRange(),!1):N.none()},_B=(e,n,o,r,a,u)=>{const f=wm(n,e.getBody(),o),b=Ra(f.getClientRects()),C=n===w0.Down,S=e.getBody();if(!b)return N.none();if(VO(e)){const Z=C?Ce.fromRangeEnd(o):Ce.fromRangeStart(o);return(C?mV:dV)(S,Z).orThunk(()=>N.from(Z)).map(re=>re.toRange())}const R=(C?S0:vV)(S,oA(1),f),D=Rt(R,dC(1)),I=b.left,z=eA(D,I);if(z&&u(z.node)){const Z=Math.abs(I-z.left),Y=Math.abs(I-z.right);return xl(n,e,z.node,Z<Y,!1)}let H;if(r(f)?H=f.getNode():a(f)?H=f.getNode(!0):H=Th(o),H){const Z=EB(n,S,oA(1),H);let Y=eA(Rt(Z,dC(1)),I);if(Y||(Y=Ra(Rt(Z,dC(0))),Y))return sA(e,Y.position.toRange(),!1)}return D.length===0?kB(e,C).filter(C?a:r).map(Z=>eT(e,Z.toRange(),!1)):N.none()},kB=(e,n)=>{const o=e.selection.getRng(),r=n?Ce.fromRangeEnd(o):Ce.fromRangeStart(o),a=Yk(r.container(),e.getBody());if(n){const u=uC(a,r);return Nl(u.positions)}else{const u=lC(a,r);return Tr(u.positions)}},yV=(e,n,o)=>kB(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),rA=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},Vi=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},OB=(e,n,o)=>cT(n,o).map(r=>(rA(e,r),o)),CV=(e,n,o)=>{const r=Ce.fromRangeStart(e);if(e.collapsed)return r;{const a=Ce.fromRangeEnd(e);return o?xc(n,a).getOr(a):Mr(n,r).getOr(r)}},Fp=(e,n,o)=>{const r=e.getBody(),a=CV(e.selection.getRng(),r,o),u=Be(dp,e);return rV(o,u,r,a).bind(b=>OB(e,n,b))},AB=(e,n,o)=>{const r=Gt(zr(K.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),f=>f.dom),a=Rt(r,e),u=Rt(o,e);Se(e1(a,u),Be(Vi,!1)),Se(e1(u,a),Be(Vi,!0))},wV=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=Ce.fromRangeStart(e.selection.getRng());Ce.isTextPosition(r)&&!kc(r)&&(rA(e,jk(o,r)),n.set(null))}},dT=(e,n,o,r)=>{if(n.selection.isCollapsed()){const a=Rt(r,e);Se(a,u=>{const f=Ce.fromRangeStart(n.selection.getRng());Li(e,n.getBody(),f).bind(b=>OB(n,o,b))})}},RB=(e,n,o)=>Bh(e)?Fp(e,n,o).isSome():!1,DB=(e,n,o)=>Bh(n)?aV(e,n):!1,SV=e=>{const n=io(null),o=Be(dp,e);return e.on("NodeChange",r=>{Bh(e)&&(AB(o,e.dom,r.parents),wV(e,n),dT(o,e,n,r.parents))}),n},xV=Be(DB,!0),MB=Be(DB,!1),mT=(e,n,o)=>{if(Bh(e)){const r=kB(e,n).getOrThunk(()=>{const a=e.selection.getRng();return n?Ce.fromRangeEnd(a):Ce.fromRangeStart(a)});return Li(Be(dp,e),e.getBody(),r).exists(a=>{const u=iT(a);return cT(o,u).exists(f=>(rA(e,f),!0))})}else return!1},jm=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},cA=e=>Kt(Pr(e),Wc(e),(n,o)=>{const r=Ni(!0,n),a=Ni(!1,o);return Mr(e,r).forall(u=>u.isEqual(a))}).getOr(!0),PB=(e,n)=>o=>cT(n,o).map(r=>()=>rA(e,r)),NB=(e,n,o,r)=>{const a=e.getBody(),u=Be(dp,e);e.undoManager.ignore(()=>{e.selection.setRng(jm(o,r)),hd(e),Li(u,a,Ce.fromRangeStart(e.selection.getRng())).map(YO).bind(PB(e,n)).each(Jr)}),e.nodeChanged()},EV=(e,n)=>{const o=Sc(n,e);return o||e},TV=(e,n,o,r)=>{const a=EV(e.getBody(),r.container()),u=Be(dp,e),f=Li(u,a,r);return f.bind(C=>o?C.fold(Ke(N.some(YO(C))),N.none,Ke(N.some(iT(C))),N.none):C.fold(N.none,Ke(N.some(iT(C))),N.none,Ke(N.some(YO(C))))).map(PB(e,n)).getOrThunk(()=>{const C=cd(o,a,r),S=C.bind(O=>Li(u,a,O));return Kt(f,S,()=>Im(u,a,r).bind(O=>cA(O)?N.some(()=>{up(e,o,K.fromDom(O))}):N.none())).getOrThunk(()=>S.bind(()=>C.map(O=>()=>{o?NB(e,n,r,O):NB(e,n,O,r)})))})},aA=(e,n,o)=>{if(e.selection.isCollapsed()&&Bh(e)){const r=Ce.fromRangeStart(e.selection.getRng());return TV(e,n,o,r)}return N.none()},iA=e=>b1(e)>1,fT=(e,n)=>{const o=K.fromDom(e.getBody()),r=K.fromDom(e.selection.getStart()),a=gd(r,o);return dc(a,n).fold(Ke(a),u=>a.slice(0,u))},lA=e=>b1(e)===1,BB=e=>fT(e,n=>e.schema.isBlock(wn(n))||iA(n)),$B=e=>fT(e,n=>e.schema.isBlock(wn(n))),uA=(e,n)=>{const o=Be(P3,e);return oa(n,r=>o(r)?[r.dom]:[])},FB=e=>{const n=$B(e);return uA(e,n)},mC=(e,n,o,r)=>{const a=uA(n,r);if(a.length===0)up(n,e,o);else{const u=lE(o.dom,a);n.selection.setRng(u.toRange())}},gT=(e,n)=>{const o=Rt(BB(e),lA);return Nl(o).bind(r=>{const a=Ce.fromRangeStart(e.selection.getRng());return i5(n,a,r.dom)&&!ep(r)?N.some(()=>mC(n,e,r,o)):N.none()})},IB=(e,n)=>{const o=n.parentElement;return Rn(n)&&!te(o)&&e.dom.isEmpty(o)},LB=e=>ep(K.fromDom(e)),dA=(e,n)=>{const o=e.selection.getStart(),r=IB(e,o)||LB(o)?lE(o,n):V5(e.selection.getRng(),n);e.selection.setRng(r.toRange())},HB=(e,n)=>{const o=e1(n,FB(e));o.length>0&&dA(e,o)},fC=e=>Ne(e.startContainer),mA=e=>e.startOffset===0&&fC(e),gC=(e,n)=>{const o=n.startContainer.parentElement;return!te(o)&&P3(e,K.fromDom(o))},_V=e=>{const n=e.startContainer.parentNode,o=e.endContainer.parentNode;return!te(n)&&!te(o)&&n.isEqualNode(o)},VB=e=>{const n=e.endContainer;return e.endOffset===(Ne(n)?n.length:n.childNodes.length)},kV=e=>_V(e)&&VB(e),OV=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),zB=e=>kV(e)||OV(e),AV=e=>{const n=e.selection.getRng();return mA(n)&&gC(e,n)&&zB(n)},UB=e=>{if(AV(e)){const n=FB(e);return N.some(()=>{hd(e),HB(e,n)})}else return N.none()},WB=(e,n)=>e.selection.isCollapsed()?gT(e,n):UB(e),RV=(e,n)=>T1(e,o=>Zc(o.dom),o=>n.isBlock(wn(o))),DV=e=>RV(K.fromDom(e.selection.getStart()),e.schema),MV=e=>{const n=e.selection.getRng();return n.collapsed&&(fC(n)||e.dom.isEmpty(n.startContainer))&&!DV(e)},hC=e=>(MV(e)&&dA(e,[]),!0),fA=(e,n,o)=>Oe(o)?N.some(()=>{e._selectionOverrides.hideFakeCaret(),up(e,n,K.fromDom(o))}):N.none(),PV=(e,n)=>{const o=n?r0:u2,r=n?rr.Forwards:rr.Backwards,a=wm(r,e.getBody(),e.selection.getRng());return o(a)?fA(e,n,a.getNode(!n)):N.from(Ni(n,a)).filter(u=>o(u)&&jh(a,u)).bind(u=>fA(e,n,u.getNode(!n)))},NV=(e,n)=>{const o=e.selection.getNode();return yr(o)?fA(e,n,o):N.none()},gA=(e,n)=>e.selection.isCollapsed()?PV(e,n):NV(e,n),ZB=e=>Vo(e,n=>Te(n.dom)||Dn(n.dom)).exists(n=>Te(n.dom)),hA=e=>Rd(e??"").getOr(0),Og=(e,n)=>{const o=e||lk(n)?"margin":"padding",r=es(n,"direction")==="rtl"?"-right":"-left";return o+r},jB=(e,n,o,r,a,u)=>{const f=Og(o,K.fromDom(u)),b=hA(e.getStyle(u,f));if(n==="outdent"){const C=Math.max(0,b-r);e.setStyle(u,f,C?C+a:"")}else{const C=b+r+a;e.setStyle(u,f,C)}},pA=(e,n)=>ir(n,o=>{const r=Og(yS(e),o),a=v1(o,r).map(hA).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&a>0}),bA=e=>{const n=vA(e);return!e.mode.isReadOnly()&&(n.length>1||pA(e,n))},hT=e=>ki(e)||am(e),Ag=e=>Ba(e).exists(hT),vA=e=>Rt(hv(e.selection.getSelectedBlocks()),n=>!hT(n)&&!Ag(n)&&ZB(n)),oi=(e,n)=>{var o,r;if(e.mode.isReadOnly())return;const{dom:a}=e,u=GD(e),f=(r=(o=/[a-z%]+$/i.exec(u))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",b=hA(u),C=yS(e);Se(vA(e),S=>{jB(a,n,C,b,f,S.dom)})},Ip=e=>oi(e,"indent"),pT=e=>oi(e,"outdent"),GB=e=>{if(e.selection.isCollapsed()&&bA(e)){const n=e.dom,o=e.selection.getRng(),r=Ce.fromRangeStart(o),a=n.getParent(o.startContainer,n.isBlock);if(a!==null&&Ix(K.fromDom(a),r,e.schema))return N.some(()=>pT(e))}return N.none()},yA=(e,n,o)=>_d([GB,jO,LO,(r,a)=>aA(r,n,a),rC,Qx,sT,gA,QE,WB,nT],r=>r(e,o)).filter(r=>e.selection.isEditable()),BV=(e,n)=>{yA(e,n,!1).fold(()=>{e.selection.isEditable()&&(hd(e),fg(e))},Jr)},$V=(e,n)=>{yA(e,n,!0).fold(()=>{e.selection.isEditable()&&a5(e)},Jr)},FV=(e,n)=>{e.addCommand("delete",()=>{BV(e,n)}),e.addCommand("forwardDelete",()=>{$V(e,n)})},qB=5,IV=400,CA=e=>e.touches===void 0||e.touches.length!==1?N.none():N.some(e.touches[0]),LV=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>qB||r>qB},HV=e=>{const n=Qs(),o=io(!1),r=j1(a=>{e.dispatch("longpress",{...a,type:"longpress"}),o.set(!0)},IV);e.on("touchstart",a=>{CA(a).each(u=>{r.cancel();const f={x:u.clientX,y:u.clientY,target:a.target};r.throttle(a),o.set(!1),n.set(f)})},!0),e.on("touchmove",a=>{r.cancel(),CA(a).each(u=>{n.on(f=>{LV(u,f)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",a=>{r.cancel(),a.type!=="touchcancel"&&n.get().filter(u=>u.target.isEqualNode(a.target)).each(()=>{o.get()?a.preventDefault():e.dispatch("tap",{...a,type:"tap"})})},!0)},Rg=(e,n)=>$t(e,n.nodeName),bT=(e,n)=>Ne(n)?!0:tt(n)?!Rg(e.getBlockElements(),n)&&!Ec(n)&&!Gd(e,n)&&!O1(n):!1,KB=(e,n,o)=>mo(d2(K.fromDom(o),K.fromDom(n)),r=>Rg(e,r.dom)),YB=(e,n)=>{if(Ne(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data))return!n.nextSibling||Rg(e,n.nextSibling)||O1(n.nextSibling)}return!1},pC=e=>e.dom.create(gr(e),Qu(e)),VV=e=>{const n=e.dom,o=e.selection,r=e.schema,a=r.getBlockElements(),u=o.getStart(),f=e.getBody();let b,C,S=null;const O=gr(e);if(!u||!tt(u))return;const R=f.nodeName.toLowerCase();if(!r.isValidChild(R,O.toLowerCase())||KB(a,f,u))return;if(f.firstChild===f.lastChild&&Rn(f.firstChild)){b=pC(e),b.appendChild(Oi().dom),f.replaceChild(b,f.firstChild),e.selection.setCursorLocation(b,0),e.nodeChanged();return}let D=f.firstChild;for(;D;)if(tt(D)&&_v(r,D),bT(r,D)){if(YB(a,D)){C=D,D=D.nextSibling,n.remove(C);continue}if(!b){if(!S&&e.hasFocus()&&(S=Ii(e.selection.getRng(),()=>document.createElement("span"))),!D.parentNode){D=null;break}b=pC(e),f.insertBefore(b,D)}C=D,D=D.nextSibling,b.appendChild(C)}else b=null,D=D.nextSibling;S&&(e.selection.setRng(cC(S)),e.nodeChanged())},XB=(e,n,o)=>{const r=K.fromDom(pC(e)),a=Oi();Bs(r,a),o(n,r);const u=document.createRange();return u.setStartBefore(a.dom),u.setEndBefore(a.dom),u},zV=e=>{e.on("NodeChange",()=>VV(e))},JB=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,UV=(e,n,o)=>function(r){const a=arguments,u=a[a.length-2],f=u>0?n.charAt(u-1):"";if(f==='"')return r;if(f===">"){const b=n.lastIndexOf("<",u);if(b!==-1&&n.substring(b,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(a[0])+'">'+e.dom.encode(typeof a[1]=="string"?a[1]:a[0])+"</span>"},WV=(e,n,o)=>{let r=n.length,a=o.content;if(o.format!=="raw"){for(;r--;)a=a.replace(n[r],UV(e,a,pb(e)));o.content=a}},ZV=(e,n)=>ir(e,o=>{const r=n.match(o);return r!==null&&r[0].length===n.length}),QB=e=>{const n="contenteditable",o=" "+Ve.trim(Ya(e))+" ",r=" "+Ve.trim(pb(e))+" ",a=JB(o),u=JB(r),f=bb(e);f.length>0&&e.on("BeforeSetContent",b=>{WV(e,f,b)}),e.parser.addAttributeFilter("class",b=>{let C=b.length;for(;C--;){const S=b[C];a(S)?S.attr(n,"true"):u(S)&&S.attr(n,"false")}}),e.serializer.addAttributeFilter(n,b=>{let C=b.length;for(;C--;){const S=b[C];if(!a(S)&&!u(S))continue;const O=S.attr("data-mce-content");f.length>0&&O?ZV(f,O)?(S.name="#text",S.type=3,S.raw=!0,S.value=O):S.remove():S.attr(n,null)}})},jV=e=>St(K.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),e$=(e,n)=>{n.hasAttribute("data-mce-caret")&&(Bf(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},si=(e,n)=>{const o=jV(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),e$(e,o);return}zw(o)&&(e$(e,o),e.undoManager.add())}},GV=e=>{e.on("keyup compositionstart",Be(si,e))},vT=Dn,t$=(e,n,o)=>TB(n,e,o,dg,mg,vT),wA=(e,n,o)=>_B(n,e,o,u=>dg(u)||Fx(u),u=>mg(u)||G4(u),vT),qV=e=>{const n=e.dom.create(gr(e));return n.innerHTML='<br data-mce-bogus="1">',n},n$=(e,n,o)=>{const r=hr(e.getBody()),a=Be(Py,n===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!a(Ce.fromRangeStart(o))){const b=K.fromDom(qV(e));n===1?vi(K.fromDom(u),b):co(K.fromDom(u),b),e.selection.select(b.dom,!0),e.selection.collapse()}}},KV=(e,n)=>{const o=n?rr.Forwards:rr.Backwards,r=e.selection.getRng();return t$(o,e,r).orThunk(()=>(n$(e,o,r),N.none()))},YV=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return wA(o,e,r).orThunk(()=>(n$(e,o,r),N.none()))},XV=(e,n)=>{const o=n?e.getEnd(!0):e.getStart(!0);return o3(o)?!n:n},SA=(e,n)=>KV(e,XV(e.selection,n)).exists(o=>(Zm(e,o),!0)),o$=(e,n)=>YV(e,n).exists(o=>(Zm(e,o),!0)),s$=(e,n)=>yV(e,n,n?mg:dg),Dg=(e,n)=>HO(e,!n).map(o=>{const r=o.toRange(),a=e.selection.getRng();return n?r.setStart(a.startContainer,a.startOffset):r.setEnd(a.endContainer,a.endOffset),r}).exists(o=>(Zm(e,o),!0)),Gm=e=>zt(["figcaption"],wn(e)),Lp=(e,n,o)=>{const r=Be(Sn,n);return Vo(K.fromDom(e.container()),a=>o.isBlock(wn(a)),r).filter(Gm)},yT=(e,n,o)=>n?wB(e.dom,o):CB(e.dom,o),xA=(e,n)=>{const o=K.fromDom(e.getBody()),r=Ce.fromRangeStart(e.selection.getRng());return Lp(r,o,e.schema).exists(()=>{if(yT(o,n,r)){const u=XB(e,o,n?Bs:Hd);return e.selection.setRng(u),!0}else return!1})},CT=(e,n)=>e.selection.isCollapsed()?xA(e,n):!1,r$=(e,n,o)=>{const r=e.selection.getRng(),a=Ce.fromRangeStart(r);return e.getBody().firstChild===n&&CB(o,a)?(e.execCommand("InsertNewBlockBefore"),!0):!1},JV=(e,n)=>{const o=e.selection.getRng(),r=Ce.fromRangeStart(o);return e.getBody().lastChild===n&&wB(n,r)?(e.execCommand("InsertNewBlockAfter"),!0):!1},c$=(e,n)=>n?N.from(e.dom.getParent(e.selection.getNode(),"details")).map(o=>JV(e,o)).getOr(!1):N.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(o=>N.from(e.dom.getParent(o,"details")).map(r=>r$(e,r,o))).getOr(!1),EA=(e,n)=>c$(e,n),a$={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},QV=e=>Gt(e,n=>({...a$,...n})),e9=e=>Gt(e,n=>({...a$,...n})),i$=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,t9=(e,n)=>oa(QV(e),o=>i$(o,n)?[o]:[]),n9=(e,n)=>oa(e9(e),o=>i$(o,n)?[o]:[]),Lt=(e,...n)=>()=>e.apply(null,n),x0=(e,n)=>as(t9(e,n),o=>o.action()),o9=(e,n)=>_d(n9(e,n),o=>o.action()),s9=(e,n)=>{const o=n?rr.Forwards:rr.Backwards,r=e.selection.getRng();return TB(e,o,r,r0,u2,yr).exists(a=>(Zm(e,a),!0))},r9=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return _B(e,o,r,r0,u2,yr).exists(a=>(Zm(e,a),!0))},l$=(e,n)=>yV(e,n,n?u2:r0),c9=ha.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),bC={...c9,none:e=>c9.none(e)},a9=(e,n)=>i9(e,n,it),i9=(e,n,o)=>oa(Js(e),r=>Bc(r,n)?o(r)?[r]:[]:i9(r,n,o)),l9=(e,n,o=De)=>{if(o(n))return N.none();if(zt(e,wn(n)))return N.some(n);const r=a=>Bc(a,"table")||o(a);return Ns(n,e.join(","),r)},Yc=(e,n)=>l9(["td","th"],e,n),u$=e=>a9(e,"th,td"),E0=(e,n)=>Ru(e,"table",n),TA=(e,n,o,r,a=it)=>{const u=r===1;if(!u&&o<=0)return bC.first(e[0]);if(u&&o>=e.length-1)return bC.last(e[e.length-1]);{const f=o+r,b=e[f];return a(b)?bC.middle(n,b):TA(e,n,f,r,a)}},_A=(e,n)=>E0(e,n).bind(o=>{const r=u$(o);return dc(r,u=>Sn(e,u)).map(u=>({index:u,all:r}))}),d$=(e,n,o)=>_A(e,o).fold(()=>bC.none(e),a=>TA(a.all,e,a.index,1,n)),m$=(e,n,o)=>_A(e,o).fold(()=>bC.none(),a=>TA(a.all,e,a.index,-1,n)),kA=e=>Iw(e).filter(n=>n.trim().length!==0||n.indexOf(Es)>-1).isSome(),f$=e=>u1(e)&&oc(e,"contenteditable")==="false",u9=["img","br"],g$=e=>kA(e)||zt(u9,wn(e))||f$(e),d9=e=>fv(e,g$),m9=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),f9=(e,n)=>oa(n,o=>{const r=m9(Kl(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),OA=(e,n,o)=>Zo(e,(r,a)=>r.fold(()=>N.some(a),u=>{const f=Math.sqrt(Math.abs(u.x-n)+Math.abs(u.y-o)),b=Math.sqrt(Math.abs(a.x-n)+Math.abs(a.y-o));return N.some(b<f?a:u)}),N.none()),h$=(e,n,o,r,a)=>{const u=zr(K.fromDom(o),"td,th,caption").map(b=>b.dom),f=Rt(f9(e,u),b=>n(b,a));return OA(f,r,a).map(b=>b.cell)},g9=e=>e.bottom,qG=e=>e.top,h9=(e,n)=>e.y<n,p$=(e,n)=>e.y>n,KG=Be(h$,g9,h9),p9=Be(h$,qG,p$),b9=(e,n)=>Tr(n.getClientRects()).bind(o=>KG(e,o.left,o.top)).bind(o=>$p(uV(o),n)),v9=(e,n)=>Nl(n.getClientRects()).bind(o=>p9(e,o.left,o.top)).bind(o=>$p(lV(o),n)),AA=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),wT=e=>e.breakType===Sd.Wrap&&e.positions.length===0,b$=e=>e.breakType===Sd.Br&&e.positions.length===1,RA=(e,n,o)=>{const r=e(n,o);return wT(r)||!Rn(o.getNode())&&b$(r)?!AA(e,n,r):r.breakAt.isNone()},y9=Be(RA,lC),C9=Be(RA,uC),DA=(e,n,o)=>{const r=Ce.fromRangeStart(n);return Sm(!e,o).exists(a=>a.isEqual(r))},w9=(e,n,o,r)=>{const a=e.selection.getRng(),u=n?1:-1;return qk()&&DA(n,a,o)?(xl(u,e,o,!n,!1).each(f=>{Zm(e,f)}),!0):!1},S9=(e,n,o)=>b9(n,o).orThunk(()=>Tr(o.getClientRects()).bind(r=>JO(vB(e,Ce.before(n)),r.left))).getOr(Ce.before(n)),x9=(e,n,o)=>v9(n,o).orThunk(()=>Tr(o.getClientRects()).bind(r=>JO(yB(e,Ce.after(n)),r.left))).getOr(Ce.after(n)),v$=(e,n)=>{const o=n.getNode(e);return yi(o)?N.some(o):N.none()},Tl=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?vi:co,a=XB(n,K.fromDom(o),r);Zm(n,a)})},MA=(e,n,o)=>{const r=v$(!!n,o),a=n===!1;r.fold(()=>Zm(e,o.toRange()),u=>Sm(a,e.getBody()).filter(f=>f.isEqual(o)).fold(()=>Zm(e,o.toRange()),f=>Tl(n,e,u)))},y$=(e,n,o,r)=>{const a=e.selection.getRng(),u=Ce.fromRangeStart(a),f=e.getBody();if(!n&&y9(r,u)){const b=S9(f,o,u);return MA(e,n,b),!0}else if(n&&C9(r,u)){const b=x9(f,o,u);return MA(e,n,b),!0}else return!1},E9=(e,n,o)=>N.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>N.from(e.dom.getParent(r,"table")).map(a=>o(e,n,a,r))).getOr(!1),T9=(e,n)=>E9(e,n,w9),C$=(e,n)=>E9(e,n,y$),YG=e=>{const n=cp.exact(e,0,e,0);return l(n)},w$=(e,n,o)=>o.fold(N.none,N.none,(r,a)=>d9(a).map(u=>YG(u)),r=>e.mode.isReadOnly()?N.none():(e.execCommand("mceTableInsertRowAfter"),vC(e,n,r))),vC=(e,n,o)=>w$(e,n,d$(o,la)),_9=(e,n,o)=>w$(e,n,m$(o,la)),ST=(e,n)=>{const o=["table","li","dl"],r=K.fromDom(e.getBody()),a=b=>{const C=wn(b);return Sn(b,r)||zt(o,C)},u=e.selection.getRng(),f=K.fromDom(n?u.endContainer:u.startContainer);return Yc(f,a).map(b=>(E0(b,a).each(O=>{e.model.table.clearSelectedCells(O.dom)}),e.selection.collapse(!n),(n?vC:_9)(e,a,b).each(O=>{e.selection.setRng(O)}),!0)).getOr(!1)},S$=(e,n,o)=>{const r=qt.os.isMacOS()||qt.os.isiOS();x0([{keyCode:ot.RIGHT,action:Lt(SA,e,!0)},{keyCode:ot.LEFT,action:Lt(SA,e,!1)},{keyCode:ot.UP,action:Lt(o$,e,!1)},{keyCode:ot.DOWN,action:Lt(o$,e,!0)},...r?[{keyCode:ot.UP,action:Lt(Dg,e,!1),metaKey:!0,shiftKey:!0},{keyCode:ot.DOWN,action:Lt(Dg,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:ot.RIGHT,action:Lt(T9,e,!0)},{keyCode:ot.LEFT,action:Lt(T9,e,!1)},{keyCode:ot.UP,action:Lt(C$,e,!1)},{keyCode:ot.DOWN,action:Lt(C$,e,!0)},{keyCode:ot.UP,action:Lt(C$,e,!1)},{keyCode:ot.UP,action:Lt(EA,e,!1)},{keyCode:ot.DOWN,action:Lt(EA,e,!0)},{keyCode:ot.RIGHT,action:Lt(s9,e,!0)},{keyCode:ot.LEFT,action:Lt(s9,e,!1)},{keyCode:ot.UP,action:Lt(r9,e,!1)},{keyCode:ot.DOWN,action:Lt(r9,e,!0)},{keyCode:ot.RIGHT,action:Lt(RB,e,n,!0)},{keyCode:ot.LEFT,action:Lt(RB,e,n,!1)},{keyCode:ot.RIGHT,ctrlKey:!r,altKey:r,action:Lt(xV,e,n)},{keyCode:ot.LEFT,ctrlKey:!r,altKey:r,action:Lt(MB,e,n)},{keyCode:ot.UP,action:Lt(CT,e,!1)},{keyCode:ot.DOWN,action:Lt(CT,e,!0)}],o).each(a=>{o.preventDefault()})},x$=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||S$(e,n,o)})},_l=(e,n)=>({container:e,offset:n}),xT=Yn.DOM,ET=e=>n=>e===n?-1:0,k9=e=>n=>e.isBlock(n)||zt(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",PA=(e,n,o)=>{if(Ne(e)&&n>=0)return N.some(_l(e,n));{const r=rm(xT);return N.from(r.backwards(e,n,ET(e),o)).map(a=>_l(a.container,a.container.data.length))}},TT=(e,n,o)=>{if(Ne(e)&&n>=e.length)return N.some(_l(e,n));{const r=rm(xT);return N.from(r.forwards(e,n,ET(e),o)).map(a=>_l(a.container,0))}},NA=(e,n,o)=>{if(!Ne(e))return N.none();const r=e.data;if(n>=0&&n<=r.length)return N.some(_l(e,n));{const a=rm(xT);return N.from(a.backwards(e,n,ET(e),o)).bind(u=>{const f=u.container.data;return NA(u.container,n+f.length,o)})}},E$=(e,n,o)=>{if(!Ne(e))return N.none();const r=e.data;if(n<=r.length)return N.some(_l(e,n));{const a=rm(xT);return N.from(a.forwards(e,n,ET(e),o)).bind(u=>E$(u.container,n-r.length,o))}},BA=(e,n,o,r,a)=>{const u=rm(e,k9(e));return N.from(u.backwards(n,o,r,a))},$A=e=>e.collapsed&&Ne(e.startContainer),O9=e=>ma(e.toString().replace(/\u00A0/g," ")),T$=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,_$=(e,n)=>e.substring(n.length),A9=(e,n,o,r=!1)=>{let a;const u=o.charAt(0);for(a=n-1;a>=0;a--){const f=e.charAt(a);if(!r&&T$(f))return N.none();if(u===f&&br(e,o,a,n))break}return N.some(a)},FA=(e,n,o,r=!1)=>{if(!$A(n))return N.none();const a={text:"",offset:0},u=(b,C,S)=>(a.text=S+a.text,a.offset+=C,A9(a.text,a.offset,o,r).getOr(C)),f=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return BA(e,n.startContainer,n.startOffset,u,f).bind(b=>{const C=n.cloneRange();if(C.setStart(b.container,b.offset),C.setEnd(n.endContainer,n.endOffset),C.collapsed)return N.none();const S=O9(C);return S.lastIndexOf(o)!==0?N.none():N.some({text:_$(S,o),range:C,trigger:o})})},R9=e=>e.nodeType===tc,D9=e=>e.nodeType===l1,k$=e=>{if(R9(e))return _l(e,e.data.length);{const n=e.childNodes;return n.length>0?k$(n[n.length-1]):_l(e,n.length)}},O$=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?O$(o[n],0):o.length>0&&D9(e)&&o.length===n?k$(o[o.length-1]):_l(e,n)},IA=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return BA(e,n.container,n.offset,(a,u)=>u===0?-1:u,r).filter(a=>{const u=a.container.data.charAt(a.offset-1);return!T$(u)}).isSome()},M9=e=>n=>{const o=O$(n.startContainer,n.startOffset);return!IA(e,o)},A$=(e,n,o)=>_d(o.triggers,r=>FA(e,n,r)),P9=(e,n)=>{const o=n(),r=e.selection.getRng();return A$(e.dom,r,o).bind(a=>R$(e,n,a))},R$=(e,n,o,r={})=>{var a;const u=n(),b=(a=e.selection.getRng().startContainer.nodeValue)!==null&&a!==void 0?a:"",C=Rt(u.lookupByTrigger(o.trigger),O=>o.text.length>=O.minChars&&O.matches.getOrThunk(()=>M9(e.dom))(o.range,b,o.text));if(C.length===0)return N.none();const S=Promise.all(Gt(C,O=>O.fetch(o.text,O.maxResults,r).then(D=>({matchText:o.text,items:D,columns:O.columns,onAction:O.onAction,highlightOn:O.highlightOn}))));return N.some({lookupData:S,context:o})};var uu;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(uu||(uu={}));const LA=(e,n,o)=>e.stype===uu.Error?n(e.serror):o(e.svalue),N9=e=>{const n=[],o=[];return Se(e,r=>{LA(r,a=>o.push(a),a=>n.push(a))}),{values:n,errors:o}},B9=(e,n)=>e.stype===uu.Error?{stype:uu.Error,serror:n(e.serror)}:e,Ws=(e,n)=>e.stype===uu.Value?{stype:uu.Value,svalue:n(e.svalue)}:e,$9=(e,n)=>e.stype===uu.Value?n(e.svalue):e,F9=(e,n)=>e.stype===uu.Error?n(e.serror):e,D$=e=>({stype:uu.Value,svalue:e}),HA=e=>({stype:uu.Error,serror:e}),ds={fromResult:e=>e.fold(HA,D$),toResult:e=>LA(e,hs.error,hs.value),svalue:D$,partition:N9,serror:HA,bind:$9,bindError:F9,map:Ws,mapError:B9,fold:LA},yC=e=>hn(e)&&Ir(e).length>100?" removed due to size":JSON.stringify(e,null,2),P$=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:Ke("... (only showing first ten failures)")}]):e;return Gt(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},T0=(e,n)=>ds.serror([{path:e,getErrorInfo:n}]),VA=(e,n,o)=>T0(e,()=>'Could not find valid *required* value for "'+n+'" in '+yC(o)),zA=(e,n)=>T0(e,()=>'Choice schema did not contain choice key: "'+n+'"'),N$=(e,n,o)=>T0(e,()=>'The chosen schema: "'+o+'" did not exist in branches: '+yC(n)),_T=(e,n)=>T0(e,Ke(n)),kT=(e,n,o,r)=>bo(o,r).fold(()=>N$(e,o,r),u=>u.extract(e.concat(["branch: "+r]),n)),CC=(e,n)=>({extract:(a,u)=>bo(u,e).fold(()=>zA(a,e),b=>kT(a,u,n,b)),toString:()=>"chooseOn("+e+"). Possible values: "+Ir(n)}),wC=(e,n)=>n,kl=(e,n)=>Ks(e)&&Ks(n)?SC(e,n):n,_0=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const a=n[r];for(const u in a)$t(a,u)&&(o[u]=e(o[u],a[u]))}return o},SC=_0(kl),UA=_0(wC),B$=()=>({tag:"required",process:{}}),$$=e=>({tag:"defaultedThunk",process:e}),F$=e=>$$(Ke(e)),L9=()=>({tag:"option",process:{}}),xC=(e,n)=>e.length>0?ds.svalue(SC(n,UA.apply(void 0,e))):ds.svalue(n),I$=e=>k(ds.serror,Qp)(e),H9={consolidateObj:(e,n)=>{const o=ds.partition(e);return o.errors.length>0?I$(o.errors):xC(o.values,n)},consolidateArr:e=>{const n=ds.partition(e);return n.errors.length>0?I$(n.errors):ds.svalue(n.values)}},V9=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),z9=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),L$=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},WA=e=>{const n=(r,a)=>ds.bindError(e(a),u=>_T(r,u)),o=Ke("val");return{extract:n,toString:o}},U9=WA(ds.svalue),W9=(e,n,o,r)=>bo(n,o).fold(()=>VA(e,o,n),r),H$=(e,n,o,r)=>{const a=bo(e,n).getOrThunk(()=>o(e));return r(a)},Z9=(e,n,o)=>o(bo(e,n)),j9=(e,n,o,r)=>{const a=bo(e,n).map(u=>u===!0?o(e):u);return r(a)},G9=(e,n,o,r,a)=>{const u=b=>a.extract(n.concat([r]),b),f=b=>b.fold(()=>ds.svalue(N.none()),C=>{const S=a.extract(n.concat([r]),C);return ds.map(S,N.some)});switch(e.tag){case"required":return W9(n,o,r,u);case"defaultedThunk":return H$(o,r,e.process,u);case"option":return Z9(o,r,f);case"defaultedOptionThunk":return j9(o,r,e.process,f);case"mergeWithThunk":return H$(o,r,Ke({}),b=>{const C=SC(e.process(o),b);return u(C)})}},V$=(e,n,o)=>{const r={},a=[];for(const u of o)L$(u,(f,b,C,S)=>{const O=G9(C,e,n,f,S);ds.fold(O,R=>{a.push(...R)},R=>{r[b]=R})},(f,b)=>{r[f]=b(n)});return a.length>0?ds.serror(a):ds.svalue(r)},OT=e=>({extract:(r,a)=>V$(r,a,e),toString:()=>`obj{
`+Gt(e,a=>L$(a,(u,f,b,C)=>u+" -> "+C.toString(),(u,f)=>"state("+u+")")).join(`
`)+"}"}),ZA=e=>({extract:(r,a)=>{const u=Gt(a,(f,b)=>e.extract(r.concat(["["+b+"]"]),f));return H9.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),q9=e=>WA(n=>e(n).fold(ds.serror,ds.svalue)),K9=(e,n,o)=>{const r=n.extract([e],o);return ds.mapError(r,a=>({input:o,errors:a}))},Y9=(e,n,o)=>ds.toResult(K9(e,n,o)),X9=e=>`Errors: 
`+P$(e.errors).join(`
`)+`

Input object: `+yC(e.input),jA=(e,n)=>CC(e,$n(n,OT)),J9=Ke(U9),EC=(e,n)=>WA(o=>{const r=typeof o;return e(o)?ds.svalue(o):ds.serror(`Expected type: ${n} but got: ${r}`)}),Q9=EC(lc,"number"),TC=EC(J,"string"),z$=EC(an,"boolean"),GA=EC(Q,"function"),_C=V9,U$=z9,ez=e=>q9(n=>zt(e,n)?hs.value(n):hs.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`)),qA=(e,n)=>_C(e,e,B$(),n),W$=e=>qA(e,TC),Z$=e=>qA(e,GA),j$=(e,n)=>_C(e,e,B$(),ZA(n)),KA=(e,n)=>_C(e,e,L9(),n),AT=e=>KA(e,TC),G$=e=>KA(e,GA),tz=(e,n)=>_C(e,e,F$(n),J9()),k0=(e,n,o)=>_C(e,e,F$(n),o),q$=(e,n)=>k0(e,n,Q9),YA=(e,n)=>k0(e,n,TC),XA=(e,n,o)=>k0(e,n,ez(o)),JA=(e,n)=>k0(e,n,z$),QA=(e,n)=>k0(e,n,GA),nz=(e,n,o)=>k0(e,n,ZA(o)),oz=W$("type"),sz=Z$("fetch"),eR=Z$("onAction"),rz=QA("onSetup",()=>Ot),cz=AT("text"),QG=AT("icon"),az=AT("tooltip"),RT=AT("label"),K$=JA("active",!1),Y$=JA("enabled",!0),X$=JA("primary",!1),J$=e=>tz("columns",e),O0=e=>YA("type",e),iz=OT([oz,W$("trigger"),q$("minChars",1),J$(1),q$("maxResults",10),G$("matches"),sz,eR,nz("highlightOn",[],TC)]),lz=e=>Y9("Autocompleter",iz,e),tR=[Y$,az,QG,cz,rz,YA("context","mode:design")],nR=[K$].concat(tR),uz=[QA("predicate",De),XA("scope","node",["node","editor"]),XA("position","selection",["node","selection","line"])],oR=tR.concat([O0("contextformbutton"),X$,eR,U$("original",Wo)]),dz=nR.concat([O0("contextformbutton"),X$,eR,U$("original",Wo)]),mz=tR.concat([O0("contextformbutton")]),fz=nR.concat([O0("contextformtogglebutton")]),Q$=jA("type",{contextformbutton:oR,contextformtogglebutton:dz});OT([O0("contextform"),QA("initValue",Ke("")),RT,j$("commands",Q$),KA("launch",jA("type",{contextformbutton:mz,contextformtogglebutton:fz}))].concat(uz));const gz=e=>{const n=e.ui.registry.getAll().popups,o=$n(n,f=>lz(f).fold(b=>{throw new Error(X9(b))},Wo)),r=n1(Cu(o,f=>f.trigger)),a=nf(o);return{dataset:o,triggers:r,lookupByTrigger:f=>Rt(a,b=>b.trigger===f)}},hz=(e,n)=>{const o=j1(n.load,50);e.on("input",r=>{r.inputType==="insertCompositionText"&&!e.composing||o.throttle()}),e.on("keydown",r=>{const a=r.which;a===8?o.throttle():a===27?(o.cancel(),n.cancelIfNecessary()):(a===38||a===40)&&o.cancel()},!0),e.on("remove",o.cancel)},pz=e=>{const n=Qs(),o=io(!1),r=n.isSet,a=()=>{r()&&(p4(e),o.set(!1),n.clear())},u=R=>{r()||n.set({trigger:R.trigger,matchLength:R.text.length})},f=qi(()=>gz(e)),b=R=>n.get().map(D=>FA(e.dom,e.selection.getRng(),D.trigger,!0).bind(I=>R$(e,f,I,R))).getOrThunk(()=>P9(e,f)),C=R=>{b(R).fold(a,D=>{u(D.context),D.lookupData.then(I=>{n.get().map(z=>{const H=D.context;z.trigger===H.trigger&&(n.set({...z,matchLength:H.text.length}),o.get()?(Zb(e,{range:H.range}),h4(e,{lookupData:I})):(o.set(!0),Zb(e,{range:H.range}),Wb(e,{lookupData:I})))})})})},S=(R,D)=>{const I=R.compareBoundaryPoints(window.Range.START_TO_START,D),z=R.compareBoundaryPoints(window.Range.END_TO_END,D);return I>=0&&z<=0},O=()=>n.get().bind(({trigger:R})=>{const D=e.selection.getRng();return FA(e.dom,D,R,o.get()).filter(({range:I})=>S(D,I)).map(({range:I})=>I)});e.addCommand("mceAutocompleterReload",(R,D)=>{const I=hn(D)?D.fetchOptions:{};C(I)}),e.addCommand("mceAutocompleterClose",a),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{O().each(R=>{Zb(e,{range:R})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>O().isSome()),hz(e,{cancelIfNecessary:a,load:C})},bz=Ki().browser.isSafari(),Zs=e=>il(K.fromDom(e)),du=(e,n)=>{var o;return e.startOffset===0&&e.endOffset===((o=n.textContent)===null||o===void 0?void 0:o.length)},DT=(e,n)=>N.from(e.getParent(n.container(),"details")),vz=(e,n)=>DT(e,n).isSome(),yz=(e,n)=>{const o=N.from(e.getParent(n.startContainer,"details")),r=N.from(e.getParent(n.endContainer,"details"));if(o.isSome()||r.isSome()){const a=o.bind(u=>N.from(e.select("summary",u)[0]));return N.some({startSummary:a,startDetails:o,endDetails:r})}else return N.none()},Cz=(e,n)=>Pr(n).exists(o=>o.isEqual(e)),wz=(e,n)=>Wc(n).exists(o=>Rn(o.getNode())&&xc(n,o).exists(r=>r.isEqual(e))||o.isEqual(e)),Sz=(e,n)=>n.startSummary.exists(o=>Cz(e,o)),eF=(e,n)=>n.startSummary.exists(o=>wz(e,o)),A0=(e,n)=>n.startDetails.exists(o=>xc(o,e).forall(r=>n.startSummary.exists(a=>!a.contains(e.container())&&a.contains(r.container())))),tq=(e,n,o)=>o.startDetails.exists(r=>Mr(e,n).forall(a=>!r.contains(a.container()))),tF=(e,n)=>{const o=n.getNode();ss(o)||e.selection.setCursorLocation(o,n.offset())},nF=(e,n,o)=>{const r=e.dom.getParent(n.container(),"details");if(r&&!r.open){const a=e.dom.select("summary",r)[0];a&&(o?Pr(a):Wc(a)).each(f=>tF(e,f))}else tF(e,n)},mu=(e,n)=>{const o=C=>C.contains(e.startContainer),r=C=>C.contains(e.endContainer),a=n.startSummary.exists(o),u=n.startSummary.exists(r),f=n.startDetails.forall(C=>n.endDetails.forall(S=>C!==S));return(a||u)&&!(a&&u)||f},oF=(e,n,o)=>{const{dom:r,selection:a}=e,u=e.getBody();if(o==="character"){const f=Ce.fromRangeStart(a.getRng()),b=r.getParent(f.container(),r.isBlock),C=DT(r,f),S=b&&r.isEmpty(b),O=te(b==null?void 0:b.previousSibling),R=te(b==null?void 0:b.nextSibling);return S&&(n?R:O)&&cd(!n,u,f).exists(z=>vz(r,z)&&!iv(C,DT(r,z)))?!0:cd(n,u,f).fold(De,D=>{const I=DT(r,D);if(vz(r,D)&&!iv(C,I)){if(n||nF(e,D,!1),b&&S){if(n&&O)return!0;if(!n&&R)return!0;nF(e,D,n),e.dom.remove(b)}return!0}else return!1})}else return!1},xz=(e,n,o,r)=>{const u=e.selection.getRng(),f=Ce.fromRangeStart(u),b=e.getBody();return r==="selection"?mu(u,n):o?eF(f,n)||tq(b,f,n):Sz(f,n)||A0(f,n)},sF=(e,n,o)=>yz(e.dom,e.selection.getRng()).fold(()=>oF(e,n,o),r=>xz(e,r,n,o)||oF(e,n,o)),Ez=(e,n,o)=>{const r=e.selection,a=r.getNode(),u=r.getRng(),f=Ce.fromRangeStart(u);return Nu(a)?(o==="selection"&&du(u,a)||i5(n,f,a)?Zs(a):e.undoManager.transact(()=>{const b=r.getSel();let{anchorNode:C,anchorOffset:S,focusNode:O,focusOffset:R}=b??{};const D=()=>{Oe(C)&&Oe(S)&&Oe(O)&&Oe(R)&&(b==null||b.setBaseAndExtent(C,S,O,R))},I=()=>{C=b==null?void 0:b.anchorNode,S=b==null?void 0:b.anchorOffset,O=b==null?void 0:b.focusNode,R=b==null?void 0:b.focusOffset},z=(Z,Y)=>{Se(Z.childNodes,re=>{km(re)&&Y.appendChild(re)})},H=e.dom.create("span",{"data-mce-bogus":"1"});z(a,H),a.appendChild(H),D(),(o==="word"||o==="line")&&(b==null||b.modify("extend",n?"right":"left",o)),!r.isCollapsed()&&du(r.getRng(),H)?Zs(a):(e.execCommand(n?"ForwardDelete":"Delete"),I(),z(H,a),D()),e.dom.remove(H)}),!0):!1},qm=(e,n,o)=>sF(e,n,o)||bz&&Ez(e,n,o)?N.some(Ot):N.none(),fu=e=>(n,o,r={})=>{const a=n.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:a,currentTarget:a,eventPhase:Event.AT_TARGET,originalTarget:a,explicitOriginalTarget:a,isTrusted:!1,srcElement:a,cancelable:!1,preventDefault:Ot,inputType:o},f=Nv(new InputEvent(e));return n.dispatch(e,{...f,...u,...r})},R0=fu("input"),kC=fu("beforeinput"),rF=Ki(),OC=rF.os,MT=OC.isMacOS()||OC.isiOS(),cF=rF.browser.isFirefox(),_z=(e,n,o)=>{const r=o.keyCode===ot.BACKSPACE?"deleteContentBackward":"deleteContentForward",a=e.selection.isCollapsed(),u=a?"character":"selection",f=b=>a?b?"word":"line":"selection";o9([{keyCode:ot.BACKSPACE,action:Lt(GB,e)},{keyCode:ot.BACKSPACE,action:Lt(jO,e,!1)},{keyCode:ot.DELETE,action:Lt(jO,e,!0)},{keyCode:ot.BACKSPACE,action:Lt(LO,e,!1)},{keyCode:ot.DELETE,action:Lt(LO,e,!0)},{keyCode:ot.BACKSPACE,action:Lt(aA,e,n,!1)},{keyCode:ot.DELETE,action:Lt(aA,e,n,!0)},{keyCode:ot.BACKSPACE,action:Lt(Qx,e,!1)},{keyCode:ot.DELETE,action:Lt(Qx,e,!0)},{keyCode:ot.BACKSPACE,action:Lt(qm,e,!1,u)},{keyCode:ot.DELETE,action:Lt(qm,e,!0,u)},...MT?[{keyCode:ot.BACKSPACE,altKey:!0,action:Lt(qm,e,!1,f(!0))},{keyCode:ot.DELETE,altKey:!0,action:Lt(qm,e,!0,f(!0))},{keyCode:ot.BACKSPACE,metaKey:!0,action:Lt(qm,e,!1,f(!1))}]:[{keyCode:ot.BACKSPACE,ctrlKey:!0,action:Lt(qm,e,!1,f(!0))},{keyCode:ot.DELETE,ctrlKey:!0,action:Lt(qm,e,!0,f(!0))}],{keyCode:ot.BACKSPACE,action:Lt(sT,e,!1)},{keyCode:ot.DELETE,action:Lt(sT,e,!0)},{keyCode:ot.BACKSPACE,action:Lt(gA,e,!1)},{keyCode:ot.DELETE,action:Lt(gA,e,!0)},{keyCode:ot.BACKSPACE,action:Lt(QE,e,!1)},{keyCode:ot.DELETE,action:Lt(QE,e,!0)},{keyCode:ot.BACKSPACE,action:Lt(rC,e,!1)},{keyCode:ot.DELETE,action:Lt(rC,e,!0)},{keyCode:ot.BACKSPACE,action:Lt(WB,e,!1)},{keyCode:ot.DELETE,action:Lt(WB,e,!0)},{keyCode:ot.BACKSPACE,action:Lt(nT,e,!1)},{keyCode:ot.DELETE,action:Lt(nT,e,!0)}],o).filter(b=>e.selection.isEditable()).each(b=>{o.preventDefault(),kC(e,r).isDefaultPrevented()||(b(),R0(e,r))})},kz=(e,n,o)=>x0([{keyCode:ot.BACKSPACE,action:Lt(tT,e)},{keyCode:ot.DELETE,action:Lt(tT,e)},...MT?[{keyCode:ot.BACKSPACE,altKey:!0,action:Lt(hC,e)},{keyCode:ot.DELETE,altKey:!0,action:Lt(hC,e)},...o?[{keyCode:cF?224:91,action:Lt(hC,e)}]:[]]:[{keyCode:ot.BACKSPACE,ctrlKey:!0,action:Lt(hC,e)},{keyCode:ot.DELETE,ctrlKey:!0,action:Lt(hC,e)}]],n),Oz=(e,n)=>{let o=!1;e.on("keydown",r=>{o=r.keyCode===ot.BACKSPACE,r.isDefaultPrevented()||_z(e,n,r)}),e.on("keyup",r=>{r.isDefaultPrevented()||kz(e,r,o),o=!1})},Az=e=>{for(;e;){if(tt(e)||Ne(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},D0=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const u=Az(n.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&n.insertBefore(o.doc.createTextNode(Es),n.firstChild)}const a=o.createRng();if(n.normalize(),n.hasChildNodes()){const u=new xs(n,n);let f=n,b;for(;b=u.current();){if(Ne(b)){a.setStart(b,0),a.setEnd(b,0);break}if(r[b.nodeName.toLowerCase()]){a.setStartBefore(b),a.setEndBefore(b);break}f=b,b=u.next()}b||(a.setStart(f,0),a.setEnd(f,0))}else Rn(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(a.setStartBefore(n),a.setEndBefore(n)):(a.setStartAfter(n),a.setEndAfter(n)):(a.setStart(n,0),a.setEnd(n,0));e.selection.setRng(a),Fm(e,a)},M0=(e,n)=>{const o=e.getRoot();let r,a=n;for(;a!==o&&a&&e.getContentEditable(a)!=="false";){if(e.getContentEditable(a)==="true"){r=a;break}a=a.parentNode}return a!==o?r:o},sR=e=>N.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),Rz=e=>sR(e).fold(Ke(""),n=>n.nodeName.toUpperCase()),Dz=e=>sR(e).filter(n=>am(K.fromDom(n))).isSome(),rR=e=>{e.innerHTML='<br data-mce-bogus="1">'},Mz=(e,n,o)=>{const r=e.dom;N.from(o.style).map(r.parseStyle).each(C=>{const O={...$c(K.fromDom(n)),...C};r.setStyles(n,O)});const a=N.from(o.class).map(C=>C.split(/\s+/)),u=N.from(n.className).map(C=>Rt(C.split(/\s+/),S=>S!==""));Kt(a,u,(C,S)=>{const O=Rt(S,D=>!zt(C,D)),R=[...C,...O];r.setAttrib(n,"class",R.join(" "))});const f=["style","class"],b=Eo(o,(C,S)=>!zt(f,S));r.setAttribs(n,b)},P0=(e,n)=>{if(gr(e).toLowerCase()===n.tagName.toLowerCase()){const r=Qu(e);Mz(e,n,r)}},cR=(e,n,o,r,a=!0,u,f)=>{const b=e.dom,C=e.schema,S=gr(e),O=o?o.nodeName.toUpperCase():"";let R=n;const D=C.getTextInlineElements();let I;u||O==="TABLE"||O==="HR"?I=b.create(u||S,f||{}):I=o.cloneNode(!1);let z=I;if(!a)b.setAttrib(I,"style",null),b.setAttrib(I,"class",null);else do if(D[R.nodeName]){if(Zc(R)||Ec(R))continue;const H=R.cloneNode(!1);b.setAttrib(H,"id",""),I.hasChildNodes()?(H.appendChild(I.firstChild),I.appendChild(H)):(z=H,I.appendChild(H))}while((R=R.parentNode)&&R!==r);return P0(e,I),rR(z),I},Pz=(e,n)=>e.dom.getParent(n,Sv),Nz=(e,n,o)=>{let r=n;for(;r&&r!==e&&te(r.nextSibling);){const a=r.parentElement;if(!a||!o(a))return Sv(a);r=a}return!1},nq=(e,n,o)=>!n&&o.nodeName.toLowerCase()===gr(e)&&e.dom.isEmpty(o)&&Nz(e.getBody(),o,r=>$t(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),aR=(e,n,o)=>{var r,a,u;const f=n(gr(e)),b=Pz(e,o);b&&(e.dom.insertAfter(f,b),D0(e,f),((u=(a=(r=o.parentElement)===null||r===void 0?void 0:r.childNodes)===null||a===void 0?void 0:a.length)!==null&&u!==void 0?u:0)>1&&e.dom.remove(o))},Bz=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,$z=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},aF=(e,n)=>{const o=e==null?void 0:e.parentNode;return Oe(o)&&o.nodeName===n},iR=e=>Oe(e)&&/^(OL|UL|LI)$/.test(e.nodeName),lR=e=>Oe(e)&&/^(LI|DT|DD)$/.test(e.nodeName),iF=e=>iR(e)&&iR(e.parentNode),PT=e=>{const n=e.parentNode;return lR(n)?n:e},NT=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!tt(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},Fz=e=>Zo(Cu($c(K.fromDom(e)),(n,o)=>`${o}: ${n};`),(n,o)=>n+o,""),Kr=(e,n,o,r,a)=>{const u=e.dom,f=e.selection.getRng(),b=o.parentNode;if(o===e.getBody()||!b)return;iF(o)&&(a="LI");const C=lR(r)?Fz(r):void 0;let S=lR(r)&&C?n(a,{style:Fz(r)}):n(a);if(NT(o,r,!0)&&NT(o,r,!1))if(aF(o,"LI")){const O=PT(o);u.insertAfter(S,O),$z(o)?u.remove(O):u.remove(o)}else u.replace(S,o);else if(NT(o,r,!0))aF(o,"LI")?(u.insertAfter(S,PT(o)),S.appendChild(u.doc.createTextNode(" ")),S.appendChild(o)):b.insertBefore(S,o),u.remove(r);else if(NT(o,r,!1))u.insertAfter(S,PT(o)),u.remove(r);else{o=PT(o);const O=f.cloneRange();O.setStartAfter(r),O.setEndAfter(o);const R=O.extractContents();if(a==="LI"&&Bz(R,"LI")){const D=Rt(Gt(S.children,K.fromDom),$o(Ji("br")));S=R.firstChild,u.insertAfter(R,o),Se(D,I=>Hd(K.fromDom(S),I)),C&&S.setAttribute("style",C)}else u.insertAfter(R,o),u.insertAfter(S,o);u.remove(r)}D0(e,S)},Iz=e=>{Se(E1(K.fromDom(e),Xs),n=>{const o=n.dom;o.nodeValue=ma(o.data)})},Lz=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},Hz=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),uR=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,Vz=(e,n)=>e.nodeName===n||e.nextSibling&&e.nextSibling.nodeName===n,dR=(e,n)=>Oe(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",zz=(e,n,o)=>{var r;const a=[];if(!o)return;let u=o;for(;u=u.firstChild;){if(e.isBlock(u))return;tt(u)&&!n[u.nodeName.toLowerCase()]&&a.push(u)}let f=a.length;for(;f--;)u=a[f],(!u.hasChildNodes()||u.firstChild===u.lastChild&&((r=u.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||Hz(e,u))&&e.remove(u)},N0=(e,n,o)=>Ne(n)?e?o===1&&n.data.charAt(o-1)===ks?0:o:o===n.data.length-1&&n.data.charAt(o)===ks?n.data.length:o:o,Uz=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,N0(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,N0(!1,e.endContainer,e.endOffset)),n},Wz=e=>{let n=e;do Ne(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},mR=(e,n,o,r,a)=>{var u,f;const b=e.dom,C=(u=M0(b,r))!==null&&u!==void 0?u:b.getRoot();let S=b.getParent(r,b.isBlock);if(!S||!dR(b,S)){if(S=S||C,!S.hasChildNodes()){const I=b.create(n);return P0(e,I),S.appendChild(I),o.setStart(I,0),o.setEnd(I,0),I}let O=r;for(;O&&O.parentNode!==S;)O=O.parentNode;let R;for(;O&&!b.isBlock(O);)R=O,O=O.previousSibling;const D=(f=R==null?void 0:R.parentElement)===null||f===void 0?void 0:f.nodeName;if(R&&D&&e.schema.isValidChild(D,n.toLowerCase())){const I=R.parentNode,z=b.create(n);for(P0(e,z),I.insertBefore(z,R),O=R;O&&!b.isBlock(O);){const H=O.nextSibling;z.appendChild(O),O=H}o.setStart(r,a),o.setEnd(r,a)}}return r},fR=(e,n)=>{n.normalize();const o=n.lastChild;(!o||tt(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},Zz=(e,n)=>{const o=bs(e);return An(n)?!1:J(o)?zt(Ve.explode(o),n.nodeName.toLowerCase()):o},jz={insert:(e,n)=>{let o,r,a,u,f=!1;const b=e.dom,C=e.schema,S=C.getNonEmptyElements(),O=e.selection.getRng(),R=gr(e),D=K.fromDom(O.startContainer),I=pc(D,O.startOffset),z=I.exists(Ae=>u1(Ae)&&!la(Ae)),H=O.collapsed&&z,Z=(Ae,ct)=>cR(e,o,Ie,_e,ps(e),Ae,ct),Y=Ae=>{const ct=N0(Ae,o,r);if(Ne(o)&&(Ae?ct>0:ct<o.data.length))return!1;if((o.parentNode===Ie||o===Ie)&&f&&!Ae||Ae&&tt(o)&&o===Ie.firstChild)return!0;if(uR(o,"TABLE")||uR(o,"HR"))return Vz(o,"BR")?!Ae:f&&!Ae||!f&&Ae;const Ct=new xs(o,Ie);Ne(o)&&(Ae&&ct===0?Ct.prev():!Ae&&ct===o.data.length&&Ct.next());let rn;for(;rn=Ct.current();){if(tt(rn)){if(!rn.getAttribute("data-mce-bogus")){const cn=rn.nodeName.toLowerCase();if(S[cn]&&cn!=="br")return!1}}else if(Ne(rn)&&!Fa(rn.data))return!1;Ae?Ct.prev():Ct.next()}return!0},re=()=>{let Ae;return/^(H[1-6]|PRE|FIGURE)$/.test(a)&&st!=="HGROUP"?Ae=Z(R):Ae=Z(),Zz(e,u)&&dR(b,u)&&b.isEmpty(Ie,void 0,{includeZwsp:!0})?Ae=b.split(u,Ie):b.insertAfter(Ae,Ie),D0(e,Ae),Ae};qe(b,O).each(Ae=>{O.setStart(Ae.startContainer,Ae.startOffset),O.setEnd(Ae.endContainer,Ae.endOffset)}),o=O.startContainer,r=O.startOffset;const ce=!!(n&&n.shiftKey),ie=!!(n&&n.ctrlKey);tt(o)&&o.hasChildNodes()&&!H&&(f=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,f&&Ne(o)?r=o.data.length:r=0);const _e=M0(b,o);if(!_e||Lz(e,o))return;ce||(o=mR(e,R,O,o,r));let Ie=b.getParent(o,b.isBlock)||b.getRoot();u=Oe(Ie==null?void 0:Ie.parentNode)?b.getParent(Ie.parentNode,b.isBlock):null,a=Ie?Ie.nodeName.toUpperCase():"";const st=u?u.nodeName.toUpperCase():"";if(st==="LI"&&!ie){const Ae=u;Ie=Ae,u=Ae.parentNode,a=st}if(tt(u)&&nq(e,ce,Ie))return aR(e,Z,Ie);if(/^(LI|DT|DD)$/.test(a)&&tt(u)&&b.isEmpty(Ie)){Kr(e,Z,u,Ie,R);return}if(!H&&(Ie===e.getBody()||!dR(b,Ie)))return;const we=Ie.parentNode;let he;if(H)he=Z(R),I.fold(()=>{Bs(D,K.fromDom(he))},Ae=>{co(Ae,K.fromDom(he))}),e.selection.setCursorLocation(he,0);else if(qu(Ie))he=Bf(Ie),b.isEmpty(Ie)&&rR(Ie),P0(e,he),D0(e,he);else if(Y(!1))he=re();else if(Y(!0)&&we){const Ae=Ce.fromRangeStart(O),ct=G4(Ae),Ct=K.fromDom(Ie),cn=Lx(Ct,Ae,e.schema)?Bt(Ct,Ae,e.schema).bind(zn=>N.from(zn.getNode())):N.none();he=we.insertBefore(Z(),Ie);const Pn=uR(Ie,"HR")||ct?he:cn.getOr(Ie);D0(e,Pn)}else{const Ae=Uz(O).cloneRange();Ae.setEndAfter(Ie);const ct=Ae.extractContents();Iz(ct),Wz(ct),he=ct.firstChild,b.insertAfter(ct,Ie),zz(b,S,he),fR(b,Ie),b.isEmpty(Ie)&&rR(Ie),he.normalize(),b.isEmpty(he)?(b.remove(he),re()):(P0(e,he),D0(e,he))}b.setAttrib(he,"id",""),e.dispatch("NewBlock",{newBlock:he})},fakeEventName:"insertParagraph"},Gz=(e,n,o)=>{const r=new xs(n,o);let a;const u=e.getNonEmptyElements();for(;a=r.next();)if(u[a.nodeName.toLowerCase()]||Ne(a)&&a.length>0)return!0;return!1},lF=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),Fm(e,r)},oq=(e,n)=>{const o=e.selection,r=e.dom,a=o.getRng();let u,f=!1;qe(r,a).each(I=>{a.setStart(I.startContainer,I.startOffset),a.setEnd(I.endContainer,I.endOffset)});let b=a.startOffset,C=a.startContainer;if(tt(C)&&C.hasChildNodes()){const I=b>C.childNodes.length-1;C=C.childNodes[Math.min(b,C.childNodes.length-1)]||C,I&&Ne(C)?b=C.data.length:b=0}let S=r.getParent(C,r.isBlock);const O=S&&S.parentNode?r.getParent(S.parentNode,r.isBlock):null,R=O?O.nodeName.toUpperCase():"",D=!!(n&&n.ctrlKey);R==="LI"&&!D&&(S=O),Ne(C)&&b>=C.data.length&&(Gz(e.schema,C,S||r.getRoot())||(u=r.create("br"),a.insertNode(u),a.setStartAfter(u),a.setEndAfter(u),f=!0)),u=r.create("br"),Ah(r,a,u),lF(e,u,f),e.undoManager.add()},qz=(e,n)=>{const o=K.fromTag("br");co(K.fromDom(n),o),e.undoManager.add()},gu=(e,n)=>{uF(e.getBody(),n)||vi(K.fromDom(n),K.fromTag("br"));const o=K.fromTag("br");vi(K.fromDom(n),o),lF(e,o.dom,!1),e.undoManager.add()},Kz=e=>Rn(e.getNode()),uF=(e,n)=>Kz(Ce.after(n))?!0:Mr(e,Ce.after(n)).map(o=>Rn(o.getNode())).getOr(!1),dF=e=>e&&e.nodeName==="A"&&"href"in e,Yz=e=>e.fold(De,dF,dF,De),Xz=e=>{const n=Be(dp,e),o=Ce.fromRangeStart(e.selection.getRng());return Li(n,e.getBody(),o).filter(Yz)},Jz=(e,n)=>{n.fold(Ot,Be(qz,e),Be(gu,e),Ot)},mF={insert:(e,n)=>{const o=Xz(e);o.isSome()?o.each(Be(Jz,e)):oq(e,n)},fakeEventName:"insertLineBreak"},BT=(e,n)=>sR(e).filter(o=>n.length>0&&Bc(K.fromDom(o),n)).isSome(),fF=e=>BT(e,pm(e)),$T=e=>BT(e,Ak(e)),ri=ha.generate([{br:[]},{block:[]},{none:[]}]),Qz=(e,n)=>$T(e),gF=e=>(n,o)=>Dz(n)===e,hF=(e,n)=>(o,r)=>Rz(o)===e.toUpperCase()===n,eU=e=>{const n=M0(e.dom,e.selection.getStart());return An(n)},B0=e=>hF("pre",e),tU=()=>hF("summary",!0),AC=e=>(n,o)=>pS(n)===e,pF=(e,n)=>fF(e),FT=(e,n)=>n,nU=e=>{const n=gr(e),o=M0(e.dom,e.selection.getStart());return Oe(o)&&e.schema.isValidChild(o.nodeName,n)},gR=e=>{const n=e.selection.getRng(),o=K.fromDom(n.startContainer),a=pc(o,n.startOffset).map(u=>u1(u)&&!la(u));return n.collapsed&&a.getOr(!0)},zi=(e,n)=>(o,r)=>Zo(e,(u,f)=>u&&f(o,r),!0)?N.some(n):N.none(),oU=(e,n)=>dB([zi([Qz],ri.none()),zi([B0(!0),eU],ri.none()),zi([tU()],ri.br()),zi([B0(!0),AC(!1),FT],ri.br()),zi([B0(!0),AC(!1)],ri.block()),zi([B0(!0),AC(!0),FT],ri.block()),zi([B0(!0),AC(!0)],ri.br()),zi([gF(!0),FT],ri.br()),zi([gF(!0)],ri.block()),zi([pF],ri.br()),zi([FT],ri.br()),zi([nU],ri.block()),zi([gR],ri.block())],[e,!!(n&&n.shiftKey)]).getOr(ri.none()),Hp=(e,n,o)=>{n.mode.isReadOnly()||(n.selection.isCollapsed()||G8(n),!(Oe(o)&&kC(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),Oe(o)&&R0(n,e.fakeEventName)))},bF=(e,n)=>{if(e.mode.isReadOnly())return;const o=()=>Hp(mF,e,n),r=()=>Hp(jz,e,n),a=oU(e,n);switch(my(e)){case"linebreak":a.fold(o,o,Ot);break;case"block":a.fold(r,r,Ot);break;case"invert":a.fold(r,o,Ot);break;default:a.fold(o,r,Ot);break}},IT=Ki(),hR=IT.os.isiOS()&&IT.browser.isSafari(),pR=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),bd(e.undoManager),e.undoManager.transact(()=>{bF(e,n)}))},sU=e=>{if(!e.collapsed)return!1;const n=e.startContainer;if(Ne(n)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=n.data.charAt(e.startOffset-1);return o.test(r)}else return!1},cq=e=>{let n=N.none();const o=a=>{n=N.some(a.selection.getBookmark()),a.undoManager.add()},r=(a,u)=>{a.undoManager.undo(),n.fold(Ot,f=>a.selection.moveToBookmark(f)),pR(a,u),n=N.none()};e.on("keydown",a=>{a.keyCode===ot.ENTER&&(hR&&sU(e.selection.getRng())?o(e):pR(e,a))}),e.on("keyup",a=>{a.keyCode===ot.ENTER&&n.each(()=>r(e,a))})},Mg=(e,n,o)=>{const r=qt.os.isMacOS()||qt.os.isiOS();x0([{keyCode:ot.END,action:Lt(s$,e,!0)},{keyCode:ot.HOME,action:Lt(s$,e,!1)},...r?[]:[{keyCode:ot.HOME,action:Lt(Dg,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:ot.END,action:Lt(Dg,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:ot.END,action:Lt(l$,e,!0)},{keyCode:ot.HOME,action:Lt(l$,e,!1)},{keyCode:ot.END,action:Lt(mT,e,!0,n)},{keyCode:ot.HOME,action:Lt(mT,e,!1,n)}],o).each(a=>{o.preventDefault()})},rU=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||Mg(e,n,o)})},cU=e=>{e.on("input",n=>{n.isComposing||XM(e)})},aU=Ki(),LT=(e,n,o)=>{x0([{keyCode:ot.PAGE_UP,action:Lt(mT,e,!1,n)},{keyCode:ot.PAGE_DOWN,action:Lt(mT,e,!0,n)}],o)},bR=e=>e.stopImmediatePropagation(),vR=e=>e.keyCode===ot.PAGE_UP||e.keyCode===ot.PAGE_DOWN,vF=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",bR,!0):!o&&e.get()&&n.off("NodeChange",bR),e.set(o)},yF=(e,n)=>{if(aU.os.isMacOS())return;const o=io(!1);e.on("keydown",r=>{vR(r)&&vF(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||LT(e,n,r),vR(r)&&o.get()&&(vF(o,e,!1),e.nodeChanged())})},iU=e=>{e.on("beforeinput",n=>{(!e.selection.isEditable()||mo(n.getTargetRanges(),o=>!H4(e.dom,o)))&&n.preventDefault()})},CF=(e,n)=>{const o=n.container(),r=n.offset();return Ne(o)?(o.insertData(r,e),N.some(Ce(o,r+e.length))):Zh(n).map(a=>{const u=K.fromText(e);return n.isAtEnd()?vi(a,u):co(a,u),Ce(u.dom,e.length)})},wF=Be(CF,Es),HT=Be(CF," "),yR=(e,n,o)=>jM(e,n,o)?wF(n):HT(n),lU=e=>n=>n.fold(o=>xc(e.dom,Ce.before(o)),o=>Pr(o),o=>Wc(o),o=>Mr(e.dom,Ce.after(o))),CR=(e,n,o)=>r=>jM(e,r,o)?wF(n):HT(n),wR=e=>n=>{e.selection.setRng(n.toRange()),e.nodeChanged()},VT=(e,n)=>e.isEditable(e.getParent(n,"summary")),SF=e=>{const n=Ce.fromRangeStart(e.selection.getRng()),o=K.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=Be(dp,e),a=Ce.fromRangeStart(e.selection.getRng());return Li(r,e.getBody(),a).bind(lU(o)).map(u=>()=>CR(o,n,e.schema)(u).each(wR(e)))}else return N.none()},xF=e=>{const n=()=>{const o=K.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=Ce.fromRangeStart(e.selection.getRng());yR(o,r,e.schema).each(wR(e))};return gi(qt.browser.isFirefox()&&e.selection.isEditable()&&VT(e.dom,e.selection.getRng().startContainer),n)},uU=(e,n)=>{o9([{keyCode:ot.SPACEBAR,action:Lt(SF,e)},{keyCode:ot.SPACEBAR,action:Lt(xF,e)}],n).each(o=>{n.preventDefault(),kC(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),R0(e,"insertText",{data:" "}))})},dU=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||uU(e,n)})},zT=e=>zk(e)?[{keyCode:ot.TAB,action:Lt(ST,e,!0)},{keyCode:ot.TAB,shiftKey:!0,action:Lt(ST,e,!1)}]:[],EF=(e,n)=>{x0([...zT(e)],n).each(o=>{n.preventDefault()})},mU=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||EF(e,n)})},fU=e=>{if(e.addShortcut("Meta+P","","mcePrint"),pz(e),vd(e))return io(null);{const n=SV(e);return iU(e),GV(e),x$(e,n),Oz(e,n),cq(e),dU(e),cU(e),mU(e),rU(e,n),yF(e,n),n}};class TF{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",a=>{const u=n.selection.getRng(),f={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(a.type==="nodechange"||!v(f,o))&&n.dispatch("SelectionChange"),o=f}),n.on("contextmenu",()=>{i2(n),n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const a=n.selection.getStart(!0);a&&Pb(n)&&!r.isSameElementPath(a)&&n.dom.isChildOf(a,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",a=>{!a.isDefaultPrevented()&&Pb(n)&&(n.selection.getNode().nodeName==="IMG"?Xa.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor,r=o.selection;let a;if(o.initialized&&r&&!Nk(o)){const u=o.getBody();a=r.getStart(!0)||u,(a.ownerDocument!==o.getDoc()||!o.dom.isChildOf(a,u))&&(a=u);const f=[];o.dom.getParent(a,b=>b===u?!0:(f.push(b),!1)),o.dispatch("NodeChange",{...n,element:a,parents:f})}}isSameElementPath(n){let o;const r=this.editor,a=Fo(r.dom.getParents(n,it,r.getBody()));if(a.length===this.lastPath.length){for(o=a.length;o>=0&&a[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=a,!0}return this.lastPath=a,!1}}const _F=Df("image"),gU=e=>{const n=e;return N.from(n[_F])},hU=(e,n)=>{const o=e;o[_F]=n},SR=Df("event"),pU=e=>{const n=e;return N.from(n[SR])},RC=e=>n=>{const o=n;o[SR]=e},bU=(e,n)=>RC(n)(e),xR=RC(0),vU=RC(2),yU=RC(1),CU=(e=>n=>{const o=n;return N.from(o[SR]).exists(r=>r===e)})(0),wU=()=>Object.freeze({length:0,item:e=>null}),Pg=Df("mode"),SU=e=>{const n=e;return N.from(n[Pg])},UT=e=>n=>{const o=n;o[Pg]=e},ER=(e,n)=>UT(n)(e),kF=UT(0),TR=UT(2),xU=UT(1),_R=e=>n=>{const o=n;return N.from(o[Pg]).exists(r=>r===e)},$0=_R(0),OF=_R(1),iq=(e,n)=>({...n,get length(){return n.length},add:(o,r)=>{if($0(e))if(J(o)){if(!ss(r))return n.add(o,r)}else return n.add(o);return null},remove:o=>{$0(e)&&n.remove(o)},clear:()=>{$0(e)&&n.clear()}}),WT=["none","copy","link","move"],EU=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],kR=()=>{const e=new window.DataTransfer;let n="move",o="all";const r={get dropEffect(){return n},set dropEffect(a){zt(WT,a)&&(n=a)},get effectAllowed(){return o},set effectAllowed(a){CU(r)&&zt(EU,a)&&(o=a)},get items(){return iq(r,e.items)},get files(){return OF(r)?wU():e.files},get types(){return e.types},setDragImage:(a,u,f)=>{$0(r)&&(hU(r,{image:a,x:u,y:f}),e.setDragImage(a,u,f))},getData:a=>OF(r)?"":e.getData(a),setData:(a,u)=>{$0(r)&&e.setData(a,u)},clearData:a=>{$0(r)&&e.clearData(a)}};return kF(r),r},TU=e=>{const n=kR(),o=SU(e);return TR(e),xR(n),n.dropEffect=e.dropEffect,n.effectAllowed=e.effectAllowed,gU(e).each(r=>n.setDragImage(r.image,r.x,r.y)),Se(e.types,r=>{r!=="Files"&&n.setData(r,e.getData(r))}),Se(e.files,r=>n.items.add(r)),pU(e).each(r=>{bU(n,r)}),o.each(r=>{ER(e,r),ER(n,r)}),n},_U=e=>{const n=e.getData("text/html");return n===""?N.none():N.some(n)},AF=(e,n)=>e.setData("text/html",n),RF="x-tinymce/html",ZT=Ke(RF),OR="<!-- "+RF+" -->",kU=e=>OR+e,OU=e=>e.replace(OR,""),DF=e=>e.indexOf(OR)!==-1,AU=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),RU=(e,n)=>{let o="<"+e;const r=Cu(n,(a,u)=>u+'="'+Lu.encodeAllRaw(a)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},so=(e,n,o)=>{const r=e.split(/\n\n/),a=RU(n,o),u="</"+n+">",f=Gt(r,C=>C.split(/\n/).join("<br />")),b=C=>a+C+u;return f.length===1?f[0]:Gt(f,b).join("")},MF="%MCEPASTEBIN%",PF=(e,n)=>{const{dom:o,selection:r}=e,a=e.getBody();n.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},MF);qt.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(a,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),r.select(u,!0)},DU=(e,n)=>{const o=e.dom;if(DC(e)){let r;const a=n.get();for(;r=DC(e);)o.remove(r),o.unbind(r);a&&e.selection.setRng(a)}n.set(null)},DC=e=>e.dom.get("mcepastebin"),NF=e=>Oe(e)&&e.id==="mcepastebin",MU=e=>{const n=e.dom,o=(f,b)=>{f.appendChild(b),n.remove(b,!0)},[r,...a]=Rt(e.getBody().childNodes,NF);Se(a,f=>{o(r,f)});const u=n.select("div[id=mcepastebin]",r);for(let f=u.length-1;f>=0;f--){const b=n.create("div");r.insertBefore(b,u[f]),o(b,u[f])}return r?r.innerHTML:""},BF=e=>e===MF,$F=e=>{const n=io(null);return{create:()=>PF(e,n),remove:()=>DU(e,n),getEl:()=>DC(e),getHtml:()=>MU(e),getLastRng:n.get}},jT=(e,n)=>(Ve.each(n,o=>{Bo(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),PU=e=>{const n=Fn(),o=Tp({},n);let r="";const a=n.getVoidElements(),u=Ve.makeMap("script noscript style textarea video audio iframe object"," "),f=n.getBlockElements(),b=C=>{const S=C.name,O=C;if(S==="br"){r+=`
`;return}if(S!=="wbr"){if(a[S]&&(r+=" "),u[S]){r+=" ";return}if(C.type===3&&(r+=C.value),!(C.name in n.getVoidElements())){let R=C.firstChild;if(R)do b(R);while(R=R.next)}f[S]&&O.next&&(r+=`
`,S==="p"&&(r+=`
`))}};return e=jT(e,[/<!\[[^\]]+\]>/g]),b(o.parse(e)),r},FF=e=>(e=jT(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,a)=>!r&&!a?" ":Es],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),NU=e=>{let n=0;return()=>e+n++},IF=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Ve.hasOwn(o,n)?"image/"+o[n]:"image/"+n},BU=(e,n)=>{const o=Tp({sanitize:BS(e),sandbox_iframes:Vh(e),sandbox_iframes_exclusions:_y(e),convert_unsafe_embeds:Wk(e)},e.schema);o.addNodeFilter("meta",a=>{Ve.each(a,u=>{u.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return lg({validate:!0},e.schema).serialize(r)},LF=(e,n)=>({content:e,cancelled:n}),F0=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),a=wx(e,r,o);return LF(a.node.innerHTML,a.isDefaultPrevented())},$U=(e,n,o)=>{const r=b4(e,n,o),a=BU(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?F0(e,a,o):LF(a,r.isDefaultPrevented())},I0=(e,n,o)=>$U(e,n,o),Vp=(e,n)=>(e.insertContent(n,{merge:MS(e),paste:!0}),!0),AR=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),FU=(e,n)=>AR(n)&&mo(FS(e),o=>Fl(n.toLowerCase(),`.${o.toLowerCase()}`)),L0=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),IU=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),RR=(e,n,o)=>!e.selection.isCollapsed()&&AR(n)?IU(e,n,o):!1,LU=(e,n,o)=>FU(e,n)?L0(e,n,o):!1,HF=(e,n)=>{Ve.each([RR,LU,Vp],o=>!o(e,n,Vp))},VF=(e,n,o)=>{o||!Ey(e)?Vp(e,n):HF(e,n)},DR=NU("mceclip"),zF=e=>{const n=kR();return AF(n,e),TR(n),n},UF=(e,n,o,r,a)=>{const u=I0(e,n,o);if(!u.cancelled){const f=u.content,b=()=>VF(e,f,r);a?kC(e,"insertFromPaste",{dataTransfer:zF(f)}).isDefaultPrevented()||(b(),R0(e,"insertFromPaste")):b()}},GT=(e,n,o,r)=>{const a=o||DF(n);UF(e,OU(n),a,!1,r)},qT=(e,n,o)=>{const r=e.dom.encode(n).replace(/\r\n/g,`
`),a=Ia(r,td(e)),u=so(a,gr(e),Qu(e));UF(e,u,!1,!0,o)},WF=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},Km=(e,n)=>n in e&&e[n].length>0,KT=e=>Km(e,"text/html")||Km(e,"text/plain"),ZF=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Oe(o)?e.dom.encode(o[1]):void 0},HU=(e,n,o,r)=>{const a=DR(),u=vs(e)&&Oe(o.name),f=u?ZF(e,o.name):a,b=u?o.name:void 0,C=n.create(a,o,r,f,b);return n.add(C),C},VU=(e,n)=>{yp(n.uri).each(({data:o,type:r,base64Encoded:a})=>{const u=a?o:btoa(o),f=n.file,b=e.editorUpload.blobCache,C=b.getByData(u,r),S=C??HU(e,b,f,u);GT(e,`<img src="${S.blobUri()}">`,!1,!0)})},zU=e=>e.type==="paste",jF=e=>Promise.all(Gt(e,n=>hP(n).then(o=>({file:n,uri:o})))),MR=e=>{const n=FS(e);return o=>fs(o.type,"image/")&&mo(n,r=>IF(r)===o.type)},UU=(e,n)=>{const o=n.items?oa(mc(n.items),a=>a.kind==="file"?[a.getAsFile()]:[]):[],r=n.files?mc(n.files):[];return Rt(o.length>0?o:r,MR(e))},PR=(e,n,o)=>{const r=zU(n)?n.clipboardData:n.dataTransfer;if(Hh(e)&&r){const a=UU(e,r);if(a.length>0)return n.preventDefault(),jF(a).then(u=>{o&&e.selection.setRng(o),Se(u,f=>{VU(e,f)})}),!0}return!1},GF=e=>{var n,o;return qt.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},WU=e=>ot.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,YT=(e,n,o,r,a)=>{let u=FF(o);const f=Km(n,ZT())||DF(o),b=!f&&AU(u),C=AR(u);(BF(u)||!u.length||b&&!C)&&(r=!0),(r||C)&&(Km(n,"text/plain")&&b?u=n["text/plain"]:u=PU(u)),!BF(u)&&(r?qT(e,u,a):GT(e,u,f,a))},ZU=(e,n,o)=>{let r;const a=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",u=>{WU(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||GF(u))return;const f=o.get()==="text"||r;r=!1;const b=WF(u.clipboardData);!KT(b)&&PR(e,u,a())||(Km(b,"text/html")?(u.preventDefault(),YT(e,b,b["text/html"],f,!0)):Km(b,"text/plain")&&Km(b,"text/uri-list")?(u.preventDefault(),YT(e,b,b["text/plain"],f,!0)):(n.create(),Xa.setEditorTimeout(e,()=>{const C=n.getHtml();n.remove(),YT(e,b,C,f,!1)},0)))})},jU=e=>{const n=a=>fs(a,"webkit-fake-url"),o=a=>fs(a,"data:"),r=a=>{var u;return((u=a.data)===null||u===void 0?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(a,u,f)=>{if(!Hh(e)&&r(f))for(const b of a){const C=b.attr("src");J(C)&&!b.attr("data-mce-object")&&C!==qt.transparentSrc&&(n(C)||!NS(e)&&o(C))&&b.remove()}})},GU=(e,n,o)=>{ZU(e,n,o),jU(e)},qU=(e,n)=>{n.get()==="text"?(n.set("html"),jb(e,!1)):(n.set("text"),jb(e,!0)),e.focus()},KU=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{qU(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&GT(e,r.html,r.internal,!1),r.text&&qT(e,r.text,!1)})},XT=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(ZT(),n),!0}catch{return!1}else return!1},qF=(e,n,o,r)=>{XT(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},NR=e=>(n,o)=>{const{dom:r,selection:a}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),f=r.create("div",{contenteditable:"true"},n);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(f),r.add(e.getBody(),u);const b=a.getRng();f.focus();const C=r.createRng();C.selectNodeContents(f),a.setRng(C),Xa.setEditorTimeout(e,()=>{a.setRng(b),r.remove(u),o()},0)},KF=e=>({html:kU(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),YU=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),BR=e=>!e.selection.isCollapsed()||YU(e),YF=e=>n=>{!n.isDefaultPrevented()&&BR(e)&&e.selection.isEditable()&&qF(n,KF(e),NR(e),()=>{if(qt.browser.isChromium()||qt.browser.isFirefox()){const o=e.selection.getRng();Xa.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},XU=e=>n=>{!n.isDefaultPrevented()&&BR(e)&&qF(n,KF(e),NR(e),Ot)},JU=e=>{e.on("cut",YF(e)),e.on("copy",XU(e))},XF=(e,n)=>{var o,r;return Re.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},QU=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},JF=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},QF=e=>mo(e.files,n=>/^image\//.test(n.type)),eW=(e,n,o,r)=>{const a=e.getParent(o,f=>Gd(n,f));if(!te(e.getParent(o,"summary")))return!0;if(a&&$t(r,"text/html")){const f=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!te(f.querySelector(a.nodeName.toLowerCase()))}else return!1},tW=e=>{e.on("input",n=>{const o=r=>te(r.querySelector("summary"));if(n.inputType==="deleteByDrag"){const r=Rt(e.dom.select("details"),o);Se(r,a=>{Rn(a.firstChild)&&a.firstChild.remove();const u=e.dom.create("summary");u.appendChild(Oi().dom),a.prepend(u)})}})},nW=(e,n)=>{Sy(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),Hh(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&QF(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=XF(e,o);if(An(r))return;const a=WF(o.dataTransfer),u=Km(a,ZT());if((!KT(a)||QU(a))&&PR(e,o,r))return;const f=a[ZT()],b=f||a["text/html"]||a["text/plain"],C=eW(e.dom,e.schema,r.startContainer,a),S=n.get();S&&!C||b&&(o.preventDefault(),Xa.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(f||S&&C)&&e.execCommand("Delete"),JF(e,r);const O=FF(b);a["text/html"]?GT(e,O,u,!0):qT(e,O,!0)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{Hh(e)&&!n.get()&&(o.preventDefault(),JF(e,XF(e,o))),o.type==="dragend"&&n.set(!1)}),tW(e)},oW=e=>{const n=a=>u=>{a(e,u)},o=xy(e);Q(o)&&e.on("PastePreProcess",n(o));const r=AS(e);Q(r)&&e.on("PastePostProcess",n(r))},sW=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},rW=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,eI=e=>Ve.trim(e).replace(rW,bh).toLowerCase(),cW=(e,n,o)=>{const r=DS(e);if(o||r==="all"||!Lk(e))return n;const a=r?r.split(/[, ]/):[];if(a&&r!=="none"){const u=e.dom,f=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(b,C,S,O)=>{const R=u.parseStyle(u.decode(S)),D={};for(let z=0;z<a.length;z++){const H=R[a[z]];let Z=H,Y=u.getStyle(f,a[z],!0);/color/.test(a[z])&&(Z=eI(Z),Y=eI(Y)),Y!==Z&&(D[a[z]]=H)}const I=u.serializeStyle(D,"span");return I?C+' style="'+I+'"'+O:C+O})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,f,b,C)=>f+' style="'+b+'"'+C),n},tI=e=>{(qt.browser.isChromium()||qt.browser.isSafari())&&sW(e,cW)},nI=e=>{const n=io(!1),o=io(PS(e)?"text":"html"),r=$F(e);tI(e),KU(e,o),oW(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>o.get()==="text"),e.on("PreInit",()=>{JU(e),nW(e,n),GU(e,r,o)})},aW=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},iW=e=>{e.parser.addNodeFilter("details",n=>{const o=Uk(e);Se(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const o=IS(e);Se(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},lW=e=>{aW(e),iW(e)},uW=Rn,oI=Ne,dW=e=>Dn(e.dom),mW=e=>Te(e.dom),MC=e=>n=>Sn(K.fromDom(e),n),sI=(e,n,o)=>Vo(K.fromDom(e),r=>mW(r)||o.isBlock(wn(r)),MC(n)).getOr(K.fromDom(n)).dom,rI=(e,n)=>Vo(K.fromDom(e),dW,MC(n)),$R=(e,n,o)=>{const r=new xs(e,n),a=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let f=o?e:a();f&&!uW(f);f=a())qa(f)&&(u=f);return u},cI=(e,n,o)=>{const a=Ce.fromRangeStart(e).getNode(),u=sI(a,n,o),f=$R(a,u,!1),b=$R(a,u,!0),C=document.createRange();return rI(f,u).fold(()=>{oI(f)?C.setStart(f,0):C.setStartBefore(f)},S=>C.setStartBefore(S.dom)),rI(b,u).fold(()=>{oI(b)?C.setEnd(b,b.data.length):C.setEndAfter(b)},S=>C.setEndAfter(S.dom)),C},FR=e=>{const n=cI(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(eE(n))},fW=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),FR(e))})};var zp;(function(e){e.Before="before",e.After="after"})(zp||(zp={}));const gW=(e,n)=>Math.abs(e.left-n),aI=(e,n)=>Math.abs(e.right-n),hW=(e,n)=>e>=n.top&&e<=n.bottom,iI=(e,n)=>e.top<n.bottom&&e.bottom>n.top,pW=(e,n)=>{const o=Ga(e,n)/Math.min(e.height,n.height);return iI(e,n)&&o>.5},bW=(e,n)=>{const o=Rt(e,r=>hW(n,r));return Zw(o).fold(()=>[[],e],r=>{const{pass:a,fail:u}=Er(e,f=>pW(f,r));return[a,u]})},vW=(e,n)=>({node:e.node,position:gW(e,n)<aI(e,n)?zp.Before:zp.After}),PC=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),IR=(e,n,o,r)=>{const a=R=>qa(R.node)?N.some(R):tt(R.node)?IR(mc(R.node.childNodes),n,o,!1):N.none(),u=(R,D,I)=>a(D).filter(z=>Math.abs(I(R,n,o)-I(z,n,o))<2&&Ne(z.node)),f=(R,D)=>{const I=Io(R,(z,H)=>D(z,n,o)-D(H,n,o));return _d(I,a).map(z=>r&&!Ne(z.node)&&I.length>1?u(z,I[1],D).getOr(z):z)},[b,C]=bW(xB(e),o),{pass:S,fail:O}=Er(C,R=>R.top<o);return f(b,PC).orThunk(()=>f(O,dm)).orThunk(()=>f(S,dm))},yW=(e,n,o,r)=>{const a=(u,f)=>{const b=S=>tt(S)&&S.classList.contains("mce-drag-container"),C=Rt(u.dom.childNodes,$o(b));return f.fold(()=>IR(C,o,r,!0),S=>{const O=Rt(C,R=>R!==S.dom);return IR(O,o,r,!0)}).orThunk(()=>(Sn(u,e)?N.none():Yg(u)).bind(O=>a(O,N.some(u))))};return a(n,N.none())},lI=(e,n,o)=>{const r=K.fromDom(e),a=Ou(r),f=K.fromPoint(a,n,o).filter(b=>ia(r,b)).getOr(r);return yW(r,f,n,o)},uI=(e,n,o)=>lI(e,n,o).filter(r=>qf(r.node)).map(r=>vW(r,n)),dI=e=>{var n,o;const r=e.getBoundingClientRect(),a=e.ownerDocument,u=a.documentElement,f=a.defaultView;return{top:r.top+((n=f==null?void 0:f.scrollY)!==null&&n!==void 0?n:0)-u.clientTop,left:r.left+((o=f==null?void 0:f.scrollX)!==null&&o!==void 0?o:0)-u.clientLeft}},CW=e=>e.inline?dI(e.getBody()):{left:0,top:0},wW=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},SW=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},a={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:a},JT=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=dI(e.getContentAreaContainer()),r=SW(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},mI=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),fI=(e,n)=>mI(CW(e),wW(e),JT(e,n)),gI=e=>({target:e,srcElement:e}),xW=(e,n,o,r)=>({...n,dataTransfer:r,type:e,...gI(o)}),EW=(e,n,o)=>{const r=uc("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:Ot,stopImmediatePropagation:Ot,stopPropagation:Ot,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,...gI(n)}},lq=(e,n)=>{const o=TU(e);return n==="dragstart"?(xR(o),kF(o)):n==="drop"?(vU(o),TR(o)):(yU(o),xU(o)),o},TW=(e,n,o,r)=>{const a=lq(o,e);return ss(r)?EW(e,n,a):xW(e,r,n,a)},NC=32,LR=100,Up=8,QT=16,hI=Dn,pI=Gw(hI,Te),_W=(e,n,o)=>hI(o)&&o!==n&&e.isEditable(o.parentElement),HR=(e,n,o)=>An(n)||n===o||e.dom.isChildOf(n,o)?!1:e.dom.isEditable(n),bI=(e,n,o,r)=>{const a=e.dom,u=n.cloneNode(!0);a.setStyles(u,{width:o,height:r}),a.setAttrib(u,"data-mce-selected",null);const f=a.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return a.setStyles(f,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),a.setStyles(u,{margin:0,boxSizing:"border-box"}),f.appendChild(u),f},kW=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},e_=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},VR=e_("left",-NC),vI=e_("left",NC),OW=e_("top",-NC),yI=e_("top",NC),AW=(e,n,o,r,a,u,f,b,C,S,O,R)=>{let D=0,I=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>a&&(D=n.pageX+o-a),n.pageY+r>u&&(I=n.pageY+r-u),e.style.width=o-D+"px",e.style.height=r-I+"px";const z=C.clientHeight,H=C.clientWidth,Z=f+C.getBoundingClientRect().top,Y=b+C.getBoundingClientRect().left;O.on(re=>{re.intervalId.clear(),re.dragging&&R&&(f+Up>=z?re.intervalId.set(yI(S)):f-Up<=0?re.intervalId.set(OW(S)):b+Up>=H?re.intervalId.set(vI(S)):b-Up<=0?re.intervalId.set(VR(S)):Z+QT>=window.innerHeight?re.intervalId.set(yI(window)):Z-QT<=0?re.intervalId.set(OW(window)):Y+QT>=window.innerWidth?re.intervalId.set(vI(window)):Y-QT<=0&&re.intervalId.set(VR(window)))})},CI=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},wI=(e,n)=>{const o=e.getParent(n.parentNode,e.isBlock);CI(n),o&&o!==e.getRoot()&&e.isEmpty(o)&&il(K.fromDom(o))},RW=e=>e.button===0,SI=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),DW=(e,n)=>o=>{if(RW(o)){const r=as(n.dom.getParents(o.target),pI).getOr(null);if(Oe(r)&&_W(n.dom,n.getBody(),r)){const a=n.dom.getPos(r),u=n.getBody(),f=n.getDoc().documentElement;e.set({element:r,dataTransfer:kR(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?u.scrollWidth:f.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:f.offsetHeight)-2,relX:o.pageX-a.x,relY:o.pageY-a.y,width:r.offsetWidth,height:r.offsetHeight,ghost:bI(n,r,r.offsetWidth,r.offsetHeight),intervalId:ts(LR)})}}},MW=(e,n,o)=>{e._selectionOverrides.hideFakeCaret(),uI(e.getBody(),n,o).fold(()=>e.selection.placeCaretAt(n,o),r=>{const a=e._selectionOverrides.showCaret(1,r.node,r.position===zp.Before,!1);a?e.selection.setRng(a):e.selection.placeCaretAt(n,o)})},BC=(e,n,o,r,a)=>{n==="dragstart"&&AF(r,e.dom.getOuterHTML(o));const u=TW(n,o,r,a);return e.dispatch(n,u)},PW=(e,n)=>{const o=kf((a,u)=>MW(n,a,u),0);n.on("remove",o.cancel);const r=e;return a=>e.on(u=>{const f=Math.max(Math.abs(a.screenX-u.screenX),Math.abs(a.screenY-u.screenY));if(!u.dragging&&f>10){const b=BC(n,"dragstart",u.element,u.dataTransfer,a);if(Oe(b.dataTransfer)&&(u.dataTransfer=b.dataTransfer),b.isDefaultPrevented())return;u.dragging=!0,n.focus()}if(u.dragging){const b=a.currentTarget===n.getDoc().documentElement,C=SI(u,fI(n,a));kW(u.ghost,n.getBody()),AW(u.ghost,C,u.width,u.height,u.maxX,u.maxY,a.clientY,a.clientX,n.getContentAreaContainer(),n.getWin(),r,b),o.throttle(a.clientX,a.clientY)}})},NW=e=>{const n=e.getSel();if(Oe(n)){const r=n.getRangeAt(0).startContainer;return Ne(r)?r.parentNode:r}else return null},xI=(e,n)=>o=>{e.on(r=>{var a;if(r.intervalId.clear(),r.dragging){if(HR(n,NW(n.selection),r.element)){const u=(a=n.getDoc().elementFromPoint(o.clientX,o.clientY))!==null&&a!==void 0?a:n.getBody();BC(n,"drop",u,r.dataTransfer,o).isDefaultPrevented()||n.undoManager.transact(()=>{wI(n.dom,r.element),_U(r.dataTransfer).each(b=>n.insertContent(b)),n._selectionOverrides.hideFakeCaret()})}BC(n,"dragend",n.getBody(),r.dataTransfer,o)}}),zR(e)},BW=(e,n,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>BC(n,"dragend",r.element,r.dataTransfer),a=>BC(n,"dragend",r.element,r.dataTransfer,a))}),zR(e)},$W=(e,n)=>o=>BW(e,n,N.some(o)),zR=e=>{e.on(n=>{n.intervalId.clear(),CI(n.ghost)}),e.clear()},FW=e=>{const n=Qs(),o=Yn.DOM,r=document,a=DW(n,e),u=PW(n,e),f=xI(n,e),b=$W(n,e);e.on("mousedown",a),e.on("mousemove",u),e.on("mouseup",f),o.bind(r,"mousemove",u),o.bind(r,"mouseup",b),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",b)}),e.on("keydown",C=>{C.keyCode===ot.ESC&&BW(n,e,N.none())})},UR=e=>{const n=a=>{if(!a.isDefaultPrevented()){const u=a.dataTransfer;u&&(zt(u.types,"Files")||u.files.length>0)&&(a.preventDefault(),a.type==="drop"&&ZE(e,"Dropped file type is not supported"))}},o=a=>{Rx(e,a.target)&&n(a)},r=()=>{const a=Yn.DOM,u=e.dom,f=document,b=e.inline?e.getBody():e.getDoc(),C=["drop","dragover"];Se(C,S=>{a.bind(f,S,o),u.bind(b,S,n)}),e.on("remove",()=>{Se(C,S=>{a.unbind(f,S,o),u.unbind(b,S,n)})})};e.on("init",()=>{Xa.setEditorTimeout(e,r,0)})},IW=e=>{FW(e),Zr(e)&&UR(e)},LW=e=>{const n=kf(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=eT(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},HW=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(yr(o)){const r=pl(e.getBody(),o),a=Dn(r)?r:o;e.selection.getNode()!==a&&y0(e,a).each(u=>e.selection.setRng(u))}})})},H0=Dn,$C=(e,n)=>pl(e.getBody(),n),EI=e=>{const n=e.selection,o=e.dom,r=e.getBody(),a=jS(e,r,o.isBlock,()=>o0(e)),u="sel-"+o.uniqueId(),f="data-mce-selected";let b;const C=st=>Oe(st)&&o.hasClass(st,"mce-offscreen-selection"),S=st=>st!==r&&(H0(st)||yr(st))&&o.isChildOf(st,r)&&o.isEditable(st.parentNode),O=st=>{st&&n.setRng(st)},R=(st,we,he,Ae=!0)=>e.dispatch("ShowCaret",{target:we,direction:st,before:he}).isDefaultPrevented()?null:(Ae&&n.scrollIntoView(we,st===-1),a.show(he,we)),D=st=>{st.hasAttribute("data-mce-caret")&&(Bf(st),n.scrollIntoView(st))},I=()=>{e.on("click",we=>{o.isEditable(we.target)||(we.preventDefault(),e.focus())}),e.on("blur NewBlock",ie),e.on("ResizeWindow FullscreenStateChanged",a.reposition),e.on("tap",we=>{const he=we.target,Ae=$C(e,he);H0(Ae)?(we.preventDefault(),y0(e,Ae).each(ce)):S(he)&&y0(e,he).each(ce)},!0),e.on("mousedown",we=>{const he=we.target;if(he!==r&&he.nodeName!=="HTML"&&!o.isChildOf(he,r)||!bH(e,we.clientX,we.clientY))return;ie(),Ie();const Ae=$C(e,he);H0(Ae)?(we.preventDefault(),y0(e,Ae).each(ce)):uI(r,we.clientX,we.clientY).each(ct=>{we.preventDefault();const Ct=R(1,ct.node,ct.position===zp.Before,!1);O(Ct),La(Ae)?Ae.focus():e.getBody().focus()})}),e.on("keypress",we=>{ot.modifierPressed(we)||H0(n.getNode())&&we.preventDefault()}),e.on("GetSelectionRange",we=>{let he=we.range;if(b){if(!b.parentNode){b=null;return}he=he.cloneRange(),he.selectNode(b),we.range=he}}),e.on("SetSelectionRange",we=>{we.range=Z(we.range);const he=ce(we.range,we.forward);he&&(we.range=he)});const st=we=>tt(we)&&we.id==="mcepastebin";e.on("AfterSetSelectionRange",we=>{const he=we.range,Ae=he.startContainer.parentElement;!H(he)&&!st(Ae)&&Ie(),C(Ae)||ie()}),IW(e),LW(e),HW(e)},z=st=>fa(st)||bn(st)||Cr(st),H=st=>z(st.startContainer)||z(st.endContainer),Z=st=>{const we=e.schema.getVoidElements(),he=o.createRng(),Ae=st.startContainer,ct=st.startOffset,Ct=st.endContainer,rn=st.endOffset;return $t(we,Ae.nodeName.toLowerCase())?ct===0?he.setStartBefore(Ae):he.setStartAfter(Ae):he.setStart(Ae,ct),$t(we,Ct.nodeName.toLowerCase())?rn===0?he.setEndBefore(Ct):he.setEndAfter(Ct):he.setEnd(Ct,rn),he},Y=(st,we)=>{const he=K.fromDom(e.getBody()),Ae=e.getDoc(),ct=St(he,"#"+u).getOrThunk(()=>{const cn=K.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Ae);return ur(cn,"id",u),Bs(he,cn),cn}),Ct=o.createRng();gf(ct),Du(ct,[K.fromText(Es,Ae),K.fromDom(we),K.fromText(Es,Ae)]),Ct.setStart(ct.dom.firstChild,1),Ct.setEnd(ct.dom.lastChild,0),tn(ct,{top:o.getPos(st,e.getBody()).y+"px"}),ip(ct);const rn=n.getSel();return rn&&(rn.removeAllRanges(),rn.addRange(Ct)),Ct},re=st=>{const we=st.cloneNode(!0),he=e.dispatch("ObjectSelected",{target:st,targetClone:we});if(he.isDefaultPrevented())return null;const Ae=Y(st,he.targetClone),ct=K.fromDom(st);return Se(zr(K.fromDom(e.getBody()),`*[${f}]`),Ct=>{Sn(ct,Ct)||Ps(Ct,f)}),o.getAttrib(st,f)||st.setAttribute(f,"1"),b=st,Ie(),Ae},ce=(st,we)=>{if(!st)return null;if(st.collapsed){if(!H(st)){const Ct=we?1:-1,rn=wm(Ct,r,st),cn=rn.getNode(!we);if(Oe(cn)){if(qf(cn))return R(Ct,cn,we?!rn.isAtEnd():!1,!1);if(ja(cn)&&Dn(cn.nextSibling)){const zn=o.createRng();return zn.setStart(cn,0),zn.setEnd(cn,0),zn}}const Pn=rn.getNode(we);if(Oe(Pn)){if(qf(Pn))return R(Ct,Pn,we?!1:!rn.isAtEnd(),!1);if(ja(Pn)&&Dn(Pn.previousSibling)){const zn=o.createRng();return zn.setStart(Pn,1),zn.setEnd(Pn,1),zn}}}return null}let he=st.startContainer,Ae=st.startOffset;const ct=st.endOffset;if(Ne(he)&&Ae===0&&H0(he.parentNode)&&(he=he.parentNode,Ae=o.nodeIndex(he),he=he.parentNode),!tt(he))return null;if(ct===Ae+1&&he===st.endContainer){const Ct=he.childNodes[Ae];if(S(Ct))return re(Ct)}return null},ie=()=>{b&&b.removeAttribute(f),St(K.fromDom(e.getBody()),"#"+u).each(ao),b=null},_e=()=>{a.destroy(),b=null},Ie=()=>{a.hide()};return vd(e)||I(),{showCaret:R,showBlockCaretContainer:D,hideFakeCaret:Ie,destroy:_e}},TI=(e,n)=>{let o=n;for(let r=e.previousSibling;Ne(r);r=r.previousSibling)o+=r.data.length;return o},_I=(e,n,o,r,a)=>{if(Ne(o)&&(r<0||r>o.data.length))return[];const u=a&&Ne(o)?[TI(o,r)]:[r];let f=o;for(;f!==n&&f.parentNode;)u.push(e.nodeIndex(f,a)),f=f.parentNode;return f===n?u.reverse():[]},WR=(e,n,o,r,a,u,f=!1)=>{const b=_I(e,n,o,r,f),C=_I(e,n,a,u,f);return{start:b,end:C}},ZR=(e,n)=>{const o=n.slice(),r=o.pop();return lc(r)?Zo(o,(u,f)=>u.bind(b=>N.from(b.childNodes[f])),N.some(e)).bind(u=>Ne(u)&&(r<0||r>u.data.length)?N.none():N.some({node:u,offset:r})):N.none()},kI=(e,n)=>ZR(e,n.start).bind(({node:o,offset:r})=>ZR(e,n.end).map(({node:a,offset:u})=>{const f=document.createRange();return f.setStart(o,r),f.setEnd(a,u),f})),VW=(e,n,o,r=!1)=>WR(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),V0=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n,Ne(n.firstChild)&&Fa(n.firstChild.data)),V0(e,r,o)}},z0=(e,n,o,r=!0)=>{const a=n.startContainer.parentNode,u=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(Ne(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),Ne(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),V0(e,a,o),a!==u&&V0(e,u,o))},t_=(e,n)=>N.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),jR=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:dS(r).concat(e.blockPatterns),inlinePatterns:Xu(r).concat(e.inlinePatterns)}},GR=(e,n,o,r)=>{const a=e.createRng();return a.setStart(n,0),a.setEnd(o,r),a.toString()},OI=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),n_=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},AI=(e,n,o)=>{const r=kI(e.getRoot(),o).getOrDie("Unable to resolve path range"),a=r.startContainer,u=r.endContainer,f=r.endOffset===0?u:u.splitText(r.endOffset),b=r.startOffset===0?a:a.splitText(r.startOffset),C=b.parentNode,S=f.parentNode;return{prefix:n,end:S.insertBefore(OI(e,n+"-end"),f),start:C.insertBefore(OI(e,n+"-start"),b)}},qR=(e,n,o)=>{V0(e,e.get(n.prefix+"-end"),o),V0(e,e.get(n.prefix+"-start"),o)},o_=e=>e.start.length===0,KR=e=>(n,o)=>{const a=n.data.substring(0,o),u=a.lastIndexOf(e.charAt(e.length-1)),f=a.lastIndexOf(e);return f!==-1?f+e.length:u!==-1?u+1:-1},s_=(e,n,o,r)=>{const a=n.start;return BA(e,r.container,r.offset,KR(a),o).bind(f=>{var b,C;const S=(C=(b=o.textContent)===null||b===void 0?void 0:b.indexOf(a))!==null&&C!==void 0?C:-1;if(S!==-1&&f.offset>=S+a.length){const R=e.createRng();return R.setStart(f.container,f.offset-a.length),R.setEnd(f.container,f.offset),N.some(R)}else{const R=f.offset-a.length;return NA(f.container,R,o).map(D=>{const I=e.createRng();return I.setStart(D.container,D.offset),I.setEnd(f.container,f.offset),I}).filter(D=>D.toString()===a).orThunk(()=>s_(e,n,o,_l(f.container,0)))}})},zW=(e,n,o,r,a,u=!1)=>{if(n.start.length===0&&!u){const f=e.createRng();return f.setStart(o,r),f.setEnd(o,r),N.some(f)}return PA(o,r,a).bind(f=>s_(e,n,a,f).bind(C=>{var S;if(u){if(C.endContainer===f.container&&C.endOffset===f.offset)return N.none();if(f.offset===0&&((S=C.endContainer.textContent)===null||S===void 0?void 0:S.length)===C.endOffset)return N.none()}return N.some(C)}))},YR=(e,n,o,r)=>{const a=e.dom,u=a.getRoot(),f=o.pattern,b=o.position.container,C=o.position.offset;return NA(b,C-o.pattern.end.length,n).bind(S=>{const O=WR(a,u,S.container,S.offset,b,C,r);if(o_(f))return N.some({matches:[{pattern:f,startRng:O,endRng:O}],position:S});{const R=r_(e,o.remainingPatterns,S.container,S.offset,n,r),D=R.getOr({matches:[],position:S}),I=D.position;return zW(a,f,I.container,I.offset,n,R.isNone()).map(H=>{const Z=VW(a,u,H,r);return{matches:D.matches.concat([{pattern:f,startRng:Z,endRng:O}]),position:_l(H.startContainer,H.startOffset)}})}})},r_=(e,n,o,r,a,u)=>{const f=e.dom;return PA(o,r,f.getRoot()).bind(b=>{const C=GR(f,a,o,r);for(let S=0;S<n.length;S++){const O=n[S];if(!Fl(C,O.end))continue;const R=n.slice();R.splice(S,1);const D=YR(e,a,{pattern:O,remainingPatterns:R,position:b},u);if(D.isNone()&&r>0)return r_(e,n,o,r-1,a,u);if(D.isSome())return D}return N.none()})},RI=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?Se(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},DI=(e,n,o,r)=>{const a=n_(e.dom,o);z0(e.dom,a,r),RI(e,n,a)},UW=(e,n,o,r,a)=>{const u=e.dom,f=n_(u,r),b=n_(u,o);z0(u,b,a),z0(u,f,a);const C={prefix:o.prefix,start:o.end,end:r.start},S=n_(u,C);RI(e,n,S)},WW=(e,n)=>{const o=Df("mce_textpattern"),r=Td(n,(a,u)=>{const f=AI(e,o+`_end${a.length}`,u.endRng);return a.concat([{...u,endMarker:f}])},[]);return Td(r,(a,u)=>{const f=r.length-a.length-1,b=o_(u.pattern)?u.endMarker:AI(e,o+`_start${f}`,u.startRng);return a.concat([{...u,startMarker:b}])},[])},ZW=e=>Io(e,(n,o)=>o.end.length-n.end.length),jW=(e,n)=>{const o=ir(e,r=>mo(n,a=>r.pattern.start===a.pattern.start&&r.pattern.end===a.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},MI=(e,n,o,r,a,u)=>{const f=r_(e,a.inlinePatterns,o,r,n,u).fold(()=>[],C=>C.matches),b=r_(e,ZW(a.inlinePatterns),o,r,n,u).fold(()=>[],C=>C.matches);return jW(f,b)},PI=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),a=WW(o,n);Se(a,u=>{const f=o.getParent(u.startMarker.start,o.isBlock),b=C=>C===f;o_(u.pattern)?DI(e,u.pattern,u.endMarker,b):UW(e,u.pattern,u.startMarker,u.endMarker,b),qR(o,u.endMarker,b),qR(o,u.startMarker,b)}),e.selection.moveToBookmark(r)},NI=(e,n,o)=>TT(n,0,n).map(r=>{const a=r.container;return E$(a,o.start.length,n).each(u=>{const f=e.createRng();f.setStart(a,0),f.setEnd(u.container,u.offset),z0(e,f,b=>b===n)}),a}),BI=e=>(n,o)=>{const r=n.dom,a=o.pattern,u=kI(r.getRoot(),o.range).getOrDie("Unable to resolve path range"),f=(b,C)=>{const S=C.get(b);return yn(S)&&Tr(S).exists(O=>$t(O,"block"))};return t_(n,u).each(b=>{a.type==="block-format"?f(a.format,n.formatter)&&n.undoManager.transact(()=>{e(n.dom,b,a),n.formatter.apply(a.format)}):a.type==="block-command"&&n.undoManager.transact(()=>{e(n.dom,b,a),n.execCommand(a.cmd,!1,a.value)})}),!0},$I=e=>Io(e,(n,o)=>o.start.length-n.start.length),FI=e=>(n,o)=>{const r=$I(n),a=o.replace(Es," ");return as(r,u=>e(u,o,a))},c_=(e,n)=>(o,r,a,u,f)=>{var b;f===void 0&&(f=(b=r.textContent)!==null&&b!==void 0?b:"");const C=o.dom,S=gr(o);return C.is(r,S)?e(a.blockPatterns,f).map(O=>n&&Ve.trim(f).length===O.start.length?[]:[{pattern:O,range:WR(C,C.getRoot(),r,0,r,0,u)}]).getOr([]):[]},GW=e=>/^\s[^\s]/.test(e),qW=BI((e,n,o)=>{NI(e,n,o).each(r=>{const a=K.fromDom(r),u=Pf(a);GW(u)&&Nf(a,u.slice(1))})}),KW=FI((e,n,o)=>n.indexOf(e.start)===0||o.indexOf(e.start)===0),YW=c_(KW,!0),XW=(e,n)=>{const o=e.selection.getRng();return t_(e,o).map(r=>{var a;const u=Math.max(0,o.startOffset),f=jR(n,r,(a=r.textContent)!==null&&a!==void 0?a:""),b=MI(e,r,o.startContainer,u,f,!0),C=YW(e,r,f,!0);return{inlineMatches:b,blockMatches:C}}).filter(({inlineMatches:r,blockMatches:a})=>a.length>0||r.length>0)},a_=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();Se(n,r=>qW(e,r)),e.selection.moveToBookmark(o)},JW=BI(NI),QW=FI((e,n,o)=>n===e.start||o===e.start),eZ=c_(QW,!1),tZ=(e,n)=>{const o=e.selection.getRng();return t_(e,o).map(r=>{const a=Math.max(0,o.startOffset),u=GR(e.dom,r,o.startContainer,a),f=jR(n,r,u);return eZ(e,r,f,!1,u)}).filter(r=>r.length>0)},nZ=(e,n)=>{Se(n,o=>JW(e,o))},oZ=(e,n)=>XW(e,n).fold(De,({inlineMatches:o,blockMatches:r})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{X1(e),PI(e,o),a_(e,r);const a=e.selection.getRng(),u=PA(a.startContainer,a.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),u.each(f=>{const b=f.container;b.data.charAt(f.offset-1)===nh&&(b.deleteData(f.offset-1,1),V0(e.dom,b.parentNode,C=>C===e.dom.getRoot()))})}),!0)),sZ=(e,n)=>{const o=e.selection.getRng();t_(e,o).map(r=>{const a=Math.max(0,o.startOffset-1),u=GR(e.dom,r,o.startContainer,a),f=jR(n,r,u),b=MI(e,r,o.startContainer,a,f,!1);b.length>0&&e.undoManager.transact(()=>{PI(e,b)})})},rZ=(e,n)=>tZ(e,n).fold(De,o=>(e.undoManager.transact(()=>{nZ(e,o)}),!0)),II=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},LI=(e,n)=>II(e,n,(o,r)=>o===r.keyCode&&!ot.modifierPressed(r)),cZ=(e,n)=>II(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),HI=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>mr(Hk(e).filter(f=>f.type==="inline-command"||f.type==="block-command"?e.queryCommandSupported(f.cmd):!0),Vk(e)),a=()=>$S(e);e.on("keydown",f=>{if(f.keyCode===13&&!ot.modifierPressed(f)&&e.selection.isCollapsed()&&e.selection.isEditable()){const b=dl(r(),"enter");(b.inlinePatterns.length>0||b.blockPatterns.length>0||a())&&oZ(e,b)&&f.preventDefault()}},!0),e.on("keydown",f=>{if(f.keyCode===32&&e.selection.isCollapsed()&&e.selection.isEditable()){const b=dl(r(),"space");(b.blockPatterns.length>0||a())&&rZ(e,b)&&f.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()&&e.selection.isEditable()){const f=dl(r(),"space");(f.inlinePatterns.length>0||a())&&sZ(e,f)}};e.on("keyup",f=>{LI(o,f)&&u()}),e.on("keypress",f=>{cZ(n,f)&&Xa.setEditorTimeout(e,u)})},aZ=e=>{HI(e)},iZ=e=>{const n=Ve.each,o=ot.BACKSPACE,r=ot.DELETE,a=e.dom,u=e.selection,f=e.parser,b=qt.browser,C=b.isFirefox(),S=b.isChromium()||b.isSafari(),O=qt.deviceType.isiPhone()||qt.deviceType.isiPad(),R=qt.os.isMacOS()||qt.os.isiOS(),D=(et,_t)=>{try{e.getDoc().execCommand(et,!1,String(_t))}catch{}},I=et=>et.isDefaultPrevented(),z=()=>{const et=Pt=>{const Qe=a.create("body"),on=Pt.cloneContents();return Qe.appendChild(on),u.serializer.serialize(Qe,{format:"html"})},_t=Pt=>{const Qe=et(Pt),on=a.createRng();on.selectNode(e.getBody());const dn=et(on);return Qe===dn};e.on("keydown",Pt=>{const Qe=Pt.keyCode;if(!I(Pt)&&(Qe===r||Qe===o)&&e.selection.isEditable()){const on=e.selection.isCollapsed(),dn=e.getBody();if(on&&!Fs(e.schema,dn)||!on&&!_t(e.selection.getRng()))return;Pt.preventDefault(),e.setContent(""),dn.firstChild&&a.isBlock(dn.firstChild)?e.selection.setCursorLocation(dn.firstChild,0):e.selection.setCursorLocation(dn,0),e.nodeChanged()}})},H=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},Z=()=>{e.inline||a.bind(e.getDoc(),"mousedown mouseup",et=>{let _t;if(et.target===e.getDoc().documentElement)if(_t=u.getRng(),e.getBody().focus(),et.type==="mousedown"){if(fa(_t.startContainer))return;u.placeCaretAt(et.clientX,et.clientY)}else u.setRng(_t)})},Y=()=>{e.on("keydown",et=>{if(!I(et)&&et.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const _t=u.getNode(),Pt=_t.previousSibling;if(_t.nodeName==="HR"){a.remove(_t),et.preventDefault();return}Pt&&Pt.nodeName&&Pt.nodeName.toLowerCase()==="hr"&&(a.remove(Pt),et.preventDefault())}}})},re=()=>{Range.prototype.getClientRects||e.on("mousedown",et=>{if(!I(et)&&et.target.nodeName==="HTML"){const _t=e.getBody();_t.blur(),Xa.setEditorTimeout(e,()=>{_t.focus()})}})},ce=()=>{const et=Cy(e);e.on("click",_t=>{const Pt=_t.target;/^(IMG|HR)$/.test(Pt.nodeName)&&a.isEditable(Pt)&&(_t.preventDefault(),e.selection.select(Pt),e.nodeChanged()),Pt.nodeName==="A"&&a.hasClass(Pt,et)&&Pt.childNodes.length===0&&a.isEditable(Pt.parentNode)&&(_t.preventDefault(),u.select(Pt))})},ie=()=>{const et=()=>{const Pt=a.getAttribs(u.getStart().cloneNode(!1));return()=>{const Qe=u.getStart();Qe!==e.getBody()&&(a.setAttrib(Qe,"style",null),n(Pt,on=>{Qe.setAttributeNode(on.cloneNode(!0))}))}},_t=()=>!u.isCollapsed()&&a.getParent(u.getStart(),a.isBlock)!==a.getParent(u.getEnd(),a.isBlock);e.on("keypress",Pt=>{let Qe;return!I(Pt)&&(Pt.keyCode===8||Pt.keyCode===46)&&_t()?(Qe=et(),e.getDoc().execCommand("delete",!1),Qe(),Pt.preventDefault(),!1):!0}),a.bind(e.getDoc(),"cut",Pt=>{if(!I(Pt)&&_t()){const Qe=et();Xa.setEditorTimeout(e,()=>{Qe()})}})},_e=()=>{e.on("keydown",et=>{if(!I(et)&&et.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const _t=u.getNode().previousSibling;if(_t&&_t.nodeName&&_t.nodeName.toLowerCase()==="table")return et.preventDefault(),!1}return!0})},Ie=()=>{e.on("keydown",et=>{if(I(et)||et.keyCode!==ot.BACKSPACE)return;let _t=u.getRng();const Pt=_t.startContainer,Qe=_t.startOffset,on=a.getRoot();let dn=Pt;if(!(!_t.collapsed||Qe!==0)){for(;dn.parentNode&&dn.parentNode.firstChild===dn&&dn.parentNode!==on;)dn=dn.parentNode;dn.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,dn),_t=a.createRng(),_t.setStart(Pt,0),_t.setEnd(Pt,0),u.setRng(_t))}})},st=()=>{const et=()=>{D("StyleWithCSS",!1),D("enableInlineTableEditing",!1),zf(e)||D("enableObjectResizing",!1)};ES(e)||e.on("BeforeExecCommand mousedown",et)},we=()=>{const et=()=>{n(a.select("a:not([data-mce-block])"),_t=>{var Pt;let Qe=_t.parentNode;const on=a.getRoot();if((Qe==null?void 0:Qe.lastChild)===_t){for(;Qe&&!a.isBlock(Qe);){if(((Pt=Qe.parentNode)===null||Pt===void 0?void 0:Pt.lastChild)!==Qe||Qe===on)return;Qe=Qe.parentNode}a.add(Qe,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",_t=>{(_t.type==="setcontent"||_t.command==="mceInsertLink")&&et()})},he=()=>{e.on("init",()=>{D("DefaultParagraphSeparator",gr(e))})},Ae=et=>{const _t=et.getBody(),Pt=et.selection.getRng();return Pt.startContainer===Pt.endContainer&&Pt.startContainer===_t&&Pt.startOffset===0&&Pt.endOffset===_t.childNodes.length},ct=()=>{e.on("keyup focusin mouseup",et=>{!ot.modifierPressed(et)&&!Ae(e)&&u.normalize()},!0)},Ct=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},rn=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},cn=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",et=>{let _t;et.target.nodeName==="HTML"&&(_t=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(_t),e.selection.normalize(),e.nodeChanged())}))},Pn=()=>{R&&e.on("keydown",et=>{ot.metaKeyPressed(et)&&!et.shiftKey&&(et.keyCode===37||et.keyCode===39)&&(et.preventDefault(),e.selection.getSel().modify("move",et.keyCode===37?"backward":"forward","lineboundary"))})},zn=()=>{e.on("click",et=>{let _t=et.target;do if(_t.tagName==="A"){et.preventDefault();return}while(_t=_t.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Jo=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",et=>{et.preventDefault()})})},Cs=()=>{f.addNodeFilter("br",et=>{let _t=et.length;for(;_t--;)et[_t].attr("class")==="Apple-interchange-newline"&&et[_t].remove()})},ar=Ot,Ge=()=>{if(!C||e.removed)return!1;const et=e.selection.getSel();return!et||!et.rangeCount||et.rangeCount===0},vt=()=>{S&&(Z(),ce(),Jo(),H(),O&&(rn(),cn(),zn())),C&&(re(),st(),Ct(),Pn())},Tn=()=>{Ie(),z(),qt.windowsPhone||ct(),S&&(Z(),ce(),he(),Jo(),_e(),Cs(),O?(rn(),cn(),zn()):H()),C&&(Y(),re(),ie(),st(),we(),Ct(),Pn(),_e())};return vd(e)?vt():Tn(),{refreshContentEditable:ar,isHidden:Ge}},VI=e=>e.toLowerCase()==="gpl",FC=e=>e.length>=64&&e.length<=255,lZ=e=>VI(e)||FC(e)?"VALID":"INVALID",zI=e=>{const n=Zf(e);!J(LS(e))&&(ss(n)||lZ(n)==="INVALID")&&console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")},XR=Yn.DOM,uZ=(e,n)=>{const o=K.fromDom(e.getBody()),r=Xg(bi(o)),a=K.fromTag("style");ur(a,"type","text/css"),Bs(a,K.fromText(n)),Bs(r,a),e.on("remove",()=>{ao(a)})},dZ=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,JR=e=>Eo(e,n=>ss(n)===!1),QR=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return JR({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_mathml_annotation_encodings:n("allow_mathml_annotation_encodings"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_unsafe_embeds:n("convert_unsafe_embeds"),convert_fonts_to_spans:n("convert_fonts_to_spans"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),inline_styles:n("inline_styles"),root_name:dZ(e),sandbox_iframes:n("sandbox_iframes"),sandbox_iframes_exclusions:_y(e),sanitize:n("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},UI=e=>{const n=e.options.get;return JR({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},WI=e=>{const n=e.options.get;return{...QR(e),...UI(e),...JR({remove_trailing_brs:n("remove_trailing_brs"),pad_empty_with_br:n("pad_empty_with_br"),url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},mZ=e=>{const n=Tp(QR(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const a=e.dom,u="data-mce-"+r;let f=o.length;for(;f--;){const b=o[f];let C=b.attr(r);if(C&&!b.attr(u)){if(C.indexOf("data:")===0||C.indexOf("blob:")===0)continue;r==="style"?(C=a.serializeStyle(a.parseStyle(C),b.name),C.length||(C=null),b.attr(u,C),b.attr(r,C)):r==="tabindex"?(b.attr(u,C),b.attr(r,null)):b.attr(u,e.convertURL(C,r,b.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const a=o[r],u=a.attr("type")||"no/type";u.indexOf("mce-")!==0&&a.attr("type","mce-"+u)}}),vb(e)&&n.addNodeFilter("#cdata",o=>{var r;let a=o.length;for(;a--;){const u=o[a];u.type=8,u.name="#comment",u.value="[CDATA["+e.dom.encode((r=u.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const a=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(a)&&u.getAll("br").length===0&&u.append(new _c("br",1))}}),n},fZ=e=>{const n=hb(e);n&&Xa.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},gZ=e=>{const n=e.dom.getRoot();!e.inline&&(!Pb(e)||e.selection.getStart(!0)===n)&&Pr(n).each(o=>{const r=o.getNode(),a=yi(r)?Pr(r).getOr(o):o;e.selection.setRng(a.toRange())})},hZ=e=>{e.bindPendingEventDelegates(),e.initialized=!0,zb(e),e.focus(!0),gZ(e),e.nodeChanged({initial:!0});const n=Fk(e);Q(n)&&n.call(e,e),fZ(e)},eD=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,pZ=(e,n,o)=>{const{pass:r,fail:a}=Er(n,b=>tinymce.Resource.has(AO(b))),f=[...r.map(b=>{const C=tinymce.Resource.get(AO(b));return J(C)?Promise.resolve(eD(e).loadRawCss(b,C)):Promise.resolve()}),eD(e).loadAll(a)];return e.inline?f:f.concat([e.ui.styleSheetLoader.loadAll(o)])},ZI=e=>{const n=eD(e),o=Rk(e),r=e.contentCSS,a=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?a():e.on("remove",a)};if(e.contentStyles.length>0){let C="";Ve.each(e.contentStyles,S=>{C+=S+`\r
`}),e.dom.addStyle(C)}const f=Promise.all(pZ(e,r,o)).then(u).catch(u),b=wc(e);return b&&uZ(e,b),f},bZ=e=>{const n=e.getDoc(),o=e.getBody();yx(e),OS(e)||(n.body.spellcheck=!1,XR.setAttrib(o,"spellcheck","false")),e.quirks=iZ(e),e2(e);const r=Dk(e);r!==void 0&&(o.dir=r);const a=wy(e);a&&e.on("BeforeSetContent",u=>{Ve.each(a,f=>{u.content=u.content.replace(f,b=>"<!--mce:protected "+escape(b)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},vZ=e=>{vd(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},i_=e=>{e.removed!==!0&&(vZ(e),hZ(e))},tD=e=>{let n=!1;const o=setTimeout(()=>{n||e.setProgressState(!0)},500);return()=>{clearTimeout(o),n=!0,e.setProgressState(!1)}},nD=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(XR.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=ES(e),e._editableRoot=Bk(e),e.hasEditableRoot()&&(e.inline&&XR.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=OH(e),e.schema=Fn(UI(e)),e.dom=Yn(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:vS(e),referrerPolicy:Ph(e),onSetAttrib:f=>{e.dispatch("SetAttrib",f)}}),e.parser=mZ(e),e.serializer=bN(WI(e),e),e.selection=YL(e.dom,e.getWin(),e.serializer,e),e.annotator=Di(e),e.formatter=b0(e),e.undoManager=PO(e),e._nodeChangeDispatcher=new TF(e),e._selectionOverrides=EI(e),HV(e),lW(e),QB(e),vd(e)||(fW(e),aZ(e));const a=fU(e);FV(e,a),zV(e),NH(e),nI(e);const u=wO(e);bZ(e),zI(e),u.fold(()=>{const f=tD(e);ZI(e).then(()=>{i_(e),f()})},f=>{e.setProgressState(!0),ZI(e).then(()=>{f().then(b=>{e.setProgressState(!1),i_(e),lN(e)},b=>{e.notificationManager.open({type:"error",text:String(b)}),i_(e),lN(e)})})})},jI=it,yZ=(e,n,o)=>mw(e,n,jI,o),oD=Yn.DOM,CZ=(e,n,o,r)=>{const a=K.fromTag("iframe");return r.each(u=>ur(a,"tabindex",u)),Lr(a,o),Lr(a,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),ku(a,"tox-edit-area__iframe"),a},GI=e=>{let n=fr(e)+"<html><head>";gS(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=Ju(e),r=hS(e),a=e.translate(Lh(e));return dy(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+dy(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${a}"><br></body></html>`,n},qI=(e,n)=>{const o=qt.browser.isFirefox()?Lh(e):"Rich Text Area",r=e.translate(o),a=ca(K.fromDom(e.getElement()),"tabindex").bind(Rd),u=CZ(e.id,r,Ok(e),a).dom;u.onload=()=>{u.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=u,e.iframeHTML=GI(e),oD.add(n.iframeContainer,u)},wZ=e=>{const n=e.iframeElement,o=()=>{e.contentDocument=n.contentDocument,nD(e)};if(ls(e)||qt.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=yZ(K.fromDom(n),"load",()=>{r.unbind(),o()});n.srcdoc=e.iframeHTML}},SZ=(e,n)=>{qI(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=oD.isHidden(n.editorContainer)),e.getElement().style.display="none",oD.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,wZ(e)},l_=Yn.DOM,u_=(e,n,o)=>{const r=yd.get(o),a=yd.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=Ve.trim(o),r&&Ve.inArray(n,o)===-1){if(e.plugins[o])return;try{const u=r(e,a)||{};e.plugins[o]=u,Q(u.init)&&(u.init(e,a),n.push(o))}catch(u){SH(e,o,u)}}},d_=e=>e.replace(/^\-/,""),Ym=e=>{const n=[];Se(Ih(e),o=>{u_(e,n,d_(o))})},m_=e=>{const n=Ve.trim(is(e)),o=e.ui.registry.getAll().icons,r={...WE.get("default").icons,...WE.get(n).icons};rt(r,(a,u)=>{$t(o,u)||e.ui.registry.addIcon(u,a)})},U0=e=>{const n=ed(e);if(J(n)){const o=Tg.get(n);e.theme=o(e,Tg.urls[n])||{},Q(e.theme.init)&&e.theme.init(e,Tg.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},KI=e=>{const n=mb(e),o=p0.get(n);e.model=o(e,p0.urls[n])},xZ=e=>{const n=e.theme.renderUI;return n?n():f_(e)},EZ=e=>{const n=e.getElement(),r=ed(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},sD=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),TZ=e=>{const n=l_.create("div");return l_.insertAfter(n,e),sD(n,n)},f_=e=>{const n=e.getElement();return e.inline?sD(null):TZ(n)},g_=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,J(ed(e))?xZ(e):Q(ed(e))?EZ(e):f_(e)},Ng=(e,n)=>{const o={show:N.from(n.show).getOr(Ot),hide:N.from(n.hide).getOr(Ot),isEnabled:N.from(n.isEnabled).getOr(it),setEnabled:r=>{r&&e.mode.get()==="readonly"||N.from(n.setEnabled).each(u=>u(r))}};e.ui={...e.ui,...o}},Wp=async e=>{e.dispatch("ScriptsLoaded"),m_(e),U0(e),KI(e),Ym(e);const n=await g_(e);Ng(e,N.from(n.api).getOr({})),e.editorContainer=n.editorContainer,TH(e),e.inline?nD(e):SZ(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},Bg=Yn.DOM,YI=e=>e.charAt(0)==="-",_Z=(e,n)=>{const o=db(n),r=Nh(n);if(!_i.hasCode(o)&&o!=="en"){const a=Jn(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(a).catch(()=>{UG(n,a,o)})}},kZ=(e,n)=>{const o=ed(e);if(J(o)&&!YI(o)&&!$t(Tg.urls,o)){const r=CS(e),a=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;Tg.load(o,a).catch(()=>{iu(e,a,o)})}},OZ=(e,n)=>{const o=mb(e);if(o!=="plugin"&&!$t(p0.urls,o)){const r=by(e),a=J(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;p0.load(o,a).catch(()=>{OO(e,a,o)})}},AZ=e=>N.from(ub(e)).filter(Jn).map(n=>({url:n,name:N.none()})),XI=(e,n,o)=>N.from(n).filter(r=>Jn(r)&&!WE.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:N.some(r)})),JI=(e,n,o)=>{const r=XI(n,"default",o),a=AZ(n).orThunk(()=>XI(n,is(n),""));Se(XC([r,a]),u=>{e.add(u.url).catch(()=>{wH(n,u.url,u.name.getOrUndefined())})})},RZ=(e,n)=>{const o=(r,a)=>{yd.load(r,a).catch(()=>{CH(e,a,r)})};rt(_S(e),(r,a)=>{o(a,r),e.options.set("plugins",Ih(e).concat(a))}),Se(Ih(e),r=>{r=Ve.trim(r),r&&!yd.urls[r]&&!YI(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},DZ=e=>{const n=ed(e);return!J(n)||Oe(Tg.get(n))},MZ=e=>{const n=mb(e);return Oe(p0.get(n))},dq=(e,n)=>{const o=cl.ScriptLoader,r=()=>{!e.removed&&DZ(e)&&MZ(e)&&Wp(e)};kZ(e,n),OZ(e,n),_Z(o,e),JI(o,e,n),RZ(e,n),o.loadQueue().then(r,r)},PZ=(e,n)=>M1.forElement(e,{contentCssCors:TS(n),referrerPolicy:Ph(n)}),rD=e=>{const n=e.id;_i.setCode(db(e));const o=()=>{Bg.unbind(window,"ready",o),e.render()};if(!nm.Event.domLoaded){Bg.bind(window,"ready",o);return}if(!e.getElement())return;const r=K.fromDom(e.getElement()),a=m1(r);e.on("remove",()=>{yu(r.dom.attributes,f=>Ps(r,f.name)),Lr(r,a)}),e.ui.styleSheetLoader=PZ(r,e),vm(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||Bg.getParent(n,"form");u&&(e.formElement=u,Fh(e)&&!_o(e.getElement())&&(Bg.insertAfter(Bg.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=f=>{e.dispatch(f.type,f)},Bg.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),Mk(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=DN(e),e.notificationManager=AN(e),yb(e)&&e.on("GetContent",f=>{f.save&&(f.content=Bg.encode(f.content))}),vy(e)&&e.on("submit",()=>{e.initialized&&e.save()}),Pk(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),dq(e,e.suffix)},NZ=(e,n)=>{e._editableRoot!==n&&(e._editableRoot=n,e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged(),qn(e,n))},BZ=e=>e._editableRoot,QI=(e,n)=>({sections:Ke(e),options:Ke(n)}),e6=Ki().deviceType,cD=e6.isPhone(),$Z=e6.isTablet(),Zp=e=>{if(An(e))return[];{const n=yn(e)?e:e.split(/[ ,]/),o=Gt(n,Ad);return Rt(o,Jn)}},FZ=(e,n)=>{const o=kd(n,(r,a)=>zt(e,a));return QI(o.t,o.f)},IZ=(e,n,o={})=>{const r=e.sections(),a=bo(r,n).getOr({});return Ve.extend({},o,a)},aD=(e,n)=>$t(e.sections(),n),LZ=(e,n)=>aD(e,n)?e.sections()[n]:{},t6=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:bo(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),iD=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?Ve.extend({},e.external_plugins,r):r},n6=(e,n)=>[...Zp(e),...Zp(n)],lD=(e,n,o,r)=>e&&aD(n,"mobile")?r:o,HZ=(e,n,o,r)=>{const a=Zp(o.forced_plugins),u=Zp(r.plugins),f=LZ(n,"mobile"),b=f.plugins?Zp(f.plugins):u,C=lD(e,n,u,b),S=n6(a,C);return Ve.extend(r,{forced_plugins:a,plugins:S})},mq=(e,n)=>e&&aD(n,"mobile"),fq=(e,n,o,r,a)=>{var u;const f=e?{mobile:t6((u=a.mobile)!==null&&u!==void 0?u:{},n)}:{},b=FZ(["mobile"],SC(f,a)),C=Ve.extend(o,r,b.options(),mq(e,b)?IZ(b,"mobile"):{},{external_plugins:iD(r,b.options())});return HZ(e,b,r,C)},VZ=(e,n)=>{const o=UA(n);return fq(cD||$Z,cD,o,e,o)},o6=(e,n)=>HL(e,n),zZ=e=>{const n=(r,a)=>{e.formatter.toggle(r,a),e.nodeChanged()},o=r=>()=>{Se("left,center,right,justify".split(","),a=>{r!==a&&e.formatter.remove("align"+a)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},UZ=e=>{const n=o=>()=>{const r=e.selection,a=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return mo(a,u=>Oe(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},WZ=e=>{zZ(e),UZ(e)},gq=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let a=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(qt.os.isMacOS()||qt.os.isiOS())&&(a=a.replace(/Ctrl\+/g,"+")),e.notificationManager.open({text:a,type:"error"})}}})},hq=(e,n,o,r)=>{const a=K.fromDom(e.getRoot());return m2(a,Ce.fromRangeStart(n),r)?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),f2(a,Ce.fromRangeEnd(n),r)?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},s6=e=>{if(typeof e!="string"){const n=Ve.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},r6=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?hq(r,o.getRng(),n,e.schema):n},h_=(e,n)=>{if(e.selection.isEditable()){const{content:o,details:r}=s6(n);OE(e,{...r,content:r6(e,o),format:"html",set:!1,selection:!0}).each(a=>{const u=IG(e,a.content,r);AE(e,u,a),e.addVisual()})}},ZZ=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{h_(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{h_(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{h_(e,r)},mceInsertContent:(n,o,r)=>{h_(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(RS(e))}})},jZ={"font-size":"size","font-family":"face"},pq=Ji("font"),bq=(e,n,o)=>{const r=u=>v1(u,e).orThunk(()=>pq(u)?bo(jZ,e).bind(f=>ca(u,f)):N.none()),a=u=>Sn(K.fromDom(n),u);return T2(K.fromDom(o),u=>r(u),a)},vq=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),GZ=(e,n)=>N.from(Yn.DOM.getStyle(n,e,!0)),qZ=e=>(n,o)=>N.from(o).map(K.fromDom).filter(vo).bind(r=>bq(e,n,r.dom).or(GZ(e,r.dom))).getOr(""),KZ=qZ("font-size"),jp=k(vq,qZ("font-family")),uD=e=>Pr(e.getBody()).bind(n=>{const o=n.container();return N.from(Ne(o)?o.parentNode:o)}),p_=e=>N.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?N.none():N.from(e.selection.getStart(!0))}),c6=(e,n)=>p_(e).orThunk(Be(uD,e)).map(K.fromDom).filter(vo).bind(n),b_=(e,n)=>c6(e,rs(N.some,n)),dD=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=Wf(e),a=nd(e);return a.length>0?a[o-1]||n:r[o-1]||n}else return n}else return n},YZ=e=>{const n=e.split(/\s*,\s*/);return Gt(n,o=>o.indexOf(" ")!==-1&&!(fs(o,'"')||fs(o,"'"))?`'${o}'`:o).join(",")},XZ=(e,n)=>{const o=dD(e,n);e.formatter.toggle("fontname",{value:YZ(o)}),e.nodeChanged()},JZ=e=>b_(e,n=>jp(e.getBody(),n.dom)).getOr(""),QZ=(e,n)=>{e.formatter.toggle("fontsize",{value:dD(e,n)}),e.nodeChanged()},ej=e=>b_(e,n=>KZ(e.getBody(),n.dom)).getOr(""),tj=e=>b_(e,n=>{const o=K.fromDom(e.getBody()),r=T2(n,u=>v1(u,"line-height"),Be(Sn,o)),a=()=>{const u=parseFloat(es(n,"line-height")),f=parseFloat(es(n,"font-size"));return String(u/f)};return r.getOrThunk(a)}).getOr(""),$g=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},nj=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,a)=>{n(o,{value:a})},BackColor:(o,r,a)=>{n("hilitecolor",{value:a})},FontName:(o,r,a)=>{XZ(e,a)},FontSize:(o,r,a)=>{QZ(e,a)},LineHeight:(o,r,a)=>{$g(e,a)},Lang:(o,r,a)=>{var u;n(o,{value:a.code,customValue:(u=a.customCode)!==null&&u!==void 0?u:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,a)=>{n(J(a)?a:"p")},mceToggleFormat:(o,r,a)=>{n(a)}})},a6=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>JZ(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>ej(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>tj(e))},oj=e=>{nj(e),a6(e)},v_=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},sj=e=>{e.editorCommands.addCommands({Indent:()=>{Ip(e)},Outdent:()=>{pT(e)}}),e.editorCommands.addCommands({Outdent:()=>bA(e)},"state")},rj=e=>{const n=(o,r,a)=>{if(e.mode.isReadOnly())return;const u=J(a)?{href:a}:a,f=e.dom.getParent(e.selection.getNode(),"a");hn(u)&&J(u.href)&&(u.href=u.href.replace(/ /g,"%20"),(!f||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,f))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})},cj=(e,n,o,r)=>{const a=e.dom,u=b=>a.isBlock(b)&&b.parentElement===o,f=u(n)?n:a.getParent(r,u,o);return N.from(f).map(K.fromDom)},mD=(e,n)=>{if(e.mode.isReadOnly())return;const o=e.dom,r=e.selection.getRng(),a=n?e.selection.getStart():e.selection.getEnd(),u=n?r.startContainer:r.endContainer,f=M0(o,u);if(!f||!f.isContentEditable)return;const b=n?co:vi,C=gr(e);cj(e,a,f,u).each(S=>{const O=cR(e,u,S.dom,f,!1,C);b(S,K.fromDom(O)),e.selection.setCursorLocation(O,0),e.dispatch("NewBlock",{newBlock:O}),R0(e,"insertParagraph")})},aj=e=>mD(e,!0),ij=e=>mD(e,!1),lj=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{aj(e)},InsertNewBlockAfter:()=>{ij(e)}})},uj=e=>{e.editorCommands.addCommands({insertParagraph:()=>{Hp(jz,e)},mceInsertNewLine:(n,o,r)=>{bF(e,r)},InsertLineBreak:(n,o,r)=>{Hp(mF,e)}})},fD=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let a=0;e.dom.getParent(e.selection.getNode(),u=>tt(u)&&a++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),Te);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},dj=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const a=r??e.selection.getNode();if(a!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(a,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{bM(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},mj=e=>{WZ(e),gq(e),v_(e),fD(e),ZZ(e),rj(e),sj(e),lj(e),uj(e),oj(e),dj(e)},js=["toggleview"],i6=e=>zt(js,e.toLowerCase());class l6{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,a){const u=this.editor,f=n.toLowerCase(),b=a==null?void 0:a.skip_focus;if(u.removed||(f!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(f)&&!b?u.focus():Ax(u)),u.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const S=this.commands.exec[f];return Q(S)?(S(f,o,r),u.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!i6(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return Q(r)?r(o):!1}queryCommandValue(n){if(!i6(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return Q(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;rt(n,(a,u)=>{Se(u.toLowerCase().split(","),f=>{r[o][f]=a})})}addCommand(n,o,r){const a=n.toLowerCase();this.commands.exec[a]=(u,f,b)=>o.call(r??this.editor,f,b)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r??this.editor)}}const gD=(e,n,o)=>{h1(e,n)&&!o?cf(e,n):o&&ku(e,n)},y_=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},C_=(e,n)=>{e.dom.contentEditable="true"},fj=e=>{N.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},gj=e=>{e.selection.setRng(e.selection.getRng())},hj=(e,n)=>{y_(e,"StyleWithCSS",n),y_(e,"enableInlineTableEditing",n),y_(e,"enableObjectResizing",n)},pj=e=>{e.readonly=!0,e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),fj(e)},bj=(e,n)=>{e.readonly=!1,e.hasEditableRoot()&&C_(n),hj(e,!1),pM(e)&&e.focus(),gj(e),e.nodeChanged()},vj=(e,n)=>{const o=K.fromDom(e.getBody());gD(o,"mce-content-readonly",n),n?(pj(e),e.hasEditableRoot()&&C_(o)):bj(e,o)},W0=e=>e.readonly,yj=e=>e.type==="click",Z0=["copy"],hu=e=>zt(Z0,e.type),Cj=(e,n)=>Ru(n,"a",r=>Sn(r,K.fromDom(e.getBody()))).bind(r=>ca(r,"href")),wj=(e,n)=>{if(yj(n)&&!ot.metaKeyPressed(n)){const o=K.fromDom(n.target);Cj(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const a=e.dom.select(`${r},[name="${sf(r,"#")}"]`);a.length&&e.selection.scrollIntoView(a[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else hu(n)&&e.dispatch(n.type,n)},Sj=e=>{e.on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",n=>{W0(e)&&n.preventDefault()}),e.on("BeforeExecCommand",n=>{(n.command==="Undo"||n.command==="Redo")&&W0(e)&&n.preventDefault()}),e.on("input",n=>{if(!n.isComposing&&W0(e)){const o=e.undoManager.add();Oe(o)&&e.undoManager.undo()}}),e.on("compositionend",()=>{if(W0(e)){const n=e.undoManager.add();Oe(n)&&e.undoManager.undo()}})},xj=Ve.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class hD{static isNative(n){return!!xj[n.toLowerCase()]}constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||De}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),a=tm(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(a);const u=this.bindings[r];if(u)for(let f=0,b=u.length;f<b;f++){const C=u[f];if(!C.removed){if(C.once&&this.off(r,C.func),a.isImmediatePropagationStopped())return a;if(C.func.call(this.scope,a)===!1)return a.preventDefault(),a}}return a}on(n,o,r,a){if(o===!1&&(o=De),o){const u={func:o,removed:!1};a&&Ve.extend(u,a);const f=n.toLowerCase().split(" ");let b=f.length;for(;b--;){const C=f[b];let S=this.bindings[C];S||(S=[],this.toggleEvent(C,!0)),r?S=[u,...S]:S=[...S,u],this.bindings[C]=S}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let a=r.length;for(;a--;){const u=r[a];let f=this.bindings[u];if(!u)return rt(this.bindings,(b,C)=>{this.toggleEvent(C,!1),delete this.bindings[C]}),this;if(f){if(!o)f.length=0;else{const b=Er(f,C=>C.func===o);f=b.fail,this.bindings[u]=f,Se(b.pass,C=>{C.removed=!0})}f.length||(this.toggleEvent(n,!1),delete this.bindings[u])}}}else rt(this.bindings,(r,a)=>{this.toggleEvent(a,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const IC=e=>(e._eventDispatcher||(e._eventDispatcher=new hD({scope:e,toggleEvent:(n,o)=>{hD.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),pD={fire(e,n,o){return this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return tm(e.toLowerCase(),n??{},r);const a=IC(r).dispatch(e,n);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!a.isPropagationStopped();)u.dispatch(e,a,!1),u=u.parent?u.parent():void 0}return a},on(e,n,o){return IC(this).on(e,n,o)},off(e,n){return IC(this).off(e,n)},once(e,n){return IC(this).once(e,n)},hasEventListeners(e){return IC(this).has(e)}},w_=Yn.DOM;let Gp;const bD=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const o=Dr(e);return o?(e.eventRoot||(e.eventRoot=w_.select(o)[0]),e.eventRoot):e.getBody()},Ej=e=>!e.hidden,u6=(e,n,o)=>{Ej(e)?e.dispatch(n,o):W0(e)&&wj(e,o)},d6=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=bD(e,n);if(Dr(e)){if(Gp||(Gp={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||Gp&&(rt(Gp,(a,u)=>{e.dom.unbind(bD(e,u))}),Gp=null)})),Gp[n])return;const r=a=>{const u=a.target,f=e.editorManager.get();let b=f.length;for(;b--;){const C=f[b].getBody();(C===u||w_.isChildOf(u,C))&&u6(f[b],n,a)}};Gp[n]=r,w_.bind(o,n,r)}else{const r=a=>{u6(e,n,a)};w_.bind(o,n,r),e.delegates[n]=r}},m6={...pD,bindPendingEventDelegates(){const e=this;Ve.each(e._pendingNativeEvents,n=>{d6(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?d6(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(bD(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(rt(e.delegates,(r,a)=>{e.dom.unbind(bD(e,a),a,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},Tj=e=>J(e)?{value:e.split(/[ ,]/),valid:!0}:Vn(e,J)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},_j=e=>{const n=(()=>{switch(e){case"array":return yn;case"boolean":return an;case"function":return Q;case"number":return lc;case"object":return hn;case"string":return J;case"string[]":return Tj;case"object[]":return o=>Vn(o,hn);case"regexp":return o=>Bo(o,RegExp);default:return it}})();return o=>vD(o,n,`The value must be a ${e}.`)},kj=e=>J(e.processor),f6=(e,n)=>{const o=Dc(n.message)?"":`. ${n.message}`;return e+o},g6=e=>e.valid,vD=(e,n,o="")=>{const r=n(e);return an(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},Oj=(e,n,o)=>{if(!ss(n)){const r=vD(n,o);if(g6(r))return r.value;console.error(f6(`Invalid default value passed for the "${e}" option`,r))}},Aj=(e,n,o=n)=>{const r={},a={},u=(I,z,H)=>{const Z=vD(z,H);return g6(Z)?(a[I]=Z.value,!0):(console.warn(f6(`Invalid value passed for the ${I} option`,Z)),!1)},f=(I,z)=>{const H=kj(z)?_j(z.processor):z.processor,Z=Oj(I,z.default,H);r[I]={...z,default:Z,processor:H},bo(a,I).orThunk(()=>bo(n,I)).each(re=>u(I,re,H))},b=I=>$t(r,I);return{register:f,isRegistered:b,get:I=>bo(a,I).orThunk(()=>bo(r,I).map(z=>z.default)).getOrUndefined(),set:(I,z)=>{if(b(I)){const H=r[I];return H.immutable?(console.error(`"${I}" is an immutable option and cannot be updated`),!1):u(I,z,H.processor)}else return console.warn(`"${I}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:I=>{const z=b(I);return z&&delete a[I],z},isSet:I=>$t(a,I),debug:()=>{try{console.log(JSON.parse(JSON.stringify(o,(I,z)=>an(z)||lc(z)||J(z)||te(z)||yn(z)||Ks(z)?z:Object.prototype.toString.call(z))))}catch(I){console.error(I)}}}},Rj=["design","readonly"],h6=(e,n,o,r)=>{const a=o[n.get()],u=o[r];try{u.activate()}catch(f){console.error(`problem while activating editor mode ${r}:`,f);return}a.deactivate(),a.editorReadOnly!==u.editorReadOnly&&vj(e,u.editorReadOnly),n.set(r),m4(e,r)},Dj=(e,n,o,r)=>{if(r!==o.get()){if(!$t(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?h6(e,o,n,r):e.on("init",()=>h6(e,o,n,r))}},Mj=(e,n,o)=>{if(zt(Rj,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},Pj=e=>{const n=io("design"),o=io({design:{activate:Ot,deactivate:Ot,editorReadOnly:!1},readonly:{activate:Ot,deactivate:Ot,editorReadOnly:!0}});return Sj(e),{isReadOnly:()=>W0(e),set:r=>Dj(e,o.get(),n,r),get:()=>n.get(),register:(r,a)=>{o.set(Mj(o.get(),r,a))}}},yD=Ve.each,CD=Ve.explode,Nj={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},p6=Ve.makeMap("alt,ctrl,shift,meta,access"),Bj=e=>e in p6,$j=e=>{const n={},o=qt.os.isMacOS()||qt.os.isiOS();yD(CD(e.toLowerCase(),"+"),u=>{Bj(u)?n[u]=!0:/^[0-9]{2,}$/.test(u)?n.keyCode=parseInt(u,10):(n.charCode=u.charCodeAt(0),n.keyCode=Nj[u]||u.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let a;for(a in p6)n[a]?r.push(a):n[a]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class wD{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(yD(o.shortcuts,a=>{o.matchShortcut(r,a)&&(o.pendingPatterns=a.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(a))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,a){const u=this,f=u.normalizeCommandFunc(r);return yD(CD(Ve.trim(n)),b=>{const C=u.createShortcut(b,o,f,a);u.shortcuts[C.id]=C}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:Ve.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,a){const u=Ve.map(CD(n,">"),$j);return u[u.length-1]=Ve.extend(u[u.length-1],{func:r,scope:a||this.editor}),Ve.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const Fj=()=>{const e={},n={},o={},r={},a={},u={},f={},b={},C={},S=(D,I)=>(z,H)=>{D[z.toLowerCase()]={...H,type:I}},O=(D,I)=>r[D.toLowerCase()]=I,R=(D,I)=>f[D.toLowerCase()]=I;return{addButton:S(e,"button"),addGroupToolbarButton:S(e,"grouptoolbarbutton"),addToggleButton:S(e,"togglebutton"),addMenuButton:S(e,"menubutton"),addSplitButton:S(e,"splitbutton"),addMenuItem:S(n,"menuitem"),addNestedMenuItem:S(n,"nestedmenuitem"),addToggleMenuItem:S(n,"togglemenuitem"),addAutocompleter:S(o,"autocompleter"),addContextMenu:S(a,"contextmenu"),addContextToolbar:S(u,"contexttoolbar"),addContextForm:S(u,"contextform"),addSidebar:S(b,"sidebar"),addView:S(C,"views"),addIcon:O,addContext:R,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:a,contextToolbars:u,sidebars:b,views:C,contexts:f})}},Ij=()=>{const e=Fj();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,addContext:e.addContext,getAll:e.getAll}},qp=Yn.DOM,b6=Ve.extend,Lj=Ve.each;class S_{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,b6(this,m6);const a=this;this.id=n,this.hidden=!1;const u=VZ(r.defaultOptions,o);this.options=Aj(a,u,o),fS(a);const f=this.options.get;f("deprecation_warnings")&&wN(o,u);const b=f("suffix");b&&(r.suffix=b),this.suffix=r.suffix;const C=f("base_url");C&&r._setBaseUrl(C),this.baseUri=r.baseURI;const S=Ph(a);S&&(cl.ScriptLoader._setReferrerPolicy(S),Yn.DOM.styleSheetLoader._setReferrerPolicy(S));const O=TS(a);Oe(O)&&Yn.DOM.styleSheetLoader._setContentCssCors(O),Rr.languageLoad=f("language_load"),Rr.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new wl(gS(a),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=vm(a),this.hasVisual=yy(a),this.shortcuts=new wD(this),this.editorCommands=new l6(this),mj(this);const R=f("cache_suffix");R&&(qt.cacheSuffix=R.replace(/^[\?\&]+/,"")),this.ui={registry:Ij(),styleSheetLoader:void 0,show:Ot,hide:Ot,setEnabled:Ot,isEnabled:it},this.mode=Pj(a),r.dispatch("SetupEditor",{editor:this});const D=$k(a);Q(D)&&D.call(a,a)}render(){rD(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return o0(this)}translate(n){return _i.translate(n)}getParam(n,o,r){const a=this.options;return a.isRegistered(n)||(Oe(r)?a.register(n,{processor:r,default:o}):a.register(n,{processor:it,default:o})),!a.isSet(n)&&!ss(o)?o:a.get(n)}hasPlugin(n,o){return zt(Ih(this),n)?o?yd.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,a){this.shortcuts.add(n,o,r,a)}execCommand(n,o,r,a){return this.editorCommands.execCommand(n,o,r,a)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(qp.show(n.getContainer()),qp.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(qp.hide(n.getContainer()),qp.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const a={...n,load:!0},u=_o(r)?r.value:r.innerHTML,f=o.setContent(u,a);return a.no_events||o.dispatch("LoadContent",{...a,element:r}),f}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const a={...n,save:!0,element:r};let u=o.getContent(a);const f={...a,content:u};if(f.no_events||o.dispatch("SaveContent",f),f.format==="raw"&&o.dispatch("RawSaveContent",f),u=f.content,_o(r))r.value=u;else{(n.is_removing||!o.inline)&&(r.innerHTML=u);const b=qp.getParent(o.id,"form");b&&Lj(b.elements,C=>C.name===o.id?(C.value=u,!1):!0)}return f.element=a.element=r=null,f.set_dirty!==!1&&o.setDirty(!1),u}setContent(n,o){return LE(this,n,o)}getContent(n){return tH(this,n)}insertContent(n,o){o&&(n=b6({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?LE(this,this.startContent,{format:"raw"}):LE(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||qp.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=qp.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const a=this,u=a.options.get,f=Ik(a);if(Q(f))return f.call(a,n,r,!0,o);if(!u("convert_urls")||r==="link"||hn(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0)return n;const b=new wl(n);return b.protocol!=="http"&&b.protocol!=="https"&&b.protocol!==""?n:u("relative_urls")?a.documentBaseURI.toRelative(n):(n=a.documentBaseURI.toAbsolute(n,u("remove_script_host")),n)}addVisual(n){o6(this,n)}setEditableRoot(n){NZ(this,n)}hasEditableRoot(){return BZ(this)}remove(){mH(this)}destroy(n){SN(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const j0=Yn.DOM,x_=Ve.each;let SD=!1,E_,Xc=[];const T_=e=>{const n=e.type;x_(Fg.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},v6=e=>{if(e!==SD){const n=Yn.DOM;e?(n.bind(window,"resize",T_),n.bind(window,"scroll",T_)):(n.unbind(window,"resize",T_),n.unbind(window,"scroll",T_)),SD=e}},y6=e=>{const n=Xc;return Xc=Rt(Xc,o=>e!==o),Fg.activeEditor===e&&(Fg.activeEditor=Xc.length>0?Xc[0]:null),Fg.focusedEditor===e&&(Fg.focusedEditor=null),n.length!==Xc.length},Hj=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(y6(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},Vj=document.compatMode!=="CSS1Compat",Fg={...pD,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"4.1",releaseDate:"TBD",i18n:_i,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=wl.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const a=window.tinymce||window.tinyMCEPreInit;if(a)n=a.base||a.baseURL,o=a.suffix;else{const u=document.getElementsByTagName("script");for(let f=0;f<u.length;f++){const b=u[f].src||"";if(b==="")continue;const C=b.substring(b.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(b)){C.indexOf(".min")!==-1&&(o=".min"),n=b.substring(0,b.lastIndexOf("/"));break}}if(!n&&document.currentScript){const f=document.currentScript.src;f.indexOf(".min")!==-1&&(o=".min"),n=f.substring(0,f.lastIndexOf("/"))}}e.baseURL=new wl(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new wl(e.baseURL),e.suffix=o,J6(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&rt(r,(a,u)=>{Rr.PluginManager.urls[u]=a})},init(e){const n=this;let o;const r=Ve.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),a=(O,R)=>O.inline&&R.tagName.toLowerCase()in r,u=O=>{let R=O.id;return R||(R=bo(O,"name").filter(D=>!j0.get(D)).getOrThunk(j0.uniqueId),O.setAttribute("id",R)),R},f=O=>{const R=e[O];if(R)return R.apply(n,[])},b=O=>qt.browser.isIE()||qt.browser.isEdge()?(jE("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):Vj?(jE("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):J(O.selector)?j0.select(O.selector):Oe(O.target)?[O.target]:[];let C=O=>{o=O};const S=()=>{let O=0;const R=[];let D;const I=(z,H,Z)=>{const Y=new S_(z,H,n);R.push(Y),Y.on("init",()=>{++O===D.length&&C(R)}),Y.targetElm=Y.targetElm||Z,Y.render()};j0.unbind(window,"ready",S),f("onpageload"),D=Wg(b(e)),Ve.each(D,z=>{Hj(n.get(z.id))}),D=Ve.grep(D,z=>!n.get(z.id)),D.length===0?C([]):x_(D,z=>{a(e,z)?jE("Could not initialize inline editor on invalid inline target element",z):I(u(z),e,z)})};return j0.bind(window,"ready",S),new Promise(O=>{o?O(o):C=R=>{O(R)}})},get(e){return arguments.length===0?Xc.slice(0):J(e)?as(Xc,n=>n.id===e).getOr(null):lc(e)&&Xc[e]?Xc[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&Xc.push(e),v6(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),E_||(E_=r=>{const a=n.dispatch("BeforeUnload");if(a.returnValue)return r.preventDefault(),r.returnValue=a.returnValue,a.returnValue},window.addEventListener("beforeunload",E_))),e},createEditor(e,n){return this.add(new S_(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=Xc.length-1;r>=0;r--)n.remove(Xc[r]);return}if(J(e)){x_(j0.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,te(n.get(o.id))?null:(y6(o)&&n.dispatch("RemoveEditor",{editor:o}),Xc.length===0&&window.removeEventListener("beforeunload",E_),o.remove(),v6(Xc.length>0),o)},execCommand(e,n,o){var r;const a=this,u=hn(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!a.get(u)){const f=o.options;new S_(u,f,a).render()}return!0}case"mceRemoveEditor":{const f=a.get(u);return f&&f.remove(),!0}case"mceToggleEditor":{const f=a.get(u);return f?(f.isHidden()?f.show():f.hide(),!0):(a.execCommand("mceAddEditor",!1,o),!0)}}return a.activeEditor?a.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{x_(Xc,e=>{e.save()})},addI18n:(e,n)=>{_i.add(e,n)},translate:e=>_i.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new wl(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new wl(this.baseURL)}};Fg.setup();const yq=(()=>{const e=Qs(),n=u=>({items:u,types:Ir(u),getType:f=>bo(u,f).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),a=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:a}})(),xD=Math.min,G0=Math.max,LC=Math.round,C6=(e,n,o)=>{let r=n.x,a=n.y;const u=e.w,f=e.h,b=n.w,C=n.h,S=(o||"").split("");return S[0]==="b"&&(a+=C),S[1]==="r"&&(r+=b),S[0]==="c"&&(a+=LC(C/2)),S[1]==="c"&&(r+=LC(b/2)),S[3]==="b"&&(a-=f),S[4]==="r"&&(r-=u),S[3]==="c"&&(a-=LC(f/2)),S[4]==="c"&&(r-=LC(u/2)),q0(r,a,u,f)},Uj=(e,n,o,r)=>{for(let a=0;a<r.length;a++){const u=C6(e,n,r[a]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[a]}return null},Wj=(e,n,o)=>q0(e.x-n,e.y-o,e.w+n*2,e.h+o*2),Zj=(e,n)=>{const o=G0(e.x,n.x),r=G0(e.y,n.y),a=xD(e.x+e.w,n.x+n.w),u=xD(e.y+e.h,n.y+n.h);return a-o<0||u-r<0?null:q0(o,r,a-o,u-r)},jj=(e,n,o)=>{let r=e.x,a=e.y,u=e.x+e.w,f=e.y+e.h;const b=n.x+n.w,C=n.y+n.h,S=G0(0,n.x-r),O=G0(0,n.y-a),R=G0(0,u-b),D=G0(0,f-C);return r+=S,a+=O,o&&(u+=S,f+=O,r-=R,a-=D),u-=R,f-=D,q0(r,a,u-r,f-a)},q0=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),ED={inflate:Wj,relativePosition:C6,findBestRelativePosition:Uj,intersect:Zj,clamp:jj,create:q0,fromClientRect:e=>q0(e.left,e.top,e.width,e.height)},Gj=(e,n,o=1e3)=>{let r=!1,a=null;const u=S=>(...O)=>{r||(r=!0,a!==null&&(clearTimeout(a),a=null),S.apply(null,O))},f=u(e),b=u(n);return{start:(...S)=>{!r&&a===null&&(a=setTimeout(()=>b.apply(null,S),o))},resolve:f,reject:b}},Kj=(()=>{const e={},n={},o={};return{load:(C,S)=>{const O=`Script at URL "${S}" failed to load`,R=`Script at URL "${S}" did not call \`tinymce.Resource.add('${C}', data)\` within 1 second`;if(e[C]!==void 0)return e[C];{const D=new Promise((I,z)=>{const H=Gj(I,z);n[C]=H.resolve,cl.ScriptLoader.loadScript(S).then(()=>H.start(R),()=>H.reject(O))});return e[C]=D,D}},add:(C,S)=>{n[C]!==void 0&&(n[C](S),delete n[C]),e[C]=Promise.resolve(S),o[C]=S},has:C=>C in o,get:C=>o[C],unload:C=>{delete e[C],delete o[C]}}})(),Yj=()=>(()=>{let e={},n=[];const o={getItem:r=>{const a=e[r];return a||null},setItem:(r,a)=>{n.push(r),e[r]=String(a)},key:r=>n[r],removeItem:r=>{n=n.filter(a=>a===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let HC;try{const e="__storage_test__";HC=window.localStorage,HC.setItem(e,e),HC.removeItem(e)}catch{HC=Yj()}var Xj=HC;const Jj={geom:{Rect:ED},util:{Delay:Xa,Tools:Ve,VK:ot,URI:wl,EventDispatcher:hD,Observable:pD,I18n:_i,LocalStorage:Xj,ImageUploader:$N},dom:{EventUtils:nm,TreeWalker:xs,TextSeeker:rm,DOMUtils:Yn,ScriptLoader:cl,RangeUtils:Re,Serializer:bN,StyleSheetLoader:$u,ControlSelection:o2,BookmarkManager:Pm,Selection:YL,Event:nm.Event},html:{Styles:zu,Entities:Lu,Node:_c,Schema:Fn,DomParser:Tp,Writer:W4,Serializer:lg},Env:qt,AddOnManager:Rr,Annotator:Di,Formatter:b0,UndoManager:PO,EditorCommands:l6,WindowManager:DN,NotificationManager:AN,EditorObservable:m6,Shortcuts:wD,Editor:S_,FocusManager:N4,EditorManager:Fg,DOM:Yn.DOM,ScriptLoader:cl.ScriptLoader,PluginManager:yd,ThemeManager:Tg,ModelManager:p0,IconManager:WE,Resource:Kj,FakeClipboard:yq,trim:Ve.trim,isArray:Ve.isArray,is:Ve.is,toArray:Ve.toArray,makeMap:Ve.makeMap,each:Ve.each,map:Ve.map,grep:Ve.grep,inArray:Ve.inArray,extend:Ve.extend,walk:Ve.walk,resolve:Ve.resolve,explode:Ve.explode,_addCacheSuffix:Ve._addCacheSuffix},S6=Ve.extend(Fg,Jj),Qj=e=>{try{B.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(S6),Qj(S6)})()})(fX);tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-code":'<svg width="24" height="24"><path d="m10 22 2-7H6l9-13h2l-2 8h7L12 22h-2ZM6 2h7l-1.4 2H6V2Zm4.2 4H4v2h4.8l1.4-2Zm-2.7 4H2v2h4l1.5-2Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',mentions:'<svg height="24" width="24"><path d="M12 21a8.8 8.8 0 0 1-3.5-.7 9 9 0 0 1-2.9-2 9 9 0 0 1-1.9-2.8A8.8 8.8 0 0 1 3 12c0-1.3.2-2.4.7-3.5a9 9 0 0 1 4.8-4.8A8.8 8.8 0 0 1 12 3c1.3 0 2.4.2 3.5.7a9.1 9.1 0 0 1 4.8 4.8A8.7 8.7 0 0 1 21 12v1.4a3 3 0 0 1-.9 2.2 3 3 0 0 1-2.2.9c-.5 0-1-.1-1.5-.4a3.8 3.8 0 0 1-1.1-1 4.8 4.8 0 0 1-1.5 1 4.3 4.3 0 0 1-1.8.4c-1.2 0-2.3-.4-3.2-1.3-.9-.9-1.3-2-1.3-3.2s.4-2.3 1.3-3.2c.9-.9 2-1.3 3.2-1.3s2.3.4 3.2 1.3c.9.9 1.3 2 1.3 3.2v1.4c0 .4.1.7.4 1 .3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1V12c0-2-.7-3.8-2.1-5.2S14 4.7 12 4.7s-3.8.7-5.2 2.1S4.7 10 4.7 12s.7 3.8 2.1 5.2 3.2 2.1 5.2 2.1h4.5V21zm0-6.2c.8 0 1.4-.3 2-.8a2.7 2.7 0 0 0 .8-2c0-.8-.3-1.4-.8-2a2.7 2.7 0 0 0-2-.8c-.8 0-1.4.3-2 .8a2.7 2.7 0 0 0-.8 2c0 .8.3 1.4.8 2a2.7 2.7 0 0 0 2 .8z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){const B=Object.getPrototypeOf,L=(t,s,c)=>{var i;return c(t,s.prototype)?!0:((i=t.constructor)===null||i===void 0?void 0:i.name)===s.name},j=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&L(t,String,(c,i)=>i.isPrototypeOf(c))?"string":s},q=t=>s=>j(s)===t,ne=t=>s=>typeof s===t,de=t=>s=>t===s,fe=(t,s)=>At(t)&&L(t,s,(c,i)=>B(c)===i),ke=q("string"),At=q("object"),bt=t=>fe(t,Object),yt=q("array"),Yt=de(null),Co=ne("boolean"),Xn=de(void 0),Xt=t=>t==null,jt=t=>!Xt(t),He=ne("function"),uo=ne("number"),Bo=(t,s)=>{if(yt(t)){for(let c=0,i=t.length;c<i;++c)if(!s(t[c]))return!1;return!0}return!1},J=()=>{},hn=t=>()=>t(),Ks=(t,s)=>(...c)=>t(s.apply(null,c)),yn=(t,s)=>c=>t(s(c)),te=t=>()=>t,an=t=>t,ss=(t,s)=>t===s;function An(t,...s){return(...c)=>{const i=s.concat(c);return t.apply(null,i)}}const Oe=t=>s=>!t(s),Q=t=>()=>{throw new Error(t)},lc=t=>t(),Vn=te(!1),Ot=te(!0);class k{constructor(s,c){this.tag=s,this.value=c}static some(s){return new k(!0,s)}static none(){return k.singletonNone}fold(s,c){return this.tag?c(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?k.some(s(this.value)):k.none()}bind(s){return this.tag?s(this.value):k.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:k.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return jt(s)?k.some(s):k.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}k.singletonNone=new k(!1);const rs=Array.prototype.slice,Ke=Array.prototype.indexOf,Wo=Array.prototype.push,Wt=(t,s)=>Ke.call(t,s),Be=(t,s)=>{const c=Wt(t,s);return c===-1?k.none():k.some(c)},$o=(t,s)=>Wt(t,s)>-1,uc=(t,s)=>{for(let c=0,i=t.length;c<i;c++){const d=t[c];if(s(d,c))return!0}return!1},cs=(t,s)=>{const c=[];for(let i=0;i<t;i++)c.push(s(i));return c},Jr=(t,s)=>{const c=[];for(let i=0;i<t.length;i+=s){const d=rs.call(t,i,i+s);c.push(d)}return c},De=(t,s)=>{const c=t.length,i=new Array(c);for(let d=0;d<c;d++){const g=t[d];i[d]=s(g,d)}return i},it=(t,s)=>{for(let c=0,i=t.length;c<i;c++){const d=t[c];s(d,c)}},N=(t,s)=>{for(let c=t.length-1;c>=0;c--){const i=t[c];s(i,c)}},ef=(t,s)=>{const c=[],i=[];for(let d=0,g=t.length;d<g;d++){const h=t[d];(s(h,d)?c:i).push(h)}return{pass:c,fail:i}},po=(t,s)=>{const c=[];for(let i=0,d=t.length;i<d;i++){const g=t[i];s(g,i)&&c.push(g)}return c},Ss=(t,s,c)=>(N(t,(i,d)=>{c=s(c,i,d)}),c),wo=(t,s,c)=>(it(t,(i,d)=>{c=s(c,i,d)}),c),N_=(t,s,c)=>{for(let i=0,d=t.length;i<d;i++){const g=t[i];if(s(g,i))return k.some(g);if(c(g,i))break}return k.none()},zt=(t,s)=>N_(t,s,Vn),mo=(t,s)=>{for(let c=0,i=t.length;c<i;c++){const d=t[c];if(s(d,c))return k.some(c)}return k.none()},Gt=t=>{const s=[];for(let c=0,i=t.length;c<i;++c){if(!yt(t[c]))throw new Error("Arr.flatten item "+c+" was not an array, input: "+t);Wo.apply(s,t[c])}return s},Se=(t,s)=>Gt(De(t,s)),yu=(t,s)=>{for(let c=0,i=t.length;c<i;++c){const d=t[c];if(s(d,c)!==!0)return!1}return!0},Er=t=>{const s=rs.call(t,0);return s.reverse(),s},Rt=(t,s)=>po(t,c=>!$o(s,c)),Td=(t,s)=>{const c={};for(let i=0,d=t.length;i<d;i++){const g=t[i];c[String(g)]=s(g,i)}return c},Zo=t=>[t],Ug=(t,s)=>{const c=rs.call(t,0);return c.sort(s),c},as=(t,s)=>s>=0&&s<t.length?k.some(t[s]):k.none(),dc=t=>as(t,0),Qp=t=>as(t,t.length-1),oa=He(Array.from)?Array.from:t=>rs.call(t),ir=(t,s)=>{for(let c=0;c<t.length;c++){const i=s(t[c],c);if(i.isSome())return i}return k.none()},Fo=Object.keys,e1=Object.hasOwnProperty,Ms=(t,s)=>{const c=Fo(t);for(let i=0,d=c.length;i<d;i++){const g=c[i],h=t[g];s(h,g)}},Io=(t,s)=>tf(t,(c,i)=>({k:i,v:s(c,i)})),tf=(t,s)=>{const c={};return Ms(t,(i,d)=>{const g=s(i,d);c[g.k]=g.v}),c},Tr=t=>(s,c)=>{t[c]=s},Nl=(t,s,c,i)=>{Ms(t,(d,g)=>{(s(d,g)?c:i)(d,g)})},mc=(t,s)=>{const c={},i={};return Nl(t,s,Tr(c),Tr(i)),{t:c,f:i}},_d=(t,s)=>{const c={};return Nl(t,s,Tr(c),J),c},Wg=(t,s)=>{const c=[];return Ms(t,(i,d)=>{c.push(s(i,d))}),c},Ir=(t,s)=>{const c=Fo(t);for(let i=0,d=c.length;i<d;i++){const g=c[i],h=t[g];if(s(h,g,t))return k.some(h)}return k.none()},X0=t=>Wg(t,an),rt=(t,s)=>$n(t,s)?k.from(t[s]):k.none(),$n=(t,s)=>e1.call(t,s),sa=(t,s)=>$n(t,s)&&t[s]!==void 0&&t[s]!==null,Ac=(t,s,c=ss)=>t.exists(i=>c(i,s)),t1=(t,s,c=ss)=>Cu(t,s,c).getOr(t.isNone()&&s.isNone()),kd=t=>{const s=[],c=i=>{s.push(i)};for(let i=0;i<t.length;i++)t[i].each(c);return s},Eo=t=>{const s=[];for(let c=0;c<t.length;c++){const i=t[c];if(i.isSome())s.push(i.getOrDie());else return k.none()}return k.some(s)},Cu=(t,s,c)=>t.isSome()&&s.isSome()?k.some(c(t.getOrDie(),s.getOrDie())):k.none(),nf=(t,s,c,i)=>t.isSome()&&s.isSome()&&c.isSome()?k.some(i(t.getOrDie(),s.getOrDie(),c.getOrDie())):k.none(),bo=(t,s)=>t!=null?k.some(s(t)):k.none(),$t=(t,s)=>t?k.some(s):k.none(),fc=(t,s)=>t+s,Od=(t,s)=>t.substring(s),n1=(t,s,c)=>s===""||t.length>=s.length&&t.substr(c,c+s.length)===s,J0=(t,s)=>ms(t,s)?Od(t,s.length):t,Qr=(t,s)=>Gi(t,s)?t:fc(t,s),_r=(t,s,c=0,i)=>{const d=t.indexOf(s,c);return d!==-1?Xn(i)?!0:d+s.length<=i:!1},ms=(t,s)=>n1(t,s,0),Gi=(t,s)=>n1(t,s,t.length-s.length),Bl=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),Rc=t=>t.length>0,Ao=t=>!Rc(t),Ra=t=>t.style!==void 0&&He(t.style.getPropertyValue),qi=(t,s)=>{const i=(s||document).createElement("div");if(i.innerHTML=t,!i.hasChildNodes()||i.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,t),new Error(d)}return $l(i.childNodes[0])},B_=(t,s)=>{const i=(s||document).createElement(t);return $l(i)},$_=(t,s)=>{const i=(s||document).createTextNode(t);return $l(i)},$l=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},ae={fromHtml:qi,fromTag:B_,fromText:$_,fromDom:$l,fromPoint:(t,s,c)=>k.from(t.dom.elementFromPoint(s,c)).map($l)},gc=typeof window<"u"?window:Function("return this;")(),of=(t,s)=>{let c=s??gc;for(let i=0;i<t.length&&c!==void 0&&c!==null;++i)c=c[t[i]];return c},jC=(t,s)=>{const c=t.split(".");return of(c,s)},Q0=(t,s)=>jC(t,s),So=(t,s)=>{const c=Q0(t,s);if(c==null)throw new Error(t+" not available on this browser");return c},ev=Object.getPrototypeOf,F_=t=>So("HTMLElement",t),Zg=t=>{const s=jC("ownerDocument.defaultView",t);return At(t)&&(F_(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(ev(t).constructor.name))},sf=9,br=11,fs=1,Fl=3,Da=t=>t.dom.nodeName.toLowerCase(),Ad=t=>t.dom.nodeType,jg=t=>s=>Ad(s)===t,rf=t=>Jn(t)&&Zg(t.dom),Jn=jg(fs),Dc=jg(Fl),I_=jg(sf),Rd=jg(br),wu=t=>s=>Jn(s)&&Da(s)===t,ec=(t,s)=>{const c=t.dom;if(c.nodeType!==fs)return!1;{const i=c;if(i.matches!==void 0)return i.matches(s);if(i.msMatchesSelector!==void 0)return i.msMatchesSelector(s);if(i.webkitMatchesSelector!==void 0)return i.webkitMatchesSelector(s);if(i.mozMatchesSelector!==void 0)return i.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},jo=t=>t.nodeType!==fs&&t.nodeType!==sf&&t.nodeType!==br||t.childElementCount===0,L_=(t,s)=>{const c=s===void 0?document:s.dom;return jo(c)?[]:De(c.querySelectorAll(t),ae.fromDom)},tv=(t,s)=>{const c=s===void 0?document:s.dom;return jo(c)?k.none():k.from(c.querySelector(t)).map(ae.fromDom)},Un=(t,s)=>t.dom===s.dom,Mc=(t,s)=>{const c=t.dom,i=s.dom;return c===i?!1:c.contains(i)},Pc=t=>ae.fromDom(t.dom.ownerDocument),vr=t=>I_(t)?t:Pc(t),s1=t=>ae.fromDom(vr(t).dom.documentElement),Dd=t=>ae.fromDom(vr(t).dom.defaultView),Ma=t=>k.from(t.dom.parentNode).map(ae.fromDom),Md=t=>Ma(t),di=t=>k.from(t.dom.parentElement).map(ae.fromDom),GC=(t,s)=>{const c=He(s)?s:Vn;let i=t.dom;const d=[];for(;i.parentNode!==null&&i.parentNode!==void 0;){const g=i.parentNode,h=ae.fromDom(g);if(d.push(h),c(h)===!0)break;i=g}return d},nv=t=>k.from(t.dom.offsetParent).map(ae.fromDom),qC=t=>k.from(t.dom.nextSibling).map(ae.fromDom),Pa=t=>De(t.dom.childNodes,ae.fromDom),Su=(t,s)=>{const c=t.dom.childNodes;return k.from(c[s]).map(ae.fromDom)},r1=t=>Su(t,0),c1=(t,s)=>({element:t,offset:s}),ov=(t,s)=>{const c=Pa(t);return c.length>0&&s<c.length?c1(c[s],0):c1(t,s)},sv=t=>Rd(t)&&jt(t.dom.host),lr=t=>ae.fromDom(t.dom.getRootNode()),Pd=t=>sv(t)?t:ae.fromDom(vr(t).dom.body),Nc=t=>Il(t).isSome(),Il=t=>{const s=lr(t);return sv(s)?k.some(s):k.none()},KC=t=>ae.fromDom(t.dom.host),H_=t=>{if(jt(t.target)){const s=ae.fromDom(t.target);if(Jn(s)&&Ki(s)&&t.composed&&t.composedPath){const c=t.composedPath();if(c)return dc(c)}}return k.from(t.target)},Ki=t=>jt(t.dom.shadowRoot),ra=t=>{const s=Dc(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const c=s.ownerDocument;return Il(ae.fromDom(s)).fold(()=>c.body.contains(s),yn(ra,KC))},mi=()=>Yi(ae.fromDom(document)),Yi=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return ae.fromDom(s)},fi=(t,s,c)=>{if(ke(c)||Co(c)||uo(c))t.setAttribute(s,c+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",c,":: Element ",t),new Error("Attribute value was not simple")},Dt=(t,s,c)=>{fi(t.dom,s,c)},YC=(t,s)=>{const c=t.dom;Ms(s,(i,d)=>{fi(c,d,i)})},qt=(t,s)=>{const c=t.dom.getAttribute(s);return c===null?void 0:c},Lo=(t,s)=>k.from(qt(t,s)),rv=(t,s)=>{const c=t.dom;return c&&c.hasAttribute?c.hasAttribute(s):!1},Ro=(t,s)=>{t.dom.removeAttribute(s)},V_=t=>wo(t.dom.attributes,(s,c)=>(s[c.name]=c.value,s),{}),cv=(t,s,c)=>{if(!ke(c))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",c,":: Element ",t),new Error("CSS value must be a string: "+c);Ra(t)&&t.style.setProperty(s,c)},av=(t,s)=>{Ra(t)&&t.style.removeProperty(s)},Vt=(t,s,c)=>{const i=t.dom;cv(i,s,c)},Ll=(t,s)=>{const c=t.dom;Ms(s,(i,d)=>{cv(c,d,i)})},Na=(t,s)=>{const c=t.dom;Ms(s,(i,d)=>{i.fold(()=>{av(c,d)},g=>{cv(c,d,g)})})},kr=(t,s)=>{const c=t.dom,d=window.getComputedStyle(c).getPropertyValue(s);return d===""&&!ra(t)?Ve(c,s):d},Ve=(t,s)=>Ra(t)?t.style.getPropertyValue(s):"",Go=(t,s)=>{const c=t.dom,i=Ve(c,s);return k.from(i).filter(d=>d.length>0)},iv=t=>{const s={},c=t.dom;if(Ra(c))for(let i=0;i<c.style.length;i++){const d=c.style.item(i);s[d]=c.style[d]}return s},XC=(t,s,c)=>{const i=ae.fromTag(t);return Vt(i,s,c),Go(i,s).isSome()},Kt=(t,s)=>{const c=t.dom;av(c,s),Ac(Lo(t,"style").map(Bl),"")&&Ro(t,"style")},Nd=t=>t.dom.offsetWidth,gi=(t,s)=>{const c=(y,w)=>{if(!uo(w)&&!w.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+w);const E=y.dom;Ra(E)&&(E.style[t]=w+"px")},i=y=>{const w=s(y);if(w<=0||w===null){const E=kr(y,t);return parseFloat(E)||0}return w},d=i,g=(y,w)=>wo(w,(E,T)=>{const A=kr(y,T),P=A===void 0?0:parseInt(A,10);return isNaN(P)?E:E+P},0);return{set:c,get:i,getOuter:d,aggregate:g,max:(y,w,E)=>{const T=g(y,E);return w>T?w-T:0}}},Ys=gi("height",t=>{const s=t.dom;return ra(t)?s.getBoundingClientRect().height:s.offsetHeight}),gs=t=>Ys.get(t),Xi=t=>Ys.getOuter(t),z_=(t,s)=>{const c=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],i=Ys.max(t,s,c);Vt(t,"max-height",i+"px")},a1=(t,s)=>({left:t,top:s,translate:(i,d)=>a1(t+i,s+d)}),Do=a1,JC=t=>{const s=t.getBoundingClientRect();return Do(s.left,s.top)},i1=(t,s)=>t!==void 0?t:s!==void 0?s:0,Ho=t=>{const s=t.dom.ownerDocument,c=s.body,i=s.defaultView,d=s.documentElement;if(c===t.dom)return Do(c.offsetLeft,c.offsetTop);const g=i1(i==null?void 0:i.pageYOffset,d.scrollTop),h=i1(i==null?void 0:i.pageXOffset,d.scrollLeft),y=i1(d.clientTop,c.clientTop),w=i1(d.clientLeft,c.clientLeft);return xu(t).translate(h-w,g-y)},xu=t=>{const s=t.dom,i=s.ownerDocument.body;return i===s?Do(i.offsetLeft,i.offsetTop):ra(t)?JC(s):Do(0,0)},Eu=gi("width",t=>t.dom.offsetWidth),l1=(t,s)=>Eu.set(t,s),tc=t=>Eu.get(t),wn=t=>Eu.getOuter(t),QC=(t,s)=>{const c=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],i=Eu.max(t,s,c);Vt(t,"max-width",i+"px")},nc=t=>{let s=!1,c;return(...i)=>(s||(s=!0,c=t.apply(null,i)),c)},ew=(t,s,c,i)=>{const d=t.isiOS()&&/ipad/i.test(c)===!0,g=t.isiOS()&&!d,h=t.isiOS()||t.isAndroid(),y=h||i("(pointer:coarse)"),w=d||!g&&h&&i("(min-device-width:768px)"),E=g||h&&!w,T=s.isSafari()&&t.isiOS()&&/safari/i.test(c)===!1,A=!E&&!w&&!T;return{isiPad:te(d),isiPhone:te(g),isTablet:te(w),isPhone:te(E),isTouch:te(y),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:te(T),isDesktop:te(A)}},u1=(t,s)=>{for(let c=0;c<t.length;c++){const i=t[c];if(i.test(s))return i}},vo=(t,s)=>{const c=u1(t,s);if(!c)return{major:0,minor:0};const i=d=>Number(s.replace(c,"$"+d));return d1(i(1),i(2))},Xs=(t,s)=>{const c=String(s).toLowerCase();return t.length===0?Tu():vo(t,c)},Tu=()=>d1(0,0),d1=(t,s)=>({major:t,minor:s}),Ji={nu:d1,detect:Xs,unknown:Tu},hi=(t,s)=>ir(s.brands,c=>{const i=c.brand.toLowerCase();return zt(t,d=>{var g;return i===((g=d.brand)===null||g===void 0?void 0:g.toLowerCase())}).map(d=>({current:d.name,version:Ji.nu(parseInt(c.version,10),0)}))}),ur=(t,s)=>{const c=String(s).toLowerCase();return zt(t,i=>i.search(c))},Lr=(t,s)=>ur(t,s).map(c=>{const i=Ji.detect(c.versionRegexes,s);return{current:c.name,version:i}}),oc=(t,s)=>ur(t,s).map(c=>{const i=Ji.detect(c.versionRegexes,s);return{current:c.name,version:i}}),ca=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,aa=t=>s=>_r(s,t),Ps=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>_r(t,"edge/")&&_r(t,"chrome")&&_r(t,"safari")&&_r(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ca],search:t=>_r(t,"chrome")&&!_r(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>_r(t,"msie")||_r(t,"trident")},{name:"Opera",versionRegexes:[ca,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:aa("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:aa("firefox")},{name:"Safari",versionRegexes:[ca,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(_r(t,"safari")||_r(t,"mobile/"))&&_r(t,"applewebkit")}],Gg=[{name:"Windows",search:aa("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>_r(t,"iphone")||_r(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:aa("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:aa("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:aa("linux"),versionRegexes:[]},{name:"Solaris",search:aa("sunos"),versionRegexes:[]},{name:"FreeBSD",search:aa("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:aa("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],m1={browsers:te(Ps),oses:te(Gg)},Bd="Edge",f1="Chromium",tw="IE",$d="Opera",_u="Firefox",qg="Safari",hc=()=>lv({current:void 0,version:Ji.unknown()}),lv=t=>{const s=t.current,c=t.version,i=d=>()=>s===d;return{current:s,version:c,isEdge:i(Bd),isChromium:i(f1),isIE:i(tw),isOpera:i($d),isFirefox:i(_u),isSafari:i(qg)}},ku={unknown:hc,nu:lv,edge:te(Bd),chromium:te(f1),ie:te(tw),opera:te($d),firefox:te(_u),safari:te(qg)},g1="Windows",cf="iOS",uv="Android",h1="Linux",af="macOS",nw="Solaris",ow="FreeBSD",lf="ChromeOS",HD=()=>K({current:void 0,version:Ji.unknown()}),K=t=>{const s=t.current,c=t.version,i=d=>()=>s===d;return{current:s,version:c,isWindows:i(g1),isiOS:i(cf),isAndroid:i(uv),isMacOS:i(af),isLinux:i(h1),isSolaris:i(nw),isFreeBSD:i(ow),isChromeOS:i(lf)}},Kg={unknown:HD,nu:K,windows:te(g1),ios:te(cf),android:te(uv),linux:te(h1),macos:te(af),solaris:te(nw),freebsd:te(ow),chromeos:te(lf)},sw={detect:(t,s,c)=>{const i=m1.browsers(),d=m1.oses(),g=s.bind(w=>hi(i,w)).orThunk(()=>Lr(i,t)).fold(ku.unknown,ku.nu),h=oc(d,t).fold(Kg.unknown,Kg.nu),y=ew(h,g,t,c);return{browser:g,os:h,deviceType:y}}},rw=t=>window.matchMedia(t).matches;let U_=nc(()=>sw.detect(window.navigator.userAgent,k.from(window.navigator.userAgentData),rw));const Sn=()=>U_(),ia=(t,s,c,i,d,g,h)=>({target:t,x:s,y:c,stop:i,prevent:d,kill:g,raw:h}),pi=t=>{const s=ae.fromDom(H_(t).getOr(t.target)),c=()=>t.stopPropagation(),i=()=>t.preventDefault(),d=Ks(i,c);return ia(s,t.clientX,t.clientY,c,i,d,t)},Ou=(t,s)=>c=>{t(c)&&s(pi(c))},cw=(t,s,c,i,d)=>{const g=Ou(c,i);return t.dom.addEventListener(s,g,d),{unbind:An(Yg,t,s,g,d)}},uf=(t,s,c,i)=>cw(t,s,c,i,!1),Ba=(t,s,c,i)=>cw(t,s,c,i,!0),Yg=(t,s,c,i)=>{t.dom.removeEventListener(s,c,i)},Fd=(t,s)=>{Ma(t).each(i=>{i.dom.insertBefore(s.dom,t.dom)})},aw=(t,s)=>{qC(t).fold(()=>{Ma(t).each(d=>{Hr(d,s)})},i=>{Fd(i,s)})},Hl=(t,s)=>{r1(t).fold(()=>{Hr(t,s)},i=>{t.dom.insertBefore(s.dom,i.dom)})},Hr=(t,s)=>{t.dom.appendChild(s.dom)},iw=(t,s,c)=>{Su(t,c).fold(()=>{Hr(t,s)},i=>{Fd(i,s)})},p1=(t,s)=>{it(s,c=>{Hr(t,c)})},Js=t=>{t.dom.textContent="",it(Pa(t),s=>{pc(s)})},pc=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},Vr=t=>{const s=t!==void 0?t.dom:document,c=s.body.scrollLeft||s.documentElement.scrollLeft,i=s.body.scrollTop||s.documentElement.scrollTop;return Do(c,i)},df=(t,s,c)=>{const d=(c!==void 0?c.dom:document).defaultView;d&&d.scrollTo(t,s)},b1=t=>{const s=t===void 0?window:t;return Sn().browser.isFirefox()?k.none():k.from(s.visualViewport)},dv=(t,s,c,i)=>({x:t,y:s,width:c,height:i,right:t+c,bottom:s+i}),mf=t=>{const s=t===void 0?window:t,c=s.document,i=Vr(ae.fromDom(c));return b1(s).fold(()=>{const d=s.document.documentElement,g=d.clientWidth,h=d.clientHeight;return dv(i.left,i.top,g,h)},d=>dv(Math.max(d.pageLeft,i.left),Math.max(d.pageTop,i.top),d.width,d.height))},bi=()=>ae.fromDom(document),Xg=(t,s)=>t.view(s).fold(te([]),i=>{const d=t.owner(i),g=Xg(t,d);return[i].concat(g)}),W_=(t,s)=>{const c=s.owner(t),i=Xg(s,c);return k.some(i)};var G_=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?k.none():k.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(ae.fromDom)},owner:t=>Pc(t)});const mv=t=>{const s=bi(),c=Vr(s);return W_(t,G_).fold(An(Ho,t),d=>{const g=xu(t),h=Ss(d,(y,w)=>{const E=xu(w);return{left:y.left+E.left,top:y.top+E.top}},{left:0,top:0});return Do(h.left+g.left+c.left,h.top+g.top+c.top)})},ff=(t,s,c)=>({point:t,width:s,height:c}),lw=(t,s,c,i)=>({x:t,y:s,width:c,height:i}),To=(t,s,c,i)=>({x:t,y:s,width:c,height:i,right:t+c,bottom:s+i}),Vo=t=>{const s=Ho(t),c=wn(t),i=Xi(t);return To(s.left,s.top,c,i)},Id=t=>{const s=mv(t),c=wn(t),i=Xi(t);return To(s.left,s.top,c,i)},Au=(t,s)=>{const c=Math.max(t.x,s.x),i=Math.max(t.y,s.y),d=Math.min(t.right,s.right),g=Math.min(t.bottom,s.bottom),h=d-c,y=g-i;return To(c,i,h,y)},fv=(t,s)=>wo(s,(c,i)=>Au(c,i),t),Ns=()=>mf(window),St=t=>{let s=t;return{get:()=>s,set:d=>{s=d}}},Ru=t=>{const s=St(k.none()),c=()=>s.get().each(t);return{clear:()=>{c(),s.set(k.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:y=>{c(),s.set(k.some(y))}}},q_=()=>Ru(t=>t.destroy()),la=()=>Ru(t=>t.unbind()),Mn=()=>{const t=Ru(J);return{...t,on:c=>t.get().each(c)}};var Ld=tinymce.util.Tools.resolve("tinymce.ThemeManager");const Jg=t=>{const s=g=>g(t),c=te(t),i=()=>d,d={tag:!0,inner:t,fold:(g,h)=>h(t),isValue:Ot,isError:Vn,map:g=>tn.value(g(t)),mapError:i,bind:s,exists:s,forall:s,getOr:c,or:i,getOrThunk:c,orThunk:i,getOrDie:c,each:g=>{g(t)},toOptional:()=>k.some(t)};return d},uw=t=>{const s=()=>c,c={tag:!1,inner:t,fold:(i,d)=>i(t),isValue:Vn,isError:Ot,map:s,mapError:i=>tn.error(i(t)),bind:s,exists:Vn,forall:Ot,getOr:an,or:an,getOrThunk:lc,orThunk:lc,getOrDie:Q(String(t)),each:J,toOptional:k.none};return c},tn={value:Jg,error:uw,fromOption:(t,s)=>t.fold(()=>uw(s),Jg)};var es;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(es||(es={}));const Qg=(t,s,c)=>t.stype===es.Error?s(t.serror):c(t.svalue),v1=t=>{const s=[],c=[];return it(t,i=>{Qg(i,d=>c.push(d),d=>s.push(d))}),{values:s,errors:c}},$c=(t,s)=>t.stype===es.Error?{stype:es.Error,serror:s(t.serror)}:t,bc=(t,s)=>t.stype===es.Value?{stype:es.Value,svalue:s(t.svalue)}:t,$a=(t,s)=>t.stype===es.Value?s(t.svalue):t,co=(t,s)=>t.stype===es.Error?s(t.serror):t,vi=t=>({stype:es.Value,svalue:t}),Hd=t=>({stype:es.Error,serror:t}),qo={fromResult:t=>t.fold(Hd,vi),toResult:t=>Qg(t,tn.error,tn.value),svalue:vi,partition:v1,serror:Hd,bind:$a,bindError:co,map:bc,mapError:$c,fold:Qg},Du=(t,s,c,i)=>({tag:"field",key:t,newKey:s,presence:c,prop:i}),gf=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),ao=(t,s,c)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return c(t.newKey,t.instantiator)}},Mu=(t,s)=>s,dw=(t,s)=>bt(t)&&bt(s)?zo(t,s):s,hv=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const c={};for(let i=0;i<s.length;i++){const d=s[i];for(const g in d)$n(d,g)&&(c[g]=t(c[g],d[g]))}return c},zo=hv(dw),y1=hv(Mu),Qi=()=>({tag:"required",process:{}}),pv=t=>({tag:"defaultedThunk",process:t}),pn=t=>pv(te(t)),eh=()=>({tag:"option",process:{}}),C1=t=>({tag:"mergeWithThunk",process:t}),mw=t=>C1(te(t)),K_=(t,s)=>t.length>0?qo.svalue(zo(s,y1.apply(void 0,t))):qo.svalue(s),w1=t=>Ks(qo.serror,Gt)(t),Vl={consolidateObj:(t,s)=>{const c=qo.partition(t);return c.errors.length>0?w1(c.errors):K_(c.values,s)},consolidateArr:t=>{const s=qo.partition(t);return s.errors.length>0?w1(s.errors):qo.svalue(s.values)}},S1=t=>At(t)&&Fo(t).length>100?" removed due to size":JSON.stringify(t,null,2),bv=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:te("... (only showing first ten failures)")}]):t;return De(s,c=>"Failed path: ("+c.path.join(" > ")+`)
`+c.getErrorInfo())},Pu=(t,s)=>qo.serror([{path:t,getErrorInfo:s}]),el=(t,s,c)=>Pu(t,()=>'Could not find valid *required* value for "'+s+'" in '+S1(c)),fw=(t,s)=>Pu(t,()=>'Choice schema did not contain choice key: "'+s+'"'),x1=(t,s,c)=>Pu(t,()=>'The chosen schema: "'+c+'" did not exist in branches: '+S1(s)),hf=(t,s)=>Pu(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),gw=(t,s)=>Pu(t,te(s)),zd=t=>{const s=(i,d)=>qo.bindError(t(d),g=>gw(i,g)),c=te("val");return{extract:s,toString:c}},E1=zd(qo.svalue),zr=(t,s,c,i)=>rt(s,c).fold(()=>el(t,c,s),i),T1=(t,s,c,i)=>{const d=rt(t,s).getOrThunk(()=>c(t));return i(d)},hw=(t,s,c)=>c(rt(t,s)),vv=(t,s,c,i)=>{const d=rt(t,s).map(g=>g===!0?c(t):g);return i(d)},xs=(t,s,c,i,d)=>{const g=y=>d.extract(s.concat([i]),y),h=y=>y.fold(()=>qo.svalue(k.none()),w=>{const E=d.extract(s.concat([i]),w);return qo.map(E,k.some)});switch(t.tag){case"required":return zr(s,c,i,g);case"defaultedThunk":return T1(c,i,t.process,g);case"option":return hw(c,i,h);case"defaultedOptionThunk":return vv(c,i,t.process,h);case"mergeWithThunk":return T1(c,i,te({}),y=>{const w=zo(t.process(c),y);return g(w)})}},nh=(t,s,c)=>{const i={},d=[];for(const g of c)ao(g,(h,y,w,E)=>{const T=xs(w,t,s,h,E);qo.fold(T,A=>{d.push(...A)},A=>{i[y]=A})},(h,y)=>{i[h]=y(s)});return d.length>0?qo.serror(d):qo.svalue(i)},Es=t=>({extract:(i,d)=>t().extract(i,d),toString:()=>t().toString()}),oh=t=>Fo(_d(t,jt)),Fc=t=>{const s=kt(t),c=Ss(t,(d,g)=>ao(g,h=>zo(d,{[h]:!0}),te(d)),{});return{extract:(d,g)=>{const h=Co(g)?[]:oh(g),y=po(h,w=>!sa(c,w));return y.length===0?s.extract(d,g):hf(d,y)},toString:s.toString}},kt=t=>({extract:(i,d)=>nh(i,d,t),toString:()=>`obj{
`+De(t,d=>ao(d,(g,h,y,w)=>g+" -> "+w.toString(),(g,h)=>"state("+g+")")).join(`
`)+"}"}),Fa=t=>({extract:(i,d)=>{const g=De(d,(h,y)=>t.extract(i.concat(["["+y+"]"]),h));return Vl.consolidateArr(g)},toString:()=>"array("+t.toString()+")"}),pw=(t,s)=>{const c=s!==void 0?s:an;return{extract:(g,h)=>{const y=[];for(const w of t){const E=w.extract(g,h);if(E.stype===es.Value)return{stype:es.Value,svalue:c(E.svalue)};y.push(E)}return Vl.consolidateArr(y)},toString:()=>"oneOf("+De(t,g=>g.toString()).join(", ")+")"}},yv=(t,s)=>{const c=(g,h)=>Fa(zd(t)).extract(g,h);return{extract:(g,h)=>{const y=Fo(h),w=c(g,y);return qo.bind(w,E=>{const T=De(E,A=>Du(A,A,Qi(),s));return kt(T).extract(g,h)})},toString:()=>"setOf("+s.toString()+")"}},sh=(t,s)=>{const c=nc(s);return{extract:(g,h)=>c().extract(g,h),toString:()=>c().toString()}},Cv=Ks(Fa,kt),Ia=te(E1),tl=(t,s)=>zd(c=>{const i=typeof c;return t(c)?qo.svalue(c):qo.serror(`Expected type: ${s} but got: ${i}`)}),Ud=tl(uo,"number"),tt=tl(ke,"string"),La=tl(Co,"boolean"),wv=tl(He,"function"),pf=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>pf(t[s]));default:return!1}},Ha=zd(t=>pf(t)?qo.svalue(t):qo.serror("Expected value to be acceptable for sending via postMessage")),rh=(t,s,c,i)=>rt(c,i).fold(()=>x1(t,c,i),g=>g.extract(t.concat(["branch: "+i]),s)),Wd=(t,s)=>({extract:(d,g)=>rt(g,t).fold(()=>fw(d,t),y=>rh(d,g,s,y)),toString:()=>"chooseOn("+t+"). Possible values: "+Fo(s)}),zl=()=>Fa(E1),ch=t=>zd(s=>t(s).fold(qo.serror,qo.svalue)),yi=(t,s)=>yv(c=>qo.fromResult(t(c)),s),bw=(t,s,c)=>{const i=s.extract([t],c);return qo.mapError(i,d=>({input:c,errors:d}))},_o=(t,s,c)=>qo.toResult(bw(t,s,c)),Ne=t=>t.fold(s=>{throw new Error(Zd(s))},an),sc=(t,s,c)=>Ne(_o(t,s,c)),Zd=t=>`Errors: 
`+bv(t.errors).join(`
`)+`

Input object: `+S1(t.input),Ko=(t,s)=>Wd(t,Io(s,kt)),bf=(t,s)=>sh(t,s),$s=Du,Rn=gf,ah=t=>ch(s=>$o(t,s)?tn.value(s):tn.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),Te=t=>$s(t,t,Qi(),Ia()),Dn=(t,s)=>$s(t,t,Qi(),s),_1=t=>Dn(t,Ud),Ts=t=>Dn(t,tt),yr=(t,s)=>$s(t,t,Qi(),ah(s)),Va=t=>Dn(t,wv),Sv=(t,s)=>$s(t,t,eh(),zd(c=>qo.serror("The field: "+t+" is forbidden. "+s))),Nu=(t,s)=>$s(t,t,Qi(),kt(s)),xv=(t,s)=>$s(t,t,Qi(),Cv(s)),Ic=(t,s)=>$s(t,t,Qi(),Fa(s)),kn=t=>$s(t,t,eh(),Ia()),nl=(t,s)=>$s(t,t,eh(),s),ih=t=>nl(t,Ud),_s=t=>nl(t,tt),k1=(t,s)=>nl(t,ah(s)),ol=t=>nl(t,wv),lh=(t,s)=>nl(t,Fa(s)),Fs=(t,s)=>nl(t,kt(s)),Or=(t,s)=>nl(t,Fc(s)),le=(t,s)=>$s(t,t,pn(s),Ia()),io=(t,s,c)=>$s(t,t,pn(s),c),Ev=(t,s)=>io(t,s,Ud),ts=(t,s)=>io(t,s,tt),Qs=(t,s,c)=>io(t,s,ah(c)),er=(t,s)=>io(t,s,La),fo=(t,s)=>io(t,s,wv),O1=(t,s)=>io(t,s,Ha),Bu=(t,s,c)=>io(t,s,Fa(c)),vw=(t,s,c)=>io(t,s,kt(c)),vc={generate:t=>{if(!yt(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],c={};return it(t,(i,d)=>{const g=Fo(i);if(g.length!==1)throw new Error("one and only one name per case");const h=g[0],y=i[h];if(c[h]!==void 0)throw new Error("duplicate key detected:"+h);if(h==="cata")throw new Error("cannot have a case named cata (sorry)");if(!yt(y))throw new Error("case arguments must be an array");s.push(h),c[h]=(...w)=>{const E=w.length;if(E!==y.length)throw new Error("Wrong number of arguments to case "+h+". Expected "+y.length+" ("+y+"), got "+E);return{fold:(...A)=>{if(A.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+A.length);return A[d].apply(null,w)},match:A=>{const P=Fo(A);if(s.length!==P.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+P.join(","));if(!yu(s,V=>$o(P,V)))throw new Error("Not all branches were specified when using match. Specified: "+P.join(", ")+`
Required: `+s.join(", "));return A[h].apply(null,w)},log:A=>{console.log(A,{constructors:s,constructor:h,params:w})}}}}),c}};vc.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const X_=t=>{const s=[],c=[];return it(t,i=>{i.fold(d=>{s.push(d)},d=>{c.push(d)})}),{errors:s,values:c}},Tv=(t,s)=>{const c={};return Ms(t,(i,d)=>{$o(s,d)||(c[d]=i)}),c},yw=(t,s)=>({[t]:s}),Cw=t=>{const s={};return it(t,c=>{s[c.key]=c.value}),s},ww=(t,s)=>Tv(t,s),jd=(t,s)=>yw(t,s),vf=t=>Cw(t),VD=(t,s)=>t.length===0?tn.value(s):tn.value(zo(s,y1.apply(void 0,t))),dh=t=>tn.error(Gt(t)),_v=(t,s)=>{const c=X_(t);return c.errors.length>0?dh(c.errors):VD(c.values,s)},kv=t=>He(t)?t:Vn,A1=(t,s,c)=>{let i=t.dom;const d=kv(c);for(;i.parentNode;){i=i.parentNode;const g=ae.fromDom(i),h=s(g);if(h.isSome())return h;if(d(g))break}return k.none()},ua=(t,s,c)=>{const i=s(t),d=kv(c);return i.orThunk(()=>d(t)?k.none():A1(t,s,d))},R1=(t,s)=>Un(t.element,s.event.target),Gd={can:Ot,abort:Vn,run:J},yf=t=>{if(!sa(t,"can")&&!sa(t,"abort")&&!sa(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...Gd,...t}},D1=(t,s)=>(...c)=>wo(t,(i,d)=>i&&s(d).apply(void 0,c),!0),Sw=(t,s)=>(...c)=>wo(t,(i,d)=>i||s(d).apply(void 0,c),!1),Ov=t=>He(t)?{can:Ot,abort:Vn,run:t}:t,J_=t=>{const s=D1(t,d=>d.can),c=Sw(t,d=>d.abort);return{can:s,abort:c,run:(...d)=>{it(t,g=>{g.run.apply(void 0,d)})}}},tr=te,Ci=tr("touchstart"),$u=tr("touchmove"),qd=tr("touchend"),M1=tr("touchcancel"),Lc=tr("mousedown"),mh=tr("mousemove"),P1=tr("mouseout"),N1=tr("mouseup"),za=tr("mouseover"),Ua=tr("focusin"),xw=tr("focusout"),da=tr("keydown"),Kd=tr("keyup"),wi=tr("input"),sl=tr("change"),Yd=tr("click"),Q_=tr("transitioncancel"),fh=tr("transitionend"),Fu=tr("transitionstart"),ek=tr("selectstart"),Yo=t=>te("alloy."+t),B1={tap:Yo("tap")},Si=Yo("focus"),Xd=Yo("blur.post"),gh=Yo("paste.post"),xi=Yo("receive"),nr=Yo("execute"),Iu=Yo("focus.item"),$1=B1.tap,Lu=Yo("longpress"),Is=Yo("sandbox.close"),F1=Yo("typeahead.cancel"),I1=Yo("system.init"),tk=Yo("system.touchmove"),Ew=Yo("system.touchend"),Hu=Yo("system.scroll"),Jd=Yo("system.resize"),rc=Yo("system.attached"),Hc=Yo("system.detached"),Vc=Yo("system.dismissRequested"),hh=Yo("system.repositionRequested"),ph=Yo("focusmanager.shifted"),Cf=Yo("slotcontainer.visibility"),Av=Yo("system.external.element.scroll"),Tw=Yo("change.tab"),_w=Yo("dismiss.tab"),Rv=Yo("highlight"),wf=Yo("dehighlight"),sn=(t,s)=>{H1(t,t.element,s,{})},ht=(t,s,c)=>{H1(t,t.element,s,c)},Vu=t=>{sn(t,nr())},L1=(t,s,c)=>{H1(t,s,c,{})},H1=(t,s,c,i)=>{const d={target:s,...i};t.getSystem().triggerEvent(c,s,d)},Dv=(t,s,c,i)=>{const d={...i,target:s};t.getSystem().triggerEvent(c,s,d)},V1=(t,s,c,i)=>{t.getSystem().triggerEvent(c,s,i.event)},Fn=t=>vf(t),Mv=(t,s)=>({key:t,value:yf({abort:s})}),kw=(t,s)=>({key:t,value:yf({can:s})}),Pv=t=>({key:t,value:yf({run:(s,c)=>{c.event.prevent()}})}),Ee=(t,s)=>({key:t,value:yf({run:s})}),Sf=(t,s,c)=>({key:t,value:yf({run:(i,d)=>{s.apply(void 0,[i,d].concat(c))}})}),Ow=t=>s=>Ee(t,s),Qd=t=>s=>({key:t,value:yf({run:(c,i)=>{R1(c,i)&&s(c,i)}})}),Aw=(t,s)=>Ee(t,(c,i)=>{c.getSystem().getByUid(s).each(d=>{V1(d,d.element,t,i)})}),Ul=(t,s,c)=>{const i=s.partUids[c];return Aw(t,i)},z1=(t,s)=>Ee(t,(c,i)=>{const d=i.event,g=c.getSystem().getByDom(d.target).getOrThunk(()=>ua(d.target,y=>c.getSystem().getByDom(y).toOptional(),Vn).getOr(c));s(c,g,i)}),em=t=>Ee(t,(s,c)=>{c.cut()}),bh=t=>Ee(t,(s,c)=>{c.stop()}),zu=(t,s)=>Qd(t)(s),lo=Qd(rc()),rl=Qd(Hc()),Rw=Qd(I1()),Wl=Ow(nr()),Nv=(t,s,c)=>{const i=c.toString(),d=i.indexOf(")")+1,g=i.indexOf("("),h=i.substring(g+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:tm(h.slice(0,1).concat(h.slice(3)))}),t},tm=t=>De(t,s=>Gi(s,"/*")?s.substring(0,s.length-2):s),Bv=(t,s)=>{const c=t.toString(),i=c.indexOf(")")+1,d=c.indexOf("("),g=c.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:tm(g)}),t},$v=(t,s)=>{const c=s.toString(),i=c.indexOf(")")+1,d=c.indexOf("("),g=c.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:tm(g.slice(1))}),t},Ur=t=>({classes:Xn(t.classes)?[]:t.classes,attributes:Xn(t.attributes)?{}:t.attributes,styles:Xn(t.styles)?{}:t.styles}),xf=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),nk=(t,s,c)=>Wl(i=>{c(i,t,s)}),Uu=(t,s,c)=>Rw((i,d)=>{c(i,t,s)}),ok=(t,s,c,i,d,g)=>{const h=Fc(t),y=Fs(s,[Or("config",t)]);return vh(h,y,s,c,i,d,g)},nm=(t,s,c,i,d,g)=>{const h=t,y=Fs(s,[nl("config",t)]);return vh(h,y,s,c,i,d,g)},U1=(t,s,c)=>Nv((d,...g)=>{const h=[d].concat(g);return d.config({name:te(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+c)},y=>{const w=Array.prototype.slice.call(h,1);return s.apply(void 0,[d,y.config,y.state].concat(w))})},c,s),sk=t=>({key:t,value:void 0}),vh=(t,s,c,i,d,g,h)=>{const y=A=>sa(A,c)?A[c]():k.none(),w=Io(d,(A,P)=>U1(c,A,P)),T={...Io(g,(A,P)=>Bv(A,P)),...w,revoke:An(sk,c),config:A=>{const P=sc(c+"-config",t,A);return{key:c,value:{config:P,me:T,configAsRaw:nc(()=>sc(c+"-config",t,A)),initialConfig:A,state:h}}},schema:te(s),exhibit:(A,P)=>Cu(y(A),rt(i,"exhibit"),($,V)=>V(P,$.config,$.state)).getOrThunk(()=>Ur({})),name:te(c),handlers:A=>y(A).map(P=>rt(i,"events").getOr(()=>({}))(P.config,P.state)).getOr({})};return T},Ei={init:()=>Ar({readState:te("No State required")})},Ar=t=>t,$e=t=>vf(t),Ef=Fc([Te("fields"),Te("name"),le("active",{}),le("apis",{}),le("state",Ei),le("extra",{})]),Ls=t=>{const s=sc("Creating behaviour: "+t.name,Ef,t);return ok(s.fields,s.name,s.active,s.apis,s.extra,s.state)},Fv=Fc([Te("branchKey"),Te("branches"),Te("name"),le("active",{}),le("apis",{}),le("state",Ei),le("extra",{})]),Iv=t=>{const s=sc("Creating behaviour: "+t.name,Fv,t);return nm(Ko(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},Lv=te(void 0),Yn=(t,s)=>{const c=qt(t,s);return c===void 0||c===""?[]:c.split(" ")},rk=(t,s,c)=>{const d=Yn(t,s).concat([c]);return Dt(t,s,d.join(" ")),!0},om=(t,s,c)=>{const i=po(Yn(t,s),d=>d!==c);return i.length>0?Dt(t,s,i.join(" ")):Ro(t,s),!1},Zl=t=>t.dom.classList!==void 0,Tf=t=>Yn(t,"class"),Hv=(t,s)=>rk(t,"class",s),cl=(t,s)=>om(t,"class",s),Dw=(t,s)=>$o(Tf(t),s)?cl(t,s):Hv(t,s),ns=(t,s)=>{Zl(t)?t.dom.classList.add(s):Hv(t,s)},W1=t=>{(Zl(t)?t.dom.classList:Tf(t)).length===0&&Ro(t,"class")},In=(t,s)=>{Zl(t)?t.dom.classList.remove(s):cl(t,s),W1(t)},Vv=(t,s)=>{const c=Zl(t)?t.dom.classList.toggle(s):Dw(t,s);return W1(t),c},Wr=(t,s)=>Zl(t)&&t.dom.classList.contains(s),_f=(t,s)=>{it(s,c=>{ns(t,c)})},Ti=(t,s)=>{it(s,c=>{In(t,c)})},zD=(t,s)=>{it(s,c=>{Vv(t,c)})},Z1=(t,s)=>yu(s,c=>Wr(t,c)),ck=t=>{const s=t.dom.classList,c=new Array(s.length);for(let i=0;i<s.length;i++){const d=s.item(i);d!==null&&(c[i]=d)}return c},Mw=t=>Zl(t)?ck(t):Tf(t),Wa=(t,s,c,i,d)=>{const g=h=>h+"px";return{position:t,left:s.map(g),top:c.map(g),right:i.map(g),bottom:d.map(g)}},_i=t=>({...t,position:k.some(t.position)}),Rr=(t,s)=>{Na(t,_i(s))},kf=t=>(Ac(Go(t,"position"),"fixed")?k.none():nv(t)).orThunk(()=>{const i=ae.fromTag("span");return Ma(t).bind(d=>{Hr(d,i);const g=nv(i);return pc(i),g})}),j1=t=>kf(t).map(Ho).getOrThunk(()=>Do(0,0)),G1=(t,s)=>{const c=t.element;ns(c,s.transitionClass),In(c,s.fadeOutClass),ns(c,s.fadeInClass),s.onShow(t)},Of=(t,s)=>{const c=t.element;ns(c,s.transitionClass),In(c,s.fadeInClass),ns(c,s.fadeOutClass),s.onHide(t)},Wu=(t,s)=>t.y<s.bottom&&t.bottom>s.y,al=(t,s)=>t.y>=s.y,Af=(t,s)=>t.bottom<=s.bottom,Zu=(t,s,c)=>({location:"top",leftX:s,topY:c.bounds.y-t.y}),jl=(t,s,c)=>({location:"bottom",leftX:s,bottomY:t.bottom-c.bounds.bottom}),sm=t=>t.box.x-t.win.x,yh=(t,s,c)=>{const i=s.win,d=s.box,g=sm(s);return ir(t,h=>{switch(h){case"bottom":return Af(d,c.bounds)?k.none():k.some(jl(i,g,c));case"top":return al(d,c.bounds)?k.none():k.some(Zu(i,g,c));default:return k.none()}}).getOr({location:"no-dock"})},q1=(t,s,c)=>yu(t,i=>{switch(i){case"bottom":return Af(s,c.bounds);case"top":return al(s,c.bounds)}}),Pw=(t,s)=>{const c=s.optScrollEnv.fold(te(t.bounds.y),i=>i.scrollElmTop+(t.bounds.y-i.currentScrollTop));return Do(t.bounds.x,c)},zv=(t,s)=>{const c=s.optScrollEnv.fold(te(t.y),i=>t.y+i.currentScrollTop-i.scrollElmTop);return Do(t.x,c)},Rf=(t,s,c)=>c.getInitialPos().map(i=>{const d=Pw(i,s);return{box:To(d.left,d.top,tc(t),gs(t)),location:i.location}}),Nw=(t,s,c,i,d)=>{const g=zv(s,c),h=To(g.left,g.top,s.width,s.height);i.setInitialPos({style:iv(t),position:kr(t,"position")||"static",bounds:h,location:d.location})},ak=(t,s,c,i,d)=>{i.getInitialPos().fold(()=>Nw(t,s,c,i,d),()=>J)},K1=(t,s,c)=>c.getInitialPos().bind(i=>{var d;switch(c.clearInitialPos(),i.position){case"static":return k.some({morph:"static"});case"absolute":const g=kf(t).getOr(mi()),h=Vo(g),y=(d=g.dom.scrollTop)!==null&&d!==void 0?d:0;return k.some({morph:"absolute",positionCss:Wa("absolute",rt(i.style,"left").map(w=>s.x-h.x),rt(i.style,"top").map(w=>s.y-h.y+y),rt(i.style,"right").map(w=>h.right-s.right),rt(i.style,"bottom").map(w=>h.bottom-s.bottom))});default:return k.none()}}),Uv=(t,s,c)=>Rf(t,s,c).filter(({box:i})=>q1(c.getModes(),i,s)).bind(({box:i})=>K1(t,i,c)),Ch=t=>{switch(t.location){case"top":return k.some({morph:"fixed",positionCss:Wa("fixed",k.some(t.leftX),k.some(t.topY),k.none(),k.none())});case"bottom":return k.some({morph:"fixed",positionCss:Wa("fixed",k.some(t.leftX),k.none(),k.none(),k.some(t.bottomY))});default:return k.none()}},Wv=(t,s,c)=>{const i=Vo(t),d=Ns(),g=yh(c.getModes(),{win:d,box:i},s);return g.location==="top"||g.location==="bottom"?(Nw(t,i,s,c,g),Ch(g)):k.none()},Df=(t,s,c)=>Uv(t,s,c).orThunk(()=>s.optScrollEnv.bind(i=>Rf(t,s,c)).bind(({box:i,location:d})=>{const g=Ns(),h=sm({win:g,box:i}),y=d==="top"?Zu(g,h,s):jl(g,h,s);return Ch(y)})),UD=(t,s,c)=>{const i=t.element;return Ac(Go(i,"position"),"fixed")?Df(i,s,c):Wv(i,s,c)},WD=(t,s,c)=>{const i=t.element;return Rf(i,s,c).bind(({box:d})=>K1(i,d,c))},Mf=(t,s,c,i)=>{const d=Vo(t),g=Ns(),h=sm({win:g,box:d}),y=i(g,h,s);return y.location==="bottom"||y.location==="top"?(ak(t,d,s,c,y),Ch(y)):k.none()},Za=(t,s,c)=>{c.setDocked(!1),it(["left","right","top","bottom","position"],i=>Kt(t.element,i)),s.onUndocked(t)},wh=(t,s,c,i)=>{const d=i.position==="fixed";c.setDocked(d),Rr(t.element,i),(d?s.onDocked:s.onUndocked)(t)},Bw=(t,s,c,i,d=!1)=>{s.contextual.each(g=>{g.lazyContext(t).each(h=>{const y=Wu(h,i.bounds);y!==c.isVisible()&&(c.setVisible(y),d&&!y?(_f(t.element,[g.fadeOutClass]),g.onHide(t)):(y?G1:Of)(t,g))})})},$w=(t,s,c,i,d)=>{Bw(t,s,c,i,!0),wh(t,s,c,d.positionCss)},Fw=(t,s,c,i,d)=>{switch(d.morph){case"static":return Za(t,s,c);case"absolute":return wh(t,s,c,d.positionCss);case"fixed":return $w(t,s,c,i,d)}},rm=(t,s,c)=>{const i=s.lazyViewport(t);Bw(t,s,c,i),UD(t,i,c).each(d=>{Fw(t,s,c,i,d)})},ZD=(t,s,c)=>{const i=t.element;c.setDocked(!1);const d=s.lazyViewport(t);WD(t,d,c).each(g=>{switch(g.morph){case"static":{Za(t,s,c);break}case"absolute":{wh(t,s,c,g.positionCss);break}}}),c.setVisible(!0),s.contextual.each(g=>{Ti(i,[g.fadeInClass,g.fadeOutClass,g.transitionClass]),g.onShow(t)}),cm(t,s,c)},cm=(t,s,c)=>{t.getSystem().isConnected()&&rm(t,s,c)},Pf=(t,s,c)=>{c.isDocked()&&ZD(t,s,c)},Iw=t=>(s,c,i)=>{const d=c.lazyViewport(s);Mf(s.element,d,i,t).each(h=>{$w(s,c,i,d,h)})},Nf=Iw(Zu),ik=Iw(jl);var dr=Object.freeze({__proto__:null,refresh:cm,reset:Pf,isDocked:(t,s,c)=>c.isDocked(),getModes:(t,s,c)=>c.getModes(),setModes:(t,s,c,i)=>c.setModes(i),forceDockToTop:Nf,forceDockToBottom:ik}),ju=Object.freeze({__proto__:null,events:(t,s)=>Fn([zu(fh(),(c,i)=>{t.contextual.each(d=>{Wr(c.element,d.transitionClass)&&(Ti(c.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(c)),i.stop()})}),Ee(Hu(),(c,i)=>{cm(c,t,s)}),Ee(Av(),(c,i)=>{cm(c,t,s)}),Ee(Jd(),(c,i)=>{Pf(c,t,s)})])});const lk=(t,s)=>{const i=(s||document).createElement("div");return i.innerHTML=t,Pa(ae.fromDom(i))},Gl=t=>t.dom.innerHTML,yc=(t,s)=>{const i=Pc(t).dom,d=ae.fromDom(i.createDocumentFragment()),g=lk(s,i);p1(d,g),Js(t),Hr(t,d)},ki=t=>{const s=ae.fromTag("div"),c=ae.fromDom(t.dom.cloneNode(!0));return Hr(s,c),Gl(s)},am=(t,s)=>ae.fromDom(t.dom.cloneNode(s)),Vw=t=>am(t,!1),Sh=t=>am(t,!0),Y1=t=>{if(sv(t))return"#shadow-root";{const s=Vw(t);return ki(s)}},Gu=t=>Y1(t),jv="unknown";var Oi;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(Oi||(Oi={}));const il=St({}),uk=(t,s)=>{const c=[],i=new Date().getTime();return{logEventCut:(d,g,h)=>{c.push({outcome:"cut",target:g,purpose:h})},logEventStopped:(d,g,h)=>{c.push({outcome:"stopped",target:g,purpose:h})},logNoParent:(d,g,h)=>{c.push({outcome:"no-parent",target:g,purpose:h})},logEventNoHandlers:(d,g)=>{c.push({outcome:"no-handlers-left",target:g})},logEventResponse:(d,g,h)=>{c.push({outcome:"response",purpose:h,target:g})},write:()=>{const d=new Date().getTime();$o(["mousemove","mouseover","mouseout",I1()],t)||console.log(t,{event:t,time:d-i,target:s.dom,sequence:De(c,g=>$o(["cut","stopped","response"],g.outcome)?"{"+g.purpose+"} "+g.outcome+" at ("+Gu(g.target)+")":g.outcome)})}}},ks=(t,s,c)=>{switch(rt(il.get(),t).orThunk(()=>{const d=Fo(il.get());return ir(d,g=>t.indexOf(g)>-1?k.some(il.get()[g]):k.none())}).getOr(Oi.NORMAL)){case Oi.NORMAL:return c(im());case Oi.LOGGING:{const d=uk(t,s),g=c(d);return d.write(),g}case Oi.STOP:return!0}},xh=["alloy/data/Fields","alloy/debugging/Debugging"],ma=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return zt(s,c=>c.indexOf("alloy")>0&&!uc(xh,i=>c.indexOf(i)>-1)).getOr(jv)}else return jv},X1={logEventCut:J,logEventStopped:J,logNoParent:J,logEventNoHandlers:J,logEventResponse:J,write:J},Gv=(t,s,c)=>ks(t,s,c),im=te(X1),qu=te([Te("menu"),Te("selectedMenu")]),ja=te([Te("item"),Te("selectedItem")]);te(kt(ja().concat(qu())));const fa=te(kt(ja())),zw=Nu("initSize",[Te("numColumns"),Te("numRows")]),dk=()=>Dn("markers",fa()),ll=()=>Nu("markers",[Te("backgroundMenu")].concat(qu()).concat(ja())),ql=t=>Nu("markers",De(t,Te)),J1=(t,s,c)=>(ma(),$s(s,s,c,ch(i=>tn.value((...d)=>i.apply(void 0,d))))),bn=t=>J1("onHandler",t,pn(J)),Cr=t=>J1("onKeyboardHandler",t,pn(k.none)),lm=t=>J1("onHandler",t,Qi()),Bf=t=>J1("onKeyboardHandler",t,Qi()),Qn=(t,s)=>Rn(t,te(s)),um=t=>Rn(t,an),Kl=te(zw);var Uw=[Fs("contextual",[Ts("fadeInClass"),Ts("fadeOutClass"),Ts("transitionClass"),Va("lazyContext"),bn("onShow"),bn("onShown"),bn("onHide"),bn("onHidden")]),fo("lazyViewport",()=>({bounds:Ns(),optScrollEnv:k.none()})),Bu("modes",["top","bottom"],tt),bn("onDocked"),bn("onUndocked")],Ww=Object.freeze({__proto__:null,init:t=>{const s=St(!1),c=St(!0),i=Mn(),d=St(t.modes),g=()=>`docked:  ${s.get()}, visible: ${c.get()}, modes: ${d.get().join(",")}`;return Ar({isDocked:s.get,setDocked:s.set,getInitialPos:i.get,setInitialPos:i.set,clearInitialPos:i.clear,isVisible:c.get,setVisible:c.set,getModes:d.get,setModes:d.set,readState:g})}});const eo=Ls({fields:Uw,name:"docking",active:ju,apis:dr,state:Ww}),Eh=(t,s,c)=>Un(s,t.element)&&!Un(s,c),fk=Fn([kw(Si(),(t,s)=>{const c=s.event,i=c.originator,d=c.target;return Eh(t,i,d)?(console.warn(Si()+` did not get interpreted by the desired target. 
Originator: `+Gu(i)+`
Target: `+Gu(d)+`
Check the `+Si()+" event handlers"),!1):!0})]);var Zw=Object.freeze({__proto__:null,events:fk});const dm=(t,s,c,i)=>{const d=t+s;return d>i?c:d<c?i:d},Ga=(t,s,c)=>Math.min(Math.max(t,s),c),Th=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let Yl=0;const ut=t=>{const c=new Date().getTime(),i=Math.floor(Th()*1e9);return Yl++,t+"_"+i+Yl+String(c)},jw=te("alloy-id-"),Q1=te("data-alloy-id"),Gw=jw(),qw=Q1(),qv=(t,s)=>{const c=ut(Gw+t);return Kv(s,c),c},Kv=(t,s)=>{Object.defineProperty(t.dom,qw,{value:s,writable:!0})},$f=t=>{const s=Jn(t)?t.dom[qw]:null;return k.from(s)},_h=t=>ut(t),mm=an,eb=t=>{const s=d=>`The component must be in a context to execute: ${d}`+(t?`
`+Gu(t().element)+" is not in context.":""),c=d=>()=>{throw new Error(s(d))},i=d=>()=>{console.warn(s(d))};return{debugInfo:te("fake"),triggerEvent:i("triggerEvent"),triggerFocus:i("triggerFocus"),triggerEscape:i("triggerEscape"),broadcast:i("broadcast"),broadcastOn:i("broadcastOn"),broadcastEvent:i("broadcastEvent"),build:c("build"),buildOrPatch:c("buildOrPatch"),addToWorld:c("addToWorld"),removeFromWorld:c("removeFromWorld"),addToGui:c("addToGui"),removeFromGui:c("removeFromGui"),getByUid:c("getByUid"),getByDom:c("getByDom"),isConnected:Vn}},Ff=eb(),tb=ut("alloy-premade"),qa=t=>(Object.defineProperty(t.element.dom,tb,{value:t.uid,writable:!0}),jd(tb,t)),gk=t=>$n(t.dom,tb),nb=t=>rt(t,tb),ob=t=>$v((s,...c)=>t(s.getApis(),s,...c),t),hk=(t,s)=>{const c=De(s,d=>Fs(d.name(),[Te("config"),le("state",Ei)])),i=_o("component.behaviours",kt(c),t.behaviours).fold(d=>{throw new Error(Zd(d)+`
Complete spec:
`+JSON.stringify(t,null,2))},an);return{list:s,data:Io(i,d=>{const g=d.map(h=>({config:h.config,state:h.state.init(h.config)}));return te(g)})}},pk=t=>t.list,Kw=t=>t.data,kh=(t,s)=>{const c={};return Ms(t,(i,d)=>{Ms(i,(g,h)=>{const y=rt(c,h).getOr([]);c[h]=y.concat([s(d,g)])})}),c},Yw=(t,s,c,i)=>{const d={...s};it(c,T=>{d[T.name()]=T.exhibit(t,i)});const g=kh(d,(T,A)=>({name:T,modification:A})),h=T=>Ss(T,(A,P)=>({...P.modification,...A}),{}),y=Ss(g.classes,(T,A)=>A.modification.concat(T),[]),w=h(g.attributes),E=h(g.styles);return Ur({classes:y,attributes:w,styles:E})},Yv=(t,s,c,i)=>{try{const d=Ug(c,(g,h)=>{const y=g[s],w=h[s],E=i.indexOf(y),T=i.indexOf(w);if(E===-1)throw new Error("The ordering for "+t+" does not have an entry for "+y+`.
Order specified: `+JSON.stringify(i,null,2));if(T===-1)throw new Error("The ordering for "+t+" does not have an entry for "+w+`.
Order specified: `+JSON.stringify(i,null,2));return E<T?-1:T<E?1:0});return tn.value(d)}catch(d){return tn.error([d])}},bk=(t,s)=>({handler:t,purpose:s}),Oh=(t,s)=>({cHandler:t,purpose:s}),If=(t,s)=>Oh(An.apply(void 0,[t.handler].concat(s)),t.purpose),Ku=t=>t.cHandler,sb=(t,s)=>({name:t,handler:s}),Xv=(t,s)=>{const c={};return it(t,i=>{c[i.name()]=i.handlers(s)}),c},rb=(t,s,c)=>{const i={...c,...Xv(s,t)};return kh(i,sb)},Jv=(t,s,c,i)=>{const d=rb(t,c,i);return Cc(d,s)},Qv=t=>{const s=Ov(t);return(c,i,...d)=>{const g=[c,i].concat(d);s.abort.apply(void 0,g)?i.stop():s.can.apply(void 0,g)&&s.run.apply(void 0,g)}},ey=(t,s)=>tn.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(De(s,c=>c.name),null,2)]),Xw=(t,s,c)=>{const i=s[c];return i?Yv("Event: "+c,"name",t,i).map(d=>{const g=De(d,h=>h.handler);return J_(g)}):ey(c,t)},Cc=(t,s)=>{const c=Wg(t,(i,d)=>(i.length===1?tn.value(i[0].handler):Xw(i,s,d)).map(h=>{const y=Qv(h),w=i.length>1?po(s[d],E=>uc(i,T=>T.name===E)).join(" > "):i[0].name;return jd(d,bk(y,w))}));return _v(c,{})},fm="alloy.base.behaviour",Jw=kt([$s("dom","dom",Qi(),kt([Te("tag"),le("styles",{}),le("classes",[]),le("attributes",{}),kn("value"),kn("innerHtml")])),Te("components"),Te("uid"),le("events",{}),le("apis",{}),$s("eventOrder","eventOrder",mw({[nr()]:["disabling",fm,"toggling","typeaheadevents"],[Si()]:[fm,"focusing","keying"],[I1()]:[fm,"disabling","toggling","representing","tooltipping"],[wi()]:[fm,"representing","streaming","invalidating"],[Hc()]:[fm,"representing","item-events","toolbar-button-events","tooltipping"],[Lc()]:["focusing",fm,"item-type-events"],[Ci()]:["focusing",fm,"item-type-events"],[za()]:["item-type-events","tooltipping"],[xi()]:["receiving","reflecting","tooltipping"]}),Ia()),kn("domModification")]),Yu=t=>_o("custom.definition",Jw,t),gm=t=>({...t.dom,uid:t.uid,domChildren:De(t.components,s=>s.element)}),ty=t=>t.domModification.fold(()=>Ur({}),Ur),Ce=t=>t.events,Ka=t=>t.dom.value,hm=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},vk=(t,s,c)=>Su(t,s).map(d=>{if(c.exists(h=>!Un(h,d))){const h=c.map(Da).getOr("span"),y=ae.fromTag(h);return Fd(d,y),y}else return d}),Ah=(t,s,c)=>{c.fold(()=>Hr(t,s),i=>{Un(i,s)||(Fd(i,s),pc(i))})},ga=(t,s,c)=>{const i=De(s,c),d=Pa(t);return it(d.slice(i.length),pc),i},Lf=(t,s,c,i)=>{const d=Su(t,s),g=i(c,d),h=vk(t,s,d);return Ah(t,g.element,h),g},Qw=(t,s,c)=>ga(t,s,(i,d)=>Lf(t,d,i,c)),eS=(t,s)=>ga(t,s,(c,i)=>{const d=Su(t,i);return Ah(t,c,d),c}),wr=(t,s)=>{const c=Fo(t),i=Fo(s),d=Rt(i,c),g=mc(t,(h,y)=>!$n(s,y)||h!==s[y]).t;return{toRemove:d,toSet:g}},cb=(t,s)=>{const{class:c,style:i,...d}=V_(s),{toSet:g,toRemove:h}=wr(t.attributes,d),y=()=>{it(h,oe=>Ro(s,oe)),YC(s,g)},w=iv(s),{toSet:E,toRemove:T}=wr(t.styles,w),A=()=>{it(T,oe=>Kt(s,oe)),Ll(s,E)},P=Mw(s),$=Rt(P,t.classes),V=Rt(t.classes,P),W=()=>{_f(s,V),Ti(s,$)},se=oe=>{yc(s,oe)},G=()=>{const oe=t.domChildren;eS(s,oe)},ee=()=>{const oe=s,be=t.value.getOrUndefined();be!==Ka(oe)&&hm(oe,be??"")};return y(),W(),A(),t.innerHtml.fold(G,se),ee(),s},tS=t=>{const s=ae.fromTag(t.tag);YC(s,t.attributes),_f(s,t.classes),Ll(s,t.styles),t.innerHtml.each(i=>yc(s,i));const c=t.domChildren;return p1(s,c),t.value.each(i=>{hm(s,i)}),s},yk=(t,s)=>{try{const c=cb(t,s);return k.some(c)}catch{return k.none()}},nS=t=>t.innerHtml.isSome()&&t.domChildren.length>0,Ck=(t,s)=>{const c=d=>Da(d)===t.tag&&!nS(t)&&!gk(d),i=s.filter(c).bind(d=>yk(t,d)).getOrThunk(()=>tS(t));return Kv(i,t.uid),i},oS=t=>{const s=rt(t,"behaviours").getOr({});return Se(Fo(s),c=>{const i=s[c];return jt(i)?[i.me]:[]})},wk=(t,s)=>hk(t,s),Sk=t=>{const s=oS(t);return wk(t,s)},sS=(t,s,c)=>{const i=gm(t),d=ty(t),g={"alloy.base.modification":d},h=s.length>0?Yw(c,g,s,i):d;return xf(i,h)},Hf=(t,s,c)=>{const i={"alloy.base.behaviour":Ce(t)};return Jv(c,t.eventOrder,s,i).getOrDie()},xk=(t,s)=>{const c=()=>oe,i=St(Ff),d=Ne(Yu(t)),g=Sk(t),h=pk(g),y=Kw(g),w=sS(d,h,y),E=Ck(w,s),T=Hf(d,h,y),A=St(d.components),P=be=>{i.set(be)},$=()=>{i.set(eb(c))},V=()=>{const be=Pa(E),ye=Se(be,We=>i.get().getByDom(We).fold(()=>[],Zo));A.set(ye)},W=be=>{const ye=y;return(He(ye[be.name()])?ye[be.name()]:()=>{throw new Error("Could not find "+be.name()+" in "+JSON.stringify(t,null,2))})()},se=be=>He(y[be.name()]),G=()=>d.apis,ee=be=>y[be]().map(ye=>ye.state.readState()).getOr("not enabled"),oe={uid:t.uid,getSystem:i.get,config:W,hasConfigured:se,spec:t,readState:ee,getApis:G,connect:P,disconnect:$,element:E,syncComponents:V,components:A.get,events:T};return oe},rS=(t,s)=>{const c=rt(t,"components").getOr([]);return s.fold(()=>De(c,Os),i=>De(c,(d,g)=>oy(d,Su(i,g))))},Ek=(t,s)=>{const{events:c,...i}=mm(t),d=rS(i,s),g={...i,events:{...Zw,...c},components:d};return tn.value(xk(g,s))},xo=t=>{const s=ae.fromText(t);return ny({element:s})},ny=t=>{const s=sc("external.component",Fc([Te("element"),kn("uid")]),t),c=St(eb()),i=y=>{c.set(y)},d=()=>{c.set(eb(()=>h))},g=s.uid.getOrThunk(()=>_h("external"));Kv(s.element,g);const h={uid:g,getSystem:c.get,config:k.none,hasConfigured:Vn,connect:i,disconnect:d,getApis:()=>({}),element:s.element,spec:t,readState:te("No state"),syncComponents:J,components:te([]),events:{}};return qa(h)},cS=_h,aS=t=>$n(t,"uid"),oy=(t,s)=>nb(t).getOrThunk(()=>{const c=aS(t)?t:{uid:cS(""),...t};return Ek(c,s).getOrDie()}),Os=t=>oy(t,k.none()),zc=qa;var iS=(t,s,c,i,d)=>t(c,i)?k.some(c):He(d)&&d(c)?k.none():s(c,i,d);const sy=(t,s,c)=>{let i=t.dom;const d=He(c)?c:Vn;for(;i.parentNode;){i=i.parentNode;const g=ae.fromDom(i);if(s(g))return k.some(g);if(d(g))break}return k.none()},ry=(t,s,c)=>iS((d,g)=>g(d),sy,t,s,c),Tk=(t,s)=>{const c=t.dom;return c.parentNode?ab(ae.fromDom(c.parentNode),i=>!Un(t,i)&&s(i)):k.none()},ab=(t,s)=>{const c=d=>s(ae.fromDom(d));return zt(t.dom.childNodes,c).map(ae.fromDom)},lS=(t,s)=>{const c=i=>{for(let d=0;d<i.childNodes.length;d++){const g=ae.fromDom(i.childNodes[d]);if(s(g))return k.some(g);const h=c(i.childNodes[d]);if(h.isSome())return h}return k.none()};return c(t.dom)},Rh=(t,s,c)=>ry(t,s,c).isSome(),uS=t=>tv(t),hs=(t,s,c)=>sy(t,i=>ec(i,s),c),_k=(t,s)=>Tk(t,c=>ec(c,s)),ha=(t,s)=>ab(t,c=>ec(c,s)),go=(t,s)=>tv(s,t),ul=(t,s,c)=>iS((d,g)=>ec(d,g),hs,t,s,c),Vf="aria-controls",cy=t=>ry(t,c=>{if(!Jn(c))return!1;const i=qt(c,"id");return i!==void 0&&i.indexOf(Vf)>-1}).bind(c=>{const i=qt(c,"id"),d=lr(c);return go(d,`[${Vf}="${i}"]`)}),Dh=()=>{const t=ut(Vf);return{id:t,link:i=>{Dt(i,Vf,t)},unlink:i=>{Ro(i,Vf)}}},dS=(t,s)=>cy(s).exists(c=>Xu(t,c)),Xu=(t,s)=>Rh(s,c=>Un(c,t.element),Vn)||dS(t,s),mr=(t,s,c,i,d,g,h,y=!1)=>({x:t,y:s,bubble:c,direction:i,placement:d,restriction:g,label:`${h}-${d}`,alwaysFit:y}),dl=vc.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),mS=(t,s,c,i,d,g,h,y,w)=>t.fold(s,c,i,d,g,h,y,w),kk=(t,s,c,i)=>t.fold(s,s,i,i,s,i,c,c),ay=(t,s,c,i)=>t.fold(s,i,s,i,c,c,s,i),ib=dl.southeast,iy=dl.southwest,ly=dl.northeast,lb=dl.northwest,dt=dl.south,Mh=dl.north,uy=dl.east,fS=dl.west,Ok=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},fr=(t,s)=>Td(["left","right","top","bottom"],c=>rt(s,c).map(i=>Ok(t,i))),gS=(t,s,c)=>{const i=(w,E)=>s[w].map(T=>{const A=w==="top"||w==="bottom",P=A?c.top:c.left,V=(w==="left"||w==="top"?Math.max:Math.min)(T,E)+P;return A?Ga(V,t.y,t.bottom):Ga(V,t.x,t.right)}).getOr(E),d=i("left",t.x),g=i("top",t.y),h=i("right",t.right),y=i("bottom",t.bottom);return To(d,g,h-d,y-g)},Ju="layout",hS=t=>t.x,dy=(t,s)=>t.x+t.width/2-s.width/2,pS=(t,s)=>t.x+t.width-s.width,gr=(t,s)=>t.y-s.height,Qu=t=>t.y+t.height,my=(t,s)=>t.y+t.height/2-s.height/2,pm=t=>t.x+t.width,Ak=(t,s)=>t.x-s.width,ps=(t,s,c)=>mr(hS(t),Qu(t),c.southeast(),ib(),"southeast",fr(t,{left:1,top:3}),Ju),bs=(t,s,c)=>mr(pS(t,s),Qu(t),c.southwest(),iy(),"southwest",fr(t,{right:0,top:3}),Ju),or=(t,s,c)=>mr(hS(t),gr(t,s),c.northeast(),ly(),"northeast",fr(t,{left:1,bottom:2}),Ju),vs=(t,s,c)=>mr(pS(t,s),gr(t,s),c.northwest(),lb(),"northwest",fr(t,{right:0,bottom:2}),Ju),Nn=(t,s,c)=>mr(dy(t,s),gr(t,s),c.north(),Mh(),"north",fr(t,{bottom:2}),Ju),is=(t,s,c)=>mr(dy(t,s),Qu(t),c.south(),dt(),"south",fr(t,{top:3}),Ju),ub=(t,s,c)=>mr(pm(t),my(t,s),c.east(),uy(),"east",fr(t,{left:0}),Ju),fy=(t,s,c)=>mr(Ak(t,s),my(t,s),c.west(),fS(),"west",fr(t,{right:1}),Ju),gy=()=>[ps,bs,or,vs,is,Nn,ub,fy],hy=()=>[bs,ps,vs,or,is,Nn,ub,fy],bS=()=>[or,vs,ps,bs,Nn,is],vS=()=>[vs,or,bs,ps,Nn,is],Ph=()=>[ps,bs,or,vs,is,Nn],db=()=>[bs,ps,vs,or,is,Nn],Nh=(t,s)=>s.universal?t:po(t,c=>$o(s.channels,c));var GD=Object.freeze({__proto__:null,events:t=>Fn([Ee(xi(),(s,c)=>{const i=t.channels,d=Fo(i),g=c,h=Nh(d,g);it(h,y=>{const w=i[y],E=w.schema,T=sc("channel["+y+`] data
Receiver: `+Gu(s.element),E,g.data);w.onReceive(s,T)})})])}),bm=[Dn("channels",yi(tn.value,Fc([lm("onReceive"),le("schema",Ia())])))];const wc=Ls({fields:bm,name:"receiving",active:GD});var Dk=Object.freeze({__proto__:null,exhibit:(t,s)=>Ur({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const pa=(t,s=!1)=>t.dom.focus({preventScroll:s}),zf=t=>t.dom.blur(),Uf=t=>{const s=lr(t).dom;return t.dom===s.activeElement},ml=(t=bi())=>k.from(t.dom.activeElement).map(ae.fromDom),Dr=t=>ml(lr(t)).filter(s=>t.dom.contains(s.dom)),py=(t,s)=>{const c=lr(s),i=ml(c).bind(g=>{const h=y=>Un(g,y);return h(s)?k.some(s):lS(s,h)}),d=t(s);return i.each(g=>{ml(c).filter(h=>Un(h,g)).fold(()=>{pa(g)},J)}),d},ed=vc.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),CS=(t,s,c,i,d,g)=>{const h=s.rect,y=h.x-c,w=h.y-i,E=h.width,T=h.height,A=d-(y+E),P=g-(w+T),$=k.some(y),V=k.some(w),W=k.some(A),se=k.some(P),G=k.none();return mS(s.direction,()=>Wa(t,$,V,G,G),()=>Wa(t,G,V,W,G),()=>Wa(t,$,G,G,se),()=>Wa(t,G,G,W,se),()=>Wa(t,$,V,G,G),()=>Wa(t,$,G,G,se),()=>Wa(t,$,V,G,G),()=>Wa(t,G,V,W,G))},mb=(t,s)=>t.fold(()=>{const c=s.rect;return Wa("absolute",k.some(c.x),k.some(c.y),k.none(),k.none())},(c,i,d,g)=>CS("absolute",s,c,i,d,g),(c,i,d,g)=>CS("fixed",s,c,i,d,g)),by=(t,s)=>{const c=An(mv,s),i=t.fold(c,c,()=>{const h=Vr();return mv(s).translate(-h.left,-h.top)}),d=wn(s),g=Xi(s);return To(i.left,i.top,d,g)},Bh=(t,s)=>s.fold(()=>t.fold(Ns,Ns,To),c=>t.fold(te(c),te(c),()=>{const i=fb(t,c.x,c.y);return To(i.left,i.top,c.width,c.height)})),fb=(t,s,c)=>{const i=Do(s,c),d=()=>{const g=Vr();return i.translate(-g.left,-g.top)};return t.fold(te(i),te(i),d)},wS=(t,s,c,i)=>t.fold(s,c,i);ed.none;const SS=ed.relative,xS=ed.fixed,$h=(t,s)=>({anchorBox:t,origin:s}),vm=(t,s)=>$h(t,s),Fh="data-alloy-placement",Mk=(t,s)=>{Dt(t,Fh,s)},vy=t=>Lo(t,Fh),Pk=t=>Ro(t,Fh),gb=vc.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),Nk=(t,s)=>{const{x:c,y:i,right:d,bottom:g}=s,{x:h,y,right:w,bottom:E,width:T,height:A}=t,P=h>=c&&h<=d,$=y>=i&&y<=g,V=P&&$,W=w<=d&&w>=c,se=E<=g&&E>=i,G=W&&se,ee=Math.min(T,h>=c?d-h:w-c),oe=Math.min(A,y>=i?g-y:E-i);return{originInBounds:V,sizeInBounds:G,visibleW:ee,visibleH:oe}},ES=(t,s)=>{const{x:c,y:i,right:d,bottom:g}=s,{x:h,y,width:w,height:E}=t,T=Math.max(c,d-w),A=Math.max(i,g-E),P=Ga(h,c,T),$=Ga(y,i,A),V=Math.min(P+w,d)-P,W=Math.min($+E,g)-$;return To(P,$,V,W)},Bk=(t,s,c)=>{const i=te(s.bottom-c.y),d=te(c.bottom-s.y),g=kk(t,d,d,i),h=te(s.right-c.x),y=te(c.right-s.x);return{maxWidth:ay(t,y,y,h),maxHeight:g}},TS=(t,s,c,i)=>{const d=t.bubble,g=d.offset,h=gS(i,t.restriction,g),y=t.x+g.left,w=t.y+g.top,E=To(y,w,s,c),{originInBounds:T,sizeInBounds:A,visibleW:P,visibleH:$}=Nk(E,h),V=T&&A,W=V?E:ES(E,h),se=W.width>0&&W.height>0,{maxWidth:G,maxHeight:ee}=Bk(t.direction,W,i),oe={rect:W,maxHeight:ee,maxWidth:G,direction:t.direction,placement:t.placement,classes:{on:d.classesOn,off:d.classesOff},layout:t.label,testY:w};return V||t.alwaysFit?gb.fit(oe):gb.nofit(oe,P,$,se)},Ih=(t,s,c,i,d,g)=>{const h=i.width,y=i.height,w=(T,A,P,$,V)=>{const W=T(c,i,d,t,g),se=TS(W,h,y,g);return se.fold(te(se),(G,ee,oe,be)=>(V===be?oe>$||ee>P:!V&&be)?se:gb.nofit(A,P,$,V))};return wo(s,(T,A)=>{const P=An(w,A);return T.fold(te(T),P)},gb.nofit({rect:c,maxHeight:i.height,maxWidth:i.width,direction:ib(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:c.y},-1,-1,!1)).fold(an,an)},_S=Ot,Zr=(t,s,c)=>uf(t,s,_S,c),yy=(t,s,c)=>Ba(t,s,_S,c),kS=pi,Cy=["top","bottom","right","left"],Lh="data-alloy-transition-timer",$k=(t,s)=>Z1(t,s.classes),Fk=(t,s,c)=>c.exists(i=>{const d=t.mode;return d==="all"?!0:i[d]!==s[d]}),Ik=(t,s)=>{const c=i=>parseFloat(i).toFixed(3);return Ir(s,(i,d)=>{const g=t[d].map(c),h=i.map(c);return!t1(g,h)}).isSome()},hb=t=>{const s=g=>{const y=kr(t,g).split(/\s*,\s*/);return po(y,Rc)},c=g=>{if(ke(g)&&/^[\d.]+/.test(g)){const h=parseFloat(g);return Gi(g,"ms")?h:h*1e3}else return 0},i=s("transition-delay"),d=s("transition-duration");return wo(d,(g,h,y)=>{const w=c(i[y])+c(h);return Math.max(g,w)},0)},OS=(t,s)=>{const c=la(),i=la();let d;const g=E=>{var T;const A=(T=E.raw.pseudoElement)!==null&&T!==void 0?T:"";return Un(E.target,t)&&Ao(A)&&$o(Cy,E.raw.propertyName)},h=E=>{if(Xt(E)||g(E)){c.clear(),i.clear();const T=E==null?void 0:E.raw.type;(Xt(T)||T===fh())&&(clearTimeout(d),Ro(t,Lh),Ti(t,s.classes))}},y=Zr(t,Fu(),E=>{g(E)&&(y.unbind(),c.set(Zr(t,fh(),h)),i.set(Zr(t,Q_(),h)))}),w=hb(t);requestAnimationFrame(()=>{d=setTimeout(h,w+17),Dt(t,Lh,d)})},wy=(t,s)=>{_f(t,s.classes),Lo(t,Lh).each(c=>{clearTimeout(parseInt(c,10)),Ro(t,Lh)}),OS(t,s)},Sy=(t,s,c,i,d,g)=>{const h=Fk(i,d,g);if(h||$k(t,i)){Vt(t,"position",c.position);const y=by(s,t),w=mb(s,{...d,rect:y}),E=Td(Cy,T=>w[T]);Ik(c,E)&&(Na(t,E),h&&wy(t,i),Nd(t))}else Ti(t,i.classes)},Hh=t=>({width:wn(t),height:Xi(t)}),xy=(t,s,c,i)=>{Kt(s,"max-height"),Kt(s,"max-width");const d=Hh(s);return Ih(s,i.preference,t,d,c,i.bounds)},AS=(t,s)=>{const c=s.classes;Ti(t,c.off),_f(t,c.on)},RS=(t,s,c)=>{const i=c.maxHeightFunction;i(t,s.maxHeight)},DS=(t,s,c)=>{const i=c.maxWidthFunction;i(t,s.maxWidth)},Lk=(t,s,c)=>{const i=mb(c.origin,s);c.transition.each(d=>{Sy(t,c.origin,i,d,s,c.lastPlacement)}),Rr(t,i)},MS=(t,s)=>{Mk(t,s.placement)},Ey=(t,s)=>{z_(t,Math.floor(s))},PS=te((t,s)=>{Ey(t,s),Ll(t,{"overflow-x":"hidden","overflow-y":"auto"})}),td=te((t,s)=>{Ey(t,s)}),NS=(t,s,c)=>t[s]===void 0?c:t[s],Hk=(t,s,c,i,d,g,h,y)=>{const w=NS(h,"maxHeightFunction",PS()),E=NS(h,"maxWidthFunction",J),T=t.anchorBox,A=t.origin,P={bounds:Bh(A,g),origin:A,preference:i,maxHeightFunction:w,maxWidthFunction:E,lastPlacement:d,transition:y};return Vk(T,s,c,P)},Vk=(t,s,c,i)=>{const d=xy(t,s,c,i);return Lk(s,d,i),MS(s,d),AS(s,d),RS(s,d,i),DS(s,d,i),{layout:d.layout,placement:d.placement}},pb=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Ya=(t,s,c,i=1)=>{const d=t*i,g=s*i,h=w=>rt(c,w).getOr([]),y=(w,E,T)=>{const A=Rt(pb,T);return{offset:Do(w,E),classesOn:Se(T,h),classesOff:Se(A,h)}};return{southeast:()=>y(-t,s,["top","alignLeft"]),southwest:()=>y(t,s,["top","alignRight"]),south:()=>y(-t/2,s,["top","alignCentre"]),northeast:()=>y(-t,-s,["bottom","alignLeft"]),northwest:()=>y(t,-s,["bottom","alignRight"]),north:()=>y(-t/2,-s,["bottom","alignCentre"]),east:()=>y(t,-s/2,["valignCentre","left"]),west:()=>y(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>y(d,g,["top","alignLeft","inset"]),insetNorthwest:()=>y(-d,g,["top","alignRight","inset"]),insetNorth:()=>y(-d/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>y(d,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>y(-d,-g,["bottom","alignRight","inset"]),insetSouth:()=>y(-d/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>y(-d,-g/2,["valignCentre","right","inset"]),insetWest:()=>y(d,-g/2,["valignCentre","left","inset"])}},bb=()=>Ya(0,0,{}),vb=an,Ty=(t,s)=>c=>BS(c)==="rtl"?s:t,BS=t=>kr(t,"direction")==="rtl"?"rtl":"ltr";var ls;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(ls||(ls={}));const $S="data-alloy-vertical-dir",Wf=t=>Rh(t,s=>Jn(s)&&qt(s,"data-alloy-vertical-dir")===ls.BottomToTop),nd=()=>Fs("layouts",[Te("onLtr"),Te("onRtl"),kn("onBottomLtr"),kn("onBottomRtl")]),yb=(t,s,c,i,d,g,h)=>{const y=h.map(Wf).getOr(!1),w=s.layouts.map($=>$.onLtr(t)),E=s.layouts.map($=>$.onRtl(t)),T=y?s.layouts.bind($=>$.onBottomLtr.map(V=>V(t))).or(w).getOr(d):w.getOr(c),A=y?s.layouts.bind($=>$.onBottomRtl.map(V=>V(t))).or(E).getOr(g):E.getOr(i);return Ty(T,A)(t)},FS=(t,s,c)=>{const i=s.hotspot,d=by(c,i.element),g=yb(t.element,s,Ph(),db(),bS(),vS(),k.some(s.hotspot.element));return k.some(vb({anchorBox:d,bubble:s.bubble.getOr(bb()),overrides:s.overrides,layouts:g}))};var zk=[Te("hotspot"),kn("bubble"),le("overrides",{}),nd(),Qn("placement",FS)];const Uk=(t,s,c)=>{const i=fb(c,s.x,s.y),d=To(i.left,i.top,s.width,s.height),g=yb(t.element,s,gy(),hy(),gy(),hy(),k.none());return k.some(vb({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:g}))};var IS=[Te("x"),Te("y"),le("height",0),le("width",0),le("bubble",bb()),le("overrides",{}),nd(),Qn("placement",Uk)];const Vh=vc.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),_y=t=>t.fold(an,(s,c,i)=>s.translate(-c,-i)),Wk=t=>t.fold(an,an),Zf=t=>wo(t,(s,c)=>s.translate(c.left,c.top),Do(0,0)),LS=t=>{const s=De(t,_y);return Zf(s)},HS=t=>{const s=De(t,Wk);return Zf(s)},VS=Vh.screen,ky=Vh.absolute,Cb=(t,s,c)=>{const i=Dd(c.root).dom,d=g=>{const h=Pc(g),y=Pc(t.element);return Un(h,y)};return k.from(i.frameElement).map(ae.fromDom).filter(d).map(Ho)},zS=(t,s,c)=>{const i=Pc(t.element),d=Vr(i),g=Cb(t,s,c).getOr(d);return ky(g,d.left,d.top)},od=(t,s,c,i)=>{const d=VS(Do(t,s));return k.some(ff(d,c,i))},Zk=(t,s,c,i,d)=>t.map(g=>{const h=[s,g.point],y=wS(i,()=>HS(h),()=>HS(h),()=>LS(h)),w=lw(y.left,y.top,g.width,g.height),E=c.showAbove?bS():Ph(),T=c.showAbove?vS():db(),A=yb(d,c,E,T,E,T,k.none());return vb({anchorBox:w,bubble:c.bubble.getOr(bb()),overrides:c.overrides,layouts:A})}),US=(t,s,c)=>{const i=zS(t,c,s);return s.node.filter(ra).bind(d=>{const g=d.dom.getBoundingClientRect(),h=od(g.left,g.top,g.width,g.height),y=s.node.getOr(t.element);return Zk(h,i,s,c,y)})};var WS=[Te("node"),Te("root"),kn("bubble"),nd(),le("overrides",{}),le("showAbove",!1),Qn("placement",US)];const wb="\uFEFF",jk="",Sb={create:(t,s,c,i)=>({start:t,soffset:s,finish:c,foffset:i})},zh=vc.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),ZS=(t,s,c,i)=>t.fold(s,c,i),jf=t=>t.fold(an,an,an),Gf=zh.before,Gk=zh.on,jS=zh.after,qk={before:Gf,on:Gk,after:jS,cata:ZS,getStart:jf},Cm=vc.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),qf=t=>Cm.exact(t.start,t.soffset,t.finish,t.foffset),Oy=t=>t.match({domRange:s=>ae.fromDom(s.startContainer),relative:(s,c)=>qk.getStart(s),exact:(s,c,i,d)=>s}),Ay=Cm.domRange,Kk=Cm.relative,Ry=Cm.exact,GS=t=>{const s=Oy(t);return Dd(s)},qS=Sb.create,Kf={domRange:Ay,relative:Kk,exact:Ry,exactFromRange:qf,getWin:GS,range:qS},KS=(t,s)=>{s.fold(c=>{t.setStartBefore(c.dom)},(c,i)=>{t.setStart(c.dom,i)},c=>{t.setStartAfter(c.dom)})},xb=(t,s)=>{s.fold(c=>{t.setEndBefore(c.dom)},(c,i)=>{t.setEnd(c.dom,i)},c=>{t.setEndAfter(c.dom)})},sd=(t,s,c)=>{const i=t.document.createRange();return KS(i,s),xb(i,c),i},Xl=(t,s,c,i,d)=>{const g=t.document.createRange();return g.setStart(s.dom,c),g.setEnd(i.dom,d),g},Uh=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),Wh=t=>{const s=t.getClientRects(),c=s.length>0?s[0]:t.getBoundingClientRect();return c.width>0||c.height>0?k.some(c).map(Uh):k.none()},Yk=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?k.some(s).map(Uh):k.none()},Sc=vc.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Ai=(t,s,c)=>s(ae.fromDom(c.startContainer),c.startOffset,ae.fromDom(c.endContainer),c.endOffset),Dy=(t,s)=>s.match({domRange:c=>({ltr:te(c),rtl:k.none}),relative:(c,i)=>({ltr:nc(()=>sd(t,c,i)),rtl:nc(()=>k.some(sd(t,i,c)))}),exact:(c,i,d,g)=>({ltr:nc(()=>Xl(t,c,i,d,g)),rtl:nc(()=>k.some(Xl(t,d,g,c,i)))})}),Xk=(t,s)=>{const c=s.ltr();return c.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>Sc.rtl(ae.fromDom(d.endContainer),d.endOffset,ae.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>Ai(t,Sc.ltr,c)):Ai(t,Sc.ltr,c)},qD=(t,s)=>{const c=Dy(t,s);return Xk(t,c)},rd=(t,s)=>qD(t,s).match({ltr:(i,d,g,h)=>{const y=t.document.createRange();return y.setStart(i.dom,d),y.setEnd(g.dom,h),y},rtl:(i,d,g,h)=>{const y=t.document.createRange();return y.setStart(g.dom,h),y.setEnd(i.dom,d),y}});Sc.ltr,Sc.rtl;const Yf=(t,s,c)=>po(GC(t,c),s),sr=(t,s)=>L_(s,t),My=(t,s,c,i)=>{const g=Pc(t).dom.createRange();return g.setStart(t.dom,s),g.setEnd(c.dom,i),g},Eb=(t,s,c,i)=>{const d=My(t,s,c,i),g=Un(t,c)&&s===i;return d.collapsed&&!g},wm=t=>k.from(t.getSelection()),Zh=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),c=t.getRangeAt(t.rangeCount-1);return k.some(Sb.create(ae.fromDom(s.startContainer),s.startOffset,ae.fromDom(c.endContainer),c.endOffset))}else return k.none()},Jk=t=>{if(t.anchorNode===null||t.focusNode===null)return Zh(t);{const s=ae.fromDom(t.anchorNode),c=ae.fromDom(t.focusNode);return Eb(s,t.anchorOffset,c,t.focusOffset)?k.some(Sb.create(s,t.anchorOffset,c,t.focusOffset)):Zh(t)}},Py=t=>wm(t).filter(s=>s.rangeCount>0).bind(Jk),jh=(t,s)=>{const c=rd(t,s);return Wh(c)},rr=(t,s)=>{const c=rd(t,s);return Yk(c)},ba=((t,s)=>{const c=g=>{if(!t(g))throw new Error("Can only get "+s+" value of a "+s+" node");return i(g).getOr("")},i=g=>t(g)?k.from(g.dom.nodeValue):k.none();return{get:c,getOption:i,set:(g,h)=>{if(!t(g))throw new Error("Can only set raw "+s+" value of a "+s+" node");g.dom.nodeValue=h}}})(Dc,"text"),By=t=>ba.get(t),Xf=(t,s)=>({element:t,offset:s}),Jf=(t,s)=>{const c=Pa(t);if(c.length===0)return Xf(t,s);if(s<c.length)return Xf(c[s],0);{const i=c[c.length-1],d=Dc(i)?By(i).length:Pa(i).length;return Xf(i,d)}},$y=(t,s)=>Dc(t)?Xf(t,s):Jf(t,s),Jl=t=>t.foffset!==void 0,Fy=(t,s)=>s.getSelection.getOrThunk(()=>()=>Py(t))().map(i=>{if(Jl(i)){const d=$y(i.start,i.soffset),g=$y(i.finish,i.foffset);return Kf.range(d.element,d.offset,g.element,g.offset)}else return i}),Iy=(t,s,c)=>{const i=Dd(s.root).dom,d=zS(t,c,s),g=Fy(i,s).bind(w=>{if(Jl(w))return rr(i,Kf.exactFromRange(w)).orThunk(()=>{const T=ae.fromText(wb);Fd(w.start,T);const A=jh(i,Kf.exact(T,0,T,1));return pc(T),A}).bind(T=>od(T.left,T.top,T.width,T.height));{const E=Io(w,A=>A.dom.getBoundingClientRect()),T={left:Math.min(E.firstCell.left,E.lastCell.left),right:Math.max(E.firstCell.right,E.lastCell.right),top:Math.min(E.firstCell.top,E.lastCell.top),bottom:Math.max(E.firstCell.bottom,E.lastCell.bottom)};return od(T.left,T.top,T.right-T.left,T.bottom-T.top)}}),y=Fy(i,s).bind(w=>Jl(w)?Jn(w.start)?k.some(w.start):di(w.start):k.some(w.firstCell)).getOr(t.element);return Zk(g,d,s,c,y)};var Ly=[kn("getSelection"),Te("root"),kn("bubble"),nd(),le("overrides",{}),le("showAbove",!1),Qn("placement",Iy)];const fl="link-layout",Tb=t=>t.x+t.width,hr=(t,s)=>t.x-s.width,YS=(t,s)=>t.y-s.height+t.height,Hy=t=>t.y,Vy=(t,s,c)=>mr(Tb(t),Hy(t),c.southeast(),ib(),"southeast",fr(t,{left:0,top:2}),fl),XS=(t,s,c)=>mr(hr(t,s),Hy(t),c.southwest(),iy(),"southwest",fr(t,{right:1,top:2}),fl),zy=(t,s,c)=>mr(Tb(t),YS(t,s),c.northeast(),ly(),"northeast",fr(t,{left:0,bottom:3}),fl),JS=(t,s,c)=>mr(hr(t,s),YS(t,s),c.northwest(),lb(),"northwest",fr(t,{right:1,bottom:3}),fl),QS=()=>[Vy,XS,zy,JS],Uc=()=>[XS,Vy,JS,zy],cd=(t,s,c)=>{const i=by(c,s.item.element),d=yb(t.element,s,QS(),Uc(),QS(),Uc(),k.none());return k.some(vb({anchorBox:i,bubble:bb(),overrides:s.overrides,layouts:d}))};var ex=[Te("item"),nd(),le("overrides",{}),Qn("placement",cd)],Sm=Ko("type",{selection:Ly,node:WS,hotspot:zk,submenu:ex,makeshift:IS});const Mr=[Ic("classes",tt),Qs("mode","all",["all","layout","placement"])],xc=[le("useFixed",Vn),kn("getBounds")],Pr=[Dn("anchor",Sm),Fs("transition",Mr)],Wc=()=>{const t=document.documentElement;return xS(0,0,t.clientWidth,t.clientHeight)},_b=t=>{const s=Ho(t.element),c=t.element.dom.getBoundingClientRect();return SS(s.left,s.top,c.width,c.height)},Zc=(t,s,c,i,d,g)=>{const h=vm(s.anchorBox,t);return Hk(h,i.element,s.bubble,s.layouts,d,c,s.overrides,g)},xm=(t,s,c,i,d)=>{const g=k.none();tx(t,s,c,i,d,g)},tx=(t,s,c,i,d,g)=>{const h=sc("placement.info",kt(Pr),d),y=h.anchor,w=i.element,E=c.get(i.uid);py(()=>{Vt(w,"position","fixed");const T=Go(w,"visibility");Vt(w,"visibility","hidden");const A=s.useFixed()?Wc():_b(t);y.placement(t,y,A).each(P=>{const $=g.orThunk(()=>s.getBounds.map(lc)),V=Zc(A,P,$,i,E,h.transition);c.set(i.uid,V)}),T.fold(()=>{Kt(w,"visibility")},P=>{Vt(w,"visibility",P)}),Go(w,"left").isNone()&&Go(w,"top").isNone()&&Go(w,"right").isNone()&&Go(w,"bottom").isNone()&&Ac(Go(w,"position"),"fixed")&&Kt(w,"position")},w)};var Uy=Object.freeze({__proto__:null,position:xm,positionWithinBounds:tx,getMode:(t,s,c)=>s.useFixed()?"fixed":"absolute",reset:(t,s,c,i)=>{const d=i.element;it(["position","left","right","top","bottom"],g=>Kt(d,g)),Pk(d),c.clear(i.uid)}}),kb=Object.freeze({__proto__:null,init:()=>{let t={};return Ar({readState:()=>t,clear:d=>{jt(d)?delete t[d]:t={}},set:(d,g)=>{t[d]=g},get:d=>rt(t,d)})}});const cr=Ls({fields:xc,name:"positioning",active:Dk,apis:Uy,state:kb}),Gh=t=>t.getSystem().isConnected(),qh=t=>{sn(t,Hc());const s=t.components();it(s,qh)},ad=t=>{const s=t.components();it(s,ad),sn(t,rc())},Wy=(t,s)=>{t.getSystem().addToWorld(s),ra(t.element)&&ad(s)},Ob=t=>{qh(t),t.getSystem().removeFromWorld(t)},Zy=(t,s)=>{Hr(t.element,s.element)},Ab=t=>{it(t.components(),s=>pc(s.element)),Js(t.element),t.syncComponents()},jy=(t,s,c)=>{const i=t.components();Ab(t);const d=c(s),g=Rt(i,d);it(g,h=>{qh(h),t.getSystem().removeFromWorld(h)}),it(d,h=>{Gh(h)?Zy(t,h):(t.getSystem().addToWorld(h),Zy(t,h),ra(t.element)&&ad(h))}),t.syncComponents()},Qf=(t,s,c)=>{const i=t.components(),d=Se(s,y=>nb(y).toArray());it(i,y=>{$o(d,y)||Ob(y)});const g=c(s),h=Rt(i,g);it(h,y=>{Gh(y)&&Ob(y)}),it(g,y=>{Gh(y)||Wy(t,y)}),t.syncComponents()},Ql=(t,s)=>{Kh(t,s,Hr)},Kh=(t,s,c)=>{t.getSystem().addToWorld(s),c(t.element,s.element),ra(t.element)&&ad(s),t.syncComponents()},Em=t=>{qh(t),pc(t.element),t.getSystem().removeFromWorld(t)},eu=t=>{const s=Ma(t.element).bind(c=>t.getSystem().getByDom(c).toOptional());Em(t),s.each(c=>{c.syncComponents()})},nx=t=>{const s=t.components();it(s,Em),Js(t.element),t.syncComponents()},Ec=(t,s)=>{id(t,s,Hr)},Gy=(t,s)=>{id(t,s,aw)},id=(t,s,c)=>{c(t,s.element);const i=Pa(s.element);it(i,d=>{s.getByDom(d).each(ad)})},Tm=t=>{const s=Pa(t.element);it(s,c=>{t.getByDom(c).each(qh)}),pc(t.element)},Rb=(t,s,c,i)=>{c.get().each(h=>{nx(t)});const d=s.getAttachPoint(t);Ql(d,t);const g=t.getSystem().build(i);return Ql(t,g),c.set(g),g},Db=(t,s,c,i)=>{const d=Rb(t,s,c,i);return s.onOpen(t,d),d},t4=(t,s,c,i)=>c.get().map(()=>Rb(t,s,c,i)),n4=(t,s,c,i,d)=>{rx(t,s),Db(t,s,c,i),d(),Mb(t,s)},ox=(t,s,c)=>{c.get().each(i=>{nx(t),eu(t),s.onClose(t,i),c.clear()})},sx=(t,s,c)=>c.isOpen(),_m=(t,s,c,i)=>sx(t,s,c)&&c.get().exists(d=>s.isPartOf(t,d,i)),eg=(t,s,c)=>c.get(),Yh=(t,s,c,i)=>{Go(t.element,s).fold(()=>{Ro(t.element,c)},d=>{Dt(t.element,c,d)}),Vt(t.element,s,i)},o4=(t,s,c)=>{Lo(t.element,c).fold(()=>Kt(t.element,s),i=>Vt(t.element,s,i))},rx=(t,s,c)=>{const i=s.getAttachPoint(t);Vt(t.element,"position",cr.getMode(i)),Yh(t,"visibility",s.cloakVisibilityAttr,"hidden")},Xh=t=>uc(["top","left","right","bottom"],s=>Go(t,s).isSome()),Mb=(t,s,c)=>{Xh(t.element)||Kt(t.element,"position"),o4(t,"visibility",s.cloakVisibilityAttr)};var qy=Object.freeze({__proto__:null,cloak:rx,decloak:Mb,open:Db,openWhileCloaked:n4,close:ox,isOpen:sx,isPartOf:_m,getState:eg,setContent:t4}),Pb=Object.freeze({__proto__:null,events:(t,s)=>Fn([Ee(Is(),(c,i)=>{ox(c,t,s)})])}),tg=[bn("onOpen"),bn("onClose"),Te("isPartOf"),Te("getAttachPoint"),le("cloakVisibilityAttr","data-precloak-visibility")],km=Object.freeze({__proto__:null,init:()=>{const t=Mn(),s=te("not-implemented");return Ar({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const Cn=Ls({fields:tg,name:"sandboxing",active:Pb,apis:qy,state:km}),tu=te("dismiss.popups"),ld=te("reposition.popups"),Nb=te("mouse.released"),Ky=Fc([le("isExtraPart",Vn),Fs("fireEventInstead",[le("event",Vc())])]),Jh=t=>{const s=sc("Dismissal",Ky,t);return{[tu()]:{schema:Fc([Te("target")]),onReceive:(c,i)=>{Cn.isOpen(c)&&(Cn.isPartOf(c,i.target)||s.isExtraPart(c,i.target)||s.fireEventInstead.fold(()=>Cn.close(c),g=>sn(c,g.event)))}}}},Om=Fc([Fs("fireEventInstead",[le("event",hh())]),Va("doReposition")]),Qh=t=>{const s=sc("Reposition",Om,t);return{[ld()]:{onReceive:c=>{Cn.isOpen(c)&&s.fireEventInstead.fold(()=>s.doReposition(c),i=>sn(c,i.event))}}}},Bb=(t,s,c)=>{s.store.manager.onLoad(t,s,c)},ix=(t,s,c)=>{s.store.manager.onUnload(t,s,c)};var ud=Object.freeze({__proto__:null,onLoad:Bb,onUnload:ix,setValue:(t,s,c,i)=>{s.store.manager.setValue(t,s,c,i)},getValue:(t,s,c)=>s.store.manager.getValue(t,s,c),getState:(t,s,c)=>c}),Xy=Object.freeze({__proto__:null,events:(t,s)=>{const c=t.resetOnDom?[lo((i,d)=>{Bb(i,t,s)}),rl((i,d)=>{ix(i,t,s)})]:[Uu(t,s,Bb)];return Fn(c)}});const Rm=()=>{const t=St(null),s=()=>({mode:"memory",value:t.get()}),c=()=>t.get()===null,i=()=>{t.set(null)};return Ar({set:t.set,get:t.get,isNotSet:c,clear:i,readState:s})},Jy=()=>Ar({readState:J}),lx=()=>{const t=St({}),s=St({});return Ar({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:h=>rt(t.get(),h).orThunk(()=>rt(s.get(),h)),update:h=>{const y=t.get(),w=s.get(),E={},T={};it(h,A=>{E[A.value]=A,rt(A,"meta").each(P=>{rt(P,"text").each($=>{T[$]=A})})}),t.set({...y,...E}),s.set({...w,...T})},clear:()=>{t.set({}),s.set({})}})};var gl=Object.freeze({__proto__:null,memory:Rm,dataset:lx,manual:Jy,init:t=>t.store.manager.state(t)});const dx=(t,s,c,i)=>{const d=s.store;c.update([i]),d.setValue(t,i),s.onSetValue(t,i)},Fb=(t,s,c)=>{const i=s.store,d=i.getDataKey(t);return c.lookup(d).getOrThunk(()=>i.getFallbackEntry(d))},va=(t,s,c)=>{s.store.initialValue.each(d=>{dx(t,s,c,d)})},Hs=(t,s,c)=>{c.clear()};var r4=[kn("initialValue"),Te("getFallbackEntry"),Te("getDataKey"),Te("setValue"),Qn("manager",{setValue:dx,getValue:Fb,onLoad:va,onUnload:Hs,state:lx})];const Ri=(t,s,c)=>s.store.getValue(t),c4=(t,s,c,i)=>{s.store.setValue(t,i),s.onSetValue(t,i)},mx=(t,s,c)=>{s.store.initialValue.each(i=>{s.store.setValue(t,i)})};var ep=[Te("getValue"),le("setValue",J),kn("initialValue"),Qn("manager",{setValue:c4,getValue:Ri,onLoad:mx,onUnload:J,state:Ei.init})];const ng=(t,s,c,i)=>{c.set(i),s.onSetValue(t,i)},fx=(t,s,c)=>c.get(),gx=(t,s,c)=>{s.store.initialValue.each(i=>{c.isNotSet()&&c.set(i)})},YD=(t,s,c)=>{c.clear()};var XD=[kn("initialValue"),Qn("manager",{setValue:ng,getValue:fx,onLoad:gx,onUnload:YD,state:Rm})],hx=[io("store",{mode:"memory"},Ko("mode",{memory:XD,manual:ep,dataset:r4})),bn("onSetValue"),le("resetOnDom",!1)];const nt=Ls({fields:hx,name:"representing",active:Xy,apis:ud,extra:{setValueFrom:(t,s)=>{const c=nt.getValue(s);nt.setValue(t,c)}},state:gl}),Vs=(t,s)=>vw(t,{},De(s,c=>Sv(c.name(),"Cannot configure "+c.name()+" for "+t)).concat([Rn("dump",an)])),Ib=t=>t.dump,zs=(t,s)=>({...$e(s),...t.dump}),ya={field:Vs,augment:zs,get:Ib},Qy="placeholder",tp=vc.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),og=t=>$n(t,"uiType"),px=(t,s,c,i)=>t.exists(d=>d!==c.owner)?tp.single(!0,te(c)):rt(i,c.name).fold(()=>{throw new Error("Unknown placeholder component: "+c.name+`
Known: [`+Fo(i)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(c,null,2))},d=>d.replace()),dd=(t,s,c,i)=>og(c)&&c.uiType===Qy?px(t,s,c,i):tp.single(!1,te(c)),sg=(t,s,c,i)=>dd(t,s,c,i).fold((g,h)=>{const y=og(c)?h(s,c.config,c.validated):h(s),w=rt(y,"components").getOr([]),E=Se(w,T=>sg(t,s,T,i));return[{...y,components:E}]},(g,h)=>{if(og(c)){const y=h(s,c.config,c.validated);return c.validated.preprocess.getOr(an)(y)}else return h(s)}),a4=(t,s,c,i)=>Se(c,d=>sg(t,s,d,i)),i4=(t,s)=>{let c=!1;const i=()=>c,d=()=>{if(c)throw new Error("Trying to use the same placeholder more than once: "+t);return c=!0,s},g=()=>s.fold((h,y)=>h,(h,y)=>h);return{name:te(t),required:g,used:i,replace:d}},l4=(t,s,c,i)=>{const d=Io(i,(h,y)=>i4(y,h)),g=a4(t,s,c,d);return Ms(d,h=>{if(h.used()===!1&&h.required())throw new Error("Placeholder: "+h.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),g},bx=tp.single,Dm=tp.multiple,rg=te(Qy),Mm=vc.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Lb=le("factory",{sketch:an}),jc=le("schema",[]),Di=Te("name"),Pm=$s("pname","pname",pv(t=>"<alloy."+ut(t.name)+">"),Ia()),cg=Rn("schema",()=>[kn("preprocess")]),Hb=le("defaults",te({})),Vb=le("overrides",te({})),u4=kt([Lb,jc,Di,Pm,Hb,Vb]),d4=kt([Lb,jc,Di,Hb,Vb]),m4=kt([Lb,jc,Di,Pm,Hb,Vb]),f4=kt([Lb,cg,Di,Te("unit"),Pm,Hb,Vb]),vx=t=>t.fold(k.some,k.none,k.some,k.some),yx=t=>{const s=c=>c.name;return t.fold(s,s,s,s)},e2=t=>t.fold(an,an,an,an),zb=(t,s)=>c=>{const i=sc("Converting part type",s,c);return t(i)},Sr=zb(Mm.required,u4),Ca=zb(Mm.external,d4),Gc=zb(Mm.optional,m4),np=zb(Mm.group,f4),t2=te("entirety");var Cx=Object.freeze({__proto__:null,required:Sr,external:Ca,optional:Gc,group:np,asNamedPart:vx,name:yx,asCommon:e2,original:t2});const Ub=(t,s,c,i)=>zo(s.defaults(t,c,i),c,{uid:t.partUids[s.name]},s.overrides(t,c,i)),g4=(t,s,c)=>{const i={},d={};return it(c,g=>{g.fold(h=>{i[h.pname]=bx(!0,(y,w,E)=>h.factory.sketch(Ub(y,h,w,E)))},h=>{const y=s.parts[h.name];d[h.name]=te(h.factory.sketch(Ub(s,h,y[t2()]),y))},h=>{i[h.pname]=bx(!1,(y,w,E)=>h.factory.sketch(Ub(y,h,w,E)))},h=>{i[h.pname]=Dm(!0,(y,w,E)=>{const T=y[h.name];return De(T,A=>h.factory.sketch(zo(h.defaults(y,A,E),A,h.overrides(y,A))))})})}),{internals:te(i),externals:te(d)}},Wb=(t,s)=>{const c={};return it(s,i=>{vx(i).each(d=>{const g=h4(t,d.pname);c[d.name]=h=>{const y=sc("Part: "+d.name+" in "+t,kt(d.schema),h);return{...g,config:h,validated:y}}})}),c},h4=(t,s)=>({uiType:rg(),owner:t,name:s}),Zb=(t,s,c)=>({uiType:rg(),owner:t,name:s,config:c,validated:{}}),p4=t=>Se(t,s=>s.fold(k.none,k.some,k.none,k.none).map(c=>Nu(c.name,c.schema.concat([um(t2())]))).toArray()),b4=t=>De(t,yx),wx=(t,s,c)=>g4(t,s,c),jb=(t,s,c)=>l4(k.some(t),s,s.components,c),qn=(t,s,c)=>{const i=s.partUids[c];return t.getSystem().getByUid(i).toOptional()},ot=(t,s,c)=>qn(t,s,c).getOrDie("Could not find part: "+c),Mi=(t,s,c)=>{const i={},d=s.partUids,g=t.getSystem();return it(c,h=>{i[h]=te(g.getByUid(d[h]))}),i},Sx=(t,s)=>{const c=t.getSystem();return Io(s.partUids,(i,d)=>te(c.getByUid(i)))},n2=t=>Fo(t.partUids),ag=(t,s,c)=>{const i={},d=s.partUids,g=t.getSystem();return it(c,h=>{i[h]=te(g.getByUid(d[h]).getOrDie())}),i},Gb=(t,s)=>{const c=b4(s);return vf(De(c,i=>({key:i,value:t+"-"+i})))},op=t=>$s("partUids","partUids",C1(s=>Gb(s.uid,t)),Ia());var o2=Object.freeze({__proto__:null,generate:Wb,generateOne:Zb,schemas:p4,names:b4,substitutes:wx,components:jb,defaultUids:Gb,defaultUidsSchema:op,getAllParts:Sx,getAllPartNames:n2,getPart:qn,getPartOrDie:ot,getParts:Mi,getPartsOrDie:ag});const xx=(t,s)=>(t.length>0?[Nu("parts",t)]:[]).concat([Te("uid"),le("dom",{}),le("components",[]),um("originalSpec"),le("debug.sketcher",{})]).concat(s),s2=(t,s,c,i,d)=>{const g=xx(i,d);return sc(t+" [SpecSchema]",Fc(g.concat(s)),c)},Ex=(t,s,c,i)=>{const d=qb(i),g=s2(t,s,d,[],[]);return c(g,d)},sp=(t,s,c,i,d)=>{const g=qb(d),h=p4(c),y=op(c),w=s2(t,s,g,h,[y]),E=wx(t,w,c),T=jb(t,w,E.internals());return i(w,T,g,E.externals())},Nm=t=>$n(t,"uid"),qb=t=>Nm(t)?t:{...t,uid:_h("uid")},v4=t=>t.uid!==void 0,y4=Fc([Te("name"),Te("factory"),Te("configFields"),le("apis",{}),le("extraApis",{})]),C4=Fc([Te("name"),Te("factory"),Te("configFields"),Te("partFields"),le("apis",{}),le("extraApis",{})]),Tc=t=>{const s=sc("Sketcher for "+t.name,y4,t),c=g=>Ex(s.name,s.configFields,s.factory,g),i=Io(s.apis,ob),d=Io(s.extraApis,(g,h)=>Bv(g,h));return{name:s.name,configFields:s.configFields,sketch:c,...i,...d}},pr=t=>{const s=sc("Sketcher for "+t.name,C4,t),c=h=>sp(s.name,s.configFields,s.partFields,s.factory,h),i=Wb(s.name,s.partFields),d=Io(s.apis,ob),g=Io(s.extraApis,(h,y)=>Bv(h,y));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:c,parts:i,...d,...g}},ig=t=>wu("input")(t)&&qt(t,"type")!=="radio"||wu("textarea")(t);var w4=Object.freeze({__proto__:null,getCurrent:(t,s,c)=>s.find(t)});const S4=[Te("find")],fn=Ls({fields:S4,name:"composing",apis:w4}),x4=["input","button","textarea","select"],E4=(t,s,c)=>{(s.disabled()?c2:Kb)(t,s)},r2=(t,s)=>s.useNative===!0&&$o(x4,Da(t.element)),QD=t=>rv(t.element,"disabled"),eM=t=>{Dt(t.element,"disabled","disabled")},md=t=>{Ro(t.element,"disabled")},rp=t=>qt(t.element,"aria-disabled")==="true",T4=t=>{Dt(t.element,"aria-disabled","true")},_4=t=>{Dt(t.element,"aria-disabled","false")},c2=(t,s,c)=>{s.disableClass.each(d=>{ns(t.element,d)}),(r2(t,s)?eM:T4)(t),s.onDisabled(t)},Kb=(t,s,c)=>{s.disableClass.each(d=>{In(t.element,d)}),(r2(t,s)?md:_4)(t),s.onEnabled(t)},Yb=(t,s)=>r2(t,s)?QD(t):rp(t);var k4=Object.freeze({__proto__:null,enable:Kb,disable:c2,isDisabled:Yb,onLoad:E4,set:(t,s,c,i)=>{(i?c2:Kb)(t,s)}}),O4=Object.freeze({__proto__:null,exhibit:(t,s)=>Ur({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>Fn([Mv(nr(),(c,i)=>Yb(c,t)),Uu(t,s,E4)])}),Tx=[fo("disabled",Vn),le("useNative",!0),kn("disableClass"),bn("onDisabled"),bn("onEnabled")];const Mt=Ls({fields:Tx,name:"disabling",active:O4,apis:k4}),Xb=(t,s,c,i)=>{const d=sr(t.element,"."+s.highlightClass);it(d,g=>{uc(i,y=>Un(y.element,g))||(In(g,s.highlightClass),t.getSystem().getByDom(g).each(y=>{s.onDehighlight(t,y),sn(y,wf())}))})},l=(t,s,c)=>Xb(t,s,c,[]),m=(t,s,c,i)=>{F(t,s,c,i)&&(In(i.element,s.highlightClass),s.onDehighlight(t,i),sn(i,wf()))},p=(t,s,c,i)=>{Xb(t,s,c,[i]),F(t,s,c,i)||(ns(i.element,s.highlightClass),s.onHighlight(t,i),sn(i,Rv()))},v=(t,s,c)=>{ue(t,s).each(i=>{p(t,s,c,i)})},x=(t,s,c)=>{Pe(t,s).each(i=>{p(t,s,c,i)})},_=(t,s,c,i)=>{X(t,s,c,i).fold(d=>{throw d},d=>{p(t,s,c,d)})},M=(t,s,c,i)=>{const d=ft(t,s);zt(d,i).each(h=>{p(t,s,c,h)})},F=(t,s,c,i)=>Wr(i.element,s.highlightClass),U=(t,s,c)=>go(t.element,"."+s.highlightClass).bind(i=>t.getSystem().getByDom(i).toOptional()),X=(t,s,c,i)=>{const d=sr(t.element,"."+s.itemClass);return k.from(d[i]).fold(()=>tn.error(new Error("No element found with index "+i)),t.getSystem().getByDom)},ue=(t,s,c)=>go(t.element,"."+s.itemClass).bind(i=>t.getSystem().getByDom(i).toOptional()),Pe=(t,s,c)=>{const i=sr(t.element,"."+s.itemClass);return(i.length>0?k.some(i[i.length-1]):k.none()).bind(g=>t.getSystem().getByDom(g).toOptional())},Xe=(t,s,c,i)=>{const d=sr(t.element,"."+s.itemClass);return mo(d,h=>Wr(h,s.highlightClass)).bind(h=>{const y=dm(h,i,0,d.length-1);return t.getSystem().getByDom(d[y]).toOptional()})},qe=(t,s,c)=>Xe(t,s,c,-1),ze=(t,s,c)=>Xe(t,s,c,1),ft=(t,s,c)=>{const i=sr(t.element,"."+s.itemClass);return kd(De(i,d=>t.getSystem().getByDom(d).toOptional()))};var Re=Object.freeze({__proto__:null,dehighlightAll:l,dehighlight:m,highlight:p,highlightFirst:v,highlightLast:x,highlightAt:_,highlightBy:M,isHighlighted:F,getHighlighted:U,getFirst:ue,getLast:Pe,getPrevious:qe,getNext:ze,getCandidates:ft}),Ue=[Te("highlightClass"),Te("itemClass"),bn("onHighlight"),bn("onDehighlight")];const Ze=Ls({fields:Ue,name:"highlighting",apis:Re}),Ft=[8],gn=[9],Ln=[13],to=[27],yo=[32],qc=[37],Pi=[38],Bm=[39],hl=[40],Kn=(t,s,c)=>{const i=Er(t.slice(0,s)),d=Er(t.slice(s+1));return zt(i.concat(d),c)},jr=(t,s,c)=>{const i=Er(t.slice(0,s));return zt(i,c)},Gr=(t,s,c)=>{const i=t.slice(0,s),d=t.slice(s+1);return zt(d.concat(i),c)},wa=(t,s,c)=>{const i=t.slice(s+1);return zt(i,c)},Jt=t=>s=>{const c=s.raw;return $o(t,c.which)},cc=t=>s=>yu(t,c=>c(s)),ys=t=>t.raw.shiftKey===!0,Jb=t=>t.raw.ctrlKey===!0,nu=Oe(ys),nn=(t,s)=>({matches:t,classification:s}),xr=(t,s)=>zt(t,i=>i.matches(s)).map(i=>i.classification),Qb=(t,s,c)=>{s.exists(d=>c.exists(g=>Un(g,d)))||ht(t,ph(),{prevFocus:s,newFocus:c})},e0=()=>{const t=c=>Dr(c.element);return{get:t,set:(c,i)=>{const d=t(c);c.getSystem().triggerFocus(i,c.element);const g=t(c);Qb(c,d,g)}}},_x=()=>{const t=c=>Ze.getHighlighted(c).map(i=>i.element);return{get:t,set:(c,i)=>{const d=t(c);c.getSystem().getByDom(i).fold(J,h=>{Ze.highlight(c,h)});const g=t(c);Qb(c,d,g)}}};var fd;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(fd||(fd={}));const $m=(t,s,c,i,d)=>{const g=()=>t.concat([le("focusManager",e0()),io("focusInside","onFocus",ch(E=>$o(["onFocus","onEnterOrSpace","onApi"],E)?tn.value(E):tn.error("Invalid value for focusInside"))),Qn("handler",w),Qn("state",s),Qn("sendFocusIn",d)]),h=(E,T,A,P,$)=>{const V=A(E,T,P,$);return xr(V,T.event).bind(W=>W(E,T,P,$))},w={schema:g,processKey:h,toEvents:(E,T)=>{const A=E.focusInside!==fd.OnFocusMode?k.none():d(E).map(V=>Ee(Si(),(W,se)=>{V(W,E,T),se.stop()})),P=(V,W)=>{const se=Jt(yo.concat(Ln))(W.event);E.focusInside===fd.OnEnterOrSpaceMode&&se&&R1(V,W)&&d(E).each(G=>{G(V,E,T),W.stop()})},$=[Ee(da(),(V,W)=>{h(V,W,c,E,T).fold(()=>{P(V,W)},se=>{W.stop()})}),Ee(Kd(),(V,W)=>{h(V,W,i,E,T).each(se=>{W.stop()})})];return Fn(A.toArray().concat($))}};return w},t0=t=>{const s=[kn("onEscape"),kn("onEnter"),le("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),le("firstTabstop",0),le("useTabstopAt",Ot),kn("visibilitySelector")].concat([t]),c=(G,ee)=>{const oe=G.visibilitySelector.bind(be=>ul(ee,be)).getOr(ee);return gs(oe)>0},i=(G,ee)=>{const oe=sr(G.element,ee.selector),be=po(oe,ye=>c(ee,ye));return k.from(be[ee.firstTabstop])},d=(G,ee)=>ee.focusManager.get(G).bind(oe=>ul(oe,ee.selector)),g=(G,ee)=>c(G,ee)&&G.useTabstopAt(ee),h=(G,ee,oe)=>{i(G,ee).each(be=>{ee.focusManager.set(G,be)})},y=(G,ee,oe,be,ye)=>ye(ee,oe,We=>g(be,We)).fold(()=>be.cyclic?k.some(!0):k.none(),We=>(be.focusManager.set(G,We),k.some(!0))),w=(G,ee,oe,be)=>{const ye=sr(G.element,oe.selector);return d(G,oe).bind(We=>mo(ye,An(Un,We)).bind(xe=>y(G,ye,xe,oe,be)))},E=(G,ee,oe)=>{const be=oe.cyclic?Kn:jr;return w(G,ee,oe,be)},T=(G,ee,oe)=>{const be=oe.cyclic?Gr:wa;return w(G,ee,oe,be)},A=G=>Md(G).bind(r1).exists(ee=>Un(ee,G)),P=(G,ee,oe)=>d(G,oe).filter(be=>!oe.useTabstopAt(be)).bind(be=>(A(be)?E:T)(G,ee,oe)),$=(G,ee,oe)=>oe.onEnter.bind(be=>be(G,ee)),V=(G,ee,oe)=>oe.onEscape.bind(be=>be(G,ee)),W=te([nn(cc([ys,Jt(gn)]),E),nn(Jt(gn),T),nn(cc([nu,Jt(Ln)]),$)]),se=te([nn(Jt(to),V),nn(Jt(gn),P)]);return $m(s,Ei.init,W,se,()=>k.some(h))};var A4=t0(Rn("cyclic",Vn)),ap=t0(Rn("cyclic",Ot));const U6=(t,s,c)=>(L1(t,c,nr()),k.some(!0)),Fm=(t,s,c)=>ig(c)&&Jt(yo)(s.event)?k.none():U6(t,s,c),ip=(t,s)=>k.some(!0),nM=[le("execute",Fm),le("useSpace",!1),le("useEnter",!0),le("useControlEnter",!1),le("useDown",!1)],kx=(t,s,c)=>c.execute(t,s,t.element),W6=(t,s,c,i)=>{const d=c.useSpace&&!ig(t.element)?yo:[],g=c.useEnter?Ln:[],h=c.useDown?hl:[],y=d.concat(g).concat(h);return[nn(Jt(y),kx)].concat(c.useControlEnter?[nn(cc([Jb,Jt(Ln)]),kx)]:[])},oM=(t,s,c,i)=>c.useSpace&&!ig(t.element)?[nn(Jt(yo),ip)]:[];var Z6=$m(nM,Ei.init,W6,oM,()=>k.none());const R4=()=>{const t=Mn();return Ar({readState:()=>t.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,g)=>{t.set({numRows:d,numColumns:g})},getNumRows:()=>t.get().map(d=>d.numRows),getNumColumns:()=>t.get().map(d=>d.numColumns)})};var G6=Object.freeze({__proto__:null,flatgrid:R4,init:t=>t.state(t)});const sM=t=>(s,c,i,d)=>{const g=t(s.element);return rM(g,s,c,i,d)},D4=(t,s)=>{const c=Ty(t,s);return sM(c)},M4=(t,s)=>{const c=Ty(s,t);return sM(c)},P4=t=>(s,c,i,d)=>rM(t,s,c,i,d),rM=(t,s,c,i,d)=>i.focusManager.get(s).bind(h=>t(s.element,h,i,d)).map(h=>(i.focusManager.set(s,h),!0)),i2=P4,Ox=P4,Ax=P4,xG=t=>t.offsetWidth<=0&&t.offsetHeight<=0,N4=t=>!xG(t.dom),q6=(t,s)=>mo(t,s).map(c=>({index:c,candidates:t})),cM=(t,s,c)=>{const i=h=>Un(h,s),d=sr(t,c),g=po(d,N4);return q6(g,i)},Xa=(t,s)=>mo(t,c=>Un(s,c)),aM=(t,s,c,i)=>{const d=Math.floor(s/c),g=s%c;return i(d,g).bind(h=>{const y=h.row*c+h.column;return y>=0&&y<t.length?k.some(t[y]):k.none()})},iM=(t,s,c,i,d)=>aM(t,s,i,(g,h)=>{const w=g===c-1?t.length-g*i:i,E=dm(h,d,0,w-1);return k.some({row:g,column:E})}),lM=(t,s,c,i,d)=>aM(t,s,i,(g,h)=>{const y=dm(g,d,0,c-1),E=y===c-1?t.length-y*i:i,T=Ga(h,0,E-1);return k.some({row:y,column:T})}),K6=(t,s,c,i)=>iM(t,s,c,i,1),Y6=(t,s,c,i)=>iM(t,s,c,i,-1),n0=(t,s,c,i)=>lM(t,s,c,i,-1),B4=(t,s,c,i)=>lM(t,s,c,i,1),X6=[Te("selector"),le("execute",Fm),Cr("onEscape"),le("captureTab",!1),Kl()],$4=(t,s,c)=>{go(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},Rx=(t,s)=>s.focusManager.get(t).bind(c=>ul(c,s.selector)),F4=(t,s,c,i)=>Rx(t,c).bind(d=>c.execute(t,s,d)),Dx=t=>(s,c,i,d)=>cM(s,c,i.selector).bind(g=>t(g.candidates,g.index,d.getNumRows().getOr(i.initSize.numRows),d.getNumColumns().getOr(i.initSize.numColumns))),uM=(t,s,c)=>c.captureTab?k.some(!0):k.none(),J6=(t,s,c)=>c.onEscape(t,s),dM=Dx(Y6),mM=Dx(K6),Q6=Dx(n0),e8=Dx(B4),fM=te([nn(Jt(qc),D4(dM,mM)),nn(Jt(Bm),M4(dM,mM)),nn(Jt(Pi),i2(Q6)),nn(Jt(hl),Ox(e8)),nn(cc([ys,Jt(gn)]),uM),nn(cc([nu,Jt(gn)]),uM),nn(Jt(yo.concat(Ln)),F4)]),Mx=te([nn(Jt(to),J6),nn(Jt(yo),ip)]);var t8=$m(X6,R4,fM,Mx,()=>k.some($4));const gM=(t,s,c,i,d)=>{const g=y=>Da(y)==="button"&&qt(y,"disabled")==="disabled",h=(y,w,E)=>d(y,w,i,0,E.length-1,E[w],T=>g(E[T])?h(y,T,E):k.from(E[T]));return cM(t,c,s).bind(y=>{const w=y.index,E=y.candidates;return h(w,w,E)})},hM=(t,s,c,i)=>gM(t,s,c,i,(d,g,h,y,w,E,T)=>{const A=Ga(g+h,y,w);return A===d?k.from(E):T(A)}),Px=(t,s,c,i)=>gM(t,s,c,i,(d,g,h,y,w,E,T)=>{const A=dm(g,h,y,w);return A===d?k.none():T(A)}),o0=[Te("selector"),le("getInitial",k.none),le("execute",Fm),Cr("onEscape"),le("executeOnMove",!1),le("allowVertical",!0),le("allowHorizontal",!0),le("cycles",!0)],pM=(t,s)=>s.focusManager.get(t).bind(c=>ul(c,s.selector)),I4=(t,s,c)=>pM(t,c).bind(i=>c.execute(t,s,i)),L4=(t,s,c)=>{s.getInitial(t).orThunk(()=>go(t.element,s.selector)).each(i=>{s.focusManager.set(t,i)})},bM=(t,s,c)=>(c.cycles?Px:hM)(t,c.selector,s,-1),H4=(t,s,c)=>(c.cycles?Px:hM)(t,c.selector,s,1),V4=t=>(s,c,i,d)=>t(s,c,i,d).bind(()=>i.executeOnMove?I4(s,c,i):k.some(!0)),vM=(t,s,c)=>c.onEscape(t,s),yM=(t,s,c,i)=>{const d=[...c.allowHorizontal?qc:[]].concat(c.allowVertical?Pi:[]),g=[...c.allowHorizontal?Bm:[]].concat(c.allowVertical?hl:[]);return[nn(Jt(d),V4(D4(bM,H4))),nn(Jt(g),V4(M4(bM,H4))),nn(Jt(Ln),I4),nn(Jt(yo),I4)]},CM=te([nn(Jt(yo),ip),nn(Jt(to),vM)]);var n8=$m(o0,Ei.init,yM,CM,()=>k.some(L4));const Nx=(t,s,c)=>k.from(t[s]).bind(i=>k.from(i[c]).map(d=>({rowIndex:s,columnIndex:c,cell:d}))),wM=(t,s,c,i)=>{const g=t[s].length,h=dm(c,i,0,g-1);return Nx(t,s,h)},Bx=(t,s,c,i)=>{const d=dm(c,i,0,t.length-1),g=t[d].length,h=Ga(s,0,g-1);return Nx(t,d,h)},SM=(t,s,c,i)=>{const g=t[s].length,h=Ga(c+i,0,g-1);return Nx(t,s,h)},l2=(t,s,c,i)=>{const d=Ga(c+i,0,t.length-1),g=t[d].length,h=Ga(s,0,g-1);return Nx(t,d,h)},o8=(t,s,c)=>wM(t,s,c,1),xM=(t,s,c)=>wM(t,s,c,-1),_c=(t,s,c)=>Bx(t,c,s,-1),s8=(t,s,c)=>Bx(t,c,s,1),EM=(t,s,c)=>SM(t,s,c,-1),TM=(t,s,c)=>SM(t,s,c,1),r8=(t,s,c)=>l2(t,c,s,-1),_M=(t,s,c)=>l2(t,c,s,1),kM=[Nu("selectors",[Te("row"),Te("cell")]),le("cycles",!0),le("previousSelector",k.none),le("execute",Fm)],c8=(t,s,c)=>{s.previousSelector(t).orThunk(()=>{const d=s.selectors;return go(t.element,d.cell)}).each(d=>{s.focusManager.set(t,d)})},a8=(t,s,c)=>Dr(t.element).bind(i=>c.execute(t,s,i)),i8=(t,s)=>De(t,c=>sr(c,s.selectors.cell)),$x=(t,s)=>(c,i,d)=>{const g=d.cycles?t:s;return ul(i,d.selectors.row).bind(h=>{const y=sr(h,d.selectors.cell);return Xa(y,i).bind(w=>{const E=sr(c,d.selectors.row);return Xa(E,h).bind(T=>{const A=i8(E,d);return g(A,T,w).map(P=>P.cell)})})})},z4=$x(xM,EM),OM=$x(o8,TM),l8=$x(_c,r8),AM=$x(s8,_M),RM=te([nn(Jt(qc),D4(z4,OM)),nn(Jt(Bm),M4(z4,OM)),nn(Jt(Pi),i2(l8)),nn(Jt(hl),Ox(AM)),nn(Jt(yo.concat(Ln)),a8)]),DM=te([nn(Jt(yo),ip)]);var u8=$m(kM,Ei.init,RM,DM,()=>k.some(c8));const d8=[Te("selector"),le("execute",Fm),le("moveOnTab",!1)],MM=(t,s,c)=>c.focusManager.get(t).bind(i=>c.execute(t,s,i)),m8=(t,s,c)=>{go(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},U4=(t,s,c)=>Px(t,c.selector,s,-1),W4=(t,s,c)=>Px(t,c.selector,s,1),lg=(t,s,c,i)=>c.moveOnTab?Ax(U4)(t,s,c,i):k.none(),PM=(t,s,c,i)=>c.moveOnTab?Ax(W4)(t,s,c,i):k.none(),NM=te([nn(Jt(Pi),Ax(U4)),nn(Jt(hl),Ax(W4)),nn(cc([ys,Jt(gn)]),lg),nn(cc([nu,Jt(gn)]),PM),nn(Jt(Ln),MM),nn(Jt(yo),MM)]),BM=te([nn(Jt(yo),ip)]);var f8=$m(d8,Ei.init,NM,BM,()=>k.some(m8));const s0=[Cr("onSpace"),Cr("onEnter"),Cr("onShiftEnter"),Cr("onLeft"),Cr("onRight"),Cr("onTab"),Cr("onShiftTab"),Cr("onUp"),Cr("onDown"),Cr("onEscape"),le("stopSpaceKeyup",!1),kn("focusIn")],g8=(t,s,c)=>[nn(Jt(yo),c.onSpace),nn(cc([nu,Jt(Ln)]),c.onEnter),nn(cc([ys,Jt(Ln)]),c.onShiftEnter),nn(cc([ys,Jt(gn)]),c.onShiftTab),nn(cc([nu,Jt(gn)]),c.onTab),nn(Jt(Pi),c.onUp),nn(Jt(hl),c.onDown),nn(Jt(qc),c.onLeft),nn(Jt(Bm),c.onRight),nn(Jt(yo),c.onSpace)],h8=(t,s,c)=>[...c.stopSpaceKeyup?[nn(Jt(yo),ip)]:[],nn(Jt(to),c.onEscape)];var $M=$m(s0,Ei.init,g8,h8,t=>t.focusIn);const p8=A4.schema(),b8=ap.schema(),v8=n8.schema(),FM=t8.schema(),Z4=u8.schema(),j4=Z6.schema(),y8=f8.schema(),ug=$M.schema();var IM=Object.freeze({__proto__:null,acyclic:p8,cyclic:b8,flow:v8,flatgrid:FM,matrix:Z4,execution:j4,menu:y8,special:ug});const LM=t=>sa(t,"setGridSize"),xt=Iv({branchKey:"mode",branches:IM,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,c)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},i=>{i(t,s,c)})},setGridSize:(t,s,c,i,d)=>{LM(c)?c.setGridSize(i,d):console.error("Layout does not support setGridSize")}},state:G6}),HM=(t,s)=>{py(()=>{jy(t,s,()=>De(s,t.getSystem().build))},t.element)},r0=(t,s)=>{py(()=>{Qf(t,s,()=>Qw(t.element,s,t.getSystem().buildOrPatch))},t.element)},u2=(t,s,c,i)=>{Ob(s);const d=Lf(t.element,c,i,t.getSystem().buildOrPatch);Wy(t,d),t.syncComponents()},Fx=(t,s,c)=>{const i=t.getSystem().build(c);Kh(t,i,s)},G4=(t,s,c,i)=>{eu(s),Fx(t,(d,g)=>iw(d,g,c),i)},dg=(t,s,c,i)=>(s.reuseDom?r0:HM)(t,i),mg=(t,s,c,i)=>{Fx(t,Hr,i)},C8=(t,s,c,i)=>{Fx(t,Hl,i)},w8=(t,s,c,i)=>{const d=d2(t);zt(d,h=>Un(i.element,h.element)).each(eu)},d2=(t,s)=>t.components(),gd=(t,s,c,i,d)=>{const g=d2(t);return k.from(g[i]).map(h=>(d.fold(()=>eu(h),y=>{(s.reuseDom?u2:G4)(t,h,i,y)}),h))};var S8=Object.freeze({__proto__:null,append:mg,prepend:C8,remove:w8,replaceAt:gd,replaceBy:(t,s,c,i,d)=>{const g=d2(t);return mo(g,i).bind(h=>gd(t,s,c,h,d))},set:dg,contents:d2});const Ht=Ls({fields:[er("reuseDom",!0)],name:"replacing",apis:S8}),zM=(t,s)=>{const c=Fn(s);return Ls({fields:[Te("enabled")],name:t,active:{events:te(c)}})},Zt=(t,s)=>{const c=zM(t,s);return{key:t,value:{config:{},me:c,configAsRaw:te({}),initialConfig:{},state:Ei}}},Ix=(t,s)=>{s.ignore||(pa(t.element),s.onFocus(t))};var E8=Object.freeze({__proto__:null,focus:Ix,blur:(t,s)=>{s.ignore||zf(t.element)},isFocused:t=>Uf(t.element)}),K4=Object.freeze({__proto__:null,exhibit:(t,s)=>{const c=s.ignore?{}:{attributes:{tabindex:"-1"}};return Ur(c)},events:t=>Fn([Ee(Si(),(s,c)=>{Ix(s,t),c.stop()})].concat(t.stopMousedown?[Ee(Lc(),(s,c)=>{c.event.prevent()})]:[]))}),Lx=[bn("onFocus"),le("stopMousedown",!1),le("ignore",!1)];const Bt=Ls({fields:Lx,name:"focusing",active:K4,apis:E8}),T8=t=>({init:()=>{const c=St(t);return{get:()=>c.get(),set:y=>c.set(y),clear:()=>c.set(t),readState:()=>c.get()}}}),UM=(t,s,c)=>{const i=s.aria;i.update(t,i,c.get())},WM=(t,s,c)=>{s.toggleClass.each(i=>{c.get()?ns(t.element,i):In(t.element,i)})},c0=(t,s,c,i)=>{const d=c.get();c.set(i),WM(t,s,c),UM(t,s,c),d!==i&&s.onToggled(t,i)},Y4=(t,s,c)=>{c0(t,s,c,!c.get())},_8=(t,s,c)=>{c0(t,s,c,!0)},X4=(t,s,c)=>{c0(t,s,c,!1)},k8=(t,s,c)=>c.get(),ZM=(t,s,c)=>{c0(t,s,c,s.selected)};var O8=Object.freeze({__proto__:null,onLoad:ZM,toggle:Y4,isOn:k8,on:_8,off:X4,set:c0}),R8=Object.freeze({__proto__:null,exhibit:()=>Ur({}),events:(t,s)=>{const c=nk(t,s,Y4),i=Uu(t,s,ZM);return Fn(Gt([t.toggleOnExecute?[c]:[],[i]]))}});const D8=(t,s,c)=>{Dt(t.element,"aria-pressed",c),s.syncWithExpanded&&GM(t,s,c)},jM=(t,s,c)=>{Dt(t.element,"aria-selected",c)},m2=(t,s,c)=>{Dt(t.element,"aria-checked",c)},GM=(t,s,c)=>{Dt(t.element,"aria-expanded",c)};var f2=[le("selected",!1),kn("toggleClass"),le("toggleOnExecute",!0),bn("onToggled"),io("aria",{mode:"none"},Ko("mode",{pressed:[le("syncWithExpanded",!1),Qn("update",D8)],checked:[Qn("update",m2)],expanded:[Qn("update",GM)],selected:[Qn("update",jM)],none:[Qn("update",J)]}))];const en=Ls({fields:f2,name:"toggling",active:R8,apis:O8,state:T8(!1)}),J4=()=>{const t=(s,c)=>{c.stop(),Vu(s)};return[Ee(Yd(),t),Ee($1(),t),em(Ci()),em(Lc())]},g2=t=>{const s=c=>Wl((i,d)=>{c(i),d.stop()});return Fn(Gt([t.map(s).toArray(),J4()]))},qM="alloy.item-hover",KM="alloy.item-focus",Q4="alloy.item-toggled",YM=t=>{(Dr(t.element).isNone()||Bt.isFocused(t))&&(Bt.isFocused(t)||Bt.focus(t),ht(t,qM,{item:t}))},e3=t=>{ht(t,KM,{item:t})},M8=(t,s)=>{ht(t,Q4,{item:t,state:s})},XM=te(qM),JM=te(KM),Hx=te(Q4),t3=t=>t.role.fold(()=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),an),n3=(t,s)=>({aria:{mode:s?"selected":"checked"},..._d(t,(c,i)=>i!=="exclusive"),onToggled:(c,i)=>{He(t.onToggled)&&t.onToggled(c,i),M8(c,i)}}),P8=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:t3(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:ya.augment(t.itemBehaviours,[t.toggling.fold(en.revoke,s=>en.config(n3(s,t.role.exists(c=>c==="option")))),Bt.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{e3(s)}}),xt.config({mode:"execution"}),nt.config({store:{mode:"memory",initialValue:t.data}}),Zt("item-type-events",[...J4(),Ee(za(),YM),Ee(Iu(),Bt.focus)])]),components:t.components,eventOrder:t.eventOrder}),N8=[Te("data"),Te("components"),Te("dom"),le("hasSubmenu",!1),kn("toggling"),kn("role"),ya.field("itemBehaviours",[en,Bt,xt,nt]),le("ignoreFocus",!1),le("domModification",{}),Qn("builder",P8),le("eventOrder",{})],B8=t=>({dom:t.dom,components:t.components,events:Fn([bh(Iu())])}),$8=[Te("dom"),Te("components"),Qn("builder",B8)],Vx=te("item-widget"),zx=te([Sr({name:"widget",overrides:t=>({behaviours:$e([nt.config({store:{mode:"manual",getValue:s=>t.data,setValue:J}})])})})]),F8=t=>{const s=wx(Vx(),t,zx()),c=jb(Vx(),t,s.internals()),i=g=>qn(g,t,"widget").map(h=>(xt.focusIn(h),h)),d=(g,h)=>ig(h.event.target)?k.none():(t.autofocus&&h.setSource(g.element),k.none());return{dom:t.dom,components:c,domModification:t.domModification,events:Fn([Wl((g,h)=>{i(g).each(y=>{h.stop()})}),Ee(za(),YM),Ee(Iu(),(g,h)=>{t.autofocus?i(g):Bt.focus(g)})]),behaviours:ya.augment(t.widgetBehaviours,[nt.config({store:{mode:"memory",initialValue:t.data}}),Bt.config({ignore:t.ignoreFocus,onFocus:g=>{e3(g)}}),xt.config({mode:"special",focusIn:t.autofocus?g=>{i(g)}:Lv(),onLeft:d,onRight:d,onEscape:(g,h)=>!Bt.isFocused(g)&&!t.autofocus?(Bt.focus(g),k.some(!0)):(t.autofocus&&h.setSource(g.element),k.none())})])}},I8=[Te("uid"),Te("data"),Te("components"),Te("dom"),le("autofocus",!1),le("ignoreFocus",!1),ya.field("widgetBehaviours",[nt,Bt,xt]),le("domModification",{}),op(zx()),Qn("builder",F8)],L8=Ko("type",{widget:I8,item:N8,separator:$8}),H8=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),V8=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),z8=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),QM=te([np({factory:{sketch:t=>{const s=sc("menu.spec item",L8,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>$n(s,"uid")?s:{...s,uid:_h("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),U8=te([_s("role"),Te("value"),Te("items"),Te("dom"),Te("components"),le("eventOrder",{}),Vs("menuBehaviours",[Ze,nt,fn,xt]),io("movement",{mode:"menu",moveOnTab:!0},Ko("mode",{grid:[Kl(),Qn("config",H8)],matrix:[Qn("config",V8),Te("rowSelector"),le("previousSelector",k.none)],menu:[le("moveOnTab",!0),Qn("config",z8)]})),dk(),le("fakeFocus",!1),le("focusManager",e0()),bn("onHighlight"),bn("onDehighlight"),le("showMenuRole",!0)]),e5=te("alloy.menu-focus"),W8=(t,s)=>{const c=sr(t.element,'[role="menuitemradio"][aria-checked="true"]');it(c,i=>{Un(i,s.element)||t.getSystem().getByDom(i).each(d=>{en.off(d)})})},Z8=(t,s,c,i)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:zs(t.menuBehaviours,[Ze.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),nt.config({store:{mode:"memory",initialValue:t.value}}),fn.config({find:k.some}),xt.config(t.movement.config(t,t.movement))]),events:Fn([Ee(JM(),(d,g)=>{const h=g.event;d.getSystem().getByDom(h.target).each(y=>{Ze.highlight(d,y),g.stop(),ht(d,e5(),{menu:d,item:y})})}),Ee(XM(),(d,g)=>{const h=g.event.item;Ze.highlight(d,h)}),Ee(Hx(),(d,g)=>{const{item:h,state:y}=g.event;y&&qt(h.element,"role")==="menuitemradio"&&W8(d,h)})]),components:s,eventOrder:t.eventOrder,...t.showMenuRole?{domModification:{attributes:{role:t.role.getOr("menu")}}}:{}}),lp=pr({name:"Menu",configFields:U8(),partFields:QM(),factory:Z8}),up=t=>tf(t,(s,c)=>({k:s,v:c})),t5=(t,s,c,i)=>rt(c,i).bind(d=>rt(t,d).bind(g=>{const h=t5(t,s,c,g);return k.some([g].concat(h))})).getOr([]),j8=(t,s)=>{const c={};Ms(t,(h,y)=>{it(h,w=>{c[w]=y})});const i=s,d=up(s),g=Io(d,(h,y)=>[y].concat(t5(c,i,d,y)));return Io(c,h=>rt(g,h).getOr([h]))},dp=()=>{const t=St({}),s=St({}),c=St({}),i=Mn(),d=St({}),g=()=>{t.set({}),s.set({}),c.set({}),i.clear()},h=()=>i.get().isNone(),y=(ye,We)=>{s.set({...s.get(),[ye]:{type:"prepared",menu:We}})},w=(ye,We,at,xe)=>{i.set(ye),t.set(at),s.set(We),d.set(xe);const lt=j8(xe,at);c.set(lt)},E=ye=>Ir(t.get(),(We,at)=>We===ye),T=(ye,We,at)=>W(ye).bind(xe=>E(ye).bind(lt=>We(lt).map(Je=>({triggeredMenu:xe,triggeringItem:Je,triggeringPath:at})))),A=(ye,We)=>{const at=po(G(ye).toArray(),xe=>W(xe).isSome());return rt(c.get(),ye).bind(xe=>{const lt=Er(at.concat(xe)),Je=Se(lt,(mt,ln)=>T(mt,We,lt.slice(0,ln+1)).fold(()=>Ac(i.get(),mt)?[]:[k.none()],ro=>[k.some(ro)]));return Eo(Je)})},P=ye=>rt(t.get(),ye).map(We=>{const at=rt(c.get(),ye).getOr([]);return[We].concat(at)}),$=ye=>rt(c.get(),ye).bind(We=>We.length>1?k.some(We.slice(1)):k.none()),V=ye=>rt(c.get(),ye),W=ye=>se(ye).bind(o3),se=ye=>rt(s.get(),ye),G=ye=>rt(t.get(),ye);return{setMenuBuilt:y,setContents:w,expand:P,refresh:V,collapse:$,lookupMenu:se,lookupItem:G,otherMenus:ye=>{const We=d.get();return Rt(Fo(We),ye)},getPrimary:()=>i.get().bind(W),getMenus:()=>s.get(),clear:g,isClear:h,getTriggeringPath:A}},o3=t=>t.type==="prepared"?k.some(t.menu):k.none(),n5={init:dp,extractPreparedMenu:o3},Im=ut("tiered-menu-item-highlight"),o5=ut("tiered-menu-item-dehighlight");var kc;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(kc||(kc={}));const Ni=(t,s)=>{const c=Mn(),i=(Me,Ye,It)=>Io(It,(Qt,wt)=>{const Ut=()=>lp.sketch({...Qt,value:wt,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(jn,Hn)=>{ht(jn,Im,{menuComp:jn,itemComp:Hn})},onDehighlight:(jn,Hn)=>{ht(jn,o5,{menuComp:jn,itemComp:Hn})},focusManager:t.fakeFocus?_x():e0()});return wt===Ye?{type:"prepared",menu:Me.getSystem().build(Ut())}:{type:"notbuilt",nbMenu:Ut}}),d=n5.init(),g=Me=>{const Ye=i(Me,t.data.primary,t.data.menus),It=w();return d.setContents(t.data.primary,Ye,t.data.expansions,It),d.getPrimary()},h=Me=>nt.getValue(Me).value,y=(Me,Ye,It)=>ir(Ye,Qt=>{if(!Qt.getSystem().isConnected())return k.none();const wt=Ze.getCandidates(Qt);return zt(wt,Ut=>h(Ut)===It)}),w=Me=>Io(t.data.menus,(Ye,It)=>Se(Ye.items,Qt=>Qt.type==="separator"?[]:[Qt.data.value])),E=Ze.highlight,T=(Me,Ye)=>{E(Me,Ye),Ze.getHighlighted(Ye).orThunk(()=>Ze.getFirst(Ye)).each(It=>{t.fakeFocus?Ze.highlight(Ye,It):L1(Me,It.element,Iu())})},A=(Me,Ye)=>kd(De(Ye,It=>Me.lookupMenu(It).bind(Qt=>Qt.type==="prepared"?k.some(Qt.menu):k.none()))),P=(Me,Ye,It)=>{const Qt=A(Ye,Ye.otherMenus(It));it(Qt,wt=>{Ti(wt.element,[t.markers.backgroundMenu]),t.stayInDom||Ht.remove(Me,wt)})},$=Me=>c.get().getOrThunk(()=>{const Ye={},It=sr(Me.element,`.${t.markers.item}`),Qt=po(It,wt=>qt(wt,"aria-haspopup")==="true");return it(Qt,wt=>{Me.getSystem().getByDom(wt).each(Ut=>{const jn=h(Ut);Ye[jn]=Ut})}),c.set(Ye),Ye}),V=(Me,Ye)=>{const It=$(Me);Ms(It,(Qt,wt)=>{const Ut=$o(Ye,wt);Dt(Qt.element,"aria-expanded",Ut)})},W=(Me,Ye,It)=>k.from(It[0]).bind(Qt=>Ye.lookupMenu(Qt).bind(wt=>{if(wt.type==="notbuilt")return k.none();{const Ut=wt.menu,jn=A(Ye,It.slice(1));return it(jn,Hn=>{ns(Hn.element,t.markers.backgroundMenu)}),ra(Ut.element)||Ht.append(Me,zc(Ut)),Ti(Ut.element,[t.markers.backgroundMenu]),T(Me,Ut),P(Me,Ye,It),k.some(Ut)}}));let se;(function(Me){Me[Me.HighlightSubmenu=0]="HighlightSubmenu",Me[Me.HighlightParent=1]="HighlightParent"})(se||(se={}));const G=(Me,Ye,It)=>{if(It.type==="notbuilt"){const Qt=Me.getSystem().build(It.nbMenu());return d.setMenuBuilt(Ye,Qt),Qt}else return It.menu},ee=(Me,Ye,It=se.HighlightSubmenu)=>{if(Ye.hasConfigured(Mt)&&Mt.isDisabled(Ye))return k.some(Ye);{const Qt=h(Ye);return d.expand(Qt).bind(wt=>(V(Me,wt),k.from(wt[0]).bind(Ut=>d.lookupMenu(Ut).bind(jn=>{const Hn=G(Me,Ut,jn);return ra(Hn.element)||Ht.append(Me,zc(Hn)),t.onOpenSubmenu(Me,Ye,Hn,Er(wt)),It===se.HighlightSubmenu?(Ze.highlightFirst(Hn),W(Me,d,wt)):(Ze.dehighlightAll(Hn),k.some(Ye))}))))}},oe=(Me,Ye)=>{const It=h(Ye);return d.collapse(It).bind(Qt=>(V(Me,Qt),W(Me,d,Qt).map(wt=>(t.onCollapseMenu(Me,Ye,wt),wt))))},be=(Me,Ye)=>{const It=h(Ye);return d.refresh(It).bind(Qt=>(V(Me,Qt),W(Me,d,Qt)))},ye=(Me,Ye)=>ig(Ye.element)?k.none():ee(Me,Ye,se.HighlightSubmenu),We=(Me,Ye)=>ig(Ye.element)?k.none():oe(Me,Ye),at=(Me,Ye)=>oe(Me,Ye).orThunk(()=>t.onEscape(Me,Ye).map(()=>Me)),xe=Me=>(Ye,It)=>ul(It.getSource(),`.${t.markers.item}`).bind(Qt=>Ye.getSystem().getByDom(Qt).toOptional().bind(wt=>Me(Ye,wt).map(Ot))),lt=Fn([Ee(e5(),(Me,Ye)=>{const It=Ye.event.item;d.lookupItem(h(It)).each(()=>{const Qt=Ye.event.menu;Ze.highlight(Me,Qt);const wt=h(Ye.event.item);d.refresh(wt).each(Ut=>P(Me,d,Ut))})}),Wl((Me,Ye)=>{const It=Ye.event.target;Me.getSystem().getByDom(It).each(Qt=>{h(Qt).indexOf("collapse-item")===0&&oe(Me,Qt),ee(Me,Qt,se.HighlightSubmenu).fold(()=>{t.onExecute(Me,Qt)},J)})}),lo((Me,Ye)=>{g(Me).each(It=>{Ht.append(Me,zc(It)),t.onOpenMenu(Me,It),t.highlightOnOpen===kc.HighlightMenuAndItem?T(Me,It):t.highlightOnOpen===kc.HighlightJustMenu&&E(Me,It)})}),Ee(Im,(Me,Ye)=>{t.onHighlightItem(Me,Ye.event.menuComp,Ye.event.itemComp)}),Ee(o5,(Me,Ye)=>{t.onDehighlightItem(Me,Ye.event.menuComp,Ye.event.itemComp)}),...t.navigateOnHover?[Ee(XM(),(Me,Ye)=>{const It=Ye.event.item;be(Me,It),ee(Me,It,se.HighlightParent),t.onHover(Me,It)})]:[]]),Je=Me=>Ze.getHighlighted(Me).bind(Ze.getHighlighted),mt=Me=>{Je(Me).each(Ye=>{oe(Me,Ye)})},ln=Me=>{d.getPrimary().each(Ye=>{T(Me,Ye)})},ro=Me=>k.from(Me.components()[0]).filter(Ye=>qt(Ye.element,"role")==="menu"),gt={collapseMenu:mt,highlightPrimary:ln,repositionMenus:Me=>{d.getPrimary().bind(It=>Je(Me).bind(Qt=>{const wt=h(Qt),Ut=X0(d.getMenus()),jn=kd(De(Ut,n5.extractPreparedMenu));return d.getTriggeringPath(wt,Hn=>y(Me,jn,Hn))}).map(Qt=>({primary:It,triggeringPath:Qt}))).fold(()=>{ro(Me).each(It=>{t.onRepositionMenu(Me,It,[])})},({primary:It,triggeringPath:Qt})=>{t.onRepositionMenu(Me,It,Qt)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:zs(t.tmenuBehaviours,[xt.config({mode:"special",onRight:xe(ye),onLeft:xe(We),onEscape:xe(at),focusIn:(Me,Ye)=>{d.getPrimary().each(It=>{L1(Me,It.element,Iu())})}}),Ze.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),fn.config({find:Me=>Ze.getHighlighted(Me)}),Ht.config({})]),eventOrder:t.eventOrder,apis:gt,events:lt}},s5=te("collapse-item"),r5=(t,s,c)=>({primary:t,menus:s,expansions:c}),c5=(t,s)=>({primary:t,menus:jd(t,s),expansions:{}}),G8=t=>({value:ut(s5()),meta:{text:t}}),hd=Tc({name:"TieredMenu",configFields:[Bf("onExecute"),Bf("onEscape"),lm("onOpenMenu"),lm("onOpenSubmenu"),bn("onRepositionMenu"),bn("onCollapseMenu"),le("highlightOnOpen",kc.HighlightMenuAndItem),Nu("data",[Te("primary"),Te("menus"),Te("expansions")]),le("fakeFocus",!1),bn("onHighlightItem"),bn("onDehighlightItem"),bn("onHover"),ll(),Te("dom"),le("navigateOnHover",!0),le("stayInDom",!1),Vs("tmenuBehaviours",[xt,Ze,fn,Ht]),le("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:Ni,extraApis:{tieredData:r5,singleData:c5,collapseItem:G8}}),a5=(t,s,c,i,d)=>{const g=()=>t.lazySink(s),h=i.type==="horizontal"?{layouts:{onLtr:()=>Ph(),onRtl:()=>db()}}:{},y=E=>E.length===2,w=E=>y(E)?h:{};return hd.sketch({dom:{tag:"div"},data:i.data,markers:i.menu.markers,highlightOnOpen:i.menu.highlightOnOpen,fakeFocus:i.menu.fakeFocus,onEscape:()=>(Cn.close(s),t.onEscape.map(E=>E(s)),k.some(!0)),onExecute:()=>k.some(!0),onOpenMenu:(E,T)=>{cr.positionWithinBounds(g().getOrDie(),T,c,d())},onOpenSubmenu:(E,T,A,P)=>{const $=g().getOrDie();cr.position($,A,{anchor:{type:"submenu",item:T,...w(P)}})},onRepositionMenu:(E,T,A)=>{const P=g().getOrDie();cr.positionWithinBounds(P,T,c,d()),it(A,$=>{const V=w($.triggeringPath);cr.position(P,$.triggeredMenu,{anchor:{type:"submenu",item:$.triggeringItem,...V}})})}})},q8=(t,s)=>{const c=(P,$)=>t.getRelated(P).exists(W=>Xu(W,$)),i=(P,$)=>{Cn.setContent(P,$)},d=(P,$,V)=>{const W=k.none;g(P,$,V,W)},g=(P,$,V,W)=>{const se=t.lazySink(P).getOrDie();Cn.openWhileCloaked(P,$,()=>cr.positionWithinBounds(se,P,V,W())),nt.setValue(P,k.some({mode:"position",config:V,getBounds:W}))},h=(P,$,V)=>{y(P,$,V,k.none)},y=(P,$,V,W)=>{const se=a5(t,P,$,V,W);Cn.open(P,se),nt.setValue(P,k.some({mode:"menu",menu:se}))},w=P=>{Cn.isOpen(P)&&(nt.setValue(P,k.none()),Cn.close(P))},E=P=>Cn.getState(P),T=P=>{Cn.isOpen(P)&&nt.getValue(P).each($=>{switch($.mode){case"menu":Cn.getState(P).each(hd.repositionMenus);break;case"position":const V=t.lazySink(P).getOrDie();cr.positionWithinBounds(V,P,$.config,$.getBounds());break}})},A={setContent:i,showAt:d,showWithinBounds:g,showMenuAt:h,showMenuWithinBounds:y,hide:w,getContent:E,reposition:T,isOpen:Cn.isOpen};return{uid:t.uid,dom:t.dom,behaviours:zs(t.inlineBehaviours,[Cn.config({isPartOf:(P,$,V)=>Xu($,V)||c(P,V),getAttachPoint:P=>t.lazySink(P).getOrDie(),onOpen:P=>{t.onShow(P)},onClose:P=>{t.onHide(P)}}),nt.config({store:{mode:"memory",initialValue:k.none()}}),wc.config({channels:{...Jh({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(P=>({fireEventInstead:{event:P.event}})).getOr({})}),...Qh({...t.fireRepositionEventInstead.map(P=>({fireEventInstead:{event:P.event}})).getOr({}),doReposition:T})}})]),eventOrder:t.eventOrder,apis:A}},ko=Tc({name:"InlineView",configFields:[Te("lazySink"),bn("onShow"),bn("onHide"),ol("onEscape"),Vs("inlineBehaviours",[Cn,nt,wc]),Fs("fireDismissalEventInstead",[le("event",Vc())]),Fs("fireRepositionEventInstead",[le("event",hh())]),le("getRelated",k.none),le("isExtraPart",Vn),le("eventOrder",k.none)],factory:q8,apis:{showAt:(t,s,c,i)=>{t.showAt(s,c,i)},showWithinBounds:(t,s,c,i,d)=>{t.showWithinBounds(s,c,i,d)},showMenuAt:(t,s,c,i)=>{t.showMenuAt(s,c,i)},showMenuWithinBounds:(t,s,c,i,d)=>{t.showMenuWithinBounds(s,c,i,d)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,c)=>{t.setContent(s,c)},reposition:(t,s)=>{t.reposition(s)}}});var mp=tinymce.util.Tools.resolve("tinymce.util.Delay"),fg=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),i5=tinymce.util.Tools.resolve("tinymce.EditorManager"),fp=tinymce.util.Tools.resolve("tinymce.Env"),Ja;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(Ja||(Ja={}));var h2;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(h2||(h2={}));const Wn=t=>s=>s.options.get(t),a0=t=>s=>k.from(t(s)),l5=t=>{const s=fp.deviceType.isPhone(),c=fp.deviceType.isTablet()||s,i=t.options.register,d=h=>ke(h)||h===!1,g=h=>ke(h)||uo(h);i("skin",{processor:h=>ke(h)||h===!1,default:"oxide"}),i("skin_url",{processor:"string"}),i("height",{processor:g,default:Math.max(t.getElement().offsetHeight,400)}),i("width",{processor:g,default:fg.DOM.getStyle(t.getElement(),"width")}),i("min_height",{processor:"number",default:100}),i("min_width",{processor:"number"}),i("max_height",{processor:"number"}),i("max_width",{processor:"number"}),i("style_formats",{processor:"object[]"}),i("style_formats_merge",{processor:"boolean",default:!1}),i("style_formats_autohide",{processor:"boolean",default:!1}),i("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),i("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),i("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),i("font_size_input_default_unit",{processor:"string",default:"pt"}),i("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),i("content_langs",{processor:"object[]"}),i("removed_menuitems",{processor:"string",default:""}),i("menubar",{processor:h=>ke(h)||Co(h),default:!s}),i("menu",{processor:"object",default:{}}),i("toolbar",{processor:h=>Co(h)||ke(h)||yt(h)?{value:h,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),cs(9,h=>{i("toolbar"+(h+1),{processor:"string"})}),i("toolbar_mode",{processor:"string",default:c?"scrolling":"floating"}),i("toolbar_groups",{processor:"object",default:{}}),i("toolbar_location",{processor:"string",default:h2.auto}),i("toolbar_persist",{processor:"boolean",default:!1}),i("toolbar_sticky",{processor:"boolean",default:t.inline}),i("toolbar_sticky_offset",{processor:"number",default:0}),i("fixed_toolbar_container",{processor:"string",default:""}),i("fixed_toolbar_container_target",{processor:"object"}),i("ui_mode",{processor:"string",default:"combined"}),i("file_picker_callback",{processor:"function"}),i("file_picker_validator_handler",{processor:"function"}),i("file_picker_types",{processor:"string"}),i("typeahead_urls",{processor:"boolean",default:!0}),i("anchor_top",{processor:d,default:"#top"}),i("anchor_bottom",{processor:d,default:"#bottom"}),i("draggable_modal",{processor:"boolean",default:!1}),i("statusbar",{processor:"boolean",default:!0}),i("elementpath",{processor:"boolean",default:!0}),i("branding",{processor:"boolean",default:!0}),i("promotion",{processor:"boolean",default:!0}),i("resize",{processor:h=>h==="both"||Co(h),default:!fp.deviceType.isTouch()}),i("sidebar_show",{processor:"string"}),i("help_accessibility",{processor:"boolean",default:t.hasPlugin("help")}),i("default_font_stack",{processor:"string[]",default:[]})},u5=Wn("readonly"),s3=Wn("height"),p2=Wn("width"),r3=a0(Wn("min_width")),gp=a0(Wn("min_height")),hp=a0(Wn("max_width")),Ux=a0(Wn("max_height")),c3=a0(Wn("style_formats")),d5=Wn("style_formats_merge"),m5=Wn("style_formats_autohide"),f5=Wn("content_langs"),g5=Wn("removed_menuitems"),gg=Wn("toolbar_mode"),a3=Wn("toolbar_groups"),Wx=Wn("toolbar_location"),i3=Wn("fixed_toolbar_container"),K8=Wn("fixed_toolbar_container_target"),l3=Wn("toolbar_persist"),h5=Wn("toolbar_sticky_offset"),p5=Wn("menubar"),Zx=Wn("toolbar"),u3=Wn("file_picker_callback"),b5=Wn("file_picker_validator_handler"),v5=Wn("font_size_input_default_unit"),jx=Wn("file_picker_types"),d3=Wn("typeahead_urls"),m3=Wn("anchor_top"),y5=Wn("anchor_bottom"),Gx=Wn("draggable_modal"),C5=Wn("statusbar"),w5=Wn("elementpath"),f3=Wn("branding"),S5=Wn("resize"),x5=Wn("paste_as_text"),g3=Wn("sidebar_show"),qx=Wn("promotion"),E5=Wn("help_accessibility"),b2=Wn("default_font_stack"),h3=t=>t.options.get("skin")===!1,Kx=t=>t.options.get("menubar")!==!1,p3=t=>{const s=t.options.get("skin_url");if(h3(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const c=t.options.get("skin");return i5.baseURL+"/skins/ui/"+c}},Yx=t=>k.from(t.options.get("skin_url")),T5=t=>t.options.get("line_height_formats").split(" "),Xx=t=>{const s=Zx(t),c=ke(s),i=yt(s)&&s.length>0;return!v2(t)&&(i||c||s===!0)},Jx=t=>{const s=cs(9,i=>t.options.get("toolbar"+(i+1))),c=po(s,ke);return $t(c.length>0,c)},v2=t=>Jx(t).fold(()=>{const s=Zx(t);return Bo(s,ke)&&s.length>0},Ot),b3=t=>Wx(t)===h2.bottom,Qx=t=>{var s;if(!t.inline)return k.none();const c=(s=i3(t))!==null&&s!==void 0?s:"";if(c.length>0)return go(mi(),c);const i=K8(t);return jt(i)?k.some(ae.fromDom(i)):k.none()},pl=t=>t.inline&&Qx(t).isSome(),v3=t=>Qx(t).getOrThunk(()=>Pd(lr(ae.fromDom(t.getElement())))),y3=t=>t.inline&&!Kx(t)&&!Xx(t)&&!v2(t),hg=t=>(t.options.get("toolbar_sticky")||t.inline)&&!pl(t)&&!y3(t),Lm=t=>!pl(t)&&t.options.get("ui_mode")==="split",_5=t=>{const s=t.options.get("menu");return Io(s,c=>({...c,items:c.items}))};var Y8=Object.freeze({__proto__:null,get ToolbarMode(){return Ja},get ToolbarLocation(){return h2},register:l5,getSkinUrl:p3,getSkinUrlOption:Yx,isReadOnly:u5,isSkinDisabled:h3,getHeightOption:s3,getWidthOption:p2,getMinWidthOption:r3,getMinHeightOption:gp,getMaxWidthOption:hp,getMaxHeightOption:Ux,getUserStyleFormats:c3,shouldMergeStyleFormats:d5,shouldAutoHideStyleFormats:m5,getLineHeightFormats:T5,getContentLanguages:f5,getRemovedMenuItems:g5,isMenubarEnabled:Kx,isMultipleToolbars:v2,isToolbarEnabled:Xx,isToolbarPersist:l3,getMultipleToolbarsOption:Jx,getUiContainer:v3,useFixedContainer:pl,isSplitUiMode:Lm,getToolbarMode:gg,isDraggableModal:Gx,isDistractionFree:y3,isStickyToolbar:hg,getStickyToolbarOffset:h5,getToolbarLocation:Wx,isToolbarLocationBottom:b3,getToolbarGroups:a3,getMenus:_5,getMenubar:p5,getToolbar:Zx,getFilePickerCallback:u3,getFilePickerTypes:jx,useTypeaheadUrls:d3,getAnchorTop:m3,getAnchorBottom:y5,getFilePickerValidatorHandler:b5,getFontSizeInputDefaultUnit:v5,useStatusBar:C5,useElementPath:w5,promotionEnabled:qx,useBranding:f3,getResize:S5,getPasteAsText:x5,getSidebarShow:g3,useHelpAccessibility:E5,getDefaultFontStack:b2});const k5=["visible","hidden","clip"],O5=t=>Bl(t).length>0&&!$o(k5,t),C3=t=>{if(rf(t)){const s=kr(t,"overflow-x"),c=kr(t,"overflow-y");return O5(s)||O5(c)}else return!1},A5=t=>t.plugins.fullscreen&&t.plugins.fullscreen.isFullscreen(),w3=(t,s)=>{const c=Yf(s,C3),i=c.length===0?Il(s).map(KC).map(d=>Yf(d,C3)).getOr([]):c;return dc(i).map(d=>({element:d,others:i.slice(1),isFullscreen:()=>A5(t)}))},pg=(t,s)=>Lm(t)?w3(t,s):k.none(),bg=t=>{const s=[...De(t.others,Vo),Ns()];return t.isFullscreen()?Ns():fv(Vo(t.element),s)},As=Tc({name:"Button",factory:t=>{const s=g2(t.action),c=t.dom.tag,i=g=>rt(t.dom,"attributes").bind(h=>rt(h,g)),d=()=>{if(c==="button"){const g=i("type").getOr("button"),h=i("role").map(y=>({role:y})).getOr({});return{type:g,...h}}else return{role:t.role.getOr(i("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:ya.augment(t.buttonBehaviours,[Bt.config({}),xt.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:t.eventOrder}},configFields:[le("uid",void 0),Te("dom"),le("components",[]),ya.field("buttonBehaviours",[Bt,xt]),kn("action"),kn("role"),le("eventOrder",{})]}),X8=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return wo(s,(c,i)=>i.name==="class"?c:{...c,[i.name]:i.value},{})},J8=t=>Array.prototype.slice.call(t.dom.classList,0),ou=t=>{const s=ae.fromHtml(t),c=Pa(s),i=X8(s),d=J8(s),g=c.length===0?{}:{innerHtml:Gl(s)};return{tag:Da(s),classes:d,attributes:i,...g}},On=t=>{const s=v4(t)&&sa(t,"uid")?t.uid:_h("memento");return{get:g=>g.getSystem().getByUid(s).getOrDie(),getOpt:g=>g.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}};var S3=Object.freeze({__proto__:null,exhibit:(t,s)=>Ur({attributes:vf([{key:s.tabAttr,value:"true"}])})}),Q8=[le("tabAttr","data-alloy-tabstop")];const ho=Ls({fields:Q8,name:"tabstopping",active:S3}),eE=ut("tooltip.exclusive"),y2=ut("tooltip.show"),C2=ut("tooltip.hide"),w2=ut("tooltip.immediateHide"),S2=ut("tooltip.immediateShow"),R5=(t,s,c)=>{t.getSystem().broadcastOn([eE],{})};var e7=Object.freeze({__proto__:null,hideAllExclusive:R5,immediateOpenClose:(t,s,c,i)=>sn(t,i?S2:w2),isEnabled:(t,s,c)=>c.isEnabled(),setComponents:(t,s,c,i)=>{c.getTooltip().each(d=>{d.getSystem().isConnected()&&Ht.set(d,i)})},setEnabled:(t,s,c,i)=>c.setEnabled(i)}),t7=Object.freeze({__proto__:null,events:(t,s)=>{const c=h=>{s.getTooltip().each(y=>{y.getSystem().isConnected()&&(eu(y),t.onHide(h,y),s.clearTooltip())}),s.clearTimer()},i=h=>{if(!s.isShowing()&&s.isEnabled()){R5(h);const y=t.lazySink(h).getOrDie(),w=h.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:Fn(t.mode==="normal"?[Ee(za(),E=>{sn(h,y2)}),Ee(P1(),E=>{sn(h,C2)})]:[]),behaviours:$e([Ht.config({})])});s.setTooltip(w),Ql(y,w),t.onShow(h,w),cr.position(y,w,{anchor:t.anchor(h)})}},d=h=>{s.getTooltip().each(y=>{const w=t.lazySink(h).getOrDie();cr.position(w,y,{anchor:t.anchor(h)})})},g=()=>{switch(t.mode){case"normal":return[Ee(Ua(),h=>{sn(h,S2)}),Ee(Xd(),h=>{sn(h,w2)}),Ee(za(),h=>{sn(h,y2)}),Ee(P1(),h=>{sn(h,C2)})];case"follow-highlight":return[Ee(Rv(),(h,y)=>{sn(h,y2)}),Ee(wf(),h=>{sn(h,C2)})];case"children-normal":return[Ee(Ua(),(h,y)=>{Dr(h.element).each(w=>{ec(y.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{sn(h,S2)},E=>{s.isShowing()&&(t.onShow(h,E),d(h))})})}),Ee(Xd(),h=>{Dr(h.element).fold(()=>{sn(h,w2)},J)}),Ee(za(),h=>{go(h.element,"[data-mce-tooltip]:hover").each(y=>{s.getTooltip().fold(()=>{sn(h,y2)},w=>{s.isShowing()&&(t.onShow(h,w),d(h))})})}),Ee(P1(),h=>{go(h.element,"[data-mce-tooltip]:hover").fold(()=>{sn(h,C2)},J)})];default:return[Ee(Ua(),(h,y)=>{Dr(h.element).each(w=>{ec(y.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{sn(h,S2)},E=>{s.isShowing()&&(t.onShow(h,E),d(h))})})}),Ee(Xd(),h=>{Dr(h.element).fold(()=>{sn(h,w2)},J)})]}};return Fn(Gt([[Rw(h=>{t.onSetup(h)}),Ee(y2,h=>{s.resetTimer(()=>{i(h)},t.delayForShow())}),Ee(C2,h=>{s.resetTimer(()=>{c(h)},t.delayForHide())}),Ee(S2,h=>{s.resetTimer(()=>{i(h)},0)}),Ee(w2,h=>{s.resetTimer(()=>{c(h)},0)}),Ee(xi(),(h,y)=>{const w=y;w.universal||$o(w.channels,eE)&&c(h)}),rl(h=>{c(h)})],g()]))}}),x3=[Te("lazySink"),Te("tooltipDom"),le("exclusive",!0),le("tooltipComponents",[]),fo("delayForShow",te(300)),fo("delayForHide",te(300)),fo("onSetup",J),Qs("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),le("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:te([is,Nn,ps,or,bs,vs]),onRtl:te([is,Nn,ps,or,bs,vs])},bubble:Ya(0,-2,{})})),bn("onHide"),bn("onShow")],n7=Object.freeze({__proto__:null,init:()=>{const t=St(!0),s=Mn(),c=Mn(),i=()=>{s.on(clearTimeout)},d=(h,y)=>{i(),s.set(setTimeout(h,y))},g=te("not-implemented");return Ar({getTooltip:c.get,isShowing:c.isSet,setTooltip:c.set,clearTooltip:c.clear,clearTimer:i,resetTimer:d,readState:g,isEnabled:()=>t.get(),setEnabled:h=>t.set(h)})}});const Uo=Ls({fields:x3,name:"tooltipping",active:t7,state:n7,apis:e7});/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:E3,setPrototypeOf:D5,isFrozen:o7,getPrototypeOf:s7,getOwnPropertyDescriptor:r7}=Object;let{freeze:Sa,seal:bl,create:tE}=Object,{apply:T3,construct:_3}=typeof Reflect<"u"&&Reflect;Sa||(Sa=function(s){return s}),bl||(bl=function(s){return s}),T3||(T3=function(s,c,i){return s.apply(c,i)}),_3||(_3=function(s,c){return new s(...c)});const nE=Bi(Array.prototype.forEach),M5=Bi(Array.prototype.pop),x2=Bi(Array.prototype.push),oE=Bi(String.prototype.toLowerCase),k3=Bi(String.prototype.toString),P5=Bi(String.prototype.match),E2=Bi(String.prototype.replace),c7=Bi(String.prototype.indexOf),a7=Bi(String.prototype.trim),su=Bi(Object.prototype.hasOwnProperty),xa=Bi(RegExp.prototype.test),vg=O3(TypeError);function Bi(t){return function(s){for(var c=arguments.length,i=new Array(c>1?c-1:0),d=1;d<c;d++)i[d-1]=arguments[d];return T3(t,s,i)}}function O3(t){return function(){for(var s=arguments.length,c=new Array(s),i=0;i<s;i++)c[i]=arguments[i];return _3(t,c)}}function no(t,s){let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:oE;D5&&D5(t,null);let i=s.length;for(;i--;){let d=s[i];if(typeof d=="string"){const g=c(d);g!==d&&(o7(s)||(s[i]=g),d=g)}t[d]=!0}return t}function i7(t){for(let s=0;s<t.length;s++)su(t,s)||(t[s]=null);return t}function pp(t){const s=tE(null);for(const[c,i]of E3(t))su(t,c)&&(Array.isArray(i)?s[c]=i7(i):i&&typeof i=="object"&&i.constructor===Object?s[c]=pp(i):s[c]=i);return s}function i0(t,s){for(;t!==null;){const i=r7(t,s);if(i){if(i.get)return Bi(i.get);if(typeof i.value=="function")return Bi(i.value)}t=s7(t)}function c(){return null}return c}const N5=Sa(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),T2=Sa(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),_2=Sa(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),B5=Sa(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),k2=Sa(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),sE=Sa(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),A3=Sa(["#text"]),ru=Sa(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),O2=Sa(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),$5=Sa(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),rE=Sa(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),l7=bl(/\{\{[\w\W]*|[\w\W]*\}\}/gm),u7=bl(/<%[\w\W]*|[\w\W]*%>/gm),A2=bl(/\${[\w\W]*}/gm),d7=bl(/^data-[\-\w.\u00B7-\uFFFF]/),F5=bl(/^aria-[\-\w]+$/),cE=bl(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),m7=bl(/^(?:\w+script|data):/i),R3=bl(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),aE=bl(/^html$/i),f7=bl(/^[a-z][.\w]*(-[.\w]+)+$/i);var D3=Object.freeze({__proto__:null,MUSTACHE_EXPR:l7,ERB_EXPR:u7,TMPLIT_EXPR:A2,DATA_ATTR:d7,ARIA_ATTR:F5,IS_ALLOWED_URI:cE,IS_SCRIPT_OR_DATA:m7,ATTR_WHITESPACE:R3,DOCTYPE_NAME:aE,CUSTOM_ELEMENT:f7});const l0={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},g7=function(){return typeof window>"u"?null:window},I5=function(s,c){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let i=null;const d="data-tt-policy-suffix";c&&c.hasAttribute(d)&&(i=c.getAttribute(d));const g="dompurify"+(i?"#"+i:"");try{return s.createPolicy(g,{createHTML(h){return h},createScriptURL(h){return h}})}catch{return console.warn("TrustedTypes policy "+g+" could not be created."),null}};function M3(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g7();const s=vn=>M3(vn);if(s.version="3.1.7",s.removed=[],!t||!t.document||t.document.nodeType!==l0.document)return s.isSupported=!1,s;let{document:c}=t;const i=c,d=i.currentScript,{DocumentFragment:g,HTMLTemplateElement:h,Node:y,Element:w,NodeFilter:E,NamedNodeMap:T=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:A,DOMParser:P,trustedTypes:$}=t,V=w.prototype,W=i0(V,"cloneNode"),se=i0(V,"remove"),G=i0(V,"nextSibling"),ee=i0(V,"childNodes"),oe=i0(V,"parentNode");if(typeof h=="function"){const vn=c.createElement("template");vn.content&&vn.content.ownerDocument&&(c=vn.content.ownerDocument)}let be,ye="";const{implementation:We,createNodeIterator:at,createDocumentFragment:xe,getElementsByTagName:lt}=c,{importNode:Je}=i;let mt={};s.isSupported=typeof E3=="function"&&typeof oe=="function"&&We&&We.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:ln,ERB_EXPR:ro,TMPLIT_EXPR:_n,DATA_ATTR:gt,ARIA_ATTR:Me,IS_SCRIPT_OR_DATA:Ye,ATTR_WHITESPACE:It,CUSTOM_ELEMENT:Qt}=D3;let{IS_ALLOWED_URI:wt}=D3,Ut=null;const jn=no({},[...N5,...T2,..._2,...k2,...A3]);let Hn=null;const ea=no({},[...ru,...O2,...$5,...rE]);let Oo=Object.seal(tE(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ai=null,Fr=null,ii=!0,li=!0,Rl=!1,zC=!0,Ed=!1,RD=!0,Yp=!1,DD=!1,tG=!1,k_=!1,A6=!1,R6=!1,wq=!0,Sq=!1;const AK="user-content-";let nG=!0,MD=!1,O_={},A_=null;const xq=no({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Eq=null;const Tq=no({},["audio","video","img","source","image","track"]);let oG=null;const _q=no({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),D6="http://www.w3.org/1998/Math/MathML",M6="http://www.w3.org/2000/svg",Xp="http://www.w3.org/1999/xhtml";let R_=Xp,sG=!1,rG=null;const RK=no({},[D6,M6,Xp],k3);let PD=null;const DK=["application/xhtml+xml","text/html"],MK="text/html";let ta=null,D_=null;const PK=c.createElement("form"),kq=function(ve){return ve instanceof RegExp||ve instanceof Function},cG=function(){let ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(D_&&D_===ve)){if((!ve||typeof ve!="object")&&(ve={}),ve=pp(ve),PD=DK.indexOf(ve.PARSER_MEDIA_TYPE)===-1?MK:ve.PARSER_MEDIA_TYPE,ta=PD==="application/xhtml+xml"?k3:oE,Ut=su(ve,"ALLOWED_TAGS")?no({},ve.ALLOWED_TAGS,ta):jn,Hn=su(ve,"ALLOWED_ATTR")?no({},ve.ALLOWED_ATTR,ta):ea,rG=su(ve,"ALLOWED_NAMESPACES")?no({},ve.ALLOWED_NAMESPACES,k3):RK,oG=su(ve,"ADD_URI_SAFE_ATTR")?no(pp(_q),ve.ADD_URI_SAFE_ATTR,ta):_q,Eq=su(ve,"ADD_DATA_URI_TAGS")?no(pp(Tq),ve.ADD_DATA_URI_TAGS,ta):Tq,A_=su(ve,"FORBID_CONTENTS")?no({},ve.FORBID_CONTENTS,ta):xq,ai=su(ve,"FORBID_TAGS")?no({},ve.FORBID_TAGS,ta):{},Fr=su(ve,"FORBID_ATTR")?no({},ve.FORBID_ATTR,ta):{},O_=su(ve,"USE_PROFILES")?ve.USE_PROFILES:!1,ii=ve.ALLOW_ARIA_ATTR!==!1,li=ve.ALLOW_DATA_ATTR!==!1,Rl=ve.ALLOW_UNKNOWN_PROTOCOLS||!1,zC=ve.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ed=ve.SAFE_FOR_TEMPLATES||!1,RD=ve.SAFE_FOR_XML!==!1,Yp=ve.WHOLE_DOCUMENT||!1,k_=ve.RETURN_DOM||!1,A6=ve.RETURN_DOM_FRAGMENT||!1,R6=ve.RETURN_TRUSTED_TYPE||!1,tG=ve.FORCE_BODY||!1,wq=ve.SANITIZE_DOM!==!1,Sq=ve.SANITIZE_NAMED_PROPS||!1,nG=ve.KEEP_CONTENT!==!1,MD=ve.IN_PLACE||!1,wt=ve.ALLOWED_URI_REGEXP||cE,R_=ve.NAMESPACE||Xp,Oo=ve.CUSTOM_ELEMENT_HANDLING||{},ve.CUSTOM_ELEMENT_HANDLING&&kq(ve.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Oo.tagNameCheck=ve.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ve.CUSTOM_ELEMENT_HANDLING&&kq(ve.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Oo.attributeNameCheck=ve.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ve.CUSTOM_ELEMENT_HANDLING&&typeof ve.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Oo.allowCustomizedBuiltInElements=ve.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ed&&(li=!1),A6&&(k_=!0),O_&&(Ut=no({},A3),Hn=[],O_.html===!0&&(no(Ut,N5),no(Hn,ru)),O_.svg===!0&&(no(Ut,T2),no(Hn,O2),no(Hn,rE)),O_.svgFilters===!0&&(no(Ut,_2),no(Hn,O2),no(Hn,rE)),O_.mathMl===!0&&(no(Ut,k2),no(Hn,$5),no(Hn,rE))),ve.ADD_TAGS&&(Ut===jn&&(Ut=pp(Ut)),no(Ut,ve.ADD_TAGS,ta)),ve.ADD_ATTR&&(Hn===ea&&(Hn=pp(Hn)),no(Hn,ve.ADD_ATTR,ta)),ve.ADD_URI_SAFE_ATTR&&no(oG,ve.ADD_URI_SAFE_ATTR,ta),ve.FORBID_CONTENTS&&(A_===xq&&(A_=pp(A_)),no(A_,ve.FORBID_CONTENTS,ta)),nG&&(Ut["#text"]=!0),Yp&&no(Ut,["html","head","body"]),Ut.table&&(no(Ut,["tbody"]),delete ai.tbody),ve.TRUSTED_TYPES_POLICY){if(typeof ve.TRUSTED_TYPES_POLICY.createHTML!="function")throw vg('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ve.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw vg('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');be=ve.TRUSTED_TYPES_POLICY,ye=be.createHTML("")}else be===void 0&&(be=I5($,d)),be!==null&&typeof ye=="string"&&(ye=be.createHTML(""));Sa&&Sa(ve),D_=ve}},Oq=no({},["mi","mo","mn","ms","mtext"]),Aq=no({},["annotation-xml"]),NK=no({},["title","style","font","a","script"]),Rq=no({},[...T2,..._2,...B5]),Dq=no({},[...k2,...sE]),BK=function(ve){let Tt=oe(ve);(!Tt||!Tt.tagName)&&(Tt={namespaceURI:R_,tagName:"template"});const un=oE(ve.tagName),qs=oE(Tt.tagName);return rG[ve.namespaceURI]?ve.namespaceURI===M6?Tt.namespaceURI===Xp?un==="svg":Tt.namespaceURI===D6?un==="svg"&&(qs==="annotation-xml"||Oq[qs]):!!Rq[un]:ve.namespaceURI===D6?Tt.namespaceURI===Xp?un==="math":Tt.namespaceURI===M6?un==="math"&&Aq[qs]:!!Dq[un]:ve.namespaceURI===Xp?Tt.namespaceURI===M6&&!Aq[qs]||Tt.namespaceURI===D6&&!Oq[qs]?!1:!Dq[un]&&(NK[un]||!Rq[un]):!!(PD==="application/xhtml+xml"&&rG[ve.namespaceURI]):!1},Vg=function(ve){x2(s.removed,{element:ve});try{oe(ve).removeChild(ve)}catch{se(ve)}},ND=function(ve,Tt){try{x2(s.removed,{attribute:Tt.getAttributeNode(ve),from:Tt})}catch{x2(s.removed,{attribute:null,from:Tt})}if(Tt.removeAttribute(ve),ve==="is"&&!Hn[ve])if(k_||A6)try{Vg(Tt)}catch{}else try{Tt.setAttribute(ve,"")}catch{}},Mq=function(ve){let Tt=null,un=null;if(tG)ve="<remove></remove>"+ve;else{const na=P5(ve,/^[\r\n\t ]+/);un=na&&na[0]}PD==="application/xhtml+xml"&&R_===Xp&&(ve='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ve+"</body></html>");const qs=be?be.createHTML(ve):ve;if(R_===Xp)try{Tt=new P().parseFromString(qs,PD)}catch{}if(!Tt||!Tt.documentElement){Tt=We.createDocument(R_,"template",null);try{Tt.documentElement.innerHTML=sG?ye:qs}catch{}}const ui=Tt.body||Tt.documentElement;return ve&&un&&ui.insertBefore(c.createTextNode(un),ui.childNodes[0]||null),R_===Xp?lt.call(Tt,Yp?"html":"body")[0]:Yp?Tt.documentElement:ui},Pq=function(ve){return at.call(ve.ownerDocument||ve,ve,E.SHOW_ELEMENT|E.SHOW_COMMENT|E.SHOW_TEXT|E.SHOW_PROCESSING_INSTRUCTION|E.SHOW_CDATA_SECTION,null)},Nq=function(ve){return ve instanceof A&&(typeof ve.nodeName!="string"||typeof ve.textContent!="string"||typeof ve.removeChild!="function"||!(ve.attributes instanceof T)||typeof ve.removeAttribute!="function"||typeof ve.setAttribute!="function"||typeof ve.namespaceURI!="string"||typeof ve.insertBefore!="function"||typeof ve.hasChildNodes!="function")},Bq=function(ve){return typeof y=="function"&&ve instanceof y},Jp=function(ve,Tt,un){mt[ve]&&nE(mt[ve],qs=>{qs.call(s,Tt,un,D_)})},$q=function(ve){let Tt=null;if(Jp("beforeSanitizeElements",ve,null),Nq(ve))return Vg(ve),!0;const un=ta(ve.nodeName);if(Jp("uponSanitizeElement",ve,{tagName:un,allowedTags:Ut}),ve.hasChildNodes()&&!Bq(ve.firstElementChild)&&xa(/<[/\w]/g,ve.innerHTML)&&xa(/<[/\w]/g,ve.textContent)||ve.nodeType===l0.progressingInstruction||RD&&ve.nodeType===l0.comment&&xa(/<[/\w]/g,ve.data))return Vg(ve),!0;if(!Ut[un]||ai[un]){if(!ai[un]&&Iq(un)&&(Oo.tagNameCheck instanceof RegExp&&xa(Oo.tagNameCheck,un)||Oo.tagNameCheck instanceof Function&&Oo.tagNameCheck(un)))return!1;if(nG&&!A_[un]){const qs=oe(ve)||ve.parentNode,ui=ee(ve)||ve.childNodes;if(ui&&qs){const na=ui.length;for(let Dl=na-1;Dl>=0;--Dl){const zg=W(ui[Dl],!0);zg.__removalCount=(ve.__removalCount||0)+1,qs.insertBefore(zg,G(ve))}}}return Vg(ve),!0}return ve instanceof w&&!BK(ve)||(un==="noscript"||un==="noembed"||un==="noframes")&&xa(/<\/no(script|embed|frames)/i,ve.innerHTML)?(Vg(ve),!0):(Ed&&ve.nodeType===l0.text&&(Tt=ve.textContent,nE([ln,ro,_n],qs=>{Tt=E2(Tt,qs," ")}),ve.textContent!==Tt&&(x2(s.removed,{element:ve.cloneNode()}),ve.textContent=Tt)),Jp("afterSanitizeElements",ve,null),!1)},Fq=function(ve,Tt,un){if(wq&&(Tt==="id"||Tt==="name")&&(un in c||un in PK))return!1;if(!(li&&!Fr[Tt]&&xa(gt,Tt))){if(!(ii&&xa(Me,Tt))){if(!Hn[Tt]||Fr[Tt]){if(!(Iq(ve)&&(Oo.tagNameCheck instanceof RegExp&&xa(Oo.tagNameCheck,ve)||Oo.tagNameCheck instanceof Function&&Oo.tagNameCheck(ve))&&(Oo.attributeNameCheck instanceof RegExp&&xa(Oo.attributeNameCheck,Tt)||Oo.attributeNameCheck instanceof Function&&Oo.attributeNameCheck(Tt))||Tt==="is"&&Oo.allowCustomizedBuiltInElements&&(Oo.tagNameCheck instanceof RegExp&&xa(Oo.tagNameCheck,un)||Oo.tagNameCheck instanceof Function&&Oo.tagNameCheck(un))))return!1}else if(!oG[Tt]){if(!xa(wt,E2(un,It,""))){if(!((Tt==="src"||Tt==="xlink:href"||Tt==="href")&&ve!=="script"&&c7(un,"data:")===0&&Eq[ve])){if(!(Rl&&!xa(Ye,E2(un,It,"")))){if(un)return!1}}}}}}return!0},Iq=function(ve){return ve!=="annotation-xml"&&P5(ve,Qt)},Lq=function(ve){Jp("beforeSanitizeAttributes",ve,null);const{attributes:Tt}=ve;if(!Tt)return;const un={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Hn};let qs=Tt.length;for(;qs--;){const ui=Tt[qs],{name:na,namespaceURI:Dl,value:zg}=ui,BD=ta(na);let Aa=na==="value"?zg:a7(zg);const FK=Aa;if(un.attrName=BD,un.attrValue=Aa,un.keepAttr=!0,un.forceKeepAttr=void 0,Jp("uponSanitizeAttribute",ve,un),Aa=un.attrValue,un.forceKeepAttr)continue;if(!un.keepAttr){ND(na,ve);continue}if(!zC&&xa(/\/>/i,Aa)){ND(na,ve);continue}Ed&&nE([ln,ro,_n],Vq=>{Aa=E2(Aa,Vq," ")});const Hq=ta(ve.nodeName);if(!Fq(Hq,BD,Aa)){ND(na,ve);continue}if(Sq&&(BD==="id"||BD==="name")&&(ND(na,ve),Aa=AK+Aa),RD&&xa(/((--!?|])>)|<\/(style|title)/i,Aa)){ND(na,ve);continue}if(be&&typeof $=="object"&&typeof $.getAttributeType=="function"&&!Dl)switch($.getAttributeType(Hq,BD)){case"TrustedHTML":{Aa=be.createHTML(Aa);break}case"TrustedScriptURL":{Aa=be.createScriptURL(Aa);break}}if(Aa!==FK)try{Dl?ve.setAttributeNS(Dl,na,Aa):ve.setAttribute(na,Aa),Nq(ve)?Vg(ve):M5(s.removed)}catch{}}Jp("afterSanitizeAttributes",ve,null)},$K=function vn(ve){let Tt=null;const un=Pq(ve);for(Jp("beforeSanitizeShadowDOM",ve,null);Tt=un.nextNode();)Jp("uponSanitizeShadowNode",Tt,null),!$q(Tt)&&(Tt.content instanceof g&&vn(Tt.content),Lq(Tt));Jp("afterSanitizeShadowDOM",ve,null)};return s.sanitize=function(vn){let ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Tt=null,un=null,qs=null,ui=null;if(sG=!vn,sG&&(vn="<!-->"),typeof vn!="string"&&!Bq(vn))if(typeof vn.toString=="function"){if(vn=vn.toString(),typeof vn!="string")throw vg("dirty is not a string, aborting")}else throw vg("toString is not a function");if(!s.isSupported)return vn;if(DD||cG(ve),s.removed=[],typeof vn=="string"&&(MD=!1),MD){if(vn.nodeName){const zg=ta(vn.nodeName);if(!Ut[zg]||ai[zg])throw vg("root node is forbidden and cannot be sanitized in-place")}}else if(vn instanceof y)Tt=Mq("<!---->"),un=Tt.ownerDocument.importNode(vn,!0),un.nodeType===l0.element&&un.nodeName==="BODY"||un.nodeName==="HTML"?Tt=un:Tt.appendChild(un);else{if(!k_&&!Ed&&!Yp&&vn.indexOf("<")===-1)return be&&R6?be.createHTML(vn):vn;if(Tt=Mq(vn),!Tt)return k_?null:R6?ye:""}Tt&&tG&&Vg(Tt.firstChild);const na=Pq(MD?vn:Tt);for(;qs=na.nextNode();)$q(qs)||(qs.content instanceof g&&$K(qs.content),Lq(qs));if(MD)return vn;if(k_){if(A6)for(ui=xe.call(Tt.ownerDocument);Tt.firstChild;)ui.appendChild(Tt.firstChild);else ui=Tt;return(Hn.shadowroot||Hn.shadowrootmode)&&(ui=Je.call(i,ui,!0)),ui}let Dl=Yp?Tt.outerHTML:Tt.innerHTML;return Yp&&Ut["!doctype"]&&Tt.ownerDocument&&Tt.ownerDocument.doctype&&Tt.ownerDocument.doctype.name&&xa(aE,Tt.ownerDocument.doctype.name)&&(Dl="<!DOCTYPE "+Tt.ownerDocument.doctype.name+`>
`+Dl),Ed&&nE([ln,ro,_n],zg=>{Dl=E2(Dl,zg," ")}),be&&R6?be.createHTML(Dl):Dl},s.setConfig=function(){let vn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};cG(vn),DD=!0},s.clearConfig=function(){D_=null,DD=!1},s.isValidAttribute=function(vn,ve,Tt){D_||cG({});const un=ta(vn),qs=ta(ve);return Fq(un,qs,Tt)},s.addHook=function(vn,ve){typeof ve=="function"&&(mt[vn]=mt[vn]||[],x2(mt[vn],ve))},s.removeHook=function(vn){if(mt[vn])return M5(mt[vn])},s.removeHooks=function(vn){mt[vn]&&(mt[vn]=[])},s.removeAllHooks=function(){mt={}},s}var h7=M3();const L5=t=>h7().sanitize(t);var $i=tinymce.util.Tools.resolve("tinymce.util.I18n");const p7={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},H5="temporary-placeholder",iE=t=>()=>rt(t,H5).getOr("!not found!"),lE=(t,s)=>{const c=t.toLowerCase();if($i.isRtl()){const i=Qr(c,"-rtl");return $n(s,i)?i:c}else return c},V5=(t,s)=>rt(s,lE(t,s)),P3=(t,s)=>{const c=s();return V5(t,c).getOrThunk(iE(c))},R2=(t,s,c)=>{const i=s();return V5(t,i).or(c).getOrThunk(iE(i))},z5=t=>$i.isRtl()?$n(p7,t):!1,U5=()=>Zt("add-focusable",[lo(t=>{ha(t.element,"svg").each(s=>Dt(s,"focusable","false"))})]),W5=(t,s,c,i)=>{var d,g;const h=z5(s)?["tox-icon--flip"]:[],y=rt(c,lE(s,c)).or(i).getOrThunk(iE(c));return{dom:{tag:t.tag,attributes:(d=t.attributes)!==null&&d!==void 0?d:{},classes:t.classes.concat(h),innerHtml:y},behaviours:$e([...(g=t.behaviours)!==null&&g!==void 0?g:[],U5()])}},Qa=(t,s,c,i=k.none())=>W5(s,t,c(),i),b7=(t,s,c)=>{const i=c(),d=zt(t,g=>$n(i,lE(g,i)));return W5(s,d.getOr(H5),i,k.none())},v7={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},uE=Tc({name:"Notification",factory:t=>{const s=ut("notification-text"),c=On({dom:ou(`<p id=${s}>${L5(t.backstageProvider.translate(t.text))}</p>`),behaviours:$e([Ht.config({})])}),i=V=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${V}%`}}}),d=V=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${V}%`}}),g=On({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(0)]},d(0)],behaviours:$e([Ht.config({})])}),w={updateProgress:(V,W)=>{V.getSystem().isConnected()&&g.getOpt(V).each(se=>{Ht.set(se,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(W)]},d(W)])})},updateText:(V,W)=>{if(V.getSystem().isConnected()){const se=c.get(V);Ht.set(se,[xo(W)])}}},E=Gt([t.icon.toArray(),t.level.toArray(),t.level.bind(V=>k.from(v7[V])).toArray()]),T=On(As.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":t.backstageProvider.translate("Close")}},components:[Qa("close",{tag:"span",classes:["tox-icon"]},t.iconProvider)],buttonBehaviours:$e([ho.config({}),Uo.config({...t.backstageProvider.tooltips.getConfig({tooltipText:t.backstageProvider.translate("Close")})})]),action:V=>{t.onAction(V)}})),A=b7(E,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),P={dom:{tag:"div",classes:["tox-notification__body"]},components:[c.asSpec()],behaviours:$e([Ht.config({})])},$=[A,P];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":s},classes:t.level.map(V=>["tox-notification","tox-notification--in",`tox-notification--${V}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:$e([ho.config({}),Bt.config({}),xt.config({mode:"special",onEscape:V=>(t.onAction(V),k.some(!0))})]),components:$.concat(t.progress?[g.asSpec()]:[]).concat([T.asSpec()]),apis:w}},configFields:[kn("level"),Te("progress"),kn("icon"),Te("onAction"),Te("text"),Te("iconProvider"),Te("backstageProvider")],apis:{updateProgress:(t,s,c)=>{t.updateProgress(s,c)},updateText:(t,s,c)=>{t.updateText(s,c)}}});var Z5=(t,s,c,i)=>{const d=s.backstage.shared,g=()=>ae.fromDom(t.queryCommandValue("ToggleView")===""?t.getContentAreaContainer():t.getContainer()),h=()=>{const A=Vo(g());return k.some(A)},y=A=>{h().each(P=>{it(A,$=>{Kt($.element,"width"),tc($.element)>P.width&&Vt($.element,"width",P.width+"px")})})};return{open:(A,P,$)=>{const V=()=>{const ee=We=>{Ht.remove(We,W),se()},oe=(We,at)=>{Pa(We.element).length===0?be(We,at):ye(We,at)},be=(We,at)=>{ko.hide(We),i.clear(),at&&t.focus()},ye=(We,at)=>{at&&xt.focusIn(We)};i.on(We=>{P();const at=$();ee(We),oe(We,at)})},W=Os(uE.sketch({text:A.text,level:$o(["success","error","warning","warn","info"],A.type)?A.type:void 0,progress:A.progressBar===!0,icon:A.icon,onAction:V,iconProvider:d.providers.icons,backstageProvider:d.providers}));if(i.isSet()){const ee=zc(W);i.on(oe=>{Ht.append(oe,ee),ko.reposition(oe),eo.refresh(oe),y(oe.components())})}else{const ee=Os(ko.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:d.getSink,fireDismissalEventInstead:{},...d.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:$e([xt.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),Ht.config({}),...hg(t)&&!d.header.isPositionedAtTop()?[]:[eo.config({contextual:{lazyContext:()=>k.some(Vo(g())),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:We=>pg(t,We.element).map(xe=>({bounds:bg(xe),optScrollEnv:k.some({currentScrollTop:xe.element.dom.scrollTop,scrollElmTop:Ho(xe.element).top})})).getOrThunk(()=>({bounds:Ns(),optScrollEnv:k.none()}))})]])})),oe=zc(W),be={maxHeightFunction:td()},ye={...d.anchors.banner(),overrides:be};i.set(ee),c.add(ee),ko.showWithinBounds(ee,oe,{anchor:ye},h)}uo(A.timeout)&&A.timeout>0&&mp.setEditorTimeout(t,()=>{V()},A.timeout);const se=()=>{i.on(ee=>{ko.reposition(ee),eo.refresh(ee),y(ee.components())})};return{close:V,reposition:se,text:ee=>{uE.updateText(W,ee)},settings:A,getEl:()=>W.element.dom,progressBar:{value:ee=>{uE.updateProgress(W,ee)}}}},close:A=>{A.close()},getArgs:A=>A.settings}};const w7={setup:(t,s)=>{const c=(d,g)=>{ht(d,da(),{raw:g})},i=()=>t.getMenu().bind(Ze.getHighlighted);s.on("keydown",d=>{const g=d.which;t.isActive()&&(t.isMenuOpen()?g===13?(i().each(Vu),d.preventDefault()):g===40?(i().fold(()=>{t.getMenu().each(Ze.highlightFirst)},h=>{c(h,d)}),d.preventDefault(),d.stopImmediatePropagation()):(g===37||g===38||g===39)&&i().each(h=>{c(h,d),d.preventDefault(),d.stopImmediatePropagation()}):(g===13||g===38||g===40)&&t.cancelIfNecessary())}),s.on("NodeChange",()=>{t.isActive()&&!t.isProcessingAction()&&!s.queryCommandState("mceAutoCompleterInRange")&&t.cancelIfNecessary()})}};var N3;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(N3||(N3={}));var vl=N3;const D2="tox-menu-nav__js",u0="tox-collection__item",dE="tox-swatch",j5={normal:D2,color:dE},B3="tox-collection__item--enabled",S7="tox-collection__group-heading",mE="tox-collection__item-icon",$3="tox-collection__item-label",G5="tox-collection__item-accessory",F3="tox-collection__item-caret",bp="tox-collection__item-checkmark",vp="tox-collection__item--active",fE="tox-collection__item-container",gE="tox-collection__item-container--column",q5="tox-collection__item-container--row",K5="tox-collection__item-container--align-right",Y5="tox-collection__item-container--align-left",X5="tox-collection__item-container--valign-top",I3="tox-collection__item-container--valign-middle",J5="tox-collection__item-container--valign-bottom",Q5=t=>rt(j5,t).getOr(D2),eP=t=>t==="color"?"tox-swatches":"tox-menu",hE=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:eP(t),tieredMenu:"tox-tiered-menu"}),yg=t=>{const s=hE(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:Q5(t)}},tP=(t,s,c)=>{const i=hE(c);return{tag:"div",classes:Gt([[i.menu,`tox-menu-${s}-column`],t?[i.hasIcons]:[]])}},x7=[lp.parts.items({})],M2=(t,s,c)=>{const i=hE(c);return{dom:{tag:"div",classes:Gt([[i.tieredMenu]])},markers:yg(c)}},nP=te([kn("data"),le("inputAttributes",{}),le("inputStyles",{}),le("tag","input"),le("inputClasses",[]),bn("onSetValue"),le("styles",{}),le("eventOrder",{}),Vs("inputBehaviours",[nt,Bt]),le("selectOnFocus",!0)]),oP=t=>$e([Bt.config({onFocus:t.selectOnFocus?s=>{const c=s.element,i=Ka(c);c.dom.setSelectionRange(0,i.length)}:J})]),E7=t=>({...oP(t),...zs(t.inputBehaviours,[nt.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>Ka(s.element),setValue:(s,c)=>{Ka(s.element)!==c&&hm(s.element,c)}},onSetValue:t.onSetValue})])}),sP=t=>({tag:t.tag,attributes:{type:"text",...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),rP=(t,s)=>({uid:t.uid,dom:sP(t),components:[],behaviours:E7(t),eventOrder:t.eventOrder}),cu=Tc({name:"Input",configFields:nP(),factory:rP}),L3=ut("refetch-trigger-event"),cP=ut("redirect-menu-item-interaction"),aP="tox-menu__searcher",pE=t=>go(t.element,`.${aP}`).bind(s=>t.getSystem().getByDom(s).toOptional()),iP=pE,T7=(t,s)=>{nt.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},P2=t=>{const s=nt.getValue(t),c=t.element.dom.selectionStart,i=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:c,selectionEnd:i}},_7=(t,s)=>{Lo(s.element,"id").each(c=>Dt(t.element,"aria-activedescendant",c))},lP=t=>{const s=(d,g)=>(g.cut(),k.none()),c=(d,g)=>{const h={interactionEvent:g.event,eventType:g.event.raw.type};return ht(d,cP,h),k.some(!0)},i="searcher-events";return{dom:{tag:"div",classes:[u0]},components:[cu.sketch({inputClasses:[aP,"tox-textfield"],inputAttributes:{...t.placeholder.map(d=>({placeholder:t.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:$e([Zt(i,[Ee(wi(),d=>{sn(d,L3)}),Ee(da(),(d,g)=>{g.event.raw.key==="Escape"&&g.stop()})]),xt.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:c,onEscape:c,onUp:c,onDown:c})]),eventOrder:{keydown:[i,xt.name()]}})]}},bE="tox-collection--results__js",H3=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:ut("aria-item-search-result-id"),"aria-selected":"false"}}}:t},vE=(t,s)=>c=>{const i=Jr(c,s);return De(i,d=>({dom:t,components:d}))},k7=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[lp.parts.items({preprocess:t!=="auto"?vE({tag:"div",classes:["tox-swatches__row"]},t):an})]}]}),uP=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[lp.parts.items({preprocess:vE({tag:"div",classes:["tox-collection__group"]},t)})]}),V3=(t,s)=>{const c=[];let i=[];return it(t,(d,g)=>{s(d,g)?(i.length>0&&c.push(i),i=[],($n(d.dom,"innerHtml")||d.components&&d.components.length>0)&&i.push(d)):i.push(d)}),i.length>0&&c.push(i),De(c,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},yE=(t,s,c)=>lp.parts.items({preprocess:i=>{const d=De(i,c);return t!=="auto"&&t>1?vE({tag:"div",classes:["tox-collection__group"]},t)(d):V3(d,(g,h)=>s[h].type==="separator")}}),z3=(t,s,c=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[yE(t,s,an)]}),O7=(t,s,c=!0)=>{const i=ut("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",bE].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:i}},components:[yE(t,s,H3)]}},A7=(t,s,c)=>{const i=ut("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[lP({i18n:$i.translate,placeholder:c.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],bE],attributes:{id:i}},components:[yE(t,s,H3)]}]}},R7=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[lp.parts.items({preprocess:c=>V3(c,(i,d)=>t[d].type==="separator")})]}),CE=t=>uc(t,s=>"icon"in s&&s.icon!==void 0),pd=t=>(console.error(Zd(t)),console.log(t),k.none()),dP=(t,s,c,i,d)=>{const g=R7(c);return{value:t,dom:g.dom,components:g.components,items:c}},U3=(t,s,c,i,d)=>{const g=()=>d.menuType!=="searchable"?z3(i,c):d.searchMode.searchMode==="search-with-field"?A7(i,c,d.searchMode):O7(i,c);if(d.menuType==="color"){const h=k7(i);return{value:t,dom:h.dom,components:h.components,items:c}}else if(d.menuType==="normal"&&i==="auto"){const h=z3(i,c);return{value:t,dom:h.dom,components:h.components,items:c}}else if(d.menuType==="normal"||d.menuType==="searchable"){const h=g();return{value:t,dom:h.dom,components:h.components,items:c}}else if(d.menuType==="listpreview"&&i!=="auto"){const h=uP(i);return{value:t,dom:h.dom,components:h.components,items:c}}else return{value:t,dom:tP(s,i,d.menuType),components:x7,items:c}},us=Ts("type"),W3=Ts("name"),Z3=Ts("label"),Hm=Ts("text"),mP=Ts("title"),fP=Ts("icon"),yp=Ts("value"),gP=Va("fetch"),D7=Va("getSubmenuItems"),d0=Va("onAction"),hP=Va("onItemAction"),Cp=fo("onSetup",()=>J),M7=_s("name"),Vm=_s("text"),pP=_s("role"),ei=_s("icon"),N2=_s("tooltip"),j3=_s("label"),G3=_s("shortcut"),bP=ol("select"),m0=er("active",!1),P7=er("borderless",!1),yl=er("enabled",!0),wE=er("primary",!1),vP=t=>le("columns",t),q3=le("meta",{}),K3=fo("onAction",J),Cg=t=>ts("type",t),SE=t=>$s("name","name",pv(()=>ut(`${t}-name`)),tt),N7=t=>$s("value","value",pv(()=>ut(`${t}-value`)),Ia()),yP=kt([us,Vm]),B7=t=>_o("separatormenuitem",yP,t),Ea=kt([Cg("autocompleteitem"),m0,yl,q3,yp,Vm,ei]),Cl=t=>_o("Autocompleter.Separator",yP,t),CP=t=>_o("Autocompleter.Item",Ea,t),wp=[yl,N2,ei,Vm,Cp,ts("context","mode:design")],Y3=kt([us,d0,G3].concat(wp)),B2=t=>_o("toolbarbutton",Y3,t),xE=[m0].concat(wp),$2=kt(xE.concat([us,d0,G3])),F2=t=>_o("ToggleButton",$2,t),EE=[fo("predicate",Vn),Qs("scope","node",["node","editor"]),Qs("position","selection",["node","selection","line"])],wP=wp.concat([Cg("contextformbutton"),wE,d0,Rn("original",an)]),I2=xE.concat([Cg("contextformbutton"),wE,d0,Rn("original",an)]),$7=wp.concat([Cg("contextformbutton")]),F7=xE.concat([Cg("contextformtogglebutton")]),au=Ko("type",{contextformbutton:wP,contextformtogglebutton:I2}),Ta=kt([Cg("contextform"),fo("initValue",te("")),j3,Ic("commands",au),nl("launch",Ko("type",{contextformbutton:$7,contextformtogglebutton:F7}))].concat(EE)),L2=t=>_o("ContextForm",Ta,t),Fi=kt([Cg("contexttoolbar"),Ts("items")].concat(EE)),I7=t=>_o("ContextToolbar",Fi,t),oo=[us,Ts("src"),_s("alt"),Bu("classes",[],tt)],L7=kt(oo),Sp=[us,Hm,M7,Bu("classes",["tox-collection__item-label"],tt)],H2=kt(Sp),X3=Es(()=>Wd("type",{cardimage:L7,cardtext:H2,cardcontainer:J3})),J3=kt([us,ts("direction","horizontal"),ts("align","left"),ts("valign","middle"),Ic("items",X3)]),wg=[yl,Vm,pP,G3,N7("menuitem"),q3,ts("context","mode:design")],H7=kt([us,j3,Ic("items",X3),Cp,K3].concat(wg)),Q3=t=>_o("cardmenuitem",H7,t),V7=kt([us,m0,ei].concat(wg)),SP=t=>_o("choicemenuitem",V7,t),eO=[us,Ts("fancytype"),K3],tO=[le("initData",{})].concat(eO),xP=[ol("select"),vw("initData",{},[er("allowCustomColors",!0),ts("storageKey","default"),lh("colors",Ia())])].concat(eO),TE=Ko("fancytype",{inserttable:tO,colorswatch:xP}),z7=t=>_o("fancymenuitem",TE,t),U7=kt([us,Cp,K3,ei].concat(wg)),W7=t=>_o("menuitem",U7,t),Z7=kt([us,D7,Cp,ei].concat(wg)),j7=t=>_o("nestedmenuitem",Z7,t),EP=kt([us,ei,m0,Cp,d0].concat(wg)),G7=t=>_o("togglemenuitem",EP,t),nO=(t,s,c)=>{const i=sr(t.element,"."+c);if(i.length>0){const d=mo(i,g=>{const h=g.dom.getBoundingClientRect().top,y=i[0].dom.getBoundingClientRect().top;return Math.abs(h-y)>s}).getOr(i.length);return k.some({numColumns:d,numRows:Math.ceil(i.length/d)})}else return k.none()},oO=(t,s)=>$e([Zt(t,s)]),f0={namedEvents:oO,unnamedEvents:t=>oO(ut("unnamed-events"),t)},V2=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),ti={item:t=>Mt.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>Mt.config({disabled:t}),splitButton:t=>Mt.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>Mt.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},_E=(t,s)=>{const c=t.getApi(s);return i=>{i(c)}},Sg=(t,s)=>lo(c=>{_E(t,c)(d=>{const g=t.onSetup(d);He(g)&&s.set(g)})}),xg=(t,s)=>rl(c=>_E(t,c)(s.get())),_P="silver.uistate",z2=(t,s)=>{const i=t.mainUi.outerContainer.element,d=[t.mainUi.mothership,...t.uiMotherships];s==="setDisabled"&&it(d,g=>{g.broadcastOn([tu()],{target:i})}),it(d,g=>{g.broadcastOn([_P],s)})},kP=(t,s)=>{t.on("init SwitchMode",c=>{z2(s,c.type)}),t.on("NodeChange",c=>{t.ui.isEnabled()?z2(s,c.type):z2(s,"setDisabled")}),u5(t)&&t.mode.set("readonly")},os=t=>wc.config({channels:{[_P]:{onReceive:(s,c)=>{if(c==="setDisabled"||c==="setEnabled"){Mt.set(s,c==="setDisabled");return}const{contextType:i,shouldDisable:d}=t();i==="mode"&&!$o(["switchmode","init"],c)||Mt.set(s,d)}}}}),wl=(t,s)=>Wl((c,i)=>{_E(t,c)(t.onAction),!t.triggersSubmenu&&s===vl.CLOSE_ON_EXECUTE&&(c.getSystem().isConnected()&&sn(c,Is()),i.stop())}),K7={[nr()]:["disabling","alloy.base.behaviour","toggling","item-events"]},Eg=kd,xp=(t,s,c,i)=>{const d=St(J);return{type:"item",dom:s.dom,components:Eg(s.optComponents),data:t.data,eventOrder:K7,hasSubmenu:t.triggersSubmenu,itemBehaviours:$e([Zt("item-events",[wl(t,c),Sg(t,d),xg(t,d)]),ti.item(()=>!t.enabled||i.checkUiComponentContext(t.context).shouldDisable),os(()=>i.checkUiComponentContext(t.context)),Ht.config({})].concat(t.itemBehaviours))}},Ep=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),sO=t=>{const s=fp.os.isMacOS()||fp.os.isiOS(),d=s?{alt:"",ctrl:"",shift:"",meta:"",access:""}:{meta:"Ctrl",access:"Shift+Alt"},g=t.split("+"),h=De(g,y=>{const w=y.toLowerCase().trim();return $n(d,w)?d[w]:y});return s?h.join(""):h.join("+")},kE=(t,s,c=[mE])=>Qa(t,{tag:"div",classes:c},s),rO=t=>({dom:{tag:"div",classes:[$3]},components:[xo($i.translate(t))]}),cO=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),Y7=(t,s)=>({dom:{tag:"div",classes:[$3]},components:[{dom:{tag:t.tag,styles:t.styles},components:[xo($i.translate(s))]}]}),X7=t=>({dom:{tag:"div",classes:[G5]},components:[xo(sO(t))]}),OP=t=>kE("checkmark",t,[bp]),J7=t=>kE("chevron-right",t,[F3]),Q7=t=>kE("chevron-down",t,[F3]),eL=(t,s)=>{const c=t.direction==="vertical"?gE:q5,i=t.align==="left"?Y5:K5;return{dom:{tag:"div",classes:[fE,c,i,(()=>{switch(t.valign){case"top":return X5;case"middle":return I3;case"bottom":return J5}})()]},components:s}},tL=(t,s,c)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:c.getOr("")}}}),AP=(t,s,c)=>{const i="custom",d="remove",g=t.value,h=t.iconContent.map(E=>R2(E,s.icons,c)),y=t.ariaLabel.map(E=>({"aria-label":s.translate(E),"data-mce-name":E})).getOr({});return{dom:(()=>{const E=dE,T=h.getOr(""),A={tag:"div",attributes:y,classes:[E]};return g===i?{...A,tag:"button",classes:[...A.classes,"tox-swatches__picker-btn"],innerHtml:T}:g===d?{...A,classes:[...A.classes,"tox-swatch--remove"],innerHtml:T}:jt(g)?{...A,attributes:{...A.attributes,"data-mce-color":g},styles:{"background-color":g},innerHtml:T}:A})(),optComponents:[]}},aO=t=>{const s=t.map(c=>({attributes:{id:ut("menu-item"),"aria-label":$i.translate(c)}})).getOr({});return{tag:"div",classes:[D2,u0],...s}},RP=(t,s,c,i)=>{const d={tag:"div",classes:[mE]},g=P=>Qa(P,d,s.icons,i),h=()=>k.some({dom:d}),y=c?t.iconContent.map(g).orThunk(h):k.none(),w=t.checkMark,E=k.from(t.meta).fold(()=>rO,P=>$n(P,"style")?An(Y7,P.style):rO),T=t.htmlContent.fold(()=>t.textContent.map(E),P=>k.some(cO(P,[$3])));return{dom:aO(t.ariaLabel),optComponents:[y,T,t.shortcutContent.map(X7),w,t.caret]}},U2=(t,s,c,i=k.none())=>t.presets==="color"?AP(t,s,i):RP(t,s,c,i),DP=(t,s,c)=>rt(t,"tooltipWorker").map(i=>[Uo.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:d=>({type:"submenu",item:d,overrides:{maxHeightFunction:td}}),mode:"follow-highlight",onShow:(d,g)=>{i(h=>{Uo.setComponents(d,[ny({element:ae.fromDom(h)})])})}})]).getOrThunk(()=>c.map(i=>[Uo.config({...s.providers.tooltips.getConfig({tooltipText:i}),mode:"follow-highlight"})]).getOr([])),nL=t=>fg.DOM.encode(t),Tp=(t,s)=>{const c=$i.translate(t),i=nL(c);if(s.length>0){const d=new RegExp(V2(s),"gi");return i.replace(d,g=>`<span class="tox-autocompleter-highlight">${g}</span>`)}else return i},oL=(t,s,c,i,d,g,h,y=!0)=>{const w=U2({presets:i,textContent:k.none(),htmlContent:c?t.text.map(T=>Tp(T,s)):k.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:k.none(),checkMark:k.none(),caret:k.none(),value:t.value},h.providers,y,t.icon),E=t.text.filter(T=>!c&&T!=="");return xp({context:"mode:design",data:Ep(t),enabled:t.enabled,getApi:te({}),onAction:T=>d(t.value,t.meta),onSetup:te(J),triggersSubmenu:!1,itemBehaviours:DP(t,h,E)},w,g,h.providers)},iO=(t,s)=>De(t,c=>{switch(c.type){case"cardcontainer":return eL(c,iO(c.items,s));case"cardimage":return tL(c.src,c.classes,c.alt);case"cardtext":const d=c.name.exists(g=>$o(s.cardText.highlightOn,g))?k.from(s.cardText.matchText).getOr(""):"";return cO(Tp(c.text,d),c.classes)}}),MP=(t,s,c,i)=>{const d=h=>({isEnabled:()=>!Mt.isDisabled(h),setEnabled:y=>{Mt.set(h,!y),it(sr(h.element,"*"),w=>{h.getSystem().getByDom(w).each(E=>{E.hasConfigured(Mt)&&Mt.set(E,!y)})})}}),g={dom:aO(t.label),optComponents:[k.some({dom:{tag:"div",classes:[fE,q5]},components:iO(t.items,i)})]};return xp({context:"mode:design",data:Ep({text:k.none(),...t}),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:k.from(i.itemBehaviours).getOr([])},g,s,c.providers)},PP=(t,s,c,i,d,g,h,y=!0)=>{const w=A=>({setActive:P=>{en.set(A,P)},isActive:()=>en.isOn(A),isEnabled:()=>!Mt.isDisabled(A),setEnabled:P=>Mt.set(A,!P)}),E=U2({presets:c,textContent:s?t.text:k.none(),htmlContent:k.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:k.none(),checkMark:s?k.some(OP(h.icons)):k.none(),caret:k.none(),value:t.value},h,y),T=t.text.filter(te(!s)).map(A=>Uo.config(h.tooltips.getConfig({tooltipText:h.translate(A)})));return zo(xp({context:t.context,data:Ep(t),enabled:t.enabled,getApi:w,onAction:A=>i(t.value),onSetup:A=>(A.setActive(d),J),triggersSubmenu:!1,itemBehaviours:[...T.toArray()]},E,g,h),{toggling:{toggleClass:B3,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},lO=Wb(Vx(),zx()),OE=t=>({value:NP(t)}),AE=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,RE=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,uO=t=>AE.test(t)||RE.test(t),NP=t=>J0(t,"#").toUpperCase(),BP=t=>uO(t)?k.some({value:NP(t)}):k.none(),sL=t=>({value:t.value.replace(AE,(c,i,d,g)=>i+i+d+d+g+g)}),rL=t=>{const s=sL(t),c=RE.exec(s.value);return c===null?["FFFFFF","FF","FF","FF"]:c},dO=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},g0=t=>{const s=dO(t.red)+dO(t.green)+dO(t.blue);return OE(s)},mO=Math.min,fO=Math.max,DE=Math.round,cL=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,aL=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,_p=(t,s,c,i)=>({red:t,green:s,blue:c,alpha:i}),gO=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},$P=t=>{let s,c,i;const d=(t.hue||0)%360;let g=t.saturation/100,h=t.value/100;if(g=fO(0,mO(g,1)),h=fO(0,mO(h,1)),g===0)return s=c=i=DE(255*h),_p(s,c,i,1);const y=d/60,w=h*g,E=w*(1-Math.abs(y%2-1)),T=h-w;switch(Math.floor(y)){case 0:s=w,c=E,i=0;break;case 1:s=E,c=w,i=0;break;case 2:s=0,c=w,i=E;break;case 3:s=0,c=E,i=w;break;case 4:s=E,c=0,i=w;break;case 5:s=w,c=0,i=E;break;default:s=c=i=0}return s=DE(255*(s+T)),c=DE(255*(c+T)),i=DE(255*(i+T)),_p(s,c,i,1)},W2=t=>{const s=rL(t),c=parseInt(s[1],16),i=parseInt(s[2],16),d=parseInt(s[3],16);return _p(c,i,d,1)},FP=(t,s,c,i)=>{const d=parseInt(t,10),g=parseInt(s,10),h=parseInt(c,10),y=parseFloat(i);return _p(d,g,h,y)},hO=t=>{const s=cL.exec(t);if(s!==null)return k.some(FP(s[1],s[2],s[3],"1"));const c=aL.exec(t);return c!==null?k.some(FP(c[1],c[2],c[3],c[4])):k.none()},IP=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,LP=_p(255,0,0,1),HP=t=>{t.dispatch("SkinLoaded")},iL=(t,s)=>{t.dispatch("SkinLoadError",s)},lL=t=>{t.dispatch("ResizeEditor")},pO=(t,s)=>{t.dispatch("ResizeContent",s)},uL=(t,s)=>{t.dispatch("ScrollContent",s)},VP=(t,s)=>{t.dispatch("TextColorChange",s)},ME=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},zP=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),dL=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})},mL=(t,s)=>{t.dispatch("StylesTextUpdate",s)},fL=(t,s)=>{t.dispatch("AlignTextUpdate",s)},gL=(t,s)=>{t.dispatch("FontSizeTextUpdate",s)},hL=(t,s)=>{t.dispatch("FontSizeInputTextUpdate",s)},pL=(t,s)=>{t.dispatch("BlocksTextUpdate",s)},bO=(t,s)=>{t.dispatch("FontFamilyTextUpdate",s)},UP=t=>{t.dispatch("ToggleSidebar")},WP=t=>{t.dispatch("ToggleView")},PE=(t,s)=>()=>{t(),s()},qr=t=>kp(t,"NodeChange",s=>{s.setEnabled(t.selection.isEditable())}),bL=(t,s)=>c=>{const i=la(),d=()=>{c.setActive(t.formatter.match(s));const g=t.formatter.formatChanged(s,c.setActive);i.set(g)};return t.initialized?d():t.once("init",d),()=>{t.off("init",d),i.clear()}},NE=(t,s)=>c=>{const i=qr(t)(c),d=bL(t,s)(c);return()=>{i(),d()}},kp=(t,s,c)=>i=>{const d=()=>c(i),g=()=>{c(i),t.on(s,d)};return t.initialized?g():t.once("init",g),()=>{t.off("init",g),t.off(s,d)}},ZP=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},_a=(t,s)=>()=>t.execCommand(s);var Op=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const jP={},vL=(t,s=10)=>{const c=Op.getItem(t),i=ke(c)?JSON.parse(c):[],g=(E=>s-E.length<0?E.slice(0,s):E)(i),h=E=>{Be(g,E).each(y),g.unshift(E),g.length>s&&g.pop(),Op.setItem(t,JSON.stringify(g))},y=E=>{g.splice(E,1)};return{add:h,state:()=>g.slice(0)}},GP=t=>rt(jP,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,c=Op.getItem(s);if(Xt(c)){const d=Op.getItem("tinymce-custom-colors");Op.setItem(s,jt(d)?d:"[]")}const i=vL(s,10);return jP[t]=i,i}),yL=t=>De(GP(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),Z2=(t,s)=>{GP(t).add(s)},Ap=(t,s,c)=>({hue:t,saturation:s,value:c}),j2=t=>{let s=0,c=0,i=0;const d=t.red/255,g=t.green/255,h=t.blue/255,y=Math.min(d,Math.min(g,h)),w=Math.max(d,Math.max(g,h));if(y===w)return i=y,Ap(0,0,i*100);const E=d===y?g-h:h===y?d-g:h-d;return s=d===y?3:h===y?1:5,s=60*(s-E/(w-y)),c=(w-y)/w,i=w,Ap(Math.round(s),Math.round(c*100),Math.round(i*100))},qP=t=>j2(W2(t)),KP=t=>g0($P(t)),CL=t=>BP(t).orThunk(()=>hO(t).map(g0)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const c=s.getContext("2d");c.clearRect(0,0,s.width,s.height),c.fillStyle="#FFFFFF",c.fillStyle=t,c.fillRect(0,0,1,1);const i=c.getImageData(0,0,1,1).data,d=i[0],g=i[1],h=i[2],y=i[3];return g0(_p(d,g,h,y))}),G2="forecolor",q2="hilitecolor",BE=5,YP=t=>{const s=[];for(let c=0;c<t.length;c+=2)s.push({text:t[c+1],value:"#"+CL(t[c]).value,icon:"checkmark",type:"choiceitem"});return s},bd=t=>s=>s.options.get(t),vO="#000000",wL=t=>{const s=t.options.register,c=d=>Bo(d,ke)?{value:YP(d),valid:!0}:{valid:!1,message:"Must be an array of strings."},i=d=>uo(d)&&d>0?{value:d,valid:!0}:{valid:!1,message:"Must be a positive number."};s("color_map",{processor:c,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_background",{processor:c}),s("color_map_foreground",{processor:c}),s("color_cols",{processor:i,default:yO(t)}),s("color_cols_foreground",{processor:i,default:XP(t,G2)}),s("color_cols_background",{processor:i,default:XP(t,q2)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:vO}),s("color_default_background",{processor:"string",default:vO})},$E=(t,s)=>s===G2&&t.options.isSet("color_map_foreground")?bd("color_map_foreground")(t):s===q2&&t.options.isSet("color_map_background")?bd("color_map_background")(t):bd("color_map")(t),yO=(t,s="default")=>Math.max(BE,Math.ceil(Math.sqrt($E(t,s).length))),XP=(t,s)=>{const c=bd("color_cols")(t),i=yO(t,s);return c===yO(t)?i:c},JP=(t,s="default")=>Math.round(s===G2?bd("color_cols_foreground")(t):s===q2?bd("color_cols_background")(t):bd("color_cols")(t)),QP=bd("custom_colors"),SL=bd("color_default_foreground"),xL=bd("color_default_background"),EL="rgba(0, 0, 0, 0)",TL=t=>hO(t).exists(s=>s.alpha!==0),_L=t=>ua(t,s=>{if(Jn(s)){const c=kr(s,"background-color");return $t(TL(c),c)}else return k.none()}).getOr(EL),CO=(t,s)=>{const c=ae.fromDom(t.selection.getStart()),i=s==="hilitecolor"?_L(c):kr(c,"color");return hO(i).map(d=>"#"+g0(d).value)},kL=(t,s,c)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:c}),t.nodeChanged()})},OL=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},vd=t=>{t.addCommand("mceApplyTextcolor",(s,c)=>{kL(t,s,c)}),t.addCommand("mceRemoveTextcolor",s=>{OL(t,s)})},eN=t=>{const s="choiceitem",c={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[c,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[c]},wO=(t,s,c,i)=>{c==="custom"?rN(t)(g=>{g.each(h=>{Z2(s,h),t.execCommand("mceApplyTextcolor",s,h),i(h)})},CO(t,s).getOr(vO)):c==="remove"?(i(""),t.execCommand("mceRemoveTextcolor",s)):(i(c),t.execCommand("mceApplyTextcolor",s,c))},K2=(t,s,c)=>t.concat(yL(s).concat(eN(c))),Us=(t,s,c)=>i=>{i(K2(t,s,c))},SO=(t,s,c)=>{const i=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(i,c)},tN=(t,s)=>{t.setTooltip(s)},nN=(t,s)=>c=>{const i=CO(t,s);return Ac(i,c.toUpperCase())},xO=(t,s,c)=>{if(Ao(c))return s==="forecolor"?"Text color":"Background color";const i=s==="forecolor"?"Text color {0}":"Background color {0}",d=K2($E(t,s),s,!1),g=zt(d,h=>h.value===c).getOr({text:""}).text;return t.translate([i,t.translate(g)])},oN=(t,s,c,i)=>{t.ui.registry.addSplitButton(s,{tooltip:xO(t,c,i.get()),presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:nN(t,c),columns:JP(t,c),fetch:Us($E(t,c),c,QP(t)),onAction:d=>{wO(t,c,i.get(),J)},onItemAction:(d,g)=>{wO(t,c,g,h=>{i.set(h),VP(t,{name:s,color:h})})},onSetup:d=>{SO(d,s,i.get());const g=h=>{h.name===s&&(SO(d,h.name,h.color),tN(d,xO(t,c,h.color)))};return t.on("TextColorChange",g),PE(qr(t)(d),()=>{t.off("TextColorChange",g)})}})},sN=(t,s,c,i,d)=>{t.ui.registry.addNestedMenuItem(s,{text:i,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:g=>(tN(g,xO(t,c,d.get())),SO(g,s,d.get()),qr(t)(g)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:nN(t,c),initData:{storageKey:c},onAction:g=>{wO(t,c,g.value,h=>{d.set(h),VP(t,{name:s,color:h})})}}]})},rN=t=>(s,c)=>{let i=!1;const d=y=>{const E=y.getData().colorpicker;i?(s(k.from(E)),y.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",E]))},g=(y,w)=>{w.name==="hex-valid"&&(i=w.value)},h={colorpicker:c};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:h,onAction:g,onSubmit:d,onClose:J,onCancel:()=>{s(k.none())}})},AL=t=>{vd(t);const s=SL(t),c=xL(t),i=St(s),d=St(c);oN(t,"forecolor","forecolor",i),oN(t,"backcolor","hilitecolor",d),sN(t,"forecolor","forecolor","Text color",i),sN(t,"backcolor","hilitecolor","Background color",d)},EO=(t,s,c,i,d,g,h,y)=>{const w=CE(s),T=RL(s,c,i,d!=="color"?"normal":"color",g,h,y);return U3(t,w,T,i,{menuType:d})},RL=(t,s,c,i,d,g,h)=>kd(De(t,y=>y.type==="choiceitem"?SP(y).fold(pd,w=>k.some(PP(w,c===1,i,s,g(w.value),d,h,CE(t)))):k.none())),FE=(t,s)=>{const c=yg(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+c.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(s==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:d=>s==="color"?go(d.element,"[aria-checked=true]"):k.none()}},DL=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${dE}`:`.${u0}`}},ML=(t,s)=>{const c=PL(t,s),i=s.colorinput.getColorCols(t.initData.storageKey),d="color",h={...EO(ut("menu-value"),c,y=>{t.onAction({value:y})},i,d,vl.CLOSE_ON_EXECUTE,t.select.getOr(Vn),s.shared.providers),markers:yg(d),movement:FE(i,d),showMenuRole:!1};return{type:"widget",data:{value:ut("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[lO.widget(lp.sketch(h))]}},PL=(t,s)=>{const c=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>K2(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,c),i=>i.concat(eN(c)))},cN=ut("cell-over"),aN=ut("cell-execute"),NL=t=>(s,c)=>t.shared.providers.translate(["{0} columns, {1} rows",c,s]),BL=(t,s,c)=>{const i=h=>ht(h,cN,{row:t,col:s}),d=h=>ht(h,aN,{row:t,col:s}),g=(h,y)=>{y.stop(),d(h)};return Os({dom:{tag:"div",attributes:{role:"button","aria-label":c}},behaviours:$e([Zt("insert-table-picker-cell",[Ee(za(),Bt.focus),Ee(nr(),d),Ee(Yd(),g),Ee($1(),g)]),en.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Bt.config({onFocus:i})])})},$L=(t,s,c)=>{const i=[];for(let d=0;d<s;d++){const g=[];for(let h=0;h<c;h++){const y=t(d+1,h+1);g.push(BL(d,h,y))}i.push(g)}return i},FL=(t,s,c,i,d)=>{for(let g=0;g<i;g++)for(let h=0;h<d;h++)en.set(t[g][h],g<=s&&h<=c)},IL=t=>Se(t,s=>De(s,zc)),iN=(t,s)=>xo(`${s}x${t}`),LL={inserttable:(t,s)=>{const d=NL(s),g=$L(d,10,10),h=iN(0,0),y=On({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[h],behaviours:$e([Ht.config({})])});return{type:"widget",data:{value:ut("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[lO.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:IL(g).concat(y.asSpec()),behaviours:$e([Zt("insert-table-picker",[lo(w=>{Ht.set(y.get(w),[h])}),z1(cN,(w,E,T)=>{const{row:A,col:P}=T.event;FL(g,A,P,10,10),Ht.set(y.get(w),[iN(A+1,P+1)])}),z1(aN,(w,E,T)=>{const{row:A,col:P}=T.event;sn(w,Is()),t.onAction({numRows:A+1,numColumns:P+1})})]),xt.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:ML},HL=(t,s)=>rt(LL,t.fancytype).map(c=>c(t,s)),lN=(t,s,c,i=!0,d=!1)=>{const g=d?Q7(c.icons):J7(c.icons),h=w=>({isEnabled:()=>!Mt.isDisabled(w),setEnabled:E=>Mt.set(w,!E),setIconFill:(E,T)=>{go(w.element,`svg path[class="${E}"], rect[class="${E}"]`).each(A=>{Dt(A,"fill",T)})},setTooltip:E=>{const T=c.translate(E);Dt(w.element,"aria-label",T)}}),y=U2({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:k.none(),ariaLabel:t.text,caret:k.some(g),checkMark:k.none(),shortcutContent:t.shortcut},c,i);return xp({context:t.context,data:Ep(t),getApi:h,enabled:t.enabled,onAction:J,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},y,s,c)},VL=(t,s,c,i=!0)=>{const d=h=>({isEnabled:()=>!Mt.isDisabled(h),setEnabled:y=>Mt.set(h,!y)}),g=U2({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:k.none(),ariaLabel:t.text,caret:k.none(),checkMark:k.none(),shortcutContent:t.shortcut},c,i);return xp({context:t.context,data:Ep(t),getApi:d,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,c)},uN=t=>({type:"separator",dom:{tag:"div",classes:[u0,S7]},components:t.text.map(xo).toArray()}),zL=(t,s,c,i=!0)=>{const d=h=>({setActive:y=>{en.set(h,y)},isActive:()=>en.isOn(h),isEnabled:()=>!Mt.isDisabled(h),setEnabled:y=>Mt.set(h,!y)}),g=U2({iconContent:t.icon,textContent:t.text,htmlContent:k.none(),ariaLabel:t.text,checkMark:k.some(OP(c.icons)),caret:k.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},c,i);return zo(xp({context:t.context,data:Ep(t),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,c),{toggling:{toggleClass:B3,toggleOnExecute:!1,selected:t.active},role:t.role.getOrUndefined()})},UL=oL,dN=uN,mN=VL,WL=lN,ZL=zL,jL=HL,GL=MP;var fN=Object.freeze({__proto__:null,getCoupled:(t,s,c,i)=>c.getOrCreate(t,s,i),getExistingCoupled:(t,s,c,i)=>c.getExisting(t,s,i)}),KL=[Dn("others",yi(tn.value,Ia()))],XL=Object.freeze({__proto__:null,init:()=>{const t={},s=(g,h)=>{if(Fo(g.others).length===0)throw new Error("Cannot find any known coupled components");return rt(t,h)},c=(g,h,y)=>s(h,y).getOrThunk(()=>{const E=rt(h.others,y).getOrDie("No information found for coupled component: "+y)(g),T=g.getSystem().build(E);return t[y]=T,T}),i=(g,h,y)=>s(h,y).orThunk(()=>(rt(h.others,y).getOrDie("No information found for coupled component: "+y),k.none())),d=te({});return Ar({readState:d,getExisting:i,getOrCreate:c})}});const Xo=Ls({fields:KL,name:"coupling",apis:fN,state:XL}),TO=t=>{let s=k.none(),c=[];const i=E=>TO(T=>{d(A=>{T(E(A))})}),d=E=>{h()?w(E):c.push(E)},g=E=>{h()||(s=k.some(E),y(c),c=[])},h=()=>s.isSome(),y=E=>{it(E,w)},w=E=>{s.each(T=>{setTimeout(()=>{E(T)},0)})};return t(g),{get:d,map:i,isReady:h}},JL={nu:TO,pure:t=>TO(s=>{s(t)})},QL=t=>{setTimeout(()=>{throw t},0)},h0=t=>{const s=w=>{t().then(w,QL)};return{map:w=>h0(()=>t().then(w)),bind:w=>h0(()=>t().then(E=>w(E).toPromise())),anonBind:w=>h0(()=>t().then(()=>w.toPromise())),toLazy:()=>JL.nu(s),toCached:()=>{let w=null;return h0(()=>(w===null&&(w=t()),w))},toPromise:t,get:s}},Nr={nu:t=>h0(()=>new Promise(t)),pure:t=>h0(()=>Promise.resolve(t))},gN=te("sink"),hN=te(Gc({name:gN(),overrides:te({dom:{tag:"div"},behaviours:$e([cr.config({useFixed:Ot})]),events:Fn([em(da()),em(Lc()),em(Yd())])})})),pN=(t,s)=>{const c=t.getHotspot(s).getOr(s),i="hotspot",d=t.getAnchorOverrides();return t.layouts.fold(()=>({type:i,hotspot:c,overrides:d}),g=>({type:i,hotspot:c,overrides:d,layouts:g}))},bN=(t,s,c)=>{const i=t.fetch;return i(c).map(s)},eH=(t,s,c,i,d,g,h)=>{const y=bN(t,s,i),w=LE(i,t);return y.map(E=>E.bind(T=>{const A=T.menus[T.primary];return k.from(A).each(P=>{t.listRole.each($=>{P.role=$})}),k.from(hd.sketch({...g.menu(),uid:_h(""),data:T,highlightOnOpen:h,onOpenMenu:(P,$)=>{const V=w().getOrDie();cr.position(V,$,{anchor:c}),Cn.decloak(d)},onOpenSubmenu:(P,$,V)=>{const W=w().getOrDie();cr.position(W,V,{anchor:{type:"submenu",item:$}}),Cn.decloak(d)},onRepositionMenu:(P,$,V)=>{const W=w().getOrDie();cr.position(W,$,{anchor:c}),it(V,se=>{cr.position(W,se.triggeredMenu,{anchor:{type:"submenu",item:se.triggeringItem}})})},onEscape:()=>(Bt.focus(i),Cn.close(d),k.some(!0))}))}))},IE=(t,s,c,i,d,g,h)=>{const y=pN(t,c);return eH(t,s,y,c,i,d,h).map(E=>(E.fold(()=>{Cn.isOpen(i)&&Cn.close(i)},T=>{Cn.cloak(i),Cn.open(i,T),g(i)}),i))},tH=(t,s,c,i,d,g,h)=>(Cn.close(i),Nr.pure(i)),_O=(t,s,c,i,d,g)=>{const h=Xo.getCoupled(c,"sandbox");return(Cn.isOpen(h)?tH:IE)(t,s,c,h,i,d,g)},nH=(t,s,c)=>{const i=fn.getCurrent(s).getOr(s),d=tc(t.element);c?Vt(i.element,"min-width",d+"px"):l1(i.element,d)},LE=(t,s)=>t.getSystem().getByUid(s.uid+"-"+gN()).map(c=>()=>tn.value(c)).getOrThunk(()=>s.lazySink.fold(()=>()=>tn.error(new Error("No internal sink is specified, nor could an external sink be found")),c=>()=>c(t))),vN=t=>{Cn.getState(t).each(s=>{hd.repositionMenus(s)})},kO=(t,s,c)=>{const i=Dh(),d=(y,w)=>{const E=pN(t,s);i.link(s.element),t.matchWidth&&nH(E.hotspot,w,t.useMinWidth),t.onOpen(E,y,w),c!==void 0&&c.onOpen!==void 0&&c.onOpen(y,w)},g=(y,w)=>{i.unlink(s.element),h().getOr(w).element.dom.dispatchEvent(new window.FocusEvent("focusout")),c!==void 0&&c.onClose!==void 0&&c.onClose(y,w)},h=LE(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:i.id}},behaviours:ya.augment(t.sandboxBehaviours,[nt.config({store:{mode:"memory",initialValue:s}}),Cn.config({onOpen:d,onClose:g,isPartOf:(y,w,E)=>Xu(w,E)||Xu(s,E),getAttachPoint:()=>h().getOrDie()}),fn.config({find:y=>Cn.getState(y).bind(w=>fn.getCurrent(w))}),wc.config({channels:{...Jh({isExtraPart:Vn}),...Qh({doReposition:vN})}})])}},yN=t=>{const s=Xo.getCoupled(t,"sandbox");vN(s)},HE=()=>[le("sandboxClasses",[]),ya.field("sandboxBehaviours",[fn,wc,Cn,nt])],CN=te([Te("dom"),Te("fetch"),bn("onOpen"),Cr("onExecute"),le("getHotspot",k.some),le("getAnchorOverrides",te({})),nd(),Vs("dropdownBehaviours",[en,Xo,xt,Bt]),Te("toggleClass"),le("eventOrder",{}),kn("lazySink"),le("matchWidth",!1),le("useMinWidth",!1),kn("role"),kn("listRole")].concat(HE())),oH=te([Ca({schema:[ll(),le("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),hN()]),sH=(t,s,c,i)=>{const d=T=>rt(t.dom,"attributes").bind(A=>rt(A,T)),g=T=>{Cn.getState(T).each(A=>{hd.highlightPrimary(A)})},h=(T,A,P)=>_O(t,an,T,i,A,P),y=T=>{h(T,g,kc.HighlightMenuAndItem).get(J)},w={expand:T=>{en.isOn(T)||h(T,J,kc.HighlightNone).get(J)},open:T=>{en.isOn(T)||h(T,J,kc.HighlightMenuAndItem).get(J)},refetch:T=>Xo.getExistingCoupled(T,"sandbox").fold(()=>h(T,J,kc.HighlightMenuAndItem).map(J),P=>IE(t,an,T,P,i,J,kc.HighlightMenuAndItem).map(J)),isOpen:en.isOn,close:T=>{en.isOn(T)&&h(T,J,kc.HighlightMenuAndItem).get(J)},repositionMenus:T=>{en.isOn(T)&&yN(T)}},E=(T,A)=>(Vu(T),k.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:zs(t.dropdownBehaviours,[en.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),Xo.config({others:{sandbox:T=>kO(t,T,{onOpen:()=>en.on(T),onClose:()=>en.off(T)})}}),xt.config({mode:"special",onSpace:E,onEnter:E,onDown:(T,A)=>{if(ka.isOpen(T)){const P=Xo.getCoupled(T,"sandbox");g(P)}else ka.open(T);return k.some(!0)},onEscape:(T,A)=>ka.isOpen(T)?(ka.close(T),k.some(!0)):k.none()}),Bt.config({})]),events:g2(k.some(y)),eventOrder:{...t.eventOrder,[nr()]:["disabling","toggling","alloy.base.behaviour"]},apis:w,domModification:{attributes:{"aria-haspopup":t.listRole.getOr("true"),...t.role.fold(()=>({}),T=>({role:T})),...t.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},ka=pr({name:"Dropdown",configFields:CN(),partFields:oH(),factory:sH,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),rH=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},cH=t=>{const s=nt.getValue(t),c=pE(t).map(P2);ka.refetch(s).get(()=>{const i=Xo.getCoupled(s,"sandbox");c.each(d=>pE(i).each(g=>T7(g,d)))})},aH=(t,s)=>{iH(t).each(c=>{Dv(t,c.element,s.event.eventType,s.event.interactionEvent)})},iH=t=>Cn.getState(t).bind(Ze.getHighlighted).bind(Ze.getHighlighted),lH=t=>Wr(t.element,bE)?k.some(t.element):go(t.element,"."+bE),wN=(t,s,c)=>{iP(t).each(i=>{_7(i,c),lH(s).each(g=>{Lo(g,"id").each(h=>Dt(i.element,"aria-controls",h))})}),Dt(c.element,"aria-selected","true")},VE=(t,s,c)=>{Dt(c.element,"aria-selected","false")},uH=t=>{iP(t).each(s=>Bt.focus(s))},zE=t=>Xo.getExistingCoupled(t,"sandbox").bind(pE).map(P2).map(c=>c.fetchPattern).getOr("");var UE;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(UE||(UE={}));const dH=(t,s,c,i,d)=>{const g=c.shared.providers,h=y=>d?{...y,shortcut:k.none(),icon:y.text.isSome()?k.none():y.icon}:y;switch(t.type){case"menuitem":return W7(t).fold(pd,y=>k.some(mN(h(y),s,g,i)));case"nestedmenuitem":return j7(t).fold(pd,y=>k.some(WL(h(y),s,g,i,d)));case"togglemenuitem":return G7(t).fold(pd,y=>k.some(ZL(h(y),s,g,i)));case"separator":return B7(t).fold(pd,y=>k.some(dN(y)));case"fancymenuitem":return z7(t).fold(pd,y=>jL(y,c));default:return console.error("Unknown item in general menu",t),k.none()}},mH=(t,s,c,i,d,g,h)=>{const y=i===1,w=!y||CE(t);return kd(De(t,E=>{switch(E.type){case"separator":return Cl(E).fold(pd,T=>k.some(dN(T)));case"cardmenuitem":return Q3(E).fold(pd,T=>k.some(GL({...T,onAction:A=>{T.onAction(A),c(T.value,T.meta)}},d,g,{itemBehaviours:DP(T.meta,g,k.none()),cardText:{matchText:s,highlightOn:h}})));case"autocompleteitem":default:return CP(E).fold(pd,T=>k.some(UL(T,s,y,"normal",c,d,g,w)))}}))},SN=(t,s,c,i,d,g)=>{const h=CE(s),y=kd(De(s,T=>{const A=$=>d?!$n($,"text"):h,P=$=>dH($,c,i,A($),d);return T.type==="nestedmenuitem"&&T.getSubmenuItems().length<=0?P({...T,enabled:!1}):P(T)})),w=rH(g);return(d?dP:U3)(t,h,y,1,w)},xN=t=>hd.singleData(t.value,t),WE=(t,s,c,i)=>{const d=FE(s,i),g=yg(i);return{data:xN({...t,movement:d,menuBehaviours:f0.unnamedEvents(s!=="auto"?[]:[lo((h,y)=>{nO(h,4,g.item).each(({numColumns:w,numRows:E})=>{xt.setGridSize(h,E,w)})})])}),menu:{markers:yg(i),fakeFocus:c===UE.ContentFocus}}},p0=t=>Sb.create(ae.fromDom(t.startContainer),t.startOffset,ae.fromDom(t.endContainer),t.endOffset),EN={register:(t,s)=>{const c=ut("autocompleter"),i=St(!1),d=St(!1),g=Mn(),h=Os(ko.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:c}},components:[],fireDismissalEventInstead:{},inlineBehaviours:$e([Zt("dismissAutocompleter",[Ee(Vc(),()=>A()),Ee(Rv(),(G,ee)=>{Lo(ee.event.target,"id").each(oe=>Dt(ae.fromDom(t.getBody()),"aria-activedescendant",oe))})])]),lazySink:s.getSink})),y=()=>ko.isOpen(h),w=d.get,E=()=>{if(y()){ko.hide(h),t.dom.remove(c,!1);const G=ae.fromDom(t.getBody());Lo(G,"aria-owns").filter(ee=>ee===c).each(()=>{Ro(G,"aria-owns"),Ro(G,"aria-activedescendant")})}},T=()=>ko.getContent(h).bind(G=>as(G.components(),0)),A=()=>t.execCommand("mceAutocompleterClose"),P=G=>{const ee=ir(G,oe=>k.from(oe.columns)).getOr(1);return Se(G,oe=>{const be=oe.items;return mH(be,oe.matchText,(ye,We)=>{const at={hide:()=>A(),reload:xe=>{E(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:xe})}};t.execCommand("mceAutocompleterRefreshActiveRange"),g.get().each(xe=>{i.set(!0),oe.onAction(at,xe,ye,We),i.set(!1)})},ee,vl.BUBBLE_TO_SANDBOX,s,oe.highlightOn)})},$=(G,ee)=>{const oe=ir(G,be=>k.from(be.columns)).getOr(1);ko.showMenuAt(h,{anchor:{type:"selection",getSelection:()=>g.get().map(p0),root:ae.fromDom(t.getBody())}},WE(U3("autocompleter-value",!0,ee,oe,{menuType:"normal"}),oe,UE.ContentFocus,"normal")),T().each(Ze.highlightFirst)},V=G=>{const ee=P(G);ee.length>0?($(G,ee),Dt(ae.fromDom(t.getBody()),"aria-owns",c),t.inline||W()):E()},W=()=>{t.dom.get(c)&&t.dom.remove(c,!1);const G=t.getDoc().documentElement,ee=t.selection.getNode(),oe=Sh(h.element);Ll(oe,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${ee.offsetTop}px`,left:`${ee.offsetLeft}px`}),t.dom.add(G,oe.dom),go(oe,'[role="menu"]').each(be=>{Kt(be,"position"),Kt(be,"max-height")})};t.on("AutocompleterStart",({lookupData:G})=>{d.set(!0),i.set(!1),V(G)}),t.on("AutocompleterUpdate",({lookupData:G})=>V(G)),t.on("AutocompleterUpdateActiveRange",({range:G})=>g.set(G)),t.on("AutocompleterEnd",()=>{E(),d.set(!1),i.set(!1),g.clear()});const se={cancelIfNecessary:A,isMenuOpen:y,isActive:w,isProcessingAction:i.get,getMenu:T};w7.setup(se,t)}},Y2=(t,s,c)=>ul(t,s,c).isSome(),TN=(t,s)=>{let c=null;return{cancel:()=>{c!==null&&(clearTimeout(c),c=null)},schedule:(...g)=>{c=setTimeout(()=>{t.apply(null,g),c=null},s)}}},_N=5,gH=400,kN=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?k.none():k.some(s.touches[0])},hH=(t,s)=>{const c=Math.abs(t.clientX-s.x),i=Math.abs(t.clientY-s.y);return c>_N||i>_N},pH=t=>{const s=Mn(),c=St(!1),i=TN(E=>{t.triggerEvent(Lu(),E),c.set(!0)},gH),d=E=>(kN(E).each(T=>{i.cancel();const A={x:T.clientX,y:T.clientY,target:E.target};i.schedule(E),c.set(!1),s.set(A)}),k.none()),g=E=>(i.cancel(),kN(E).each(T=>{s.on(A=>{hH(T,A)&&s.clear()})}),k.none()),h=E=>{i.cancel();const T=A=>Un(A.target,E.target);return s.get().filter(T).map(A=>c.get()?(E.prevent(),!1):t.triggerEvent($1(),E))},y=vf([{key:Ci(),value:d},{key:$u(),value:g},{key:qd(),value:h}]);return{fireIfReady:(E,T)=>rt(y,T).bind(A=>A(E))}},bH=t=>t.raw.which===Ft[0]&&!$o(["input","textarea"],Da(t.target))&&!Y2(t.target,'[contenteditable="true"]'),vH=(t,s)=>{const c={stopBackspace:!0,...s},i=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=pH(c),g=De(i.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),$=>Zr(t,$,V=>{d.fireIfReady(V,$).each(se=>{se&&V.kill()}),c.triggerEvent($,V)&&V.kill()})),h=Mn(),y=Zr(t,"paste",$=>{d.fireIfReady($,"paste").each(W=>{W&&$.kill()}),c.triggerEvent("paste",$)&&$.kill(),h.set(setTimeout(()=>{c.triggerEvent(gh(),$)},0))}),w=Zr(t,"keydown",$=>{c.triggerEvent("keydown",$)?$.kill():c.stopBackspace&&bH($)&&$.prevent()}),E=Zr(t,"focusin",$=>{c.triggerEvent("focusin",$)&&$.kill()}),T=Mn(),A=Zr(t,"focusout",$=>{c.triggerEvent("focusout",$)&&$.kill(),T.set(setTimeout(()=>{c.triggerEvent(Xd(),$)},0))});return{unbind:()=>{it(g,$=>{$.unbind()}),w.unbind(),E.unbind(),A.unbind(),y.unbind(),h.on(clearTimeout),T.on(clearTimeout)}}},ON=(t,s)=>{const c=rt(t,"target").getOr(s);return St(c)},yH=(t,s)=>{const c=St(!1),i=St(!1);return{stop:()=>{c.set(!0)},cut:()=>{i.set(!0)},isStopped:c.get,isCut:i.get,event:t,setSource:s.set,getSource:s.get}},AN=t=>{const s=St(!1);return{stop:()=>{s.set(!0)},cut:J,isStopped:s.get,isCut:Vn,event:t,setSource:Q("Cannot set source of a broadcasted event"),getSource:Q("Cannot get source of a broadcasted event")}},yd=vc.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),Tg=(t,s,c,i,d,g)=>{const h=t(s,i),y=yH(c,d);return h.fold(()=>(g.logEventNoHandlers(s,i),yd.complete()),w=>{const E=w.descHandler;return Ku(E)(y),y.isStopped()?(g.logEventStopped(s,w.element,E.purpose),yd.stopped()):y.isCut()?(g.logEventCut(s,w.element,E.purpose),yd.complete()):Ma(w.element).fold(()=>(g.logNoParent(s,w.element,E.purpose),yd.complete()),A=>(g.logEventResponse(s,w.element,E.purpose),yd.resume(A)))})},RN=(t,s,c,i,d,g)=>Tg(t,s,c,i,d,g).fold(Ot,h=>RN(t,s,c,h,d,g),Vn),DN=(t,s,c,i,d)=>{const g=ON(c,i);return Tg(t,s,c,i,g,d)},MN=(t,s,c)=>{const i=AN(s);return it(t,d=>{const g=d.descHandler;Ku(g)(i)}),i.isStopped()},ZE=(t,s,c,i)=>PN(t,s,c,c.target,i),PN=(t,s,c,i,d)=>{const g=ON(c,i);return RN(t,s,c,i,g,d)},X2=(t,s)=>({element:t,descHandler:s}),J2=(t,s)=>({id:t,descHandler:s}),CH=()=>{const t={},s=(h,y,w)=>{Ms(w,(E,T)=>{const A=t[T]!==void 0?t[T]:{};A[y]=If(E,h),t[T]=A})},c=(h,y)=>$f(y).bind(w=>rt(h,w)).map(w=>X2(y,w));return{registerId:s,unregisterId:h=>{Ms(t,(y,w)=>{$n(y,h)&&delete y[h]})},filterByType:h=>rt(t,h).map(y=>Wg(y,(w,E)=>J2(E,w))).getOr([]),find:(h,y,w)=>rt(t,y).bind(E=>ua(w,T=>c(E,T),h))}},wH=()=>{const t=CH(),s={},c=E=>{const T=E.element;return $f(T).getOrThunk(()=>qv("uid-",E.element))},i=(E,T)=>{const A=s[T];if(A===E)g(E);else throw new Error('The tagId "'+T+'" is already used by: '+Gu(A.element)+`
Cannot use it for: `+Gu(E.element)+`
The conflicting element is`+(ra(A.element)?" ":" not ")+"already in the DOM")},d=E=>{const T=c(E);sa(s,T)&&i(E,T);const A=[E];t.registerId(A,T,E.events),s[T]=E},g=E=>{$f(E.element).each(T=>{delete s[T],t.unregisterId(T)})};return{find:(E,T,A)=>t.find(E,T,A),filter:E=>t.filterByType(E),register:d,unregister:g,getById:E=>rt(s,E)}},iu=Tc({name:"Container",factory:t=>{const{attributes:s,...c}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...c},components:t.components,behaviours:Ib(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[le("components",[]),Vs("containerBehaviours",[]),le("events",{}),le("domModification",{}),le("eventOrder",{})]}),OO=t=>{const s=G=>Ma(t.element).fold(Ot,ee=>Un(G,ee)),c=wH(),i=(G,ee)=>c.find(s,G,ee),d=vH(t.element,{triggerEvent:(G,ee)=>Gv(G,ee.target,oe=>ZE(i,G,ee,oe))}),g={debugInfo:te("real"),triggerEvent:(G,ee,oe)=>{Gv(G,ee,be=>PN(i,G,oe,ee,be))},triggerFocus:(G,ee)=>{$f(G).fold(()=>{pa(G)},oe=>{Gv(Si(),G,be=>(DN(i,Si(),{originator:ee,kill:J,prevent:J,target:G},G,be),!1))})},triggerEscape:(G,ee)=>{g.triggerEvent("keydown",G.element,ee.event)},getByUid:G=>W(G),getByDom:G=>se(G),build:Os,buildOrPatch:oy,addToGui:G=>{w(G)},removeFromGui:G=>{E(G)},addToWorld:G=>{h(G)},removeFromWorld:G=>{y(G)},broadcast:G=>{P(G)},broadcastOn:(G,ee)=>{$(G,ee)},broadcastEvent:(G,ee)=>{V(G,ee)},isConnected:Ot},h=G=>{G.connect(g),Dc(G.element)||(c.register(G),it(G.components(),h),g.triggerEvent(I1(),G.element,{target:G.element}))},y=G=>{Dc(G.element)||(it(G.components(),y),c.unregister(G)),G.disconnect()},w=G=>{Ql(t,G)},E=G=>{eu(G)},T=()=>{d.unbind(),pc(t.element)},A=G=>{const ee=c.filter(xi());it(ee,oe=>{const be=oe.descHandler;Ku(be)(G)})},P=G=>{A({universal:!0,data:G})},$=(G,ee)=>{A({universal:!1,channels:G,data:ee})},V=(G,ee)=>{const oe=c.filter(G);return MN(oe,ee)},W=G=>c.getById(G).fold(()=>tn.error(new Error('Could not find component with uid: "'+G+'" in system.')),tn.value),se=G=>{const ee=$f(G).getOr("not found");return W(ee)};return h(t),{root:t,element:t.element,destroy:T,add:w,remove:E,getByUid:W,getByDom:se,addToWorld:h,removeFromWorld:y,broadcast:P,broadcastOn:$,broadcastEvent:V}},SH=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:De(t.items,s.interpreter)}),jE=te([le("prefix","form-field"),Vs("fieldBehaviours",[fn,nt])]),xH=te([Gc({schema:[Te("dom")],name:"label"}),Gc({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Te("text")],name:"aria-descriptor"}),Sr({factory:{sketch:t=>{const s=ww(t,["factory"]);return t.factory.sketch(s)}},schema:[Te("factory")],name:"field"})]),AO=(t,s,c,i)=>{const d=zs(t.fieldBehaviours,[fn.config({find:y=>qn(y,t,"field")}),nt.config({store:{mode:"manual",getValue:y=>fn.getCurrent(y).bind(nt.getValue),setValue:(y,w)=>{fn.getCurrent(y).each(E=>{nt.setValue(E,w)})}}})]),g=Fn([lo((y,w)=>{const E=Mi(y,t,["label","field","aria-descriptor"]);E.field().each(T=>{const A=ut(t.prefix);E.label().each(P=>{Dt(P.element,"for",A),Dt(T.element,"id",A)}),E["aria-descriptor"]().each(P=>{const $=ut(t.prefix);Dt(P.element,"id",$),Dt(T.element,"aria-describedby",$)})})})]),h={getField:y=>qn(y,t,"field"),getLabel:y=>qn(y,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:d,events:g,apis:h}},Bn=pr({name:"FormField",configFields:jE(),partFields:xH(),factory:AO,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}});var EH=tinymce.util.Tools.resolve("tinymce.html.Entities");const Q2=(t,s,c,i)=>{const d=TH(t,s,c,i);return Bn.sketch(d)},NN=(t,s)=>Q2(t,s,[],[]),TH=(t,s,c,i)=>({dom:BN(c),components:t.toArray().concat([s]),fieldBehaviours:$e(i)}),_H=()=>BN([]),BN=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),zm=(t,s)=>Bn.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[xo(s.translate(t))]}),Kc=ut("form-component-change"),eC=ut("form-close"),_g=ut("form-cancel"),Cd=ut("form-action"),tC=ut("form-submit"),GE=ut("form-block"),qE=ut("form-unblock"),$N=ut("form-tabchange"),FN=ut("form-resize"),kH=(t,s,c)=>{const i=t.label.map($=>zm($,s)),d=s.icons(),g=$=>{var V;return(V=d[$])!==null&&V!==void 0?V:$},h=$=>(V,W)=>{ul(W.event.target,"[data-collection-item-value]").each(se=>{$(V,W,se,qt(se,"data-collection-item-value"))})},y=($,V)=>{const se=s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()?" tox-collection__item--state-disabled":"",G=De(V,be=>{const ye=$i.translate(be.text),We=t.columns===1?`<div class="tox-collection__item-label">${ye}</div>`:"",at=`<div class="tox-collection__item-icon">${g(be.icon)}</div>`,xe={_:" "," - ":" ","-":" "},lt=ye.replace(/\_| \- |\-/g,Je=>xe[Je]);return`<div data-mce-tooltip="${lt}" class="tox-collection__item${se}" tabindex="-1" data-collection-item-value="${EH.encodeAllRaw(be.value)}" aria-label="${lt}">${at}${We}</div>`}),ee=t.columns!=="auto"&&t.columns>1?Jr(G,t.columns):[G],oe=De(ee,be=>`<div class="tox-collection__group">${be.join("")}</div>`);yc($.element,oe.join(""))},w=h(($,V,W,se)=>{V.stop(),s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()||ht($,Cd,{name:t.name,value:se})}),E=[Ee(za(),h(($,V,W)=>{pa(W,!0)})),Ee(Yd(),w),Ee($1(),w),Ee(Ua(),h(($,V,W)=>{go($.element,"."+vp).each(se=>{In(se,vp)}),ns(W,vp)})),Ee(xw(),h($=>{go($.element,"."+vp).each(V=>{In(V,vp),zf(V)})})),Wl(h(($,V,W,se)=>{ht($,Cd,{name:t.name,value:se})}))],T=($,V)=>De(sr($.element,".tox-collection__item"),V),A=Bn.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:an},behaviours:$e([Mt.config({disabled:()=>s.checkUiComponentContext(t.context).shouldDisable,onDisabled:$=>{T($,V=>{ns(V,"tox-collection__item--state-disabled"),Dt(V,"aria-disabled",!0)})},onEnabled:$=>{T($,V=>{In(V,"tox-collection__item--state-disabled"),Ro(V,"aria-disabled")})}}),os(()=>s.checkUiComponentContext(t.context)),Ht.config({}),Uo.config({...s.tooltips.getConfig({tooltipText:"",onShow:$=>{go($.element,"."+vp+"[data-mce-tooltip]").each(V=>{Lo(V,"data-mce-tooltip").each(W=>{Uo.setComponents($,s.tooltips.getComponents({tooltipText:W}))})})}}),mode:"children-keyboard-focus",anchor:$=>({type:"node",node:go($.element,"."+vp).orThunk(()=>uS(".tox-collection__item")),root:$.element,layouts:{onLtr:te([is,Nn,ps,or,bs,vs]),onRtl:te([is,Nn,ps,or,bs,vs])},bubble:Ya(0,-2,{})})}),nt.config({store:{mode:"memory",initialValue:c.getOr([])},onSetValue:($,V)=>{y($,V),t.columns==="auto"&&nO($,5,"tox-collection__item").each(({numRows:W,numColumns:se})=>{xt.setGridSize($,W,se)}),sn($,FN)}}),ho.config({}),xt.config(DL(t.columns,"normal")),Zt("collection-events",E)]),eventOrder:{[nr()]:["disabling","alloy.base.behaviour","collection-events"],[Ua()]:["collection-events","tooltipping"]}});return Q2(i,A,["tox-form__group--collection"],[])},OH=["input","textarea"],IN=t=>{const s=Da(t);return $o(OH,s)},RO=(t,s)=>{const c=s.getRoot(t).getOr(t.element);In(c,s.invalidClass),s.notify.each(i=>{IN(t.element)&&Dt(t.element,"aria-invalid",!1),i.getContainer(t).each(d=>{yc(d,i.validHtml)}),i.onValid(t)})},Rp=(t,s,c,i)=>{const d=s.getRoot(t).getOr(t.element);ns(d,s.invalidClass),s.notify.each(g=>{IN(t.element)&&Dt(t.element,"aria-invalid",!0),g.getContainer(t).each(h=>{yc(h,i)}),g.onInvalid(t,i)})},LN=(t,s,c)=>s.validator.fold(()=>Nr.pure(tn.value(!0)),i=>i.validate(t)),DO=(t,s,c)=>(s.notify.each(i=>{i.onValidate(t)}),LN(t,s).map(i=>t.getSystem().isConnected()?i.fold(d=>(Rp(t,s,c,d),tn.error(d)),d=>(RO(t,s),tn.value(d))):tn.error("No longer in system")));var KE=Object.freeze({__proto__:null,markValid:RO,markInvalid:Rp,query:LN,run:DO,isInvalid:(t,s)=>{const c=s.getRoot(t).getOr(t.element);return Wr(c,s.invalidClass)}}),MO=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(c=>Fn([Ee(c.onEvent,i=>{DO(i,t,s).get(an)})].concat(c.validateOnLoad?[lo(i=>{DO(i,t,s).get(J)})]:[]))).getOr({})}),HN=[Te("invalidClass"),le("getRoot",k.none),Fs("notify",[le("aria","alert"),le("getContainer",k.none),le("validHtml",""),bn("onValid"),bn("onInvalid"),bn("onValidate")]),Fs("validator",[Te("validate"),le("onEvent","input"),le("validateOnLoad",!0)])];const wd=Ls({fields:HN,name:"invalidating",active:MO,apis:KE,extra:{validation:t=>s=>{const c=nt.getValue(s);return Nr.pure(t(c))}}});var AH=Object.freeze({__proto__:null,events:()=>Fn([Mv(ek(),Ot)]),exhibit:()=>Ur({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const b0=Ls({fields:[],name:"unselecting",active:AH}),VN=(t,s)=>ka.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:$e([ti.button(()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable),os(()=>s.providers.checkUiComponentContext(t.context)),b0.config({}),ho.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:c=>Nr.nu(i=>t.fetch(i)).map(i=>k.from(xN(zo(EO(ut("menu-value"),i,d=>{t.onItemAction(c,d)},t.columns,t.presets,vl.CLOSE_ON_EXECUTE,Vn,s.providers),{movement:FE(t.columns,t.presets)})))),parts:{menu:M2(!1,1,t.presets)}}),zN=ut("color-input-change"),UN=ut("color-swatch-change"),PO=ut("color-picker-cancel"),RH=(t,s,c,i)=>{const d=Bn.parts.field({factory:cu,inputClasses:["tox-textfield"],data:i,onSetValue:E=>wd.run(E).get(J),inputBehaviours:$e([Mt.config({disabled:()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable}),os(()=>s.providers.checkUiComponentContext(t.context)),ho.config({}),wd.config({invalidClass:"tox-textbox-field-invalid",getRoot:E=>di(E.element),notify:{onValid:E=>{const T=nt.getValue(E);ht(E,zN,{color:T})}},validator:{validateOnLoad:!1,validate:E=>{const T=nt.getValue(E);if(T.length===0)return Nr.pure(tn.value(!0));{const A=ae.fromTag("span");Vt(A,"background-color",T);const P=Go(A,"background-color").fold(()=>tn.error("blah"),$=>tn.value(T));return Nr.pure(P)}}}})]),selectOnFocus:!1}),g=t.label.map(E=>zm(E,s.providers)),h=(E,T)=>{ht(E,UN,{value:T})},y=(E,T)=>{w.getOpt(E).each(A=>{T==="custom"?c.colorPicker(P=>{P.fold(()=>sn(A,PO),$=>{h(A,$),Z2(t.storageKey,$)})},"#ffffff"):T==="remove"?h(A,""):h(A,T)})},w=On(VN({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[bs,ps,is],onLtr:()=>[ps,bs,is]},components:[],fetch:Us(c.getColors(t.storageKey),t.storageKey,c.hasCustomColors()),columns:c.getColorCols(t.storageKey),presets:"color",onItemAction:y,context:t.context},s));return Bn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:g.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,w.asSpec()]}]),fieldBehaviours:$e([Zt("form-field-events",[Ee(zN,(E,T)=>{w.getOpt(E).each(A=>{Vt(A.element,"background-color",T.event.color)}),ht(E,Kc,{name:t.name})}),Ee(UN,(E,T)=>{Bn.getField(E).each(A=>{nt.setValue(A,T.event.value),fn.getCurrent(E).each(Bt.focus)})}),Ee(PO,(E,T)=>{Bn.getField(E).each(A=>{fn.getCurrent(E).each(Bt.focus)})})])])})},WN=Gc({schema:[Te("dom")],name:"label"}),Um=t=>Gc({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),i=>({events:Fn([Sf(Ci(),(d,g,h)=>i(d,h),[s]),Sf(Lc(),(d,g,h)=>i(d,h),[s]),Sf(mh(),(d,g,h)=>{h.mouseIsDown.get()&&i(d,h)},[s])])}))}),ZN=Um("top-left"),DH=Um("top"),MH=Um("top-right"),PH=Um("right"),NH=Um("bottom-right"),BH=Um("bottom"),$H=Um("bottom-left"),NO=Um("left"),FH=Sr({name:"thumb",defaults:te({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:Fn([Ul(Ci(),t,"spectrum"),Ul($u(),t,"spectrum"),Ul(qd(),t,"spectrum"),Ul(Lc(),t,"spectrum"),Ul(mh(),t,"spectrum"),Ul(N1(),t,"spectrum")])})}),YE=t=>ys(t.event),jN=Sr({schema:[Rn("mouseIsDown",()=>St(!1))],name:"spectrum",overrides:t=>{const c=t.model.manager,i=(d,g)=>c.getValueFromEvent(g).map(h=>c.setValueFrom(d,t,h));return{behaviours:$e([xt.config({mode:"special",onLeft:(d,g)=>c.onLeft(d,t,YE(g)),onRight:(d,g)=>c.onRight(d,t,YE(g)),onUp:(d,g)=>c.onUp(d,t,YE(g)),onDown:(d,g)=>c.onDown(d,t,YE(g))}),ho.config({}),Bt.config({})]),events:Fn([Ee(Ci(),i),Ee($u(),i),Ee(Lc(),i),Ee(mh(),(d,g)=>{t.mouseIsDown.get()&&i(d,g)})])}}});var IH=[WN,NO,PH,DH,BH,ZN,MH,$H,NH,FH,jN];const nC=te("slider.change.value"),LH=t=>t.type.indexOf("touch")!==-1,BO=t=>{const s=t.event.raw;if(LH(s)){const c=s;return c.touches!==void 0&&c.touches.length===1?k.some(c.touches[0]).map(i=>Do(i.clientX,i.clientY)):k.none()}else{const c=s;return c.clientX!==void 0?k.some(c).map(i=>Do(i.clientX,i.clientY)):k.none()}},HH="top",VH="right",GN="bottom",qN="left",Dp=t=>t.model.minX,Mp=t=>t.model.minY,XE=t=>t.model.minX-1,JE=t=>t.model.minY-1,Pp=t=>t.model.maxX,Np=t=>t.model.maxY,oC=t=>t.model.maxX+1,sC=t=>t.model.maxY+1,$O=(t,s,c)=>s(t)-c(t),rC=t=>$O(t,Pp,Dp),FO=t=>$O(t,Np,Mp),IO=t=>rC(t)/2,KN=t=>FO(t)/2,v0=(t,s)=>s?t.stepSize*t.speedMultiplier:t.stepSize,YN=t=>t.snapToGrid,XN=t=>t.snapStart,QE=t=>t.rounded,xl=(t,s)=>t[s+"-edge"]!==void 0,JN=t=>xl(t,qN),y0=t=>xl(t,VH),QN=t=>xl(t,HH),eT=t=>xl(t,GN),Wm=t=>t.model.value.get(),kg=(t,s)=>({x:t,y:s}),El=(t,s)=>{ht(t,nC(),{value:s})},eB=(t,s)=>{El(t,kg(XE(s),JE(s)))},zH=(t,s)=>{El(t,JE(s))},LO=(t,s)=>{El(t,kg(IO(s),JE(s)))},HO=(t,s)=>{El(t,kg(oC(s),JE(s)))},VO=(t,s)=>{El(t,oC(s))},UH=(t,s)=>{El(t,kg(oC(s),KN(s)))},ni=(t,s)=>{El(t,kg(oC(s),sC(s)))},WH=(t,s)=>{El(t,sC(s))},ZH=(t,s)=>{El(t,kg(IO(s),sC(s)))},tB=(t,s)=>{El(t,kg(XE(s),sC(s)))},nB=(t,s)=>{El(t,XE(s))},jH=(t,s)=>{El(t,kg(XE(s),KN(s)))},zO=(t,s,c,i)=>t<s?t:t>c?c:t===s?s-1:Math.max(s,t-i),UO=(t,s,c,i)=>t>c?t:t<s?s:t===c?c+1:Math.min(c,t+i),oB=(t,s,c)=>Math.max(s,Math.min(c,t)),GH=(t,s,c,i,d)=>d.fold(()=>{const g=t-s,h=Math.round(g/i)*i;return oB(s+h,s-1,c+1)},g=>{const h=(t-g)%i,y=Math.round(h/i),w=Math.floor((t-g)/i),E=Math.floor((c-g)/i),T=Math.min(E,w+y),A=g+T*i;return Math.max(g,A)}),qH=(t,s,c)=>Math.min(c,Math.max(t,s))-s,sB=t=>{const{min:s,max:c,range:i,value:d,step:g,snap:h,snapStart:y,rounded:w,hasMinEdge:E,hasMaxEdge:T,minBound:A,maxBound:P,screenRange:$}=t,V=E?s-1:s,W=T?c+1:c;if(d<A)return V;if(d>P)return W;{const se=qH(d,A,P),G=oB(se/$*i+s,V,W);return h&&G>=s&&G<=c?GH(G,s,c,g,y):w?Math.round(G):G}},WO=t=>{const{min:s,max:c,range:i,value:d,hasMinEdge:g,hasMaxEdge:h,maxBound:y,maxOffset:w,centerMinEdge:E,centerMaxEdge:T}=t;return d<s?g?0:E:d>c?h?y:T:(d-s)/i*w},ZO="top",rB="right",cB="bottom",tT="left",jO="width",aB="height",lu=t=>t.element.dom.getBoundingClientRect(),Ii=(t,s)=>t[s],cC=t=>{const s=lu(t);return Ii(s,tT)},nT=t=>{const s=lu(t);return Ii(s,rB)},oT=t=>{const s=lu(t);return Ii(s,ZO)},sT=t=>{const s=lu(t);return Ii(s,cB)},Bp=t=>{const s=lu(t);return Ii(s,jO)},GO=t=>{const s=lu(t);return Ii(s,aB)},qO=(t,s,c)=>(t+s)/2-c,KO=(t,s)=>{const c=lu(t),i=lu(s),d=Ii(c,tT),g=Ii(c,rB),h=Ii(i,tT);return qO(d,g,h)},iB=(t,s)=>{const c=lu(t),i=lu(s),d=Ii(c,ZO),g=Ii(c,cB),h=Ii(i,ZO);return qO(d,g,h)},rT=(t,s)=>{ht(t,nC(),{value:s})},C0=(t,s,c)=>{const i={min:Dp(s),max:Pp(s),range:rC(s),value:c,step:v0(s),snap:YN(s),snapStart:XN(s),rounded:QE(s),hasMinEdge:JN(s),hasMaxEdge:y0(s),minBound:cC(t),maxBound:nT(t),screenRange:Bp(t)};return sB(i)},KH=(t,s,c)=>{const i=C0(t,s,c);return rT(t,i),i},YH=(t,s)=>{const c=Dp(s);rT(t,c)},lB=(t,s)=>{const c=Pp(s);rT(t,c)},uB=(t,s,c,i)=>{const g=(t>0?UO:zO)(Wm(c),Dp(c),Pp(c),v0(c,i));return rT(s,g),k.some(g)},cT=t=>(s,c,i)=>uB(t,s,c,i).map(Ot),dB=t=>BO(t).map(c=>c.left),Oc=(t,s,c,i,d)=>{const h=Bp(t),y=i.bind(T=>k.some(KO(T,t))).getOr(0),w=d.bind(T=>k.some(KO(T,t))).getOr(h),E={min:Dp(s),max:Pp(s),range:rC(s),value:c,hasMinEdge:JN(s),hasMaxEdge:y0(s),minBound:cC(t),minOffset:0,maxBound:nT(t),maxOffset:h,centerMinEdge:y,centerMaxEdge:w};return WO(E)},aT=(t,s,c,i,d,g)=>{const h=Oc(s,g,c,i,d);return cC(s)-cC(t)+h},XH=(t,s,c,i)=>{const d=Wm(c),g=aT(t,i.getSpectrum(t),d,i.getLeftEdge(t),i.getRightEdge(t),c),h=tc(s.element)/2;Vt(s.element,"left",g-h+"px")},JH=cT(-1),mB=cT(1),QH=k.none,eV=k.none,tV={"top-left":k.none(),top:k.none(),"top-right":k.none(),right:k.some(VO),"bottom-right":k.none(),bottom:k.none(),"bottom-left":k.none(),left:k.some(nB)};var fB=Object.freeze({__proto__:null,setValueFrom:KH,setToMin:YH,setToMax:lB,findValueOfOffset:C0,getValueFromEvent:dB,findPositionOfValue:aT,setPositionFromValue:XH,onLeft:JH,onRight:mB,onUp:QH,onDown:eV,edgeActions:tV});const Li=(t,s)=>{ht(t,nC(),{value:s})},aC=(t,s,c)=>{const i={min:Mp(s),max:Np(s),range:FO(s),value:c,step:v0(s),snap:YN(s),snapStart:XN(s),rounded:QE(s),hasMinEdge:QN(s),hasMaxEdge:eT(s),minBound:oT(t),maxBound:sT(t),screenRange:GO(t)};return sB(i)},gB=(t,s,c)=>{const i=aC(t,s,c);return Li(t,i),i},iT=(t,s)=>{const c=Mp(s);Li(t,c)},YO=(t,s)=>{const c=Np(s);Li(t,c)},nV=(t,s,c,i)=>{const g=(t>0?UO:zO)(Wm(c),Mp(c),Np(c),v0(c,i));return Li(s,g),k.some(g)},hB=t=>(s,c,i)=>nV(t,s,c,i).map(Ot),oV=t=>BO(t).map(c=>c.top),sV=(t,s,c,i,d)=>{const h=GO(t),y=i.bind(T=>k.some(iB(T,t))).getOr(0),w=d.bind(T=>k.some(iB(T,t))).getOr(h),E={min:Mp(s),max:Np(s),range:FO(s),value:c,hasMinEdge:QN(s),hasMaxEdge:eT(s),minBound:oT(t),minOffset:0,maxBound:sT(t),maxOffset:h,centerMinEdge:y,centerMaxEdge:w};return WO(E)},XO=(t,s,c,i,d,g)=>{const h=sV(s,g,c,i,d);return oT(s)-oT(t)+h},rV=(t,s,c,i)=>{const d=Wm(c),g=XO(t,i.getSpectrum(t),d,i.getTopEdge(t),i.getBottomEdge(t),c),h=gs(s.element)/2;Vt(s.element,"top",g-h+"px")},cV=k.none,pB=k.none,aV=hB(-1),Sd=hB(1),lT={"top-left":k.none(),top:k.some(zH),"top-right":k.none(),right:k.none(),"bottom-right":k.none(),bottom:k.some(WH),"bottom-left":k.none(),left:k.none()};var iV=Object.freeze({__proto__:null,setValueFrom:gB,setToMin:iT,setToMax:YO,findValueOfOffset:aC,getValueFromEvent:oV,findPositionOfValue:XO,setPositionFromValue:rV,onLeft:cV,onRight:pB,onUp:aV,onDown:Sd,edgeActions:lT});const uT=(t,s)=>{ht(t,nC(),{value:s})},iC=(t,s)=>({x:t,y:s}),bB=(t,s,c)=>{const i=C0(t,s,c.left),d=aC(t,s,c.top),g=iC(i,d);return uT(t,g),g},JO=(t,s,c,i,d)=>{const g=t>0?UO:zO,h=s?Wm(i).x:g(Wm(i).x,Dp(i),Pp(i),v0(i,d)),y=s?g(Wm(i).y,Mp(i),Np(i),v0(i,d)):Wm(i).y;return uT(c,iC(h,y)),k.some(h)},$p=(t,s)=>(c,i,d)=>JO(t,s,c,i,d).map(Ot),lC=(t,s)=>{const c=Dp(s),i=Mp(s);uT(t,iC(c,i))},uC=(t,s)=>{const c=Pp(s),i=Np(s);uT(t,iC(c,i))},vB=t=>BO(t),yB=(t,s,c,i)=>{const d=Wm(c),g=aT(t,i.getSpectrum(t),d.x,i.getLeftEdge(t),i.getRightEdge(t),c),h=XO(t,i.getSpectrum(t),d.y,i.getTopEdge(t),i.getBottomEdge(t),c),y=tc(s.element)/2,w=gs(s.element)/2;Vt(s.element,"left",g-y+"px"),Vt(s.element,"top",h-w+"px")},CB=$p(-1,!1),wB=$p(1,!1),lV=$p(-1,!0),uV=$p(1,!0),dV={"top-left":k.some(eB),top:k.some(LO),"top-right":k.some(HO),right:k.some(UH),"bottom-right":k.some(ni),bottom:k.some(ZH),"bottom-left":k.some(tB),left:k.some(jH)};var mV=Object.freeze({__proto__:null,setValueFrom:bB,setToMin:lC,setToMax:uC,getValueFromEvent:vB,setPositionFromValue:yB,onLeft:CB,onRight:wB,onUp:lV,onDown:uV,edgeActions:dV});const fV=[le("stepSize",1),le("speedMultiplier",10),le("onChange",J),le("onChoose",J),le("onInit",J),le("onDragStart",J),le("onDragEnd",J),le("snapToGrid",!1),le("rounded",!0),kn("snapStart"),Dn("model",Ko("mode",{x:[le("minX",0),le("maxX",100),Rn("value",t=>St(t.mode.minX)),Te("getInitialValue"),Qn("manager",fB)],y:[le("minY",0),le("maxY",100),Rn("value",t=>St(t.mode.minY)),Te("getInitialValue"),Qn("manager",iV)],xy:[le("minX",0),le("maxX",100),le("minY",0),le("maxY",100),Rn("value",t=>St({x:t.mode.minX,y:t.mode.minY})),Te("getInitialValue"),Qn("manager",mV)]})),Vs("sliderBehaviours",[xt,nt]),Rn("mouseIsDown",()=>St(!1))],Hi=pr({name:"Slider",configFields:fV,partFields:IH,factory:(t,s,c,i)=>{const d=ye=>ot(ye,t,"thumb"),g=ye=>ot(ye,t,"spectrum"),h=ye=>qn(ye,t,"left-edge"),y=ye=>qn(ye,t,"right-edge"),w=ye=>qn(ye,t,"top-edge"),E=ye=>qn(ye,t,"bottom-edge"),T=t.model,A=T.manager,P=(ye,We)=>{A.setPositionFromValue(ye,We,t,{getLeftEdge:h,getRightEdge:y,getTopEdge:w,getBottomEdge:E,getSpectrum:g})},$=(ye,We)=>{T.value.set(We);const at=d(ye);P(ye,at)},V=(ye,We)=>{$(ye,We);const at=d(ye);return t.onChange(ye,at,We),k.some(!0)},W=ye=>{A.setToMin(ye,t)},se=ye=>{A.setToMax(ye,t)},G=ye=>{const We=()=>{qn(ye,t,"thumb").each(xe=>{const lt=T.value.get();t.onChoose(ye,xe,lt)})},at=t.mouseIsDown.get();t.mouseIsDown.set(!1),at&&We()},ee=(ye,We)=>{We.stop(),t.mouseIsDown.set(!0),t.onDragStart(ye,d(ye))},oe=(ye,We)=>{We.stop(),t.onDragEnd(ye,d(ye)),G(ye)},be=ye=>{qn(ye,t,"spectrum").map(xt.focusIn)};return{uid:t.uid,dom:t.dom,components:s,behaviours:zs(t.sliderBehaviours,[xt.config({mode:"special",focusIn:be}),nt.config({store:{mode:"manual",getValue:ye=>T.value.get(),setValue:$}}),wc.config({channels:{[Nb()]:{onReceive:G}}})]),events:Fn([Ee(nC(),(ye,We)=>{V(ye,We.event.value)}),lo((ye,We)=>{const at=T.getInitialValue();T.value.set(at);const xe=d(ye);P(ye,xe);const lt=g(ye);t.onInit(ye,xe,lt,T.value.get())}),Ee(Ci(),ee),Ee(qd(),oe),Ee(Lc(),(ye,We)=>{be(ye),ee(ye,We)}),Ee(N1(),oe)]),apis:{resetToMin:W,resetToMax:se,setValue:$,refresh:P},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,c)=>{t.setValue(s,c)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),QO=ut("rgb-hex-update"),eA=ut("slider-update"),SB=ut("palette-update"),xB=(t,s)=>{const c=Hi.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),i=Hi.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return Hi.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:te(0)},components:[c,i],sliderBehaviours:$e([Bt.config({})]),onChange:(d,g,h)=>{Dt(d.element,"aria-valuenow",Math.floor(360-h*3.6)),ht(d,eA,{value:h})}})},w0="form",hV=[Vs("formBehaviours",[nt])],tA=t=>"<alloy.field."+t+">",pV=t=>{const s=(()=>{const g=[];return{field:(y,w)=>(g.push(y),Zb(w0,tA(y),w)),record:te(g)}})(),c=t(s),i=s.record(),d=De(i,g=>Sr({name:g,pname:tA(g)}));return sp(w0,hV,d,vV,c)},bV=(t,s)=>t.fold(()=>tn.error(s),tn.value),vV=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:zs(t.formBehaviours,[nt.config({store:{mode:"manual",getValue:c=>{const i=Sx(c,t);return Io(i,(d,g)=>d().bind(h=>{const y=fn.getCurrent(h);return bV(y,new Error(`Cannot find a current component to extract the value from for form part '${g}': `+Gu(h.element)))}).map(nt.getValue))},setValue:(c,i)=>{Ms(i,(d,g)=>{qn(c,t,g).each(h=>{fn.getCurrent(h).each(y=>{nt.setValue(y,d)})})})}}})]),apis:{getField:(c,i)=>qn(c,t,i).bind(fn.getCurrent)}}),S0={getField:ob((t,s,c)=>t.getField(s,c)),sketch:pV},nA=ut("valid-input"),EB=ut("invalid-input"),oA=ut("validating-input"),dC="colorcustom.rgb.",Zm={isEnabled:Ot,setEnabled:J,immediatelyShow:J,immediatelyHide:J},sA=(t,s,c,i,d,g)=>{const h=(W,se)=>{const G=se.get();W!==G.isEnabled()&&(G.setEnabled(W),W?G.immediatelyShow():G.immediatelyHide())},y=(W,se,G)=>wd.config({invalidClass:s("invalid"),notify:{onValidate:ee=>{ht(ee,oA,{type:W})},onValid:ee=>{h(!1,G),ht(ee,nA,{type:W,value:nt.getValue(ee)})},onInvalid:ee=>{h(!0,G),ht(ee,EB,{type:W,value:nt.getValue(ee)})}},validator:{validate:ee=>{const oe=nt.getValue(ee),be=se(oe)?tn.value(!0):tn.error(t("aria.input.invalid"));return Nr.pure(be)},validateOnLoad:!1}}),w=(W,se,G,ee,oe)=>{const be=St(Zm),ye=t(dC+"range"),We=Bn.parts.label({dom:{tag:"label",attributes:{"aria-label":ee}},components:[xo(G)]}),at=Bn.parts.field({data:oe,factory:cu,inputAttributes:{type:"text",...se==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:$e([y(se,W,be),ho.config({}),Uo.config({...d({tooltipText:"",onSetup:_n=>{be.set({isEnabled:()=>Uo.isEnabled(_n),setEnabled:gt=>Uo.setEnabled(_n,gt),immediatelyShow:()=>Uo.immediateOpenClose(_n,!0),immediatelyHide:()=>Uo.immediateOpenClose(_n,!1)}),Uo.setEnabled(_n,!1)},onShow:(_n,gt)=>{Uo.setComponents(_n,[{dom:{tag:"p",classes:[s("rgb-warning-note")]},components:[xo(t(se==="hex"?"colorcustom.rgb.invalidHex":"colorcustom.rgb.invalid"))]}])}})})]),onSetValue:_n=>{wd.isInvalid(_n)&&wd.run(_n).get(J)}}),xe=ut("aria-invalid"),lt=On(g("invalid",k.some(xe),"warning")),Je=On({dom:{tag:"div",classes:[s("invalid-icon")]},components:[lt.asSpec()]}),mt=[We,at,Je.asSpec()],ln=se!=="hex"?[Bn.parts["aria-descriptor"]({text:ye})]:[],ro=mt.concat(ln);return{dom:{tag:"div",attributes:{role:"presentation"},classes:[s("rgb-container")]},components:ro}},E=(W,se)=>{const G=g0(se);return S0.getField(W,"hex").each(ee=>{Bt.isFocused(ee)||nt.setValue(W,{hex:G.value})}),G},T=(W,se)=>{const G=se.red,ee=se.green,oe=se.blue;nt.setValue(W,{red:G,green:ee,blue:oe})},A=On({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),P=(W,se)=>{A.getOpt(W).each(G=>{Vt(G.element,"background-color","#"+se.value)})};return Tc({factory:()=>{const W={red:St(k.some(255)),green:St(k.some(255)),blue:St(k.some(255)),hex:St(k.some("ffffff"))},se=(gt,Me)=>{const Ye=W2(Me);T(gt,Ye),be(Ye)},G=gt=>W[gt].get(),ee=(gt,Me)=>{W[gt].set(Me)},oe=()=>G("red").bind(gt=>G("green").bind(Me=>G("blue").map(Ye=>_p(gt,Me,Ye,1)))),be=gt=>{const Me=gt.red,Ye=gt.green,It=gt.blue;ee("red",k.some(Me)),ee("green",k.some(Ye)),ee("blue",k.some(It))},ye=(gt,Me)=>{const Ye=Me.event;Ye.type!=="hex"?ee(Ye.type,k.none()):i(gt)},We=(gt,Me)=>{c(gt);const Ye=OE(Me);ee("hex",k.some(Ye.value));const It=W2(Ye);T(gt,It),be(It),ht(gt,QO,{hex:Ye}),P(gt,Ye)},at=(gt,Me,Ye)=>{const It=parseInt(Ye,10);ee(Me,k.some(It)),oe().each(Qt=>{const wt=E(gt,Qt);ht(gt,QO,{hex:wt}),P(gt,wt)})},xe=gt=>gt.type==="hex",lt=(gt,Me)=>{const Ye=Me.event;xe(Ye)?We(gt,Ye.value):at(gt,Ye.type,Ye.value)},Je=gt=>({label:t(dC+gt+".label"),description:t(dC+gt+".description")}),mt=Je("red"),ln=Je("green"),ro=Je("blue"),_n=Je("hex");return zo(S0.sketch(gt=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[gt.field("red",Bn.sketch(w(gO,"red",mt.label,mt.description,255))),gt.field("green",Bn.sketch(w(gO,"green",ln.label,ln.description,255))),gt.field("blue",Bn.sketch(w(gO,"blue",ro.label,ro.description,255))),gt.field("hex",Bn.sketch(w(uO,"hex",_n.label,_n.description,"ffffff"))),A.asSpec()],formBehaviours:$e([wd.config({invalidClass:s("form-invalid")}),Zt("rgb-form-events",[Ee(nA,lt),Ee(EB,ye),Ee(oA,ye)])])})),{apis:{updateHex:(gt,Me)=>{nt.setValue(gt,{hex:Me.value}),se(gt,Me),P(gt,Me)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(W,se,G)=>{W.updateHex(se,G)}},extraApis:{}})},TB=(t,s)=>{const c=Hi.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),i=Hi.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(E,T)=>{const{width:A,height:P}=E,$=E.getContext("2d");if($===null)return;$.fillStyle=T,$.fillRect(0,0,A,P);const V=$.createLinearGradient(0,0,A,0);V.addColorStop(0,"rgba(255,255,255,1)"),V.addColorStop(1,"rgba(255,255,255,0)"),$.fillStyle=V,$.fillRect(0,0,A,P);const W=$.createLinearGradient(0,0,0,P);W.addColorStop(0,"rgba(0,0,0,0)"),W.addColorStop(1,"rgba(0,0,0,1)"),$.fillStyle=W,$.fillRect(0,0,A,P)},g=(E,T)=>{const A=E.components()[0].element.dom,P=Ap(T,100,100),$=$P(P);d(A,IP($))},h=(E,T)=>{const A=j2(W2(T));Hi.setValue(E,{x:A.saturation,y:100-A.value}),Dt(E.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",A.saturation,A.value]))};return Tc({factory:E=>{const T=te({x:0,y:0}),A=(V,W,se)=>{uo(se)||Dt(V.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",Math.floor(se.x),Math.floor(100-se.y)])),ht(V,SB,{value:se})},P=(V,W,se,G)=>{d(se.element.dom,IP(LP))},$=$e([fn.config({find:k.some}),Bt.config({})]);return Hi.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":t(["Saturation {0}%, Brightness {1}%",0,0])},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:T},rounded:!1,components:[c,i],onChange:A,onInit:P,sliderBehaviours:$})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(E,T,A)=>{g(T,A)},setThumb:(E,T,A)=>{h(T,A)}},extraApis:{}})},_B=(t,s,c,i)=>{const d=h=>{const y=sA(t,s,h.onValidHex,h.onInvalidHex,c,i),w=TB(t,s),E=xe=>(100-xe)/100*360,T=xe=>100-xe/360*100,A={paletteRgba:St(LP),paletteHue:St(0)},P=On(xB(t,s)),$=On(w.sketch({})),V=On(y.sketch({})),W=(xe,lt,Je)=>{$.getOpt(xe).each(mt=>{w.setHue(mt,Je)})},se=(xe,lt)=>{V.getOpt(xe).each(Je=>{y.updateHex(Je,lt)})},G=(xe,lt,Je)=>{P.getOpt(xe).each(mt=>{Hi.setValue(mt,T(Je))})},ee=(xe,lt)=>{$.getOpt(xe).each(Je=>{w.setThumb(Je,lt)})},oe=(xe,lt)=>{const Je=W2(xe);A.paletteRgba.set(Je),A.paletteHue.set(lt)},be=(xe,lt,Je,mt)=>{oe(lt,Je),it(mt,ln=>{ln(xe,lt,Je)})},ye=()=>{const xe=[se];return(lt,Je)=>{const mt=Je.event.value,ln=A.paletteHue.get(),ro=Ap(ln,mt.x,100-mt.y),_n=KP(ro);be(lt,_n,ln,xe)}},We=()=>{const xe=[W,se];return(lt,Je)=>{const mt=E(Je.event.value),ln=A.paletteRgba.get(),ro=j2(ln),_n=Ap(mt,ro.saturation,ro.value),gt=KP(_n);be(lt,gt,mt,xe)}},at=()=>{const xe=[W,G,ee];return(lt,Je)=>{const mt=Je.event.hex,ln=qP(mt);be(lt,mt,ln.hue,xe)}};return{uid:h.uid,dom:h.dom,components:[$.asSpec(),P.asSpec(),V.asSpec()],behaviours:$e([Zt("colour-picker-events",[Ee(QO,at()),Ee(SB,ye()),Ee(eA,We())]),fn.config({find:xe=>V.getOpt(xe)}),xt.config({mode:"acyclic"})])}};return Tc({name:"ColourPicker",configFields:[Te("dom"),le("onValidHex",J),le("onInvalidHex",J)],factory:d})},Vi={self:()=>fn.config({find:k.some}),memento:t=>fn.config({find:t.getOpt}),childAt:t=>fn.config({find:s=>Su(s.element,t).bind(c=>s.getSystem().getByDom(c).toOptional())})},OB=kt([le("preprocess",an),le("postprocess",an)]),CV=(t,s)=>{const c=sc("RepresentingConfigs.memento processors",OB,s);return nt.config({store:{mode:"manual",getValue:i=>{const d=t.get(i),g=nt.getValue(d);return c.postprocess(g)},setValue:(i,d)=>{const g=c.preprocess(d),h=t.get(i);nt.setValue(h,g)}}})},Fp=(t,s,c)=>nt.config({store:{mode:"manual",...t.map(i=>({initialValue:i})).getOr({}),getValue:s,setValue:c}}),AB=(t,s,c)=>Fp(t,i=>s(i.element),(i,d)=>c(i.element,d)),wV=t=>AB(t,Gl,yc),dT=t=>nt.config({store:{mode:"memory",initialValue:t}}),RB={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.rgb.invalid":"Numbers only, 0 to 255","colorcustom.rgb.invalidHex":"Hexadecimal only, 000000 to FFFFFF","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},DB=t=>s=>ke(s)?t.translate(RB[s]):t.translate(s),SV=(t,s,c)=>{const i=E=>"tox-"+E,d=(E,T,A=E,P=E)=>Qa(A,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+E],attributes:{title:s.translate(P),"aria-live":"polite",...T.fold(()=>({}),$=>({id:$}))}},s.icons),g=_B(DB(s),i,s.tooltips.getConfig,d),h=E=>{ht(E,Cd,{name:"hex-valid",value:!0})},y=E=>{ht(E,Cd,{name:"hex-valid",value:!1})},w=On(g.sketch({dom:{tag:"div",classes:[i("color-picker-container")],attributes:{role:"presentation"}},onValidHex:h,onInvalidHex:y}));return{dom:{tag:"div"},components:[w.asSpec()],behaviours:$e([Fp(c,E=>{const T=w.get(E);return fn.getCurrent(T).bind($=>nt.getValue($).hex).map($=>"#"+J0($,"#")).getOr("")},(E,T)=>{const A=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,P=k.from(A.exec(T)).bind(W=>as(W,1)),$=w.get(E);fn.getCurrent($).fold(()=>{console.log("Can not find form")},W=>{nt.setValue(W,{hex:P.getOr("")}),S0.getField(W,"hex").each(se=>{sn(se,wi())})})}),Vi.self()])}};var xV=tinymce.util.Tools.resolve("tinymce.Resource");const MB=t=>$n(t,"init"),mT=t=>{const s=Mn(),c=On({dom:{tag:t.tag}}),i=Mn(),d=!MB(t)&&t.onFocus.isSome()?[Bt.config({onFocus:g=>{t.onFocus.each(h=>{h(g.element.dom)})}}),ho.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:$e([Zt("custom-editor-events",[lo(g=>{c.getOpt(g).each(h=>{(MB(t)?t.init(h.element.dom):xV.load(t.scriptId,t.scriptUrl).then(y=>y(h.element.dom,t.settings))).then(y=>{i.on(w=>{y.setValue(w)}),i.clear(),s.set(y)})})})]),Fp(k.none(),()=>s.get().fold(()=>i.get().getOr(""),g=>g.getValue()),(g,h)=>{s.get().fold(()=>i.set(h),y=>y.setValue(h))}),Vi.self()].concat(d)),components:[c.asSpec()]}};var jm=tinymce.util.Tools.resolve("tinymce.util.Tools");const cA=ut("browse.files.event"),PB=(t,s)=>{const c=jm.explode(s.getOption("images_file_types")),i=d=>uc(c,g=>Gi(d.name.toLowerCase(),`.${g.toLowerCase()}`));return po(oa(t),i)},NB=(t,s,c)=>{const i=(P,$)=>{$.stop()},d=P=>($,V)=>{it(P,W=>{W($,V)})},g=(P,$)=>{var V;if(!Mt.isDisabled(P)){const W=$.event.raw;ht(P,cA,{files:(V=W.dataTransfer)===null||V===void 0?void 0:V.files})}},h=(P,$)=>{const V=$.event.raw.target;ht(P,cA,{files:V.files})},y=(P,$)=>{$&&(nt.setValue(P,PB($,s)),ht(P,Kc,{name:t.name}))},w=On({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:$e([Zt("input-file-events",[em(Yd()),em($1())])])}),E=t.label.map(P=>zm(P,s)),T=Bn.parts.field({factory:As,dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[xo(s.translate("Browse for an image")),w.asSpec()],action:P=>{w.get(P).element.dom.click()},buttonBehaviours:$e([Vi.self(),dT(c.getOr([])),ho.config({}),ti.button(()=>s.checkUiComponentContext(t.context).shouldDisable),os(()=>s.checkUiComponentContext(t.context))])}),A={dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:$e([Mt.config({disabled:()=>s.checkUiComponentContext(t.context).shouldDisable}),os(()=>s.checkUiComponentContext(t.context)),en.config({toggleClass:"dragenter",toggleOnExecute:!1}),Zt("dropzone-events",[Ee("dragenter",d([i,en.toggle])),Ee("dragleave",d([i,en.toggle])),Ee("dragover",i),Ee("drop",d([i,g])),Ee(sl(),h)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[xo(s.translate("Drop an image here"))]},T]}]};return Q2(E,A,["tox-form__group--stretched"],[Zt("handle-files",[Ee(cA,(P,$)=>{Bn.getField(P).each(V=>{y(V,$.event.files)})})])])},EV=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:De(t.items,s.interpreter)}),TV=(t,s)=>{let c=null,i=null;return{cancel:()=>{Yt(c)||(clearTimeout(c),c=null,i=null)},throttle:(...h)=>{i=h,Yt(c)&&(c=setTimeout(()=>{const y=i;c=null,i=null,t.apply(null,y)},s))}}},aA=(t,s)=>{let c=null;return{cancel:()=>{Yt(c)||(clearTimeout(c),c=null)},throttle:(...g)=>{Yt(c)&&(c=setTimeout(()=>{c=null,t.apply(null,g)},s))}}},iA=(t,s)=>{let c=null;const i=()=>{Yt(c)||(clearTimeout(c),c=null)};return{cancel:i,throttle:(...g)=>{i(),c=setTimeout(()=>{c=null,t.apply(null,g)},s)}}},fT=ut("alloy-fake-before-tabstop"),lA=ut("alloy-fake-after-tabstop"),BB=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:$e([Bt.config({ignore:!0}),ho.config({})])}),$B=(t,s)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[BB([fT]),s,BB([lA])],behaviours:$e([Vi.childAt(1)])}),uA=(t,s)=>{ht(t,da(),{raw:{which:9,shiftKey:s}})},FB=(t,s)=>{const c=s.element;Wr(c,fT)?uA(t,!0):Wr(c,lA)&&uA(t,!1)},mC=t=>Y2(t,["."+fT,"."+lA].join(","),Vn),gT=ut("update-dialog"),IB=ut("update-title"),LB=ut("update-body"),dA=ut("update-footer"),HB=ut("body-send-message"),fC=ut("dialog-focus-shifted"),mA=Sn().browser,gC=mA.isSafari(),_V=mA.isFirefox(),VB=gC||_V,kV=mA.isChromium(),OV=({scrollTop:t,scrollHeight:s,clientHeight:c})=>Math.ceil(t)+c>=s,zB=(t,s)=>t.scrollTo(0,s==="bottom"?99999999:s),AV=(t,s)=>{const c=t.body;return k.from(!/^<!DOCTYPE (html|HTML)/.test(s)&&(!kV&&!gC||jt(c)&&(c.scrollTop!==0||Math.abs(c.scrollHeight-c.clientHeight)>1))?c:t.documentElement)},UB=(t,s,c)=>{const i=t.dom;k.from(i.contentDocument).fold(c,d=>{let g=0;const h=AV(d,s).map(w=>(g=w.scrollTop,w)).forall(OV),y=()=>{const w=i.contentWindow;jt(w)&&(h?zB(w,"bottom"):!h&&VB&&g!==0&&zB(w,g))};gC&&i.addEventListener("load",y,{once:!0}),d.open(),d.write(s),d.close(),gC||y()})},RV=$t(VB,gC?500:200).map(t=>TV(UB,t)),DV=(t,s)=>{const c=St(t.getOr(""));return{getValue:i=>c.get(),setValue:(i,d)=>{if(c.get()!==d){const g=i.element,h=()=>Dt(g,"srcdoc",d);s?RV.fold(te(UB),y=>y.throttle)(g,d,h):h()}c.set(d)}}},MV=(t,s,c)=>{const i="tox-dialog__iframe",d=t.transparent?[]:[`${i}--opaque`],g=t.border?["tox-navobj-bordered"]:[],h={...t.label.map(A=>({title:A})).getOr({}),...c.map(A=>({srcdoc:A})).getOr({}),...t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},y=DV(c,t.streamContent),w=t.label.map(A=>zm(A,s)),E=A=>$B(k.from(g),{uid:A.uid,dom:{tag:"iframe",attributes:h,classes:[i,...d]},behaviours:$e([ho.config({}),Bt.config({}),Fp(c,y.getValue,y.setValue),wc.config({channels:{[fC]:{onReceive:(P,$)=>{$.newFocus.each(V=>{di(P.element).each(W=>{(Un(P.element,V)?ns:In)(W,"tox-navobj-bordered-focus")})})}}}})])}),T=Bn.parts.field({factory:{sketch:E}});return Q2(w,T,["tox-form__group--stretched"],[])},hC=t=>new Promise((s,c)=>{const i=()=>{g(),s(t)},d=[Zr(t,"load",i),Zr(t,"error",()=>{g(),c("Unable to load data from image: "+t.dom.src)})],g=()=>it(d,h=>h.unbind());t.dom.complete&&i()}),fA=(t,s,c,i,d)=>{const g=c*d,h=i*d,y=Math.max(0,t/2-g/2),w=Math.max(0,s/2-h/2);return{left:y.toString()+"px",top:w.toString()+"px",width:g.toString()+"px",height:h.toString()+"px"}},PV=(t,s,c)=>{const i=tc(t),d=gs(t);return Math.min(i/s,d/c,1)},NV=(t,s)=>{const c=St(s.getOr({url:""})),i=On({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(w=>({src:w.url})).getOr({})}}),d=On({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[i.asSpec()]}),g=(w,E)=>{const T={url:E.url};E.zoom.each(P=>T.zoom=P),E.cachedWidth.each(P=>T.cachedWidth=P),E.cachedHeight.each(P=>T.cachedHeight=P),c.set(T);const A=()=>{const{cachedWidth:P,cachedHeight:$,zoom:V}=T;if(!Xn(P)&&!Xn($)){if(Xn(V)){const se=PV(w.element,P,$);T.zoom=se}const W=fA(tc(w.element),gs(w.element),P,$,T.zoom);d.getOpt(w).each(se=>{Ll(se.element,W)})}};i.getOpt(w).each(P=>{const $=P.element;E.url!==qt($,"src")&&(Dt($,"src",E.url),In(w.element,"tox-imagepreview__loaded")),A(),hC($).then(V=>{w.getSystem().isConnected()&&(ns(w.element,"tox-imagepreview__loaded"),T.cachedWidth=V.dom.naturalWidth,T.cachedHeight=V.dom.naturalHeight,A())})})},h={};t.height.each(w=>h.height=w);const y=s.map(w=>({url:w.url,zoom:k.from(w.zoom),cachedWidth:k.from(w.cachedWidth),cachedHeight:k.from(w.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:h,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:$e([Vi.self(),Fp(y,()=>c.get(),g)])}},gA=(t,s,c)=>{const i="tox-label",d=t.align==="center"?[`${i}--center`]:[],g=t.align==="end"?[`${i}--end`]:[],h=On({dom:{tag:"label",classes:[i,...d,...g]},components:[xo(s.providers.translate(t.label))]}),y=De(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[h.asSpec(),...y],behaviours:$e([Vi.self(),Ht.config({}),wV(k.none()),xt.config({mode:"acyclic"}),Zt("label",[lo(w=>{t.for.each(E=>{c(E).each(T=>{h.getOpt(w).each(A=>{var P;const $=(P=qt(T.element,"id"))!==null&&P!==void 0?P:ut("form-field");Dt(T.element,"id",$),Dt(A.element,"for",$)})})})})])])}},ZB=ut("toolbar.button.execute"),hA=t=>Wl((s,c)=>{_E(t,s)(i=>{ht(s,ZB,{buttonApi:i}),t.onAction(i)})}),Og=ut("common-button-display-events"),jB={[nr()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[rc()]:["toolbar-button-events",Og],[Hc()]:["toolbar-button-events","dropdown-events","tooltipping"],[Lc()]:["focusing","alloy.base.behaviour",Og]},pA=t=>Vt(t.element,"width",kr(t.element,"width")),bA=(t,s,c)=>Qa(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:c},s),hT=(t,s)=>bA(t,s,[]),Ag=(t,s)=>bA(t,s,[Ht.config({})]),vA=(t,s,c)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[xo(c.translate(t))],behaviours:$e([Ht.config({})])}),oi=ut("update-menu-text"),Ip=ut("update-menu-icon"),pT=(t,s,c,i)=>{const d=St(J),g=t.text.map(W=>On(vA(W,s,c.providers))),h=t.icon.map(W=>On(Ag(W,c.providers.icons))),y=(W,se)=>{const G=nt.getValue(W);return Bt.focus(G),ht(G,"keydown",{raw:se.event.raw}),ka.close(G),k.some(!0)},w=t.role.fold(()=>({}),W=>({role:W})),E=k.from(t.listRole).map(W=>({listRole:W})).getOr({}),T=t.ariaLabel.fold(()=>({}),W=>({"aria-label":c.providers.translate(W)})),A=Qa("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},c.providers.icons),P=ut("common-button-display-events"),$="dropdown-events";return On(ka.sketch({...t.uid?{uid:t.uid}:{},...w,...E,dom:{tag:"button",classes:[s,`${s}--select`].concat(De(t.classes,W=>`${s}--${W}`)),attributes:{...T,...jt(i)?{"data-mce-name":i}:{}}},components:Eg([h.map(W=>W.asSpec()),g.map(W=>W.asSpec()),k.some(A)]),matchWidth:!0,useMinWidth:!0,onOpen:(W,se,G)=>{t.searchable&&uH(G)},dropdownBehaviours:$e([...t.dropdownBehaviours,ti.button(()=>t.disabled||c.providers.checkUiComponentContext(t.context).shouldDisable),os(()=>c.providers.checkUiComponentContext(t.context)),b0.config({}),Ht.config({}),...t.tooltip.map(W=>Uo.config(c.providers.tooltips.getConfig({tooltipText:c.providers.translate(W)}))).toArray(),Zt($,[Sg(t,d),xg(t,d)]),Zt(P,[lo((W,se)=>{t.listRole!=="listbox"&&pA(W)})]),Zt("update-dropdown-width-variable",[Ee(Jd(),(W,se)=>ka.close(W))]),Zt("menubutton-update-display-text",[Ee(oi,(W,se)=>{g.bind(G=>G.getOpt(W)).each(G=>{Ht.set(G,[xo(c.providers.translate(se.event.text))])})}),Ee(Ip,(W,se)=>{h.bind(G=>G.getOpt(W)).each(G=>{Ht.set(G,[Ag(se.event.icon,c.providers.icons)])})})])]),eventOrder:zo(jB,{[Lc()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[rc()]:["toolbar-button-events",Uo.name(),$,P]}),sandboxBehaviours:$e([xt.config({mode:"special",onLeft:y,onRight:y}),Zt("dropdown-sandbox-events",[Ee(L3,(W,se)=>{cH(W),se.stop()}),Ee(cP,(W,se)=>{aH(W,se),se.stop()})])]),lazySink:c.getSink,toggleClass:`${s}--active`,parts:{menu:{...M2(!1,t.columns,t.presets),fakeFocus:t.searchable,...t.listRole==="listbox"?{}:{onHighlightItem:wN,onCollapseMenu:(W,se,G)=>{Ze.getHighlighted(G).each(ee=>{wN(W,G,ee)})},onDehighlightItem:VE}}},getAnchorOverrides:()=>({maxHeightFunction:(W,se)=>{PS()(W,se-10)}}),fetch:W=>Nr.nu(An(t.fetch,W))})).asSpec()},GB=t=>ke(t),yA=t=>t.type==="separator",BV=t=>$n(t,"getSubmenuItems"),$V={type:"separator"},FV=(t,s)=>{const c=wo(t,(i,d)=>GB(d)?d===""?i:d==="|"?i.length>0&&!yA(i[i.length-1])?i.concat([$V]):i:$n(s,d.toLowerCase())?i.concat([s[d.toLowerCase()]]):i:i.concat([d]),[]);return c.length>0&&yA(c[c.length-1])&&c.pop(),c},qB=(t,s)=>{const c=t.getSubmenuItems(),i=CA(c,s),d=zo(i.menus,{[t.value]:i.items}),g=zo(i.expansions,{[t.value]:t.value});return{item:t,menus:d,expansions:g}},IV=t=>{const s=rt(t,"value").getOrThunk(()=>ut("generated-menu-item"));return zo({value:s},t)},CA=(t,s)=>{const c=FV(ke(t)?t.split(" "):t,s);return Ss(c,(i,d)=>{if(BV(d)){const g=IV(d),h=qB(g,s);return{menus:zo(i.menus,h.menus),items:[h.item,...i.items],expansions:zo(i.expansions,h.expansions)}}else return{...i,items:[d,...i.items]}},{menus:{},expansions:{},items:[]})},LV=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),HV=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),Rg=(t,s,c,i)=>{const d=ut("primary-menu"),g=CA(t,c.shared.providers.menuItems());if(g.items.length===0)return k.none();const h=LV(i),y=SN(d,g.items,s,c,i.isHorizontalMenu,h),w=HV(i),E=Io(g.menus,(A,P)=>SN(P,A,s,c,!1,w)),T=zo(E,jd(d,y));return k.from(hd.tieredData(d,T,g.expansions))},bT=t=>!$n(t,"items"),KB="data-value",YB=(t,s,c,i,d)=>De(c,g=>bT(g)?{type:"togglemenuitem",...d?{}:{role:"option"},text:g.text,value:g.value,active:g.value===i,onAction:()=>{nt.setValue(t,g.value),ht(t,Kc,{name:s}),Bt.focus(t)}}:{type:"nestedmenuitem",text:g.text,getSubmenuItems:()=>YB(t,s,g.items,i,d)}),pC=(t,s)=>ir(t,c=>bT(c)?$t(c.value===s,c):pC(c.items,s)),VV=(t,s,c)=>{const i=uc(t.items,E=>!bT(E)),d=s.shared.providers,g=c.bind(E=>pC(t.items,E)).orThunk(()=>dc(t.items).filter(bT)),h=t.label.map(E=>zm(E,d)),y=Bn.parts.field({dom:{},factory:{sketch:E=>pT({context:t.context,uid:E.uid,text:g.map(T=>T.text),icon:k.none(),tooltip:k.none(),role:$t(!i,"combobox"),...i?{}:{listRole:"listbox"},ariaLabel:t.label,fetch:(T,A)=>{const P=YB(T,t.name,t.items,nt.getValue(T),i);A(Rg(P,vl.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:k.none()}))},onSetup:te(J),getApi:te({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[ho.config({}),Fp(g.map(T=>T.value),T=>qt(T.element,KB),(T,A)=>{pC(t.items,A).each(P=>{Dt(T.element,KB,P.value),ht(T,oi,{text:P.text})})})]},"tox-listbox",s.shared)}}),w={dom:{tag:"div",classes:["tox-listboxfield"]},components:[y]};return Bn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Gt([h.toArray(),[w]]),fieldBehaviours:$e([Mt.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable,onDisabled:E=>{Bn.getField(E).each(Mt.disable)},onEnabled:E=>{Bn.getField(E).each(Mt.enable)}})])})},XB=(t,s)=>({dom:{tag:"div",classes:t.classes},components:De(t.items,s.shared.interpreter)}),zV=(t,s)=>{const c=De(t.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),i=t.data.map(d=>jd("initialValue",d)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:c,behaviours:zs(t.selectBehaviours,[Bt.config({}),nt.config({store:{mode:"manual",getValue:d=>Ka(d.element),setValue:(d,g)=>{const h=dc(t.options);zt(t.options,w=>w.value===g).isSome()?hm(d.element,g):d.element.dom.selectedIndex===-1&&g===""&&h.each(w=>hm(d.element,w.value))},...i}})])}},JB=Tc({name:"HtmlSelect",configFields:[Te("options"),Vs("selectBehaviours",[Bt,nt]),le("selectClasses",[]),le("selectAttributes",{}),kn("data")],factory:zV}),UV=(t,s,c)=>{const i=De(t.items,w=>({text:s.translate(w.text),value:w.value})),d=t.label.map(w=>zm(w,s)),g=Bn.parts.field({dom:{},...c.map(w=>({data:w})).getOr({}),selectAttributes:{size:t.size},options:i,factory:JB,selectBehaviours:$e([Mt.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),ho.config({}),Zt("selectbox-change",[Ee(sl(),(w,E)=>{ht(w,Kc,{name:t.name})})])])}),h=t.size>1?k.none():k.some(Qa("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),y={dom:{tag:"div",classes:["tox-selectfield"]},components:Gt([[g],h.toArray()])};return Bn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Gt([d.toArray(),[y]]),fieldBehaviours:$e([Mt.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:w=>{Bn.getField(w).each(Mt.disable)},onEnabled:w=>{Bn.getField(w).each(Mt.enable)}}),os(()=>s.checkUiComponentContext(t.context))])})},WV=te([le("field1Name","field1"),le("field2Name","field2"),lm("onLockedChange"),ql(["lockClass"]),le("locked",!1),ya.field("coupledFieldBehaviours",[fn,nt])]),ZV=(t,s,c)=>qn(t,s,c).bind(fn.getCurrent),QB=(t,s)=>Sr({factory:Bn,name:t,overrides:c=>({fieldBehaviours:$e([Zt("coupled-input-behaviour",[Ee(wi(),i=>{ZV(i,c,s).each(d=>{qn(i,c,"lock").each(g=>{en.isOn(g)&&c.onLockedChange(i,d,g)})})})])])})}),jV=te([QB("field1","field2"),QB("field2","field1"),Sr({factory:As,schema:[Te("dom")],name:"lock",overrides:t=>({buttonBehaviours:$e([en.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),e$=(t,s,c,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:ya.augment(t.coupledFieldBehaviours,[fn.config({find:k.some}),nt.config({store:{mode:"manual",getValue:d=>{const g=ag(d,t,["field1","field2"]);return{[t.field1Name]:nt.getValue(g.field1()),[t.field2Name]:nt.getValue(g.field2())}},setValue:(d,g)=>{const h=ag(d,t,["field1","field2"]);sa(g,t.field1Name)&&nt.setValue(h.field1(),g[t.field1Name]),sa(g,t.field2Name)&&nt.setValue(h.field2(),g[t.field2Name])}}})]),apis:{getField1:d=>qn(d,t,"field1"),getField2:d=>qn(d,t,"field2"),getLock:d=>qn(d,t,"lock")}}),si=pr({name:"FormCoupledInputs",configFields:WV(),partFields:jV(),factory:e$,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),GV=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},c=d=>d in s?s[d]:1;let i=t.value.toFixed(c(t.unit));return i.indexOf(".")!==-1&&(i=i.replace(/\.?0*$/,"")),i+t.unit},vT=t=>{const c=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(c!==null){const i=parseFloat(c[1]),d=c[2];return tn.value({value:i,unit:d})}else return tn.error(t)},t$=(t,s)=>{const c={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},i=d=>$n(c,d);return t.unit===s?k.some(t.value):i(t.unit)&&i(s)?c[t.unit]===c[s]?k.some(t.value):k.some(t.value/c[t.unit]*c[s]):k.none()},wA=t=>k.none(),qV=(t,s)=>c=>t$(c,s).map(i=>({value:i*t,unit:s})),n$=(t,s)=>{const c=vT(t).toOptional(),i=vT(s).toOptional();return Cu(c,i,(d,g)=>t$(d,g.unit).map(h=>g.value/h).map(h=>qV(h,g.unit)).getOr(wA)).getOr(wA)},KV=(t,s)=>{let c=wA;const i=ut("ratio-event"),d=$=>Qa($,{tag:"span",classes:["tox-icon","tox-lock-icon__"+$]},s.icons),g=t.label.getOr("Constrain proportions"),h=s.translate(g),y=si.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":h,"data-mce-name":g}},components:[d("lock"),d("unlock")],buttonBehaviours:$e([Mt.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),os(()=>s.checkUiComponentContext(t.context)),ho.config({}),Uo.config(s.tooltips.getConfig({tooltipText:h}))])}),w=$=>({dom:{tag:"div",classes:["tox-form__group"]},components:$}),E=$=>Bn.parts.field({factory:cu,inputClasses:["tox-textfield"],inputBehaviours:$e([Mt.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),os(()=>s.checkUiComponentContext(t.context)),ho.config({}),Zt("size-input-events",[Ee(Ua(),(V,W)=>{ht(V,i,{isField1:$})}),Ee(sl(),(V,W)=>{ht(V,Kc,{name:t.name})})])]),selectOnFocus:!1}),T=$=>({dom:{tag:"label",classes:["tox-label"]},components:[xo(s.translate($))]}),A=si.parts.field1(w([Bn.parts.label(T("Width")),E(!0)])),P=si.parts.field2(w([Bn.parts.label(T("Height")),E(!1)]));return si.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[A,P,w([T(jk),y])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:($,V,W)=>{vT(nt.getValue($)).each(se=>{c(se).each(G=>{nt.setValue(V,GV(G))})})},coupledFieldBehaviours:$e([Mt.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:$=>{si.getField1($).bind(Bn.getField).each(Mt.disable),si.getField2($).bind(Bn.getField).each(Mt.disable),si.getLock($).each(Mt.disable)},onEnabled:$=>{si.getField1($).bind(Bn.getField).each(Mt.enable),si.getField2($).bind(Bn.getField).each(Mt.enable),si.getLock($).each(Mt.enable)}}),os(()=>s.checkUiComponentContext("mode:design")),Zt("size-input-events2",[Ee(i,($,V)=>{const W=V.event.isField1,se=W?si.getField1($):si.getField2($),G=W?si.getField2($):si.getField1($),ee=se.map(nt.getValue).getOr(""),oe=G.map(nt.getValue).getOr("");c=n$(ee,oe)})])])})},YV=(t,s,c)=>{const i=Hi.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[xo(s.translate(t.label))]}),d=Hi.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),g=Hi.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Hi.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:te(c.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[i,d,g],sliderBehaviours:$e([Vi.self(),Bt.config({})]),onChoose:(h,y,w)=>{ht(h,Kc,{name:t.name,value:w})},onChange:(h,y,w)=>{ht(h,Kc,{name:t.name,value:w})}})},XV=(t,s)=>{const c=y=>({dom:{tag:"th",innerHtml:s.translate(y)}}),i=y=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:De(y,c)}]}),d=y=>({dom:{tag:"td",innerHtml:s.translate(y)}}),g=y=>({dom:{tag:"tr"},components:De(y,d)}),h=y=>({dom:{tag:"tbody"},components:De(y,g)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[i(t.header),h(t.cells)],behaviours:$e([ho.config({}),Bt.config({})])}},SA=(t,s)=>{const c=t.label.map($=>zm($,s)),i=[Mt.config({disabled:()=>t.disabled||s.checkUiComponentContext(t.context).shouldDisable}),os(()=>s.checkUiComponentContext(t.context)),xt.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:$=>(sn($,tC),k.some(!0))}),Zt("textfield-change",[Ee(wi(),($,V)=>{ht($,Kc,{name:t.name})}),Ee(gh(),($,V)=>{ht($,Kc,{name:t.name})})]),ho.config({})],d=t.validation.map($=>wd.config({getRoot:V=>di(V.element),invalidClass:"tox-invalid",validator:{validate:V=>{const W=nt.getValue(V),se=$.validator(W);return Nr.pure(se===!0?tn.value(W):tn.error(se))},validateOnLoad:$.validateOnLoad}})).toArray(),g=t.placeholder.fold(te({}),$=>({placeholder:s.translate($)})),h=t.inputMode.fold(te({}),$=>({inputmode:$})),y={...g,...h,"data-mce-name":t.name},w=Bn.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map($=>({data:$})).getOr({}),inputAttributes:y,inputClasses:[t.classname],inputBehaviours:$e(Gt([i,d])),selectOnFocus:!1,factory:cu}),E=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[w]}:w,A=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),P=[Mt.config({disabled:()=>t.disabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:$=>{Bn.getField($).each(Mt.disable)},onEnabled:$=>{Bn.getField($).each(Mt.enable)}}),os(()=>s.checkUiComponentContext(t.context))];return Q2(c,E,A,P)},o$=(t,s,c)=>SA({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:k.none(),maximized:t.maximized,data:c,context:t.context},s),s$=(t,s,c)=>SA({name:t.name,multiline:!0,label:t.label,inputMode:k.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:k.none(),maximized:t.maximized,data:c,context:t.context},s),Dg=(t,s)=>s.getAnimationRoot.fold(()=>t.element,c=>c(t)),Gm=t=>t.dimension.property,Lp=(t,s)=>t.dimension.getDimension(s),yT=(t,s)=>{const c=Dg(t,s);Ti(c,[s.shrinkingClass,s.growingClass])},xA=(t,s)=>{In(t.element,s.openClass),ns(t.element,s.closedClass),Vt(t.element,Gm(s),"0px"),Nd(t.element)},CT=(t,s)=>{In(t.element,s.closedClass),ns(t.element,s.openClass),Kt(t.element,Gm(s))},r$=(t,s,c,i)=>{c.setCollapsed(),Vt(t.element,Gm(s),Lp(s,t.element)),yT(t,s),xA(t,s),s.onStartShrink(t),s.onShrunk(t)},JV=(t,s,c,i)=>{const d=i.getOrThunk(()=>Lp(s,t.element));c.setCollapsed(),Vt(t.element,Gm(s),d),Nd(t.element);const g=Dg(t,s);In(g,s.growingClass),ns(g,s.shrinkingClass),xA(t,s),s.onStartShrink(t)},c$=(t,s,c)=>{const i=Lp(s,t.element);(i==="0px"?r$:JV)(t,s,c,k.some(i))},EA=(t,s,c)=>{const i=Dg(t,s),d=Wr(i,s.shrinkingClass),g=Lp(s,t.element);CT(t,s);const h=Lp(s,t.element);(d?()=>{Vt(t.element,Gm(s),g),Nd(t.element)}:()=>{xA(t,s)})(),In(i,s.shrinkingClass),ns(i,s.growingClass),CT(t,s),Vt(t.element,Gm(s),h),c.setExpanded(),s.onStartGrow(t)},a$=(t,s,c)=>{if(c.isExpanded()){Kt(t.element,Gm(s));const i=Lp(s,t.element);Vt(t.element,Gm(s),i)}},QV=(t,s,c)=>{c.isExpanded()||EA(t,s,c)},e9=(t,s,c)=>{c.isExpanded()&&c$(t,s,c)},i$=(t,s,c)=>{c.isExpanded()&&r$(t,s,c)},t9=(t,s,c)=>c.isExpanded(),n9=(t,s,c)=>c.isCollapsed(),Lt=(t,s,c)=>{const i=Dg(t,s);return Wr(i,s.growingClass)===!0},x0=(t,s,c)=>{const i=Dg(t,s);return Wr(i,s.shrinkingClass)===!0};var l$=Object.freeze({__proto__:null,refresh:a$,grow:QV,shrink:e9,immediateShrink:i$,hasGrown:t9,hasShrunk:n9,isGrowing:Lt,isShrinking:x0,isTransitioning:(t,s,c)=>Lt(t,s)||x0(t,s),toggleGrow:(t,s,c)=>{(c.isExpanded()?c$:EA)(t,s,c)},disableTransitions:yT,immediateGrow:(t,s,c)=>{c.isExpanded()||(CT(t,s),Vt(t.element,Gm(s),Lp(s,t.element)),yT(t,s),c.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),bC=Object.freeze({__proto__:null,exhibit:(t,s,c)=>{const i=s.expanded;return Ur(i?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:jd(s.dimension.property,"0px")})},events:(t,s)=>Fn([zu(fh(),(c,i)=>{i.event.raw.propertyName===t.dimension.property&&(yT(c,t),s.isExpanded()&&Kt(c.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(c))})])}),a9=[Te("closedClass"),Te("openClass"),Te("shrinkingClass"),Te("growingClass"),kn("getAnimationRoot"),bn("onShrunk"),bn("onStartShrink"),bn("onGrown"),bn("onStartGrow"),le("expanded",!1),Dn("dimension",Ko("property",{width:[Qn("property","width"),Qn("getDimension",t=>tc(t)+"px")],height:[Qn("property","height"),Qn("getDimension",t=>gs(t)+"px")]}))],l9=Object.freeze({__proto__:null,init:t=>{const s=St(t.expanded),c=()=>"expanded: "+s.get();return Ar({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:An(s.set,!1),setExpanded:An(s.set,!0),readState:c})}});const Yc=Ls({fields:a9,name:"sliding",active:bC,apis:l$,state:l9}),u$=t=>({isEnabled:()=>!Mt.isDisabled(t),setEnabled:s=>Mt.set(t,!s),setActive:s=>{const c=t.element;s?(ns(c,"tox-tbtn--enabled"),Dt(c,"aria-pressed",!0)):(In(c,"tox-tbtn--enabled"),Ro(c,"aria-pressed"))},isActive:()=>Wr(t.element,"tox-tbtn--enabled"),setText:s=>{ht(t,oi,{text:s})},setIcon:s=>ht(t,Ip,{icon:s})}),E0=(t,s,c,i,d=!0,g)=>pT({text:t.text,icon:t.icon,tooltip:t.tooltip,ariaLabel:t.tooltip,searchable:t.search.isSome(),role:i,fetch:(h,y)=>{const w={pattern:t.search.isSome()?zE(h):""};t.fetch(E=>{y(Rg(E,vl.CLOSE_ON_EXECUTE,c,{isHorizontalMenu:!1,search:t.search}))},w,u$(h))},onSetup:t.onSetup,getApi:u$,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...d?[ho.config({})]:[]],context:t.context},s,c.shared,g),TA=(t,s,c)=>{const i=g=>h=>{const y=!h.isActive();h.setActive(y),g.storage.set(y),c.shared.getSink().each(w=>{s().getOpt(w).each(E=>{pa(E.element),ht(E,Cd,{name:g.name,value:g.storage.get()})})})},d=g=>h=>{h.setActive(g.storage.get())};return g=>{g(De(t,h=>{const y=h.text.fold(()=>({}),w=>({text:w}));return{type:h.type,active:!1,...y,context:h.context,onAction:i(h),onSetup:d(h)}}))}},_A=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":t}},components:[xo(t)]}),d$=(t,s,c)=>{t.customStateIcon.each(i=>s.push(f$(i,c.shared.providers.icons,t.customStateIconTooltip.fold(()=>[],d=>[Uo.config(c.shared.providers.tooltips.getConfig({tooltipText:d}))]),["tox-icon-custom-state"],t.customStateIconTooltip.fold(()=>({}),d=>({title:d})))))},m$=ut("leaf-label-event-id"),kA=({leaf:t,onLeafAction:s,visible:c,treeId:i,selectedId:d,backstage:g})=>{const h=t.menu.map(w=>E0(w,"tox-mbtn",g,k.none(),c)),y=[_A(t.title)];return d$(t,y,g),h.each(w=>y.push(w)),As.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(c?["tox-tree--leaf__label--visible"]:[])},components:y,role:"treeitem",action:w=>{s(t.id),w.getSystem().broadcastOn([`update-active-item-${i}`],{value:t.id})},eventOrder:{[da()]:[m$,"keying"]},buttonBehaviours:$e([...c?[ho.config({})]:[],en.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),wc.config({channels:{[`update-active-item-${i}`]:{onReceive:(w,E)=>{(E.value===t.id?en.on:en.off)(w)}}}}),Zt(m$,[lo((w,E)=>{d.each(T=>{(T===t.id?en.on:en.off)(w)})}),Ee(da(),(w,E)=>{const T=E.event.raw.code==="ArrowLeft",A=E.event.raw.code==="ArrowRight";T?(hs(w.element,".tox-tree--directory").each(P=>{w.getSystem().getByDom(P).each($=>{ha(P,".tox-tree--directory__label").each(V=>{$.getSystem().getByDom(V).each(Bt.focus)})})}),E.stop()):A&&E.stop()})])])})},f$=(t,s,c,i,d)=>Qa(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"].concat(i||[]),behaviours:c,attributes:d},s),u9=(t,s)=>f$(t,s,[]),g$=ut("directory-label-event-id"),d9=({directory:t,visible:s,noChildren:c,backstage:i})=>{const d=t.menu.map(y=>E0(y,"tox-mbtn",i,k.none())),g=[{dom:{tag:"div",classes:["tox-chevron"]},components:[u9("chevron-right",i.shared.providers.icons)]},_A(t.title)];d$(t,g,i),d.each(y=>{g.push(y)});const h=y=>{hs(y.element,".tox-tree--directory").each(w=>{y.getSystem().getByDom(w).each(E=>{const T=!en.isOn(E);en.toggle(E),ht(y,"expand-tree-node",{expanded:T,node:t.id})})})};return As.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:g,action:h,eventOrder:{[da()]:[g$,"keying"]},buttonBehaviours:$e([...s?[ho.config({})]:[],Zt(g$,[Ee(da(),(y,w)=>{const E=w.event.raw.code==="ArrowRight",T=w.event.raw.code==="ArrowLeft";E&&c&&w.stop(),(E||T)&&hs(y.element,".tox-tree--directory").each(A=>{y.getSystem().getByDom(A).each(P=>{!en.isOn(P)&&E||en.isOn(P)&&T?(h(y),w.stop()):T&&!en.isOn(P)&&(hs(P.element,".tox-tree--directory").each($=>{ha($,".tox-tree--directory__label").each(V=>{P.getSystem().getByDom(V).each(Bt.focus)})}),w.stop())})})})])])})},m9=({children:t,onLeafAction:s,visible:c,treeId:i,expandedIds:d,selectedId:g,backstage:h})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(y=>y.type==="leaf"?kA({leaf:y,selectedId:g,onLeafAction:s,visible:c,treeId:i,backstage:h}):OA({directory:y,expandedIds:d,selectedId:g,onLeafAction:s,labelTabstopping:c,treeId:i,backstage:h})),behaviours:$e([Yc.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:c}),Ht.config({})])}),f9=ut("directory-event-id"),OA=({directory:t,onLeafAction:s,labelTabstopping:c,treeId:i,backstage:d,expandedIds:g,selectedId:h})=>{const{children:y}=t,w=St(g),E=A=>y.map(P=>P.type==="leaf"?kA({leaf:P,selectedId:h,onLeafAction:s,visible:A,treeId:i,backstage:d}):OA({directory:P,expandedIds:w.get(),selectedId:h,onLeafAction:s,labelTabstopping:A,treeId:i,backstage:d})),T=g.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[d9({directory:t,visible:c,noChildren:t.children.length===0,backstage:d}),m9({children:y,expandedIds:g,selectedId:h,onLeafAction:s,visible:T,treeId:i,backstage:d})],behaviours:$e([Zt(f9,[lo((A,P)=>{en.set(A,T)}),Ee("expand-tree-node",(A,P)=>{const{expanded:$,node:V}=P.event;w.set($?[...w.get(),V]:w.get().filter(W=>W!==V))})]),en.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(A,P)=>{const $=A.components()[1],V=E(P);P?Yc.grow($):Yc.shrink($),Ht.set($,V)}})])}},h$=ut("tree-event-id"),g9=(t,s)=>{const c=t.onLeafAction.getOr(J),i=t.onToggleExpand.getOr(J),d=t.defaultExpandedIds,g=St(d),h=St(t.defaultSelectedId),y=ut("tree-id"),w=(E,T)=>t.items.map(A=>A.type==="leaf"?kA({leaf:A,selectedId:E,onLeafAction:c,visible:!0,treeId:y,backstage:s}):OA({directory:A,selectedId:E,onLeafAction:c,expandedIds:T,labelTabstopping:!0,treeId:y,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:w(h.get(),g.get()),behaviours:$e([xt.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),Zt(h$,[Ee("expand-tree-node",(E,T)=>{const{expanded:A,node:P}=T.event;g.set(A?[...g.get(),P]:g.get().filter($=>$!==P)),i(g.get(),{expanded:A,node:P})})]),wc.config({channels:{[`update-active-item-${y}`]:{onReceive:(E,T)=>{h.set(k.some(T.value)),Ht.set(E,w(k.some(T.value),g.get()))}}}}),Ht.config({})])}};var h9=Object.freeze({__proto__:null,events:(t,s)=>{const i=t.stream.streams.setup(t,s);return Fn([Ee(t.event,i),rl(()=>s.cancel())].concat(t.cancelEvent.map(d=>[Ee(d,()=>s.cancel())]).getOr([])))}});const p$=t=>{const s=St(null);return Ar({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:g=>{s.set(g)},cancel:()=>{const g=s.get();g!==null&&g.cancel()}})};var p9=Object.freeze({__proto__:null,throttle:p$,init:t=>t.stream.streams.state(t)});const b9=(t,s)=>{const c=t.stream,i=iA(t.onStream,c.delay);return s.setTimer(i),(d,g)=>{i.throttle(d,g),c.stopEvent&&g.stop()}};var v9=[Dn("stream",Ko("mode",{throttle:[Te("delay"),le("stopEvent",!0),Qn("streams",{setup:b9,state:p$})]})),le("event","input"),kn("cancelEvent"),lm("onStream")];const AA=Ls({fields:v9,name:"streaming",active:h9,state:p9}),wT=(t,s,c)=>{const i=nt.getValue(c);nt.setValue(s,i),RA(s)},b$=(t,s)=>{const c=t.element,i=Ka(c),d=c.dom;qt(c,"type")!=="number"&&s(d,i)},RA=t=>{b$(t,(s,c)=>s.setSelectionRange(c.length,c.length))},y9=(t,s)=>{b$(t,(c,i)=>c.setSelectionRange(s,i.length))},C9=(t,s,c)=>{if(t.selectsOver){const i=nt.getValue(s),d=t.getDisplayText(i),g=nt.getValue(c);return t.getDisplayText(g).indexOf(d)===0?k.some(()=>{wT(t,s,c),y9(s,d.length)}):k.none()}else return k.none()},DA=te("alloy.typeahead.itemexecute"),w9=(t,s,c,i)=>{const d=(A,P,$)=>{t.previewing.set(!1);const V=Xo.getCoupled(A,"sandbox");if(Cn.isOpen(V))fn.getCurrent(V).each(W=>{Ze.getHighlighted(W).fold(()=>{$(W)},()=>{V1(V,W.element,"keydown",P)})});else{const W=se=>{fn.getCurrent(se).each($)};IE(t,h(A),A,V,i,W,kc.HighlightMenuAndItem).get(J)}},g=oP(t),h=A=>P=>P.map($=>{const V=X0($.menus),W=Se(V,G=>po(G.items,ee=>ee.type==="item"));return nt.getState(A).update(De(W,G=>G.data)),$}),y=A=>fn.getCurrent(A),w="typeaheadevents",E=[Bt.config({}),nt.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:A=>Ka(A.element),getFallbackEntry:A=>({value:A,meta:{}}),setValue:(A,P)=>{hm(A.element,t.model.getDisplayText(P))},...t.initialData.map(A=>jd("initialValue",A)).getOr({})}}),AA.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(A,P)=>{const $=Xo.getCoupled(A,"sandbox");if(Bt.isFocused(A)&&Ka(A.element).length>=t.minChars){const W=y($).bind(G=>Ze.getHighlighted(G).map(nt.getValue));t.previewing.set(!0);const se=G=>{y($).each(ee=>{W.fold(()=>{t.model.selectsOver&&Ze.highlightFirst(ee)},oe=>{Ze.highlightBy(ee,be=>nt.getValue(be).value===oe.value),Ze.getHighlighted(ee).orThunk(()=>(Ze.highlightFirst(ee),k.none()))})})};IE(t,h(A),A,$,i,se,kc.HighlightJustMenu).get(J)}},cancelEvent:F1()}),xt.config({mode:"special",onDown:(A,P)=>(d(A,P,Ze.highlightFirst),k.some(!0)),onEscape:A=>{const P=Xo.getCoupled(A,"sandbox");return Cn.isOpen(P)?(Cn.close(P),k.some(!0)):k.none()},onUp:(A,P)=>(d(A,P,Ze.highlightLast),k.some(!0)),onEnter:A=>{const P=Xo.getCoupled(A,"sandbox"),$=Cn.isOpen(P);if($&&!t.previewing.get())return y(P).bind(V=>Ze.getHighlighted(V)).map(V=>(ht(A,DA(),{item:V}),!0));{const V=nt.getValue(A);return sn(A,F1()),t.onExecute(P,A,V),$&&Cn.close(P),k.some(!0)}}}),en.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),Xo.config({others:{sandbox:A=>kO(t,A,{onOpen:()=>en.on(A),onClose:()=>{t.lazyTypeaheadComp.get().each(P=>Ro(P.element,"aria-activedescendant")),en.off(A)}})}}),Zt(w,[lo(A=>{t.lazyTypeaheadComp.set(k.some(A))}),rl(A=>{t.lazyTypeaheadComp.set(k.none())}),Wl(A=>{const P=J;_O(t,h(A),A,i,P,kc.HighlightMenuAndItem).get(J)}),Ee(DA(),(A,P)=>{const $=Xo.getCoupled(A,"sandbox");wT(t.model,A,P.event.item),sn(A,F1()),t.onItemExecute(A,$,P.event.item,nt.getValue(A)),Cn.close($),RA(A)})].concat(t.dismissOnBlur?[Ee(Xd(),A=>{const P=Xo.getCoupled(A,"sandbox");Dr(P.element).isNone()&&Cn.close(P)})]:[]))],T={[Hc()]:[nt.name(),AA.name(),w],...t.eventOrder};return{uid:t.uid,dom:sP(zo(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...g,...zs(t.typeaheadBehaviours,E)},eventOrder:T}},S9=te([kn("lazySink"),Te("fetch"),le("minChars",5),le("responseTime",1e3),bn("onOpen"),le("getHotspot",k.some),le("getAnchorOverrides",te({})),le("layouts",k.none()),le("eventOrder",{}),vw("model",{},[le("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),le("selectsOver",!0),le("populateFromBrowse",!0)]),bn("onSetValue"),Cr("onExecute"),bn("onItemExecute"),le("inputClasses",[]),le("inputAttributes",{}),le("inputStyles",{}),le("matchWidth",!0),le("useMinWidth",!1),le("dismissOnBlur",!0),ql(["openClass"]),kn("initialData"),kn("listRole"),Vs("typeaheadBehaviours",[Bt,nt,AA,xt,en,Xo]),Rn("lazyTypeaheadComp",()=>St(k.none)),Rn("previewing",()=>St(!0))].concat(nP()).concat(HE())),x9=te([Ca({schema:[ll()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,c,i)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(d=>{C9(t.model,d,i).fold(()=>{t.model.selectsOver?(Ze.dehighlight(c,i),t.previewing.set(!0)):t.previewing.set(!1)},g=>{g(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&wT(t.model,d,i),Lo(i.element,"id").each(g=>Dt(d.element,"aria-activedescendant",g))})},onExecute:(s,c)=>t.lazyTypeaheadComp.get().map(i=>(ht(i,DA(),{item:c}),!0)),onHover:(s,c)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(i=>{t.model.populateFromBrowse&&wT(t.model,i,c)})}})})]),v$=pr({name:"Typeahead",configFields:S9(),partFields:x9(),factory:w9}),Tl=t=>({...t,toCached:()=>Tl(t.toCached()),bindFuture:w=>Tl(t.bind(E=>E.fold(T=>Nr.pure(tn.error(T)),T=>w(T)))),bindResult:w=>Tl(t.map(E=>E.bind(w))),mapResult:w=>Tl(t.map(E=>E.map(w))),mapError:w=>Tl(t.map(E=>E.mapError(w))),foldResult:(w,E)=>t.map(T=>T.fold(w,E)),withTimeout:(w,E)=>Tl(Nr.nu(T=>{let A=!1;const P=setTimeout(()=>{A=!0,T(tn.error(E()))},w);t.get($=>{A||(clearTimeout(P),T($))})}))}),MA=t=>Tl(Nr.nu(t)),y$=t=>Tl(Nr.pure(tn.value(t))),w$={nu:MA,wrap:Tl,pure:y$,value:y$,error:t=>Tl(Nr.pure(tn.error(t))),fromResult:t=>Tl(Nr.pure(t)),fromFuture:t=>Tl(t.map(tn.value)),fromPromise:t=>MA(s=>{t.then(c=>{s(tn.value(c))},c=>{s(tn.error(c))})})},vC=(t,s,c=[],i,d,g,h)=>{const y=s.fold(()=>({}),T=>({action:T})),w={buttonBehaviours:$e([ti.item(()=>!t.enabled||h.checkUiComponentContext(t.context).shouldDisable),os(()=>h.checkUiComponentContext(t.context)),ho.config({}),...g.map(T=>Uo.config(h.tooltips.getConfig({tooltipText:h.translate(T)}))).toArray(),Zt("button press",[Pv("click")])].concat(c)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...y},E=zo(w,{dom:i});return zo(E,{components:d})},_9=(t,s,c,i=[],d)=>{const g=t.tooltip.map(E=>({"aria-label":c.translate(E)})).getOr({}),h={tag:"button",classes:["tox-tbtn"],attributes:{...g,"data-mce-name":d}},y=t.icon.map(E=>hT(E,c.icons)),w=Eg([y]);return vC(t,s,i,h,w,t.tooltip,c)},ST=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},S$=(t,s,c,i=[],d=[])=>{const g=c.translate(t.text),h=t.icon.map($=>hT($,c.icons)),y=[h.getOrThunk(()=>xo(g))],w=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),A={tag:"button",classes:[...ST(w),...h.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...d],attributes:{"aria-label":g,"data-mce-name":t.text}},P=t.icon.map(te(g));return vC(t,s,i,A,y,P,c)},x$=(t,s,c,i=[],d=[])=>{const g=S$(t,k.some(s),c,i,d);return As.sketch(g)},_l=(t,s)=>c=>{s==="custom"?ht(c,Cd,{name:t,value:{}}):s==="submit"?sn(c,tC):s==="cancel"?sn(c,_g):console.error("Unknown button type: ",s)},xT=(t,s)=>s==="menu",ET=(t,s)=>s==="custom"||s==="cancel"||s==="submit",k9=(t,s)=>s==="togglebutton",PA=(t,s,c)=>{var i,d;const g=t.icon.map(oe=>Ag(oe,s.icons)).map(On),h=oe=>{ht(oe,Cd,{name:t.name,value:{setIcon:be=>{g.map(ye=>ye.getOpt(oe).each(We=>{Ht.set(We,[Ag(be,s.icons)])}))}}})},y=t.buttonType.getOr(t.primary?"primary":"secondary"),w={...t,name:(i=t.name)!==null&&i!==void 0?i:"",primary:y==="primary",tooltip:t.tooltip,enabled:(d=t.enabled)!==null&&d!==void 0?d:!1,borderless:!1},E=w.tooltip.or(t.text).map(oe=>({"aria-label":s.translate(oe)})).getOr({}),T=ST(y??"secondary"),A=t.icon.isSome()&&t.text.isSome(),P={tag:"button",classes:[...T.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],...A?["tox-button--icon-and-text"]:[]],attributes:{...E,...jt(c)?{"data-mce-name":c}:{}}},$=[],V=s.translate(t.text.getOr("")),W=xo(V),G=[...Eg([g.map(oe=>oe.asSpec())]),...t.text.isSome()?[W]:[]],ee=vC(w,k.some(h),$,P,G,t.tooltip,s);return As.sketch(ee)},TT=(t,s,c)=>{if(xT(t,s)){const i=()=>h,d=t,g={...t,type:"menubutton",search:k.none(),onSetup:y=>(y.setEnabled(t.enabled),J),fetch:TA(d.items,i,c)},h=On(E0(g,"tox-tbtn",c,k.none(),!0,t.text.or(t.tooltip).getOrUndefined()));return h.asSpec()}else if(ET(t,s)){const i=_l(t.name,s),d={...t,context:s==="cancel"?"any":t.context,borderless:!1};return x$(d,i,c.shared.providers,[])}else{if(k9(t,s))return PA(t,c.shared.providers,t.text.or(t.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")}},NA=(t,s)=>{const c=_l(t.name,"custom");return NN(k.none(),Bn.parts.field({factory:As,...S$(t,k.some(c),s,[dT(""),Vi.self()])}))},E$={type:"separator"},BA=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:J}),$A=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:J}),O9=t=>De(t,BA),T$=(t,s)=>po(s,c=>c.type===t),_$=(t,s)=>O9(T$(t,s)),A9=t=>_$("header",t.targets),FA=t=>_$("anchor",t.targets),R9=t=>k.from(t.anchorTop).map(s=>$A("<top>",s)).toArray(),D9=t=>k.from(t.anchorBottom).map(s=>$A("<bottom>",s)).toArray(),k$=t=>De(t,s=>$A(s,s)),O$=t=>wo(t,(s,c)=>s.length===0||c.length===0?s.concat(c):s.concat(E$,c),[]),IA=(t,s)=>{const c=t.toLowerCase();return po(s,i=>{var d;const g=i.meta!==void 0&&i.meta.text!==void 0?i.meta.text:i.text,h=(d=i.value)!==null&&d!==void 0?d:"";return _r(g.toLowerCase(),c)||_r(h.toLowerCase(),c)})},M9=(t,s,c)=>{var i,d;const g=nt.getValue(s),h=(d=(i=g==null?void 0:g.meta)===null||i===void 0?void 0:i.text)!==null&&d!==void 0?d:g.value;return c.getLinkInformation().fold(()=>[],w=>{const E=IA(h,k$(c.getHistory(t)));return t==="file"?O$([E,IA(h,A9(w)),IA(h,Gt([R9(w),FA(w),D9(w)]))]):E})},A$=ut("aria-invalid"),P9=(t,s,c,i)=>{const d=s.shared.providers,g=ee=>{const oe=nt.getValue(ee);c.addToHistory(oe.value,t.filetype)},h={...i.map(ee=>({initialData:ee})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":A$,type:"url"},minChars:0,responseTime:0,fetch:ee=>{const oe=M9(t.filetype,ee,c),be=Rg(oe,vl.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:k.none()});return Nr.pure(be)},getHotspot:ee=>V.getOpt(ee),onSetValue:(ee,oe)=>{ee.hasConfigured(wd)&&wd.run(ee).get(J)},typeaheadBehaviours:$e([...c.getValidationHandler().map(ee=>wd.config({getRoot:oe=>di(oe.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(oe,be)=>{T.getOpt(oe).each(ye=>{Dt(ye.element,"title",d.translate(be))})}},validator:{validate:oe=>{const be=nt.getValue(oe);return w$.nu(ye=>{ee({type:t.filetype,url:be.value},We=>{if(We.status==="invalid"){const at=tn.error(We.message);ye(at)}else{const at=tn.value(We.message);ye(at)}})})},validateOnLoad:!1}})).toArray(),Mt.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable}),ho.config({}),Zt("urlinput-events",[Ee(wi(),ee=>{const oe=Ka(ee.element),be=oe.trim();be!==oe&&hm(ee.element,be),t.filetype==="file"&&ht(ee,Kc,{name:t.name})}),Ee(sl(),ee=>{ht(ee,Kc,{name:t.name}),g(ee)}),Ee(gh(),ee=>{ht(ee,Kc,{name:t.name}),g(ee)})])]),eventOrder:{[wi()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:ee=>ee.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:M2(!1,1,"normal")},onExecute:(ee,oe,be)=>{ht(oe,tC,{})},onItemExecute:(ee,oe,be,ye)=>{g(ee),ht(ee,Kc,{name:t.name})}},y=Bn.parts.field({...h,factory:v$}),w=t.label.map(ee=>zm(ee,d)),T=On(((ee,oe,be=ee,ye=ee)=>Qa(be,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+ee],attributes:{title:d.translate(ye),"aria-live":"polite",...oe.fold(()=>({}),We=>({id:We}))}},d.icons))("invalid",k.some(A$),"warning")),A=On({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[T.asSpec()]}),P=c.getUrlPicker(t.filetype),$=ut("browser.url.event"),V=On({dom:{tag:"div",classes:["tox-control-wrap"]},components:[y,A.asSpec()],behaviours:$e([Mt.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable})])}),W=On(x$({context:t.context,name:t.name,icon:k.some("browse"),text:t.picker_text.or(t.label).getOr(""),enabled:t.enabled,primary:!1,buttonType:k.none(),borderless:!0},ee=>sn(ee,$),d,[],["tox-browse-url"])),se=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Gt([[V.asSpec()],P.map(()=>W.asSpec()).toArray()])}),G=ee=>{fn.getCurrent(ee).each(oe=>{const be=nt.getValue(oe),ye={fieldname:t.name,...be};P.each(We=>{We(ye).get(at=>{nt.setValue(oe,at),ht(ee,Kc,{name:t.name})})})})};return Bn.sketch({dom:_H(),components:w.toArray().concat([se()]),fieldBehaviours:$e([Mt.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable,onDisabled:ee=>{Bn.getField(ee).each(Mt.disable),W.getOpt(ee).each(Mt.disable)},onEnabled:ee=>{Bn.getField(ee).each(Mt.enable),W.getOpt(ee).each(Mt.enable)}}),os(()=>d.checkUiComponentContext(t.context)),Zt("url-input-events",[Ee($,G)])])})},R$=(t,s)=>{const c=P3(t.icon,s.icons);return iu.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:c},components:t.url?[As.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:c,attributes:{title:s.translate(t.iconTooltip)}},action:i=>ht(i,Cd,{name:"alert-banner",value:t.url}),buttonBehaviours:$e([U5()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]})},uu=(t,s)=>{t.dom.checked=s},LA=t=>t.dom.checked,N9=(t,s,c)=>{const i=w=>(w.element.dom.click(),k.some(!0)),d=Bn.parts.field({factory:{sketch:an},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:$e([Vi.self(),Mt.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:w=>{di(w.element).each(E=>ns(E,"tox-checkbox--disabled"))},onEnabled:w=>{di(w.element).each(E=>In(E,"tox-checkbox--disabled"))}}),ho.config({}),Bt.config({}),AB(c,LA,uu),xt.config({mode:"special",onEnter:i,onSpace:i,stopSpaceKeyup:!0}),Zt("checkbox-events",[Ee(sl(),(w,E)=>{ht(w,Kc,{name:t.name})})])])}),g=Bn.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[xo(s.translate(t.label))],behaviours:$e([b0.config({})])}),h=w=>Qa(w==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+w]},s.icons),y=On({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[h("checked"),h("unchecked")]});return Bn.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,y.asSpec(),g],fieldBehaviours:$e([Mt.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),os(()=>s.checkUiComponentContext(t.context))])})},B9=(t,s)=>{const c=["tox-form__group",...t.stretched?["tox-form__group--stretched"]:[]],i=Zt("htmlpanel",[lo(d=>{t.onInit(d.element.dom)})]);return t.presets==="presentation"?iu.sketch({dom:{tag:"div",classes:c,innerHtml:t.html},containerBehaviours:$e([Uo.config({...s.tooltips.getConfig({tooltipText:"",onShow:d=>{go(d.element,"[data-mce-tooltip]:hover").orThunk(()=>Dr(d.element)).each(g=>{Lo(g,"data-mce-tooltip").each(h=>{Uo.setComponents(d,s.tooltips.getComponents({tooltipText:h}))})})}}),mode:"children-normal",anchor:d=>({type:"node",node:go(d.element,"[data-mce-tooltip]:hover").orThunk(()=>Dr(d.element).filter(g=>Lo(g,"data-mce-tooltip").isSome())),root:d.element,layouts:{onLtr:te([is,Nn,ps,or,bs,vs]),onRtl:te([is,Nn,ps,or,bs,vs])},bubble:Ya(0,-2,{})})}),i])}):iu.sketch({dom:{tag:"div",classes:c,innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:$e([ho.config({}),Bt.config({}),i])})},Ws=t=>(s,c,i,d,g)=>rt(c,"name").fold(()=>t(c,d,k.none(),g),h=>s.field(h,t(c,d,rt(i,h),g))),$9=t=>(s,c,i,d,g)=>{const h=zo(c,{source:"dynamic"});return Ws(t)(s,h,i,d,g)},F9={bar:Ws((t,s)=>SH(t,s.shared)),collection:Ws((t,s,c)=>kH(t,s.shared.providers,c)),alertbanner:Ws((t,s)=>R$(t,s.shared.providers)),input:Ws((t,s,c)=>o$(t,s.shared.providers,c)),textarea:Ws((t,s,c)=>s$(t,s.shared.providers,c)),label:Ws((t,s,c,i)=>gA(t,s.shared,i)),iframe:$9((t,s,c)=>MV(t,s.shared.providers,c)),button:Ws((t,s)=>NA(t,s.shared.providers)),checkbox:Ws((t,s,c)=>N9(t,s.shared.providers,c)),colorinput:Ws((t,s,c)=>RH(t,s.shared,s.colorinput,c)),colorpicker:Ws((t,s,c)=>SV(t,s.shared.providers,c)),dropzone:Ws((t,s,c)=>NB(t,s.shared.providers,c)),grid:Ws((t,s)=>EV(t,s.shared)),listbox:Ws((t,s,c)=>VV(t,s,c)),selectbox:Ws((t,s,c)=>UV(t,s.shared.providers,c)),sizeinput:Ws((t,s)=>KV(t,s.shared.providers)),slider:Ws((t,s,c)=>YV(t,s.shared.providers,c)),urlinput:Ws((t,s,c)=>P9(t,s,s.urlinput,c)),customeditor:Ws(mT),htmlpanel:Ws((t,s)=>B9(t,s.shared.providers)),imagepreview:Ws((t,s,c)=>NV(t,c)),table:Ws((t,s)=>XV(t,s.shared.providers)),tree:Ws((t,s)=>g9(t,s)),panel:Ws((t,s)=>XB(t,s))},D$={field:(t,s)=>s,record:te([])},HA=(t,s,c,i,d)=>{const g=zo(i,{shared:{interpreter:h=>M$(t,h,c,g,d)}});return M$(t,s,c,g,d)},M$=(t,s,c,i,d)=>rt(F9,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),g=>g(t,s,c,i,d)),I9=(t,s,c,i)=>M$(D$,t,s,c,i),ds="layout-inset",yC=t=>t.x,P$=(t,s)=>t.x+t.width/2-s.width/2,T0=(t,s)=>t.x+t.width-s.width,VA=t=>t.y,zA=(t,s)=>t.y+t.height-s.height,N$=(t,s)=>t.y+t.height/2-s.height/2,_T=(t,s,c)=>mr(T0(t,s),zA(t,s),c.insetSouthwest(),lb(),"southwest",fr(t,{right:0,bottom:3}),ds),kT=(t,s,c)=>mr(yC(t),zA(t,s),c.insetSoutheast(),ly(),"southeast",fr(t,{left:1,bottom:3}),ds),CC=(t,s,c)=>mr(T0(t,s),VA(t),c.insetNorthwest(),iy(),"northwest",fr(t,{right:0,top:2}),ds),wC=(t,s,c)=>mr(yC(t),VA(t),c.insetNortheast(),ib(),"northeast",fr(t,{left:1,top:2}),ds),kl=(t,s,c)=>mr(P$(t,s),VA(t),c.insetNorth(),dt(),"north",fr(t,{top:2}),ds),_0=(t,s,c)=>mr(P$(t,s),zA(t,s),c.insetSouth(),Mh(),"south",fr(t,{bottom:3}),ds),SC=(t,s,c)=>mr(T0(t,s),N$(t,s),c.insetEast(),fS(),"east",fr(t,{right:0}),ds),UA=(t,s,c)=>mr(yC(t),N$(t,s),c.insetWest(),uy(),"west",fr(t,{left:1}),ds),B$=t=>{switch(t){case"north":return kl;case"northeast":return wC;case"northwest":return CC;case"south":return _0;case"southeast":return kT;case"southwest":return _T;case"east":return SC;case"west":return UA}},$$=(t,s,c,i,d)=>vy(i).map(B$).getOr(kl)(t,s,c,i,d),F$=t=>{switch(t){case"north":return _0;case"northeast":return kT;case"northwest":return _T;case"south":return kl;case"southeast":return wC;case"southwest":return CC;case"east":return UA;case"west":return SC}},L9=(t,s,c,i,d)=>vy(i).map(F$).getOr(kl)(t,s,c,i,d),xC={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},I$=(t,s,c)=>{const d={maxHeightFunction:td()},g=()=>({type:"node",root:Pd(lr(t())),node:k.from(t()),bubble:Ya(12,12,xC),layouts:{onRtl:()=>[wC],onLtr:()=>[CC]},overrides:d}),h=()=>({type:"hotspot",hotspot:s(),bubble:Ya(-12,12,xC),layouts:{onRtl:()=>[ps,bs,is],onLtr:()=>[bs,ps,is]},overrides:d});return()=>c()?g():h()},XG=(t,s,c,i)=>{const g={maxHeightFunction:td()},h=()=>({type:"node",root:Pd(lr(s())),node:k.from(s()),bubble:Ya(12,12,xC),layouts:{onRtl:()=>[kl],onLtr:()=>[kl]},overrides:g}),y=()=>t?{type:"node",root:Pd(lr(s())),node:k.from(s()),bubble:Ya(0,-Xi(s()),xC),layouts:{onRtl:()=>[Nn],onLtr:()=>[Nn]},overrides:g}:{type:"hotspot",hotspot:c(),bubble:Ya(0,0,xC),layouts:{onRtl:()=>[Nn],onLtr:()=>[Nn]},overrides:g};return()=>i()?h():y()},JG=(t,s,c)=>{const i=()=>({type:"node",root:Pd(lr(t())),node:k.from(t()),layouts:{onRtl:()=>[kl],onLtr:()=>[kl]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[is],onLtr:()=>[is]}});return()=>c()?i():d()},H9=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const c=t.selection.getRng(),i=t.model.table.getSelectedCells();if(i.length>1){const d=i[0],g=i[i.length-1],h={firstCell:ae.fromDom(d),lastCell:ae.fromDom(g)};return k.some(h)}return k.some(Kf.range(ae.fromDom(c.startContainer),c.startOffset,ae.fromDom(c.endContainer),c.endOffset))}}),V9=t=>s=>({type:"node",root:t(),node:s}),z9=(t,s,c,i)=>{const d=pl(t),g=()=>ae.fromDom(t.getBody()),h=()=>ae.fromDom(t.getContentAreaContainer()),y=()=>d||!i();return{inlineDialog:I$(h,s,y),inlineBottomDialog:XG(t.inline,h,c,y),banner:JG(h,s,y),cursor:H9(t,g),node:V9(g)}},L$=t=>(s,c)=>{rN(t)(s,c)},WA=t=>()=>QP(t),U9=t=>s=>$E(t,s),W9=t=>s=>JP(t,s),H$=t=>({colorPicker:L$(t),hasCustomColors:WA(t),getColors:U9(t),getColorCols:W9(t)}),Z9=t=>()=>Gx(t),j9=t=>({isDraggableModal:Z9(t)}),G9=t=>{const s=St(b3(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},V$=t=>sa(t,"items"),OT=t=>sa(t,"format"),ZA=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],q9=t=>$n(t,"items"),K9=t=>$n(t,"block"),Y9=t=>$n(t,"inline"),X9=t=>$n(t,"selector"),jA=t=>wo(t,(s,c)=>{if(q9(c)){const i=jA(c.items);return{customFormats:s.customFormats.concat(i.customFormats),formats:s.formats.concat([{title:c.title,items:i.formats}])}}else if(Y9(c)||K9(c)||X9(c)){const d=`custom-${ke(c.name)?c.name:c.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:c}]),formats:s.formats.concat([{title:c.title,format:d,icon:c.icon}])}}else return{...s,formats:s.formats.concat(c)}},{customFormats:[],formats:[]}),J9=(t,s)=>{const c=jA(s),i=d=>{it(d,g=>{t.formatter.has(g.name)||t.formatter.register(g.name,g.format)})};return t.formatter?i(c.customFormats):t.on("init",()=>{i(c.customFormats)}),c.formats},EC=t=>c3(t).map(s=>{const c=J9(t,s);return d5(t)?ZA.concat(c):c}).getOr(ZA),Q9=t=>{const s=Fo(t);return s.length===1&&$o(s,"title")},TC=(t,s,c)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:c(t.format)}),z$=(t,s,c,i)=>{const d=w=>TC(w,c,i),g=w=>{const E=y(w.items);return{...w,type:"submenu",getStyleItems:te(E)}},h=w=>{const E=ke(w.name)?w.name:ut(w.title),T=`custom-${E}`,A={...w,type:"formatter",format:T,isSelected:c(T),getStylePreview:i(T)};return t.formatter.register(E,A),A},y=w=>De(w,E=>V$(E)?g(E):OT(E)?d(E):Q9(E)?{...E,type:"separator"}:h(E));return y(s)},GA=t=>{const s=y=>()=>t.formatter.match(y),c=y=>()=>{const w=t.formatter.get(y);return w!==void 0?k.some({tag:w.length>0&&(w[0].inline||w[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(y))}):k.none()},i=St([]),d=St([]),g=St(!1);return t.on("PreInit",y=>{const w=EC(t),E=z$(t,w,s,c);i.set(E)}),t.on("addStyleModifications",y=>{const w=z$(t,y.items,s,c);d.set(w),g.set(y.replace)}),{getData:()=>{const y=g.get()?[]:i.get(),w=d.get();return y.concat(w)}}},_C=t=>{let i=0;const d=()=>i>0,g=y=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[xo(y.tooltipText)]}];return{getConfig:y=>({delayForShow:()=>d()?60:300,delayForHide:te(300),exclusive:!0,lazySink:t,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:g(y),onShow:(w,E)=>{i++,y.onShow&&y.onShow(w,E)},onHide:(w,E)=>{i--,y.onHide&&y.onHide(w,E)},onSetup:y.onSetup}),getComponents:g}},U$=t=>jt(t)&&t.nodeType===1,ez=jm.trim,qA=t=>s=>!!(U$(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),W$=qA("true"),Z$=qA("false"),j$=(t,s,c,i,d)=>({type:t,title:s,url:c,level:i,attach:d}),KA=t=>{let s=t;for(;s=s.parentNode;){const c=s.contentEditable;if(c&&c!=="inherit")return W$(s)}return!1},AT=(t,s)=>De(sr(ae.fromDom(s),t),c=>c.dom),G$=t=>t.innerText||t.textContent,tz=t=>t.id?t.id:ut("h"),k0=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,q$=t=>k0(t)&&XA(t),YA=t=>t&&/^(H[1-6])$/.test(t.nodeName),XA=t=>KA(t)&&!Z$(t),JA=t=>YA(t)&&XA(t),QA=t=>YA(t)?parseInt(t.nodeName.substr(1),10):0,nz=t=>{var s;const c=tz(t),i=()=>{t.id=c};return j$("header",(s=G$(t))!==null&&s!==void 0?s:"","#"+c,QA(t),i)},oz=t=>{const s=t.id||t.name,c=G$(t);return j$("anchor",c||"#"+s,"#"+s,0,J)},sz=t=>De(po(t,JA),nz),eR=t=>De(po(t,q$),oz),rz=t=>AT("h1,h2,h3,h4,h5,h6,a:not([href])",t),cz=t=>ez(t.title).length>0,az={find:t=>{const s=rz(t);return po(sz(s).concat(eR(s)),cz)}},RT="tinymce-url-history",K$=5,Y$=t=>ke(t)&&/^https?/.test(t),X$=t=>yt(t)&&t.length<=K$&&yu(t,Y$),J$=t=>At(t)&&Ir(t,s=>!X$(s)).isNone(),O0=()=>{const t=Op.getItem(RT);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(c){if(c instanceof SyntaxError)return console.log("Local storage "+RT+" was not valid JSON",c),{};throw c}return J$(s)?s:(console.log("Local storage "+RT+" was not valid format",s),{})},iz=t=>{if(!J$(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));Op.setItem(RT,JSON.stringify(t))},lz=t=>{const s=O0();return rt(s,t).getOr([])},tR=(t,s)=>{if(!Y$(t))return;const c=O0(),i=rt(c,s).getOr([]),d=po(i,g=>g!==t);c[s]=[t].concat(d).slice(0,K$),iz(c)},nR=t=>!!t,uz=t=>Io(jm.makeMap(t,/[, ]/),nR),oR=t=>k.from(u3(t)),dz=t=>{const s=k.from(jx(t)).filter(nR).map(uz);return oR(t).fold(Vn,c=>s.fold(Ot,i=>Fo(i).length>0?i:!1))},mz=(t,s)=>{const c=dz(t);return Co(c)?c?oR(t):k.none():c[s]?oR(t):k.none()},fz=(t,s)=>mz(t,s).map(c=>i=>Nr.nu(d=>{const g=(y,w)=>{if(!ke(y))throw new Error("Expected value to be string");if(w!==void 0&&!At(w))throw new Error("Expected meta to be a object");d({value:y,meta:w})},h={filetype:s,fieldname:i.fieldname,...k.from(i.meta).getOr({})};c.call(t,g,i.value,h)})),Q$=t=>k.from(t).filter(ke).getOrUndefined(),gz=t=>d3(t)?k.some({targets:az.find(t.getBody()),anchorTop:Q$(m3(t)),anchorBottom:Q$(y5(t))}):k.none(),hz=t=>k.from(b5(t)),pz=t=>({getHistory:lz,addToHistory:tR,getLinkInformation:()=>gz(t),getValidationHandler:()=>hz(t),getUrlPicker:s=>fz(t,s)}),eq=(t,s,c,i)=>{const d=St(!1),g=G9(s),h={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:$i.translate,isDisabled:()=>!s.ui.isEnabled(),getOption:s.options.get,tooltips:_C(t.dialog),checkUiComponentContext:G=>{const[ee,oe=""]=G.split(":"),be=s.ui.registry.getAll().contexts,ye=rt(be,ee).fold(()=>rt(be,"mode").map(We=>We("design")).getOr(!1),We=>oe.charAt(0)==="!"?!We(oe.slice(1)):We(oe));return{contextType:ee,shouldDisable:!ye}}},y=pz(s),w=GA(s),E=H$(s),T=j9(s),A=()=>d.get(),P=G=>d.set(G),$={shared:{providers:h,anchors:z9(s,c,i,g.isPositionedAtTop),header:g},urlinput:y,styles:w,colorinput:E,dialog:T,isContextMenuOpen:A,setContextMenuState:P},V=G=>k.none(),W={...$,shared:{...$.shared,interpreter:G=>I9(G,{},W,V),getSink:t.popup}},se={...$,shared:{...$.shared,interpreter:G=>I9(G,{},se,V),getSink:t.dialog}};return{popup:W,dialog:se}},bz=(t,s,c)=>{const i=(xe,lt)=>{it([s,...c],Je=>{Je.broadcastEvent(xe,lt)})},d=(xe,lt)=>{it([s,...c],Je=>{Je.broadcastOn([xe],lt)})},g=xe=>d(tu(),{target:xe.target}),h=bi(),y=Zr(h,"touchstart",g),w=Zr(h,"touchmove",xe=>i(tk(),xe)),E=Zr(h,"touchend",xe=>i(Ew(),xe)),T=Zr(h,"mousedown",g),A=Zr(h,"mouseup",xe=>{xe.raw.button===0&&d(Nb(),{target:xe.target})}),P=xe=>d(tu(),{target:ae.fromDom(xe.target)}),$=xe=>{xe.button===0&&d(Nb(),{target:ae.fromDom(xe.target)})},V=()=>{it(t.editorManager.get(),xe=>{t!==xe&&xe.dispatch("DismissPopups",{relatedTarget:t})})},W=xe=>i(Hu(),kS(xe)),se=xe=>{d(ld(),{}),i(Jd(),kS(xe))},G=lr(ae.fromDom(t.getElement())),ee=yy(G,"scroll",xe=>{requestAnimationFrame(()=>{const lt=t.getContainer();if(lt!=null){const mt=pg(t,s.element).map(ln=>[ln.element,...ln.others]).getOr([]);uc(mt,ln=>Un(ln,xe.target))&&(t.dispatch("ElementScroll",{target:xe.target.dom}),i(Av(),xe))}})}),oe=()=>d(ld(),{}),be=xe=>{xe.state&&d(tu(),{target:ae.fromDom(t.getContainer())})},ye=xe=>{d(tu(),{target:ae.fromDom(xe.relatedTarget.getContainer())})},We=xe=>t.dispatch("focusin",xe),at=xe=>t.dispatch("focusout",xe);t.on("PostRender",()=>{t.on("click",P),t.on("tap",P),t.on("mouseup",$),t.on("mousedown",V),t.on("ScrollWindow",W),t.on("ResizeWindow",se),t.on("ResizeEditor",oe),t.on("AfterProgressState",be),t.on("DismissPopups",ye),it([s,...c],xe=>{xe.element.dom.addEventListener("focusin",We),xe.element.dom.addEventListener("focusout",at)})}),t.on("remove",()=>{t.off("click",P),t.off("tap",P),t.off("mouseup",$),t.off("mousedown",V),t.off("ScrollWindow",W),t.off("ResizeWindow",se),t.off("ResizeEditor",oe),t.off("AfterProgressState",be),t.off("DismissPopups",ye),it([s,...c],xe=>{xe.element.dom.removeEventListener("focusin",We),xe.element.dom.removeEventListener("focusout",at)}),T.unbind(),y.unbind(),w.unbind(),E.unbind(),A.unbind(),ee.unbind()}),t.on("detach",()=>{it([s,...c],Tm),it([s,...c],xe=>xe.destroy())})},Zs=o2,du=Cx,DT=te([le("shell",!1),Te("makeItem"),le("setupItem",J),ya.field("listBehaviours",[Ht])]),yz=Gc({name:"items",overrides:()=>({behaviours:$e([Ht.config({})])})}),Cz=te([yz]),wz=te("CustomList"),Sz=(t,s,c,i)=>{const d=(y,w)=>{h(y).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},E=>{const T=Ht.contents(E),A=w.length,P=A-T.length,$=P>0?cs(P,()=>t.makeItem()):[],V=T.slice(A);it(V,se=>Ht.remove(E,se)),it($,se=>Ht.append(E,se));const W=Ht.contents(E);it(W,(se,G)=>{t.setupItem(y,se,w[G],G)})})},g=t.shell?{behaviours:[Ht.config({})],components:[]}:{behaviours:[],components:s},h=y=>t.shell?k.some(y):qn(y,t,"items");return{uid:t.uid,dom:t.dom,components:g.components,behaviours:zs(t.listBehaviours,g.behaviours),apis:{setItems:d}}},eF=pr({name:wz(),configFields:DT(),partFields:Cz(),factory:Sz,apis:{setItems:(t,s,c)=>{t.setItems(s,c)}}}),A0=te([Te("dom"),le("shell",!0),Vs("toolbarBehaviours",[Ht])]),tF=te([Gc({name:"groups",overrides:()=>({behaviours:$e([Ht.config({})])})})]),nF=(t,s,c,i)=>{const d=(y,w)=>{g(y).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},E=>{Ht.set(E,w)})},g=y=>t.shell?k.some(y):qn(y,t,"groups"),h=t.shell?{behaviours:[Ht.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:h.components,behaviours:zs(t.toolbarBehaviours,h.behaviours),apis:{setGroups:d,refresh:J},domModification:{attributes:{role:"group"}}}},mu=pr({name:"Toolbar",configFields:A0(),partFields:tF(),factory:nF,apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)}}}),oF=J,xz=Vn,sF=te([]);var Ez=Object.freeze({__proto__:null,setup:oF,isDocked:xz,getBehaviours:sF});const qm=te(ut("toolbar-height-change")),fu={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},R0="tox-tinymce--toolbar-sticky-on",kC="tox-tinymce--toolbar-sticky-off",rF=(t,s)=>{const c=Pc(s),d=Dd(s).dom.innerHeight,g=Vr(c),h=ae.fromDom(t.elm),y=Id(h),w=gs(h),E=y.y,T=E+w,A=Ho(s),P=gs(s),$=A.top,V=$+P,W=Math.abs($-g.top)<2,se=Math.abs(V-(g.top+d))<2;if(W&&E<V)df(g.left,E-P,c);else if(se&&T>$){const G=E-d+w+P;df(g.left,G,c)}},OC=(t,s)=>$o(eo.getModes(t),s),MT=t=>{const s=i=>Xi(i)+(parseInt(kr(i,"margin-top"),10)||0)+(parseInt(kr(i,"margin-bottom"),10)||0),c=t.element;di(c).each(i=>{const d="padding-"+eo.getModes(t)[0];if(eo.isDocked(t)){const g=tc(i);Vt(c,"width",g+"px"),Vt(i,d,s(c)+"px")}else Kt(c,"width"),Kt(i,d)})},Tz=(t,s)=>{s?(In(t,fu.fadeOutClass),_f(t,[fu.transitionClass,fu.fadeInClass])):(In(t,fu.fadeInClass),_f(t,[fu.fadeOutClass,fu.transitionClass]))},cF=(t,s)=>{const c=ae.fromDom(t.getContainer());s?(ns(c,R0),In(c,kC)):(ns(c,kC),In(c,R0))},_z=(t,s)=>{const c=Pc(s);ml(c).filter(i=>!Un(s,i)).filter(i=>Un(i,ae.fromDom(c.dom.body))||Mc(t,i)).each(()=>pa(s))},kz=(t,s)=>Dr(t).orThunk(()=>s().toOptional().bind(c=>Dr(c.element))),Oz=(t,s,c)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{c().each(eo.reset)}),t.on("ResizeWindow ResizeEditor",()=>{c().each(MT)}),t.on("SkinLoaded",()=>{c().each(i=>{eo.isDocked(i)?eo.reset(i):eo.refresh(i)})}),t.on("FullscreenStateChanged",()=>{c().each(eo.reset)})),t.on("AfterScrollIntoView",i=>{c().each(d=>{eo.refresh(d);const g=d.element;N4(g)&&rF(i,g)})}),t.on("PostRender",()=>{cF(t,!1)})},Az=t=>t().map(eo.isDocked).getOr(!1),D0=()=>[wc.config({channels:{[qm()]:{onReceive:MT}}})],M0=(t,s)=>{const c=Mn(),i=s.getSink,d=y=>{i().each(w=>y(w.element))},g=y=>{t.inline||MT(y),cF(t,eo.isDocked(y)),y.getSystem().broadcastOn([ld()],{}),i().each(w=>w.getSystem().broadcastOn([ld()],{}))},h=t.inline?[]:D0();return[Bt.config({}),eo.config({contextual:{lazyContext:y=>{const w=Xi(y.element),E=t.inline?t.getContentAreaContainer():t.getContainer();return k.from(E).map(T=>{const A=Vo(ae.fromDom(T));return pg(t,y.element).fold(()=>{const $=A.height-w,V=A.y+(OC(y,"top")?0:w);return To(A.x,V,A.width,$)},$=>{const V=Au(A,bg($)),W=OC(y,"top")?V.y:V.y+w;return To(V.x,W,V.width,V.height-w)})})},onShow:()=>{d(y=>Tz(y,!0))},onShown:y=>{d(w=>Ti(w,[fu.transitionClass,fu.fadeInClass])),c.get().each(w=>{_z(y.element,w),c.clear()})},onHide:y=>{kz(y.element,i).fold(c.clear,c.set),d(w=>Tz(w,!1))},onHidden:()=>{d(y=>Ti(y,[fu.transitionClass]))},...fu},lazyViewport:y=>pg(t,y.element).fold(()=>{const E=Ns(),T=h5(t),A=E.y+(OC(y,"top")?T:0),P=E.height-(OC(y,"bottom")?T:0);return{bounds:To(E.x,A,E.width,P),optScrollEnv:k.none()}},E=>({bounds:bg(E),optScrollEnv:k.some({currentScrollTop:E.element.dom.scrollTop,scrollElmTop:Ho(E.element).top})})),modes:[s.header.getDockingMode()],onDocked:g,onUndocked:g}),...h]};var sR=Object.freeze({__proto__:null,setup:Oz,isDocked:Az,getBehaviours:M0});const Rz=t=>{const s=t.editor,c=t.sticky?M0:sF;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:$e(c(s,t.sharedBackstage))}},Dz=kt([us,Dn("items",pw([Cv([W3,Ic("items",tt)]),tt]))].concat(wp)),rR=t=>_o("GroupToolbarButton",Dz,t),Mz=[_s("text"),_s("tooltip"),_s("icon"),io("search",!1,pw([La,kt([_s("placeholder")])],t=>Co(t)?t?k.some({placeholder:k.none()}):k.none():k.some(t))),Va("fetch"),fo("onSetup",()=>J),ts("context","mode:design")],P0=kt([us,...Mz]),cR=t=>_o("menubutton",P0,t),Pz=kt([us,N2,ei,Vm,bP,gP,Cp,Qs("presets","normal",["normal","color","listpreview"]),vP(1),d0,hP,ts("context","mode:design")]),Nz=t=>_o("SplitButton",Pz,t);var aR=Tc({factory:(t,s)=>{const c=(d,g)=>{const h=De(g,y=>{const w={type:"menubutton",text:y.text,fetch:T=>{T(y.getItems())},context:"any"},E=cR(w).mapError(T=>Zd(T)).getOrDie();return E0(E,"tox-mbtn",s.backstage,k.some("menuitem"))});Ht.set(d,h)},i={focus:xt.focusIn,setMenus:c};return{uid:t.uid,dom:t.dom,components:[],behaviours:$e([Ht.config({}),Zt("menubar-events",[lo(d=>{t.onSetup(d)}),Ee(za(),(d,g)=>{go(d.element,".tox-mbtn--active").each(h=>{ul(g.event.target,".tox-mbtn").each(y=>{Un(h,y)||d.getSystem().getByDom(h).each(w=>{d.getSystem().getByDom(y).each(E=>{ka.expand(E),ka.close(w),Bt.focus(E)})})})})}),Ee(ph(),(d,g)=>{g.event.prevFocus.bind(h=>d.getSystem().getByDom(h).toOptional()).each(h=>{g.event.newFocus.bind(y=>d.getSystem().getByDom(y).toOptional()).each(y=>{ka.isOpen(h)&&(ka.expand(y),ka.close(h))})})})]),xt.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(t.onEscape(d),k.some(!0))}),ho.config({})]),apis:i,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Te("dom"),Te("uid"),Te("onEscape"),Te("backstage"),le("onSetup",J)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,c)=>{t.setMenus(s,c)}}});const Bz="Upgrade",$z="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",aF=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:$z,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:Bz}}]}),iR="container",lR=[Vs("slotBehaviours",[])],iF=t=>"<alloy.field."+t+">",PT=t=>{const s=(()=>{const g=[];return{slot:(y,w)=>(g.push(y),Zb(iR,iF(y),w)),record:te(g)}})(),c=t(s),i=s.record(),d=De(i,g=>Sr({name:g,pname:iF(g)}));return sp(iR,lR,d,NT,c)},NT=(t,s)=>{const c=W=>n2(t),i=(W,se)=>qn(W,t,se),d=(W,se)=>(G,ee)=>qn(G,t,ee).map(oe=>W(oe,ee)).getOr(se),g=W=>(se,G)=>{it(G,ee=>W(se,ee))},h=(W,se)=>qt(W.element,"aria-hidden")!=="true",y=(W,se)=>{if(!h(W)){const G=W.element;Kt(G,"display"),Ro(G,"aria-hidden"),ht(W,Cf(),{name:se,visible:!0})}},w=(W,se)=>{if(h(W)){const G=W.element;Vt(G,"display","none"),Dt(G,"aria-hidden","true"),ht(W,Cf(),{name:se,visible:!1})}},E=d(h,!1),T=d(w),A=g(T),P=W=>A(W,c()),$=d(y),V={getSlotNames:c,getSlot:i,isShowing:E,hideSlot:T,hideAllSlots:P,showSlot:$};return{uid:t.uid,dom:t.dom,components:s,behaviours:Ib(t.slotBehaviours),apis:V}},Kr={...Io({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,c)=>t.getSlot(s,c),isShowing:(t,s,c)=>t.isShowing(s,c),hideSlot:(t,s,c)=>t.hideSlot(s,c),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,c)=>t.showSlot(s,c)},t=>ob(t)),sketch:PT},Iz=kt([ei,N2,fo("onShow",J),fo("onHide",J),Cp]),Lz=t=>_o("sidebar",Iz,t),Hz=t=>{const{sidebars:s}=t.ui.registry.getAll();it(Fo(s),c=>{const i=s[c],d=()=>Ac(k.from(t.queryCommandValue("ToggleSidebar")),c);t.ui.registry.addToggleButton(c,{icon:i.icon,tooltip:i.tooltip,onAction:g=>{t.execCommand("ToggleSidebar",!1,c),g.setActive(d())},onSetup:g=>{g.setActive(d());const h=()=>g.setActive(d());return t.on("ToggleSidebar",h),()=>{t.off("ToggleSidebar",h)}},context:"any"})})},uR=t=>({element:()=>t.element.dom}),Vz=(t,s)=>{const c=De(Fo(s),i=>{const d=s[i],g=Ne(Lz(d));return{name:i,getApi:uR,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return De(c,i=>{const d=St(J);return t.slot(i.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:f0.unnamedEvents([Sg(i,d),xg(i,d),Ee(Cf(),(g,h)=>{const y=h.event;zt(c,E=>E.name===y.name).each(E=>{(y.visible?E.onShow:E.onHide)(E.getApi(g))})})])})})},dR=t=>Kr.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:Vz(s,t),slotBehaviours:f0.unnamedEvents([lo(c=>Kr.hideAllSlots(c))])})),zz=(t,s,c)=>{fn.getCurrent(t).each(d=>{Ht.set(d,[dR(s)]);const g=c==null?void 0:c.toLowerCase();ke(g)&&$n(s,g)&&fn.getCurrent(d).each(h=>{Kr.showSlot(h,g),Yc.immediateGrow(d),Kt(d.element,"width"),N0(t.element,"region")})})},N0=(t,s)=>{Dt(t,"role",s)},Uz=(t,s)=>{fn.getCurrent(t).each(i=>{fn.getCurrent(i).each(g=>{Yc.hasGrown(i)?Kr.isShowing(g,s)?(Yc.shrink(i),N0(t.element,"presentation")):(Kr.hideAllSlots(g),Kr.showSlot(g,s),N0(t.element,"region")):(Kr.hideAllSlots(g),Kr.showSlot(g,s),Yc.grow(i),N0(t.element,"region"))})})},Wz=t=>fn.getCurrent(t).bind(c=>Yc.isGrowing(c)||Yc.hasGrown(c)?fn.getCurrent(c).bind(g=>zt(Kr.getSlotNames(g),h=>Kr.isShowing(g,h))):k.none()),mR=ut("FixSizeEvent"),fR=ut("AutoSizeEvent"),Zz=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:$e([ho.config({}),Bt.config({}),Yc.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{fn.getCurrent(s).each(Kr.hideAllSlots),sn(s,fR)},onGrown:s=>{sn(s,fR)},onStartGrow:s=>{ht(s,mR,{width:Go(s.element,"width").getOr("")})},onStartShrink:s=>{ht(s,mR,{width:tc(s.element)+"px"})}}),Ht.config({}),fn.config({find:s=>{const c=Ht.contents(s);return dc(c)}})])}],behaviours:$e([Vi.childAt(0),Zt("sidebar-sliding-events",[Ee(mR,(s,c)=>{Vt(s.element,"width",c.event.width)}),Ee(fR,(s,c)=>{Kt(s.element,"width")})])])});var Gz=Object.freeze({__proto__:null,block:(t,s,c,i)=>{Dt(t.element,"aria-busy",!0);const d=s.getRoot(t).getOr(t),g=$e([xt.config({mode:"special",onTab:()=>k.some(!0),onShiftTab:()=>k.some(!0)}),Bt.config({})]),h=i(d,g),y=d.getSystem().build(h);Ht.append(d,zc(y)),y.hasConfigured(xt)&&s.focus&&xt.focusIn(y),c.isBlocked()||s.onBlock(t),c.blockWith(()=>Ht.remove(d,y))},unblock:(t,s,c)=>{Ro(t.element,"aria-busy"),c.isBlocked()&&s.onUnblock(t),c.clear()},isBlocked:(t,s,c)=>c.isBlocked()}),lF=[fo("getRoot",k.none),er("focus",!0),bn("onBlock"),bn("onUnblock")],qz=Object.freeze({__proto__:null,init:()=>{const t=q_(),s=c=>{t.set({destroy:c})};return Ar({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const gu=Ls({fields:lF,name:"blocking",apis:Gz,state:qz}),Kz=t=>(s,c)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:ou('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),uF=t=>fn.getCurrent(t).each(s=>pa(s.element,!0)),dF=(t,s)=>{const c="tabindex",i=`data-mce-${c}`;k.from(t.iframeElement).map(ae.fromDom).each(d=>{s?(Lo(d,c).each(g=>Dt(d,i,g)),Dt(d,c,-1)):(Ro(d,c),Lo(d,i).each(g=>{Dt(d,c,g),Ro(d,i)}))})},Yz=(t,s,c,i)=>{const d=s.element;if(dF(t,c),c)gu.block(s,Kz(i)),Kt(d,"display"),Ro(d,"aria-hidden"),t.hasFocus()&&uF(s);else{const g=fn.getCurrent(s).exists(h=>Uf(h.element));gu.unblock(s),Vt(d,"display","none"),Dt(d,"aria-hidden","true"),g&&t.focus()}},Xz=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:$e([Ht.config({}),gu.config({focus:!1}),fn.config({find:s=>dc(s.components())})]),components:[]}),Jz=t=>t.type==="focusin",sq=t=>Jz(t)?(t.composed?dc(t.composedPath()):k.from(t.target)).map(ae.fromDom).filter(Jn).exists(c=>Wr(c,"mce-pastebin")):!1,rq=(t,s,c)=>{const i=St(!1),d=Mn(),g=y=>{i.get()&&!sq(y)&&(y.preventDefault(),uF(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",g),t.on("BeforeExecCommand",y=>{y.command.toLowerCase()==="mcefocus"&&y.value!==!0&&g(y)})});const h=y=>{y!==i.get()&&(i.set(y),Yz(t,s(),y,c.providers),ME(t,y))};t.on("ProgressState",y=>{if(d.on(clearTimeout),uo(y.time)){const w=mp.setEditorTimeout(t,()=>h(y.state),y.time);d.set(w)}else h(y.state),d.clear()})},mF=(t,s)=>wo(t,(d,g)=>s(g,d.len).fold(te(d),y=>({len:y.finish,list:d.list.concat([y])})),{len:0,list:[]}).list,BT=(t,s,c)=>({within:t,extra:s,withinWidth:c}),fF=(t,s,c)=>{const i=mF(t,(y,w)=>{const E=c(y);return k.some({element:y,start:w,finish:w+E,width:E})}),d=po(i,y=>y.finish<=s),g=Ss(d,(y,w)=>y+w.width,0),h=i.slice(d.length);return{within:d,extra:h,withinWidth:g}},$T=t=>De(t,s=>s.element),ri=(t,s,c)=>{const i=$T(t.concat(s));return BT(i,[],c)},Qz=(t,s,c,i)=>{const d=$T(t).concat([c]);return BT(d,$T(s),i)},gF=(t,s,c)=>BT($T(t),[],c),hF=(t,s,c)=>{const i=fF(s,t,c);return i.extra.length===0?k.some(i):k.none()},eU=(t,s,c,i)=>{const d=hF(t,s,c).getOrThunk(()=>fF(s,t-c(i),c)),g=d.within,h=d.extra,y=d.withinWidth;return h.length===1&&h[0].width<=c(i)?ri(g,h,y):h.length>=1?Qz(g,h,i,y):gF(g,h,y)},B0=(t,s)=>{const c=De(s,i=>zc(i));mu.setGroups(t,c)},tU=t=>ir(t,s=>Dr(s.element).bind(c=>s.getSystem().getByDom(c).toOptional())),AC=(t,s,c)=>{const i=s.builtGroups.get();if(i.length===0)return;const d=ot(t,s,"primary"),g=Xo.getCoupled(t,"overflowGroup");Vt(d.element,"visibility","hidden");const h=i.concat([g]),y=tU(h);c([]),B0(d,h);const w=tc(d.element),E=eU(w,s.builtGroups.get(),T=>Math.ceil(T.element.dom.getBoundingClientRect().width),g);E.extra.length===0?(Ht.remove(d,g),c([])):(B0(d,E.within),c(E.extra)),Kt(d.element,"visibility"),Nd(d.element),y.each(Bt.focus)},pF=te([Vs("splitToolbarBehaviours",[Xo]),Rn("builtGroups",()=>St([]))]),FT=te([ql(["overflowToggledClass"]),ol("getOverflowBounds"),Te("lazySink"),Rn("overflowGroups",()=>St([])),bn("onOpened"),bn("onClosed")].concat(pF())),nU=te([Sr({factory:mu,schema:A0(),name:"primary"}),Ca({schema:A0(),name:"overflow"}),Ca({name:"overflow-button"}),Ca({name:"overflow-group"})]),gR=te((t,s)=>{QC(t,Math.floor(s))}),zi=te([ql(["toggledClass"]),Te("lazySink"),Va("fetch"),ol("getBounds"),Fs("fireDismissalEventInstead",[le("event",Vc())]),nd(),bn("onToggled")]),oU=te([Ca({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:$e([en.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),Ca({factory:mu,schema:A0(),name:"toolbar",overrides:t=>({toolbarBehaviours:$e([xt.config({mode:"cyclic",onEscape:s=>(qn(s,t,"button").each(Bt.focus),k.none())})])})})]),Hp=Mn(),bF=(t,s)=>{Hp.set(!0),IT(t,s),Hp.clear()},IT=(t,s)=>{const c=Xo.getCoupled(t,"toolbarSandbox");Cn.isOpen(c)?Cn.close(c):Cn.open(c,s.toolbar())},hR=(t,s,c,i)=>{const d=c.getBounds.map(h=>h()),g=c.lazySink(t).getOrDie();cr.positionWithinBounds(g,s,{anchor:{type:"hotspot",hotspot:t,layouts:i,overrides:{maxWidthFunction:gR()}}},d)},pR=(t,s,c,i,d)=>{mu.setGroups(s,d),hR(t,s,c,i),en.on(t)},sU=(t,s,c)=>{const i=Dh(),d=(h,y)=>{const w=Hp.get().getOr(!1);c.fetch().get(E=>{pR(t,y,c,s.layouts,E),i.link(t.element),w||xt.focusIn(y)})},g=()=>{en.off(t),Hp.get().getOr(!1)||Bt.focus(t),i.unlink(t.element)};return{dom:{tag:"div",attributes:{id:i.id}},behaviours:$e([xt.config({mode:"special",onEscape:h=>(Cn.close(h),k.some(!0))}),Cn.config({onOpen:d,onClose:g,isPartOf:(h,y,w)=>Xu(y,w)||Xu(t,w),getAttachPoint:()=>c.lazySink(t).getOrDie()}),wc.config({channels:{...Jh({isExtraPart:Vn,...c.fireDismissalEventInstead.map(h=>({fireEventInstead:{event:h.event}})).getOr({})}),...Qh({doReposition:()=>{Cn.getState(Xo.getCoupled(t,"toolbarSandbox")).each(h=>{hR(t,h,c,s.layouts)})}})}})])}},Mg=pr({name:"FloatingToolbarButton",factory:(t,s,c,i)=>({...As.sketch({...i.button(),action:d=>{IT(d,i)},buttonBehaviours:ya.augment({dump:i.button().buttonBehaviours},[Xo.config({others:{toolbarSandbox:d=>sU(d,c,t)}})])}),apis:{setGroups:(d,g)=>{Cn.getState(Xo.getCoupled(d,"toolbarSandbox")).each(h=>{pR(d,h,t,c.layouts,g)})},reposition:d=>{Cn.getState(Xo.getCoupled(d,"toolbarSandbox")).each(g=>{hR(d,g,t,c.layouts)})},toggle:d=>{IT(d,i)},toggleWithoutFocusing:d=>{bF(d,i)},getToolbar:d=>Cn.getState(Xo.getCoupled(d,"toolbarSandbox")),isOpen:d=>Cn.isOpen(Xo.getCoupled(d,"toolbarSandbox"))}}),configFields:zi(),partFields:oU(),apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggleWithoutFocusing(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),rU=te([Te("items"),ql(["itemSelector"]),Vs("tgroupBehaviours",[xt])]),cU=te([np({name:"items",unit:"item"})]),aU=(t,s,c,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:zs(t.tgroupBehaviours,[xt.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),LT=pr({name:"ToolbarGroup",configFields:rU(),partFields:cU(),factory:aU}),bR=t=>De(t,s=>zc(s)),vR=(t,s,c)=>{AC(t,c,i=>{c.overflowGroups.set(i),s.getOpt(t).each(d=>{Mg.setGroups(d,bR(i))})})},vF=(t,s,c,i)=>{const d=On(Mg.sketch({fetch:()=>Nr.nu(g=>{g(bR(t.overflowGroups.get()))}),layouts:{onLtr:()=>[bs,ps],onRtl:()=>[ps,bs],onBottomLtr:()=>[vs,or],onBottomRtl:()=>[or,vs]},getBounds:c.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:i["overflow-button"](),toolbar:i.overflow()},onToggled:(g,h)=>t[h?"onOpened":"onClosed"](g)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:zs(t.splitToolbarBehaviours,[Xo.config({others:{overflowGroup:()=>LT.sketch({...i["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(g,h)=>{t.builtGroups.set(De(h,g.getSystem().build)),vR(g,d,t)},refresh:g=>vR(g,d,t),toggle:g=>{d.getOpt(g).each(h=>{Mg.toggle(h)})},toggleWithoutFocusing:g=>{d.getOpt(g).each(Mg.toggleWithoutFocusing)},isOpen:g=>d.getOpt(g).map(Mg.isOpen).getOr(!1),reposition:g=>{d.getOpt(g).each(h=>{Mg.reposition(h)})},getOverflow:g=>d.getOpt(g).bind(Mg.getToolbar)},domModification:{attributes:{role:"group"}}}},yF=pr({name:"SplitFloatingToolbar",configFields:FT(),partFields:nU(),factory:vF,apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),iU=te([ql(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),bn("onOpened"),bn("onClosed")].concat(pF())),CF=te([Sr({factory:mu,schema:A0(),name:"primary"}),Sr({factory:mu,schema:A0(),name:"overflow",overrides:t=>({toolbarBehaviours:$e([Yc.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{qn(s,t,"overflow-button").each(c=>{en.off(c)}),t.onClosed(s)},onGrown:s=>{t.onOpened(s)},onStartGrow:s=>{qn(s,t,"overflow-button").each(en.on)}}),xt.config({mode:"acyclic",onEscape:s=>(qn(s,t,"overflow-button").each(Bt.focus),k.some(!0))})])})}),Ca({name:"overflow-button",overrides:t=>({buttonBehaviours:$e([en.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),Ca({name:"overflow-group"})]),wF=(t,s)=>qn(t,s,"overflow").map(Yc.hasGrown).getOr(!1),HT=(t,s,c)=>{qn(t,s,"overflow-button").each(i=>{qn(t,s,"overflow").each(d=>{if(yR(t,s),Yc.hasShrunk(d)){const g=s.onOpened;s.onOpened=h=>{c||xt.focusIn(d),g(h),s.onOpened=g}}else{const g=s.onClosed;s.onClosed=h=>{c||Bt.focus(i),g(h),s.onClosed=g}}Yc.toggleGrow(d)})})},yR=(t,s)=>{qn(t,s,"overflow").each(c=>{AC(t,s,i=>{const d=De(i,g=>zc(g));mu.setGroups(c,d)}),qn(t,s,"overflow-button").each(i=>{Yc.hasGrown(c)&&en.on(i)}),Yc.refresh(c)})},lU=(t,s,c,i)=>{const d="alloy.toolbar.toggle",g=(h,y)=>{const w=De(y,h.getSystem().build);t.builtGroups.set(w)};return{uid:t.uid,dom:t.dom,components:s,behaviours:zs(t.splitToolbarBehaviours,[Xo.config({others:{overflowGroup:h=>LT.sketch({...i["overflow-group"](),items:[As.sketch({...i["overflow-button"](),action:y=>{sn(h,d)}})]})}}),Zt("toolbar-toggle-events",[Ee(d,h=>{HT(h,t,!1)})])]),apis:{setGroups:(h,y)=>{g(h,y),yR(h,t)},refresh:h=>yR(h,t),toggle:h=>{HT(h,t,!1)},toggleWithoutFocusing:h=>{HT(h,t,!0)},isOpen:h=>wF(h,t)},domModification:{attributes:{role:"group"}}}},CR=pr({name:"SplitSlidingToolbar",configFields:iU(),partFields:CF(),factory:lU,apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),wR=t=>{const s=t.title.fold(()=>({}),c=>({attributes:{title:c}}));return{dom:{tag:"div",classes:["tox-toolbar__group"],...s},components:[LT.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:$e([ho.config({}),Bt.config({})])}},VT=t=>LT.sketch(wR(t)),SF=(t,s)=>{const c=lo(i=>{const d=De(t.initGroups,VT);mu.setGroups(i,d)});return $e([ti.toolbarButton(()=>t.providers.checkUiComponentContext("any").shouldDisable),os(()=>t.providers.checkUiComponentContext("any")),xt.config({mode:s,onEscape:t.onEscape,selector:".tox-toolbar__group"}),Zt("toolbar-events",[c])])},xF=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":wR({title:k.none(),items:[]}),"overflow-button":_9({context:"any",name:"more",icon:k.some("more-drawer"),enabled:!0,tooltip:k.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:k.none(),borderless:!1},k.none(),t.providers,[],"overflow-button")},splitToolbarBehaviours:SF(t,s)}},uU=t=>{const s=xF(t),c=4,i=yF.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return yF.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const d=t.moreDrawerData.lazyHeader().element,g=Id(d),h=s1(d),y=Id(h),w=Math.max(h.dom.scrollHeight,y.height);return To(g.x+c,y.y,g.width-c*2,w)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[i],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>t.onToggled(d,!0),onClosed:d=>t.onToggled(d,!1)})},dU=t=>{const s=CR.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),c=CR.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),i=xF(t);return CR.sketch({...i,components:[s,c],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([qm()],{type:"opened"}),t.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([qm()],{type:"closed"}),t.onToggled(d,!1)}})},zT=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return mu.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===Ja.scrolling?["tox-toolbar--scrolling"]:[])},components:[mu.parts.groups({})],toolbarBehaviours:SF(t,s)})},EF=[Vm,ei,_s("tooltip"),Qs("buttonType","secondary",["primary","secondary"]),er("borderless",!1),Va("onAction"),ts("context","mode:design")],mU=[...EF,Hm,yr("type",["button"])],fU=[...EF,er("active",!1),yr("type",["togglebutton"])],TF={button:mU,togglebutton:fU},_F=[yr("type",["group"]),Bu("buttons",[],Ko("type",TF))],gU=Ko("type",{...TF,group:_F}),hU=kt([Bu("buttons",[],gU),Va("onShow"),Va("onHide")]),SR=t=>_o("view",hU,t),pU=(t,s)=>{var c,i;const d=t.type==="togglebutton",g=t.icon.map(oe=>Ag(oe,s.icons)).map(On),y=oe=>{const be=xe=>{g.map(lt=>lt.getOpt(oe).each(Je=>{Ht.set(Je,[Ag(xe,s.icons)])}))},ye=xe=>{const lt=oe.element;xe?(ns(lt,"tox-button--enabled"),Dt(lt,"aria-pressed",!0)):(In(lt,"tox-button--enabled"),Ro(lt,"aria-pressed"))},We=()=>Wr(oe.element,"tox-button--enabled"),at=()=>pa(oe.element);if(d)return t.onAction({setIcon:be,setActive:ye,isActive:We,focus:at});if(t.type==="button")return t.onAction({setIcon:be})},w={...t,name:d?t.text.getOr(t.icon.getOr("")):(c=t.text)!==null&&c!==void 0?c:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:k.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},E=ST((i=t.buttonType)!==null&&i!==void 0?i:"secondary"),T=d?t.text.map(s.translate):k.some(s.translate(t.text)),A=T.map(xo),P=w.tooltip.or(T).map(oe=>({"aria-label":s.translate(oe)})).getOr({}),$=g.map(oe=>oe.asSpec()),V=Eg([$,A]),W=t.icon.isSome()&&A.isSome(),se={tag:"button",classes:E.concat(...t.icon.isSome()&&!W?["tox-button--icon"]:[]).concat(...W?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:P},G=[],ee=vC(w,k.some(y),G,se,V,t.tooltip,s);return As.sketch(ee)},RC=(t,s)=>pU(t,s),bU=(t,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:De(t.buttons,c=>RC(c,s))}),xR=Sn().deviceType,vU=xR.isPhone(),yU=xR.isTablet(),aq=t=>{let s=!1;const c=De(t.buttons,i=>i.type==="group"?(s=!0,bU(i,t.providers)):RC(i,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...vU||yU?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:$e([Bt.config({}),xt.config({mode:"flow",selector:"button, .tox-button",focusInside:fd.OnEnterOrSpaceMode})]),components:s?c:[iu.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),iu.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:c})]}},CU=t=>({uid:t.uid,behaviours:$e([Bt.config({}),ho.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}}),wU=(t,s,c,i)=>{const d={getPane:g=>Zs.getPart(g,t,"pane"),getOnShow:g=>t.viewConfig.onShow,getOnHide:g=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,behaviours:$e([Bt.config({}),xt.config({mode:"cyclic",focusInside:fd.OnEnterOrSpaceMode})]),apis:d}};var Pg=pr({name:"silver.View",configFields:[Te("viewConfig")],partFields:[Gc({factory:{sketch:aq},schema:[Te("buttons"),Te("providers")],name:"header"}),Gc({factory:{sketch:CU},schema:[],name:"pane"})],factory:wU,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const SU=(t,s,c)=>Wg(s,(i,d)=>{const g=Ne(SR(i));return t.slot(d,Pg.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:g,components:[...g.buttons.length>0?[Pg.parts.header({buttons:g.buttons,providers:c})]:[],Pg.parts.pane({})]}))}),UT=(t,s)=>Kr.sketch(c=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:SU(c,t,s),slotBehaviours:f0.unnamedEvents([lo(i=>Kr.hideAllSlots(i))])})),ER=t=>zt(Kr.getSlotNames(t),s=>Kr.isShowing(t,s)),kF=t=>{const s=t.element;Vt(s,"display","none"),Dt(s,"aria-hidden","true")},TR=t=>{const s=t.element;Kt(s,"display"),Ro(s,"aria-hidden")},xU=t=>({getContainer:te(t)}),_R=(t,s,c)=>{Kr.getSlot(t,s).each(i=>{Pg.getPane(i).each(d=>{c(i)(xU(d.element.dom))})})},$0=(t,s)=>_R(t,s,Pg.getOnShow),OF=(t,s)=>_R(t,s,Pg.getOnHide);var WT=Tc({factory:(t,s)=>{const g={setViews:(h,y)=>{Ht.set(h,[UT(y,s.backstage.shared.providers)])},whichView:h=>fn.getCurrent(h).bind(ER),toggleView:(h,y,w,E)=>fn.getCurrent(h).exists(T=>{const A=ER(T),P=A.exists(V=>E===V),$=Kr.getSlot(T,E).isSome();return $&&(Kr.hideAllSlots(T),P?(kF(h),y()):(w(),TR(h),Kr.showSlot(T,E),$0(T,E)),A.each(V=>OF(T,V))),$})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:$e([Ht.config({}),fn.config({find:h=>{const y=Ht.contents(h);return dc(y)}})]),apis:g}},name:"silver.ViewWrapper",configFields:[Te("backstage")],apis:{setViews:(t,s,c)=>t.setViews(s,c),toggleView:(t,s,c,i,d)=>t.toggleView(s,c,i,d),whichView:(t,s)=>t.whichView(s)}});const EU=(t,s,c)=>{let i=!1;const d=h=>{_k(h,".tox-statusbar").each(y=>{kr(y,"display")==="none"&&qt(y,"aria-hidden")==="true"?(Kt(y,"display"),Ro(y,"aria-hidden")):(Vt(y,"display","none"),Dt(y,"aria-hidden","true"))})},g={getSocket:h=>Zs.getPart(h,t,"socket"),setSidebar:(h,y,w)=>{Zs.getPart(h,t,"sidebar").each(E=>zz(E,y,w))},toggleSidebar:(h,y)=>{Zs.getPart(h,t,"sidebar").each(w=>Uz(w,y))},whichSidebar:h=>Zs.getPart(h,t,"sidebar").bind(Wz).getOrNull(),getHeader:h=>Zs.getPart(h,t,"header"),getToolbar:h=>Zs.getPart(h,t,"toolbar"),setToolbar:(h,y)=>{Zs.getPart(h,t,"toolbar").each(w=>{const E=De(y,VT);w.getApis().setGroups(w,E)})},setToolbars:(h,y)=>{Zs.getPart(h,t,"multiple-toolbar").each(w=>{const E=De(y,T=>De(T,VT));eF.setItems(w,E)})},refreshToolbar:h=>{Zs.getPart(h,t,"toolbar").each(w=>w.getApis().refresh(w))},toggleToolbarDrawer:h=>{Zs.getPart(h,t,"toolbar").each(y=>{bo(y.getApis().toggle,w=>w(y))})},toggleToolbarDrawerWithoutFocusing:h=>{Zs.getPart(h,t,"toolbar").each(y=>{bo(y.getApis().toggleWithoutFocusing,w=>w(y))})},isToolbarDrawerToggled:h=>Zs.getPart(h,t,"toolbar").bind(y=>k.from(y.getApis().isOpen).map(w=>w(y))).getOr(!1),getThrobber:h=>Zs.getPart(h,t,"throbber"),focusToolbar:h=>{Zs.getPart(h,t,"toolbar").orThunk(()=>Zs.getPart(h,t,"multiple-toolbar")).each(w=>{xt.focusIn(w)})},setMenubar:(h,y)=>{Zs.getPart(h,t,"menubar").each(w=>{aR.setMenus(w,y)})},focusMenubar:h=>{Zs.getPart(h,t,"menubar").each(y=>{aR.focus(y)})},setViews:(h,y)=>{Zs.getPart(h,t,"viewWrapper").each(w=>{WT.setViews(w,y)})},toggleView:(h,y)=>Zs.getPart(h,t,"viewWrapper").exists(w=>WT.toggleView(w,()=>g.showMainView(h),()=>g.hideMainView(h),y)),whichView:h=>Zs.getPart(h,t,"viewWrapper").bind(WT.whichView).getOrNull(),hideMainView:h=>{i=g.isToolbarDrawerToggled(h),i&&g.toggleToolbarDrawer(h),Zs.getPart(h,t,"editorContainer").each(y=>{const w=y.element;d(w),Vt(w,"display","none"),Dt(w,"aria-hidden","true")})},showMainView:h=>{i&&g.toggleToolbarDrawer(h),Zs.getPart(h,t,"editorContainer").each(y=>{const w=y.element;d(w),Kt(w,"display"),Ro(w,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:s,apis:g,behaviours:t.behaviours}},kR=du.optional({factory:aR,name:"menubar",schema:[Te("backstage")]}),TU=t=>t.type===Ja.sliding?dU:t.type===Ja.floating?uU:zT,_U=du.optional({factory:{sketch:t=>eF.sketch({uid:t.uid,dom:t.dom,listBehaviours:$e([xt.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>zT({type:t.type,uid:ut("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),k.some(!0))}),setupItem:(s,c,i,d)=>{mu.setGroups(c,i)},shell:!0})},name:"multiple-toolbar",schema:[Te("dom"),Te("onEscape")]}),AF=du.optional({factory:{sketch:t=>{const s=TU(t),c={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),k.some(!0)),onToggled:(i,d)=>t.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(c)}},name:"toolbar",schema:[Te("dom"),Te("onEscape"),Te("getSink")]}),RF=du.optional({factory:{sketch:Rz},name:"header",schema:[Te("dom")]}),ZT=du.optional({factory:{sketch:aF},name:"promotion",schema:[Te("dom")]}),OR=du.optional({name:"socket",schema:[Te("dom")]}),kU=du.optional({factory:{sketch:Zz},name:"sidebar",schema:[Te("dom")]}),OU=du.optional({factory:{sketch:Xz},name:"throbber",schema:[Te("dom")]}),DF=du.optional({factory:WT,name:"viewWrapper",schema:[Te("backstage")]}),AU=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),RU=du.optional({factory:{sketch:AU},name:"editorContainer",schema:[]});var so=pr({name:"OuterContainer",factory:EU,configFields:[Te("dom"),Te("behaviours")],partFields:[RF,kR,AF,_U,OR,kU,ZT,OU,DF,RU],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,c,i)=>{t.setSidebar(s,c,i)},toggleSidebar:(t,s,c)=>{t.toggleSidebar(s,c)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,c)=>{t.setToolbar(s,c)},setToolbars:(t,s,c)=>{t.setToolbars(s,c)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(t,s)=>{t.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,c)=>{t.setMenubar(s,c)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,c)=>{t.setViews(s,c)},toggleView:(t,s,c)=>t.toggleView(s,c),whichView:(t,s)=>t.whichView(s)}});const MF="file edit view insert format tools table help",PF={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},DU=(t,s,c)=>{const i=g5(c).split(/[ ,]/);return{text:t.title,getItems:()=>Se(t.items,d=>{const g=d.toLowerCase();return g.trim().length===0?[]:uc(i,h=>h===g)?[]:g==="separator"||g==="|"?[{type:"separator"}]:s.menuItems[g]?[s.menuItems[g]]:[]})}},DC=t=>t.split(" "),NF=(t,s)=>{const c={...PF,...s.menus},i=Fo(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?DC(MF):DC(s.menubar===!1?"":s.menubar),g=po(d,y=>{const w=$n(PF,y);return i?w||rt(s.menus,y).exists(E=>$n(E,"items")):w}),h=De(g,y=>{const w=c[y];return DU({title:w.title,items:DC(w.items)},s,t)});return po(h,y=>{const w=E=>ke(E)||E.type!=="separator";return y.getItems().length>0&&uc(y.getItems(),w)})},MU=t=>{const s=()=>{t._skinLoaded=!0,HP(t)};return()=>{t.initialized?s():t.on("init",s)}},BF=(t,s)=>()=>iL(t,{message:s}),$F=(t,s,c)=>(t.on("remove",()=>c.unload(s)),c.load(s)),jT=(t,s,c,i)=>(t.on("remove",()=>i.unloadRawCss(s)),i.loadRawCss(s,c)),PU=async(t,s)=>{const i="ui/"+Yx(t).getOr("default")+"/skin.css",d=tinymce.Resource.get(i);if(ke(d))jT(t,i,d,t.ui.styleSheetLoader);else{const g=t.editorManager.suffix,h=s+`/skin${g}.css`;return $F(t,h,t.ui.styleSheetLoader)}},FF=async(t,s)=>{if(Nc(ae.fromDom(t.getElement()))){const d="ui/"+Yx(t).getOr("default")+"/skin.shadowdom.css",g=tinymce.Resource.get(d);if(ke(g))jT(t,d,g,fg.DOM.styleSheetLoader);else{const h=t.editorManager.suffix,y=s+`/skin.shadowdom${h}.css`;return $F(t,y,fg.DOM.styleSheetLoader)}}},NU=async(t,s)=>{const c=()=>{const d=p3(s),g=s.editorManager.suffix;d&&s.contentCSS.push(d+(t?"/content.inline":"/content")+`${g}.css`)};Yx(s).fold(c,d=>{const g="ui/"+d+(t?"/content.inline":"/content")+".css",h=tinymce.Resource.get(g);ke(h)?jT(s,g,h,s.ui.styleSheetLoader):c()});const i=p3(s);if(!h3(s)&&ke(i))return Promise.all([PU(s,i),FF(s,i)]).then()},IF=(t,s)=>NU(t,s).then(MU(s),BF(s,"Skin could not be loaded")),BU=An(IF,!1),LF=An(IF,!0),F0=(t,s,c)=>Ao(c)?t.translate(s):t.translate([s,t.translate(c)]),$U=(t,s)=>{const c=(h,y,w,E)=>{const T=t.shared.providers.translate(h.title);if(h.type==="separator")return k.some({type:"separator",text:T});if(h.type==="submenu"){const A=Se(h.getStyleItems(),P=>i(P,y,E));return y===0&&A.length<=0?k.none():k.some({type:"nestedmenuitem",text:T,enabled:A.length>0,getSubmenuItems:()=>Se(h.getStyleItems(),P=>i(P,y,E))})}else return k.some({type:"togglemenuitem",text:T,icon:h.icon,active:h.isSelected(E),enabled:!w,onAction:s.onAction(h),...h.getStylePreview().fold(()=>({}),A=>({meta:{style:A}}))})},i=(h,y,w)=>{const E=h.type==="formatter"&&s.isInvalid(h);return y===0?E?[]:c(h,y,!1,w).toArray():c(h,y,E,w).toArray()},d=h=>{const y=s.getCurrentValue(),w=s.shouldHide?0:1;return Se(h,E=>i(E,w,y))};return{validateItems:d,getFetch:(h,y)=>(w,E)=>{const T=y(),A=d(T),P=Rg(A,vl.CLOSE_ON_EXECUTE,h,{isHorizontalMenu:!1,search:k.none()});E(P)}}},I0=(t,s)=>{const c=s.dataset,i=c.type==="basic"?()=>De(c.data,d=>TC(d,s.isSelectedFor,s.getPreviewFor)):c.getData;return{items:$U(t,s),getStyleItems:i}},Vp=(t,s,c,i,d,g)=>{const{items:h,getStyleItems:y}=I0(s,c),w=St(c.tooltip),E=A=>({getComponent:te(A),setTooltip:P=>{const $=s.shared.providers.translate(P);Dt(A.element,"aria-label",$),w.set(P)}}),T=A=>{const P=$=>A.setTooltip(F0(t,i($.value),$.value));return t.on(d,P),PE(kp(t,"NodeChange",$=>{const V=$.getComponent();c.updateText(V),Mt.set($.getComponent(),!t.selection.isEditable())})(A),()=>t.off(d,P))};return pT({context:"mode:design",text:c.icon.isSome()?k.none():c.text,icon:c.icon,ariaLabel:k.some(c.tooltip),tooltip:k.none(),role:k.none(),fetch:h.getFetch(s,y),onSetup:T,getApi:E,columns:1,presets:"normal",classes:c.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[Uo.config({...s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(c.tooltip),onShow:A=>{if(c.tooltip!==w.get()){const P=s.shared.providers.translate(w.get());Uo.setComponents(A,s.shared.providers.tooltips.getComponents({tooltipText:P}))}}})})]},"tox-tbtn",s.shared,g)},AR=t=>De(t,s=>{let c=s,i=s;const d=s.split("=");return d.length>1&&(c=d[0],i=d[1]),{title:c,format:i}}),FU=t=>({type:"basic",data:t});var L0;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(L0||(L0={}));const IU=(t,s)=>s===L0.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),RR=(t,s,c)=>{const i=t.options.get(s);return{type:"basic",data:AR(IU(i,c))}},LU="Align",HF=te("Alignment {0}"),VF="left",DR=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],zF=t=>{const s=()=>zt(DR,y=>t.formatter.match(y.format)),c=y=>()=>t.formatter.match(y),i=y=>k.none,d=y=>{const E=s().fold(te(VF),T=>T.title.toLowerCase());ht(y,Ip,{icon:`align-${E}`}),fL(t,{value:E})},g=FU(DR),h=y=>()=>zt(DR,w=>w.format===y.format).each(w=>t.execCommand(w.command));return{tooltip:F0(t,HF(),VF),text:k.none(),icon:k.some("align-left"),isSelectedFor:c,getCurrentValue:k.none,getPreviewFor:i,onAction:h,updateText:d,dataset:g,shouldHide:!1,isInvalid:y=>!t.formatter.canApply(y.format)}},UF=(t,s)=>Vp(t,s,zF(t),HF,"AlignTextUpdate","align"),GT=(t,s)=>{const c=I0(s,zF(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate(LU),onSetup:qr(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},qT=(t,s)=>{const c=s(),i=De(c,d=>d.format);return k.from(t.formatter.closest(i)).bind(d=>zt(c,g=>g.format===d))},WF="Blocks",Km=te("Block {0}"),KT="Paragraph",ZF=t=>{const s=g=>()=>t.formatter.match(g),c=g=>()=>{const h=t.formatter.get(g);return h?k.some({tag:h.length>0&&(h[0].inline||h[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(g))}):k.none()},i=g=>{const y=qT(t,()=>d.data).fold(te(KT),w=>w.title);ht(g,oi,{text:y}),pL(t,{value:y})},d=RR(t,"block_formats",L0.SemiColon);return{tooltip:F0(t,Km(),KT),text:k.some(KT),icon:k.none(),isSelectedFor:s,getCurrentValue:k.none,getPreviewFor:c,onAction:ZP(t),updateText:i,dataset:d,shouldHide:!1,isInvalid:g=>!t.formatter.canApply(g.format)}},HU=(t,s)=>Vp(t,s,ZF(t),Km,"BlocksTextUpdate","blocks"),VU=(t,s)=>{const c=I0(s,ZF(t));t.ui.registry.addNestedMenuItem("blocks",{text:WF,onSetup:qr(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},zU="Fonts",jF=te("Font {0}"),MR="System Font",UU=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],PR=t=>{const s=t.split(/\s*,\s*/);return De(s,c=>c.replace(/^['"]+|['"]+$/g,""))},GF=(t,s)=>s.length>0&&yu(s,c=>t.indexOf(c.toLowerCase())>-1),WU=(t,s)=>{if(t.indexOf("-apple-system")===0||s.length>0){const c=PR(t.toLowerCase());return GF(c,UU)||GF(c,s)}else return!1},YT=t=>{const s=()=>{const w=V=>V?PR(V)[0]:"",E=t.queryCommandValue("FontName"),T=y.data,A=E?E.toLowerCase():"",P=b2(t);return{matchOpt:zt(T,V=>{const W=V.format;return W.toLowerCase()===A||w(W).toLowerCase()===w(A).toLowerCase()}).orThunk(()=>$t(WU(A,P),{title:MR,format:A})),font:E}},c=w=>E=>E.exists(T=>T.format===w),i=()=>{const{matchOpt:w}=s();return w},d=w=>()=>k.some({tag:"div",styles:w.indexOf("dings")===-1?{"font-family":w}:{}}),g=w=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,w.format)})},h=w=>{const{matchOpt:E,font:T}=s(),A=E.fold(te(T),P=>P.title);ht(w,oi,{text:A}),bO(t,{value:A})},y=RR(t,"font_family_formats",L0.SemiColon);return{tooltip:F0(t,jF(),MR),text:k.some(MR),icon:k.none(),isSelectedFor:c,getCurrentValue:i,getPreviewFor:d,onAction:g,updateText:h,dataset:y,shouldHide:!1,isInvalid:Vn}},ZU=(t,s)=>Vp(t,s,YT(t),jF,"FontFamilyTextUpdate","fontfamily"),jU=(t,s)=>{const c=I0(s,YT(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate(zU),onSetup:qr(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},GU={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},qU=(()=>{const t="[0-9]+",c="[eE]"+("[+-]?"+t),i="\\.",d=y=>`(?:${y})?`,h=`[+-]?(?:${["Infinity",t+i+d(t)+d(c),i+t+d(c),t+d(c)].join("|")})`;return new RegExp(`^(${h})(.*)$`)})(),KU=(t,s)=>uc(s,c=>uc(GU[c],i=>t===i)),XT=(t,s)=>k.from(qU.exec(t)).bind(i=>{const d=Number(i[1]),g=i[2];return KU(g,s)?k.some({value:d,unit:g}):k.none()}),qF=(t,s)=>XT(t,s).map(({value:c,unit:i})=>c+i),NR={tab:te(9),escape:te(27),enter:te(13),backspace:te(8),delete:te(46),left:te(37),up:te(38),right:te(39),down:te(40),space:te(32),home:te(36),end:te(35),pageUp:te(33),pageDown:te(34)},KF=(t,s,c,i)=>{let d=k.none();const g=oe=>oe.map(be=>nt.getValue(be)).getOr(""),h=kp(t,"NodeChange SwitchMode",oe=>{const be=oe.getComponent();d=k.some(be),c.updateInputValue(be),Mt.set(be,!t.selection.isEditable())}),y=oe=>({getComponent:te(oe)}),w=St(J),E=ut("custom-number-input-events"),T=(oe,be,ye)=>{const We=g(d),at=c.getNewValue(We,oe),xe=We.length-`${at}`.length,lt=d.map(mt=>mt.element.dom.selectionStart-xe),Je=d.map(mt=>mt.element.dom.selectionEnd-xe);c.onAction(at,ye),d.each(mt=>{nt.setValue(mt,at),be&&(lt.each(ln=>mt.element.dom.selectionStart=ln),Je.each(ln=>mt.element.dom.selectionEnd=ln))})},A=(oe,be)=>T((ye,We)=>ye-We,oe,be),P=(oe,be)=>T((ye,We)=>ye+We,oe,be),$=oe=>di(oe.element).fold(k.none,be=>(pa(be),k.some(!0))),V=oe=>Uf(oe.element)?(r1(oe.element).each(be=>pa(be)),k.some(!0)):k.none(),W=(oe,be,ye,We)=>{const at=St(J),xe=s.shared.providers.translate(ye),lt=ut("altExecuting"),Je=kp(t,"NodeChange SwitchMode",ln=>{Mt.set(ln.getComponent(),!t.selection.isEditable())}),mt=ln=>{Mt.isDisabled(ln)||oe(!0)};return As.sketch({dom:{tag:"button",attributes:{"aria-label":xe,"data-mce-name":be},classes:We.concat(be)},components:[hT(be,s.shared.providers.icons)],buttonBehaviours:$e([Mt.config({}),Uo.config(s.shared.providers.tooltips.getConfig({tooltipText:xe})),Zt(lt,[Sg({onSetup:Je,getApi:y},at),xg({getApi:y},at),Ee(da(),(ln,ro)=>{(ro.event.raw.keyCode===NR.space()||ro.event.raw.keyCode===NR.enter())&&(Mt.isDisabled(ln)||oe(!1))}),Ee(Yd(),mt),Ee(qd(),mt)])]),eventOrder:{[da()]:[lt,"keying"],[Yd()]:[lt,"alloy.base.behaviour"],[qd()]:[lt,"alloy.base.behaviour"],[rc()]:["alloy.base.behaviour",lt,"tooltipping"],[Hc()]:[lt,"tooltipping"]}})},se=On(W(oe=>A(!1,oe),"minus","Decrease font size",[])),G=On(W(oe=>P(!1,oe),"plus","Increase font size",[])),ee=On({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[cu.sketch({inputBehaviours:$e([Mt.config({}),Zt(E,[Sg({onSetup:h,getApi:y},w),xg({getApi:y},w)]),Zt("input-update-display-text",[Ee(oi,(oe,be)=>{nt.setValue(oe,be.event.text)}),Ee(xw(),oe=>{c.onAction(nt.getValue(oe))}),Ee(sl(),oe=>{c.onAction(nt.getValue(oe))})]),xt.config({mode:"special",onEnter:oe=>(T(an,!0,!0),k.some(!0)),onEscape:$,onUp:oe=>(P(!0,!1),k.some(!0)),onDown:oe=>(A(!0,!1),k.some(!0)),onLeft:(oe,be)=>(be.cut(),k.none()),onRight:(oe,be)=>(be.cut(),k.none())})])})],behaviours:$e([Bt.config({}),xt.config({mode:"special",onEnter:V,onSpace:V,onEscape:$}),Zt("input-wrapper-events",[Ee(za(),oe=>{it([se,G],be=>{const ye=ae.fromDom(be.get(oe).element.dom);Uf(ye)&&zf(ye)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...jt(i)?{"data-mce-name":i}:{}}},components:[se.asSpec(),ee.asSpec(),G.asSpec()],behaviours:$e([Bt.config({}),xt.config({mode:"flow",focusInside:fd.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:oe=>Uf(oe.element)?k.none():(pa(oe.element),k.some(!0))})])}},YU="Font sizes",BR=te("Font size {0}"),YF="12pt",XU={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},JU={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},XF=(t,s)=>{const c=Math.pow(10,s);return Math.round(t*c)/c},QU=(t,s)=>/[0-9.]+px$/.test(t)?XF(parseInt(t,10)*72/96,s||0)+"pt":rt(JU,t).getOr(t),JF=t=>rt(XU,t).getOr(""),QF=t=>{const s=()=>{let w=k.none();const E=y.data,T=t.queryCommandValue("FontSize");if(T)for(let A=3;w.isNone()&&A>=0;A--){const P=QU(T,A),$=JF(P);w=zt(E,V=>V.format===T||V.format===P||V.format===$)}return{matchOpt:w,size:T}},c=w=>E=>E.exists(T=>T.format===w),i=()=>{const{matchOpt:w}=s();return w},d=te(k.none),g=w=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,w.format)})},h=w=>{const{matchOpt:E,size:T}=s(),A=E.fold(te(T),P=>P.title);ht(w,oi,{text:A}),gL(t,{value:A})},y=RR(t,"font_size_formats",L0.Space);return{tooltip:F0(t,BR(),YF),text:k.some(YF),icon:k.none(),isSelectedFor:c,getPreviewFor:d,getCurrentValue:i,onAction:g,updateText:h,dataset:y,shouldHide:!1,isInvalid:Vn}},eW=(t,s)=>Vp(t,s,QF(t),BR,"FontSizeTextUpdate","fontsize"),tW=t=>{var s;const c={step:1};return(s={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&s!==void 0?s:c},nW=16,oW=t=>t>=0,sW=t=>{const s=()=>t.queryCommandValue("FontSize");return{updateInputValue:i=>ht(i,oi,{text:s()}),onAction:(i,d)=>t.execCommand("FontSize",!1,i,{skip_focus:!d}),getNewValue:(i,d)=>{XT(i,["unsupportedLength","empty"]);const g=s(),h=XT(i,["unsupportedLength","empty"]).or(XT(g,["unsupportedLength","empty"])),y=h.map(P=>P.value).getOr(nW),w=v5(t),E=h.map(P=>P.unit).filter(P=>P!=="").getOr(w),T=d(y,tW(E).step),A=`${oW(T)?T:y}${E}`;return A!==g&&hL(t,{value:A}),A}}},rW=(t,s)=>KF(t,s,sW(t),"fontsizeinput"),eI=(t,s)=>{const c=I0(s,QF(t));t.ui.registry.addNestedMenuItem("fontsize",{text:YU,onSetup:qr(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},cW="Formats",tI=t=>Ao(t)?"Formats":"Format {0}",nI=(t,s)=>{const c="Formats",i=h=>()=>t.formatter.match(h),d=h=>()=>{const y=t.formatter.get(h);return y!==void 0?k.some({tag:y.length>0&&(y[0].inline||y[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(h))}):k.none()},g=h=>{const y=A=>V$(A)?Se(A.items,y):OT(A)?[{title:A.title,format:A.format}]:[],w=Se(EC(t),y),T=qT(t,te(w)).fold(te({title:c,tooltipLabel:""}),A=>({title:A.title,tooltipLabel:A.title}));ht(h,oi,{text:T.title}),mL(t,{value:T.tooltipLabel})};return{tooltip:F0(t,tI(""),""),text:k.some(c),icon:k.none(),isSelectedFor:i,getCurrentValue:k.none,getPreviewFor:d,onAction:ZP(t),updateText:g,shouldHide:m5(t),isInvalid:h=>!t.formatter.canApply(h.format),dataset:s}},aW=(t,s)=>{const c={type:"advanced",...s.styles};return Vp(t,s,nI(t,c),tI,"StylesTextUpdate","styles")},iW=(t,s)=>{const c={type:"advanced",...s.styles},i=I0(s,nI(t,c));t.ui.registry.addNestedMenuItem("styles",{text:cW,onSetup:qr(t),getSubmenuItems:()=>i.items.validateItems(i.getStyleItems())})},lW=te([Te("toggleClass"),Te("fetch"),lm("onExecute"),le("getHotspot",k.some),le("getAnchorOverrides",te({})),nd(),lm("onItemExecute"),kn("lazySink"),Te("dom"),bn("onOpen"),Vs("splitDropdownBehaviours",[Xo,xt,Bt]),le("matchWidth",!1),le("useMinWidth",!1),le("eventOrder",{}),kn("role"),kn("listRole")].concat(HE())),uW=Sr({factory:As,schema:[Te("dom")],name:"arrow",defaults:()=>({buttonBehaviours:$e([Bt.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(Vu)},buttonBehaviours:$e([en.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),oI=Sr({factory:As,schema:[Te("dom")],name:"button",defaults:()=>({buttonBehaviours:$e([Bt.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(c=>{t.onExecute(c,s)})}})}),dW=te([uW,oI,Gc({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Te("text")],name:"aria-descriptor"}),Ca({schema:[ll()],name:"menu",defaults:t=>({onExecute:(s,c)=>{s.getSystem().getByUid(t.uid).each(i=>{t.onItemExecute(i,s,c)})}})}),hN()]),mW=(t,s,c,i)=>{const d=T=>{fn.getCurrent(T).each(A=>{Ze.highlightFirst(A),xt.focusIn(A)})},g=T=>{_O(t,an,T,i,d,kc.HighlightMenuAndItem).get(J)},h=T=>(g(T),k.some(!0)),y=T=>{const A=ot(T,t,"button");return Vu(A),k.some(!0)},w={...Fn([lo((T,A)=>{qn(T,t,"aria-descriptor").each($=>{const V=ut("aria");Dt($.element,"id",V),Dt(T.element,"aria-describedby",V)})})]),...g2(k.some(g))},E={repositionMenus:T=>{en.isOn(T)&&yN(T)}};return{uid:t.uid,dom:t.dom,components:s,apis:E,eventOrder:{...t.eventOrder,[nr()]:["disabling","toggling","alloy.base.behaviour"]},events:w,behaviours:zs(t.splitDropdownBehaviours,[Xo.config({others:{sandbox:T=>{const A=ot(T,t,"arrow");return kO(t,T,{onOpen:()=>{en.on(A),en.on(T)},onClose:()=>{en.off(A),en.off(T)}})}}}),xt.config({mode:"special",onSpace:y,onEnter:y,onDown:h}),Bt.config({}),en.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},MC=pr({name:"SplitDropdown",configFields:lW(),partFields:dW(),factory:mW,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),sI=t=>({isEnabled:()=>!Mt.isDisabled(t),setEnabled:s=>Mt.set(t,!s),setText:s=>ht(t,oi,{text:s}),setIcon:s=>ht(t,Ip,{icon:s})}),rI=t=>({setActive:s=>{en.set(t,s)},isActive:()=>en.isOn(t),isEnabled:()=>!Mt.isDisabled(t),setEnabled:s=>Mt.set(t,!s),setText:s=>ht(t,oi,{text:s}),setIcon:s=>ht(t,Ip,{icon:s})}),$R=(t,s)=>t.map(c=>({"aria-label":s.translate(c)})).getOr({}),cI=ut("focus-button"),FR=(t,s,c,i,d,g,h)=>{const y=s.map(E=>On(vA(E,"tox-tbtn",d))),w=t.map(E=>On(Ag(E,d.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:{...$R(c,d),...jt(h)?{"data-mce-name":h}:{}}},components:Eg([w.map(E=>E.asSpec()),y.map(E=>E.asSpec())]),eventOrder:{[Lc()]:["focusing","alloy.base.behaviour",Og],[rc()]:[Og,"toolbar-group-button-events"]},buttonBehaviours:$e([ti.toolbarButton(()=>d.checkUiComponentContext(g).shouldDisable),os(()=>d.checkUiComponentContext(g)),Zt(Og,[lo((E,T)=>pA(E)),Ee(oi,(E,T)=>{y.bind(A=>A.getOpt(E)).each(A=>{Ht.set(A,[xo(d.translate(T.event.text))])})}),Ee(Ip,(E,T)=>{w.bind(A=>A.getOpt(E)).each(A=>{Ht.set(A,[Ag(T.event.icon,d.icons)])})}),Ee(Lc(),(E,T)=>{T.event.prevent(),sn(E,cI)})])].concat(i.getOr([])))}},fW=(t,s,c,i,d)=>{const g=s.shared,h=St(J),y={toolbarButtonBehaviours:[],getApi:sI,onSetup:t.onSetup},w=[Zt("toolbar-group-button-events",[Sg(y,h),xg(y,h)])];return Mg.sketch({lazySink:g.getSink,fetch:()=>Nr.nu(E=>{E(De(c(t.items),VT))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:FR(t.icon,t.text,t.tooltip,k.some(w),g.providers,t.context,d),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:i}}}})},zp=(t,s,c,i)=>{var d;const g=St(J),h=FR(t.icon,t.text,t.tooltip,k.none(),c,t.context,i);return As.sketch({dom:h.dom,components:h.components,eventOrder:jB,buttonBehaviours:{...$e([Zt("toolbar-button-events",[hA({onAction:t.onAction,getApi:s.getApi}),Sg(s,g),xg(s,g)]),...t.tooltip.map(y=>Uo.config(c.tooltips.getConfig({tooltipText:c.translate(y)+t.shortcut.map(w=>` (${sO(w)})`).getOr("")}))).toArray(),ti.toolbarButton(()=>!t.enabled||c.checkUiComponentContext(t.context).shouldDisable),os(()=>c.checkUiComponentContext(t.context))].concat(s.toolbarButtonBehaviours)),[Og]:(d=h.buttonBehaviours)===null||d===void 0?void 0:d[Og]}})},gW=(t,s,c)=>aI(t,s,[],c),aI=(t,s,c,i)=>zp(t,{toolbarButtonBehaviours:c.length>0?[Zt("toolbarButtonWith",c)]:[],getApi:sI,onSetup:t.onSetup},s,i),hW=(t,s,c)=>iI(t,s,[],c),iI=(t,s,c,i)=>zp(t,{toolbarButtonBehaviours:[Ht.config({}),en.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(c.length>0?[Zt("toolbarToggleButtonWith",c)]:[]),getApi:rI,onSetup:t.onSetup},s,i),pW=(t,s,c)=>i=>Nr.nu(d=>s.fetch(d)).map(d=>k.from(xN(zo(EO(ut("menu-value"),d,g=>{s.onItemAction(t(i),g)},s.columns,s.presets,vl.CLOSE_ON_EXECUTE,s.select.getOr(Vn),c),{movement:FE(s.columns,s.presets),menuBehaviours:f0.unnamedEvents(s.columns!=="auto"?[]:[lo((g,h)=>{nO(g,4,Q5(s.presets)).each(({numRows:y,numColumns:w})=>{xt.setGridSize(g,y,w)})})])})))),bW=(t,s,c)=>{const i=St(t.tooltip.getOr("")),d=y=>({isEnabled:()=>!Mt.isDisabled(y),setEnabled:w=>Mt.set(y,!w),setIconFill:(w,E)=>{go(y.element,`svg path[class="${w}"], rect[class="${w}"]`).each(T=>{Dt(T,"fill",E)})},setActive:w=>{Dt(y.element,"aria-pressed",w),go(y.element,"span").each(E=>{y.getSystem().getByDom(E).each(T=>en.set(T,w))})},isActive:()=>go(y.element,"span").exists(w=>y.getSystem().getByDom(w).exists(en.isOn)),setText:w=>go(y.element,"span").each(E=>y.getSystem().getByDom(E).each(T=>ht(T,oi,{text:w}))),setIcon:w=>go(y.element,"span").each(E=>y.getSystem().getByDom(E).each(T=>ht(T,Ip,{icon:w}))),setTooltip:w=>{const E=s.providers.translate(w);Dt(y.element,"aria-label",E),i.set(w)}}),g=St(J),h={getApi:d,onSetup:t.onSetup};return MC.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...$R(t.tooltip,s.providers),...jt(c)?{"data-mce-name":c}:{}}},onExecute:y=>{const w=d(y);w.isEnabled()&&t.onAction(w)},onItemExecute:(y,w,E)=>{},splitDropdownBehaviours:$e([Zt("split-dropdown-events",[lo((y,w)=>pA(y)),Ee(cI,Bt.focus),Sg(h,g),xg(h,g)]),ti.splitButton(()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable),os(()=>s.providers.checkUiComponentContext(t.context)),b0.config({}),...t.tooltip.map(y=>Uo.config({...s.providers.tooltips.getConfig({tooltipText:s.providers.translate(y),onShow:w=>{if(i.get()!==y){const E=s.providers.translate(i.get());Uo.setComponents(w,s.providers.tooltips.getComponents({tooltipText:E}))}}})})).toArray()]),eventOrder:{[rc()]:["alloy.base.behaviour","split-dropdown-events","tooltipping"],[Hc()]:["split-dropdown-events","tooltipping"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:pW(d,t,s.providers),parts:{menu:M2(!1,t.columns,t.presets)},components:[MC.parts.button(FR(t.icon,t.text,k.none(),k.some([en.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1}),ti.toolbarButton(Vn),os(te({contextType:"any",shouldDisable:!1}))]),s.providers,t.context)),MC.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:P3("chevron-down",s.providers.icons)},buttonBehaviours:$e([ti.splitButton(Vn),os(te({contextType:"any",shouldDisable:!1}))])}),MC.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},vW=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],PC=(t,s)=>(c,i,d,g)=>{const h=t(c).mapError(y=>Zd(y)).getOrDie();return s(h,i,d,g)},IR={button:PC(B2,(t,s,c,i)=>gW(t,s.shared.providers,i)),togglebutton:PC(F2,(t,s,c,i)=>hW(t,s.shared.providers,i)),menubutton:PC(cR,(t,s,c,i)=>E0(t,"tox-tbtn",s,k.none(),!1,i)),splitbutton:PC(Nz,(t,s,c,i)=>bW(t,s.shared,i)),grouptoolbarbutton:PC(rR,(t,s,c,i)=>{const d=c.ui.registry.getAll().buttons,g=y=>JT(c,{buttons:d,toolbar:y,allowToolbarGroups:!1},s,k.none()),h={[$S]:s.shared.header.isPositionedAtTop()?ls.TopToBottom:ls.BottomToTop};switch(gg(c)){case Ja.floating:return fW(t,s,g,h,i);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},yW=(t,s,c,i)=>rt(IR,t.type).fold(()=>(console.error("skipping button defined by",t),k.none()),d=>k.some(d(t,s,c,i))),lI={styles:aW,fontsize:eW,fontsizeinput:rW,fontfamily:ZU,blocks:HU,align:UF},uI=t=>{const s=De(vW,c=>{const i=po(c.items,d=>$n(t,d)||$n(lI,d));return{name:c.name,items:i}});return po(s,c=>c.items.length>0)},dI=t=>{const s=t.split("|");return De(s,c=>({items:c.trim().split(" ")}))},CW=t=>Bo(t,s=>$n(s,"name")&&$n(s,"items")),wW=t=>{const s=t.toolbar,c=t.buttons;return s===!1?[]:s===void 0||s===!0?uI(c):ke(s)?dI(s):CW(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},SW=(t,s,c,i,d,g)=>rt(s,c.toLowerCase()).orThunk(()=>g.bind(h=>ir(h,y=>rt(s,y+c.toLowerCase())))).fold(()=>rt(lI,c.toLowerCase()).map(h=>h(t,d)),h=>h.type==="grouptoolbarbutton"&&!i?(console.warn(`Ignoring the '${c}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),k.none()):yW(h,d,t,c.toLowerCase())),JT=(t,s,c,i)=>{const d=wW(s),g=De(d,h=>{const y=Se(h.items,w=>w.trim().length===0?[]:SW(t,s.buttons,w,s.allowToolbarGroups,c,i).toArray());return{title:k.from(t.translate(h.name)),items:y}});return po(g,h=>h.items.length>0)},mI=(t,s,c,i)=>{const d=s.mainUi.outerContainer,g=c.toolbar,h=c.buttons;if(Bo(g,ke)){const y=g.map(w=>{const E={toolbar:w,buttons:h,allowToolbarGroups:c.allowToolbarGroups};return JT(t,E,i,k.none())});so.setToolbars(d,y)}else so.setToolbar(d,JT(t,c,i,k.none()))},fI=Sn(),gI=fI.os.isiOS()&&fI.os.version.major<=12,xW=(t,s)=>{const{uiMotherships:c}=s,i=t.dom;let d=t.getWin();const g=t.getDoc().documentElement,h=St(Do(d.innerWidth,d.innerHeight)),y=St(Do(g.offsetWidth,g.offsetHeight)),w=()=>{const P=h.get();(P.left!==d.innerWidth||P.top!==d.innerHeight)&&(h.set(Do(d.innerWidth,d.innerHeight)),pO(t))},E=()=>{const P=t.getDoc().documentElement,$=y.get();($.left!==P.offsetWidth||$.top!==P.offsetHeight)&&(y.set(Do(P.offsetWidth,P.offsetHeight)),pO(t))},T=P=>{uL(t,P)};i.bind(d,"resize",w),i.bind(d,"scroll",T);const A=yy(ae.fromDom(t.getBody()),"load",E);t.on("hide",()=>{it(c,P=>{Vt(P.element,"display","none")})}),t.on("show",()=>{it(c,P=>{Kt(P.element,"display")})}),t.on("NodeChange",E),t.on("remove",()=>{A.unbind(),i.unbind(d,"resize",w),i.unbind(d,"scroll",T),d=null})},EW=(t,s,c)=>{Lm(t)&&Gy(c.mainUi.mothership.element,c.popupUi.mothership),Ec(s,c.dialogUi.mothership)};var TW=Object.freeze({__proto__:null,render:(t,s,c,i,d)=>{const{mainUi:g,uiMotherships:h}=s,y=St(0),w=g.outerContainer;BU(t);const E=ae.fromDom(d.targetNode),T=Pd(lr(E));Gy(E,g.mothership),EW(t,T,s),t.on("PostRender",()=>{so.setSidebar(w,c.sidebar,g3(t))}),t.on("SkinLoaded",()=>{mI(t,s,c,i),y.set(t.getWin().innerWidth),so.setMenubar(w,NF(t,c)),so.setViews(w,c.views),xW(t,s)});const A=so.getSocket(w).getOrDie("Could not find expected socket element");if(gI){Ll(A.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const W=aA(()=>{t.dispatch("ScrollContent")},20),se=Zr(A.element,"scroll",W.throttle);t.on("remove",se.unbind)}kP(t,s),t.addCommand("ToggleSidebar",(W,se)=>{so.toggleSidebar(w,se),UP(t)}),t.addQueryValueHandler("ToggleSidebar",()=>{var W;return(W=so.whichSidebar(w))!==null&&W!==void 0?W:""}),t.addCommand("ToggleView",(W,se)=>{if(so.toggleView(w,se)){const G=w.element;g.mothership.broadcastOn([tu()],{target:G}),it(h,ee=>{ee.broadcastOn([tu()],{target:G})}),Yt(so.whichView(w))&&(t.focus(),t.nodeChanged(),so.refreshToolbar(w)),WP(t)}}),t.addQueryValueHandler("ToggleView",()=>{var W;return(W=so.whichView(w))!==null&&W!==void 0?W:""});const P=gg(t),$=()=>{so.refreshToolbar(s.mainUi.outerContainer)};(P===Ja.sliding||P===Ja.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const W=t.getWin().innerWidth;W!==y.get()&&($(),y.set(W))});const V={setEnabled:W=>{z2(s,W?"setEnabled":"setDisabled")},isEnabled:()=>!Mt.isDisabled(w)};return{iframeContainer:A.element.dom,editorContainer:w.element.dom,api:V}}});const NC=t=>/^[0-9\.]+(|px)$/i.test(""+t)?k.some(parseInt(""+t,10)):k.none(),LR=t=>uo(t)?t+"px":t,Up=(t,s,c)=>{const i=s.filter(g=>t<g),d=c.filter(g=>t>g);return i.or(d).getOr(t)},QT=t=>{const s=s3(t),c=gp(t),i=Ux(t);return NC(s).map(d=>Up(d,c,i))},hI=t=>QT(t).getOr(s3(t)),pI=t=>{const s=p2(t),c=r3(t),i=hp(t);return NC(s).map(d=>Up(d,c,i))},_W=t=>pI(t).getOr(p2(t)),{ToolbarLocation:HR,ToolbarMode:bI}=Y8,kW=40,e_=(t,s,c,i,d)=>{const{mainUi:g,uiMotherships:h}=c,y=fg.DOM,w=pl(t),E=hg(t),T=hp(t).or(pI(t)),A=i.shared.header,P=A.isPositionedAtTop,$=150,V=gg(t),W=V===bI.sliding||V===bI.floating,se=St(!1),G=()=>se.get()&&!t.removed,ee=gt=>W?gt.fold(te(0),Me=>Me.components().length>1?gs(Me.components()[1].element):0):0,oe=gt=>{switch(Wx(t)){case HR.auto:const Me=so.getToolbar(g.outerContainer),Ye=ee(Me),It=gs(gt.element)-Ye,Qt=Vo(s);if(Qt.y>It)return"top";{const Ut=s1(s),jn=Math.max(Ut.dom.scrollHeight,gs(Ut));return Qt.bottom<jn-It||Ns().bottom<Qt.bottom-It?"bottom":"top"}case HR.bottom:return"bottom";case HR.top:default:return"top"}},be=gt=>{d.on(Me=>{eo.setModes(Me,[gt]),A.setDockingMode(gt);const Ye=P()?ls.TopToBottom:ls.BottomToTop;Dt(Me.element,$S,Ye)})},ye=()=>{d.on(gt=>{const Me=T.getOrThunk(()=>mf().width-xu(s).left-10);Vt(gt.element,"max-width",Me+"px")})},We=(gt,Me)=>{d.on(Ye=>{const It=so.getToolbar(g.outerContainer),Qt=ee(It),wt=Vo(s),Ut=at(t,g.outerContainer.element),jn=()=>Ut.fold(()=>wt.x,Fr=>{const ii=Vo(Fr);return Un(Fr,mi())?wt.x:wt.x-ii.x}),Hn=()=>Ut.fold(()=>P()?Math.max(wt.y-gs(Ye.element)+Qt,0):wt.bottom,Fr=>{var ii;const li=Vo(Fr),Rl=(ii=Fr.dom.scrollTop)!==null&&ii!==void 0?ii:0,Ed=Un(Fr,mi())?Math.max(wt.y-gs(Ye.element)+Qt,0):wt.y-li.y+Rl-gs(Ye.element)+Qt;return P()?Ed:wt.bottom}),ea=jn(),Oo=$t(gt,Math.ceil(g.outerContainer.element.dom.getBoundingClientRect().width)).filter(Fr=>Fr>$).map(Fr=>{const ii=Me.getOr(Vr()),li=window.innerWidth-(ea-ii.left),Rl=Math.max(Math.min(Fr,li),$);return li<Fr&&Vt(g.outerContainer.element,"width",Rl+"px"),{width:Rl+"px"}}).getOr({width:"max-content"}),ai={position:"absolute",left:Math.round(ea)+"px",top:Hn()+"px"};Ll(g.outerContainer.element,{...ai,...Oo})})},at=(gt,Me)=>Lm(gt)?kf(Me):k.none(),xe=()=>{it(h,gt=>{gt.broadcastOn([ld()],{})})},lt=()=>!w&&(Ho(g.outerContainer.element).left+wn(g.outerContainer.element)>=window.innerWidth-kW||Go(g.outerContainer.element,"width").isSome())?(Vt(g.outerContainer.element,"position","absolute"),Vt(g.outerContainer.element,"left","0px"),Kt(g.outerContainer.element,"width"),!0):!1,Je=gt=>{if(!G())return;w||ye();const Me=Vr(),Ye=w?!1:lt();if(W&&so.refreshToolbar(g.outerContainer),!w){const It=Vr(),Qt=$t(Me.left!==It.left,Me);We(Ye,Qt),Qt.each(wt=>{df(wt.left,It.top)})}E&&d.on(gt),xe()},mt=()=>w||!E||!G()?!1:d.get().exists(gt=>{const Me=A.getDockingMode(),Ye=oe(gt);return Ye!==Me?(be(Ye),!0):!1});return{isVisible:G,isPositionedAtTop:P,show:()=>{se.set(!0),Vt(g.outerContainer.element,"display","flex"),y.addClass(t.getBody(),"mce-edit-focus"),it(h,gt=>{Kt(gt.element,"display")}),mt(),Lm(t)?Je(gt=>eo.isDocked(gt)?eo.reset(gt):eo.refresh(gt)):Je(eo.refresh)},hide:()=>{se.set(!1),Vt(g.outerContainer.element,"display","none"),y.removeClass(t.getBody(),"mce-edit-focus"),it(h,gt=>{Vt(gt.element,"display","none")})},update:Je,updateMode:()=>{mt()&&Je(eo.reset)},repositionPopups:xe}},VR=(t,s)=>{const c=Vo(t);return{pos:s?c.y:c.bottom,bounds:c}},vI=(t,s,c,i)=>{const d=St(VR(s,c.isPositionedAtTop())),g=E=>{const{pos:T,bounds:A}=VR(s,c.isPositionedAtTop()),{pos:P,bounds:$}=d.get(),V=A.height!==$.height||A.width!==$.width;d.set({pos:T,bounds:A}),V&&pO(t,E),c.isVisible()&&(P!==T?c.update(eo.reset):V&&(c.updateMode(),c.repositionPopups()))};i||(t.on("activate",c.show),t.on("deactivate",c.hide)),t.on("SkinLoaded ResizeWindow",()=>c.update(eo.reset)),t.on("NodeChange keydown",E=>{requestAnimationFrame(()=>g(E))});let h=0;const y=iA(()=>c.update(eo.refresh),33);t.on("ScrollWindow",()=>{const E=Vr().left;E!==h&&(h=E,y.throttle()),c.updateMode()}),Lm(t)&&t.on("ElementScroll",E=>{c.update(eo.refresh)});const w=la();w.set(yy(ae.fromDom(t.getBody()),"load",E=>g(E.raw))),t.on("remove",()=>{w.clear()})};var yI=Object.freeze({__proto__:null,render:(t,s,c,i,d)=>{const{mainUi:g}=s,h=Mn(),y=ae.fromDom(d.targetNode),w=e_(t,y,s,i,h),E=l3(t);LF(t);const T=()=>{if(h.isSet()){w.show();return}h.set(so.getHeader(g.outerContainer).getOrDie());const P=v3(t);Lm(t)?(Gy(y,g.mothership),Gy(y,s.popupUi.mothership)):Ec(P,g.mothership),Ec(P,s.dialogUi.mothership);const $=()=>{mI(t,s,c,i),so.setMenubar(g.outerContainer,NF(t,c)),w.show(),vI(t,y,w,E),t.nodeChanged()};E?t.once("SkinLoaded",$):$()};t.on("show",T),t.on("hide",w.hide),E||(t.on("focus",T),t.on("blur",w.hide)),t.on("init",()=>{(t.hasFocus()||E)&&T()}),kP(t,s);const A={show:T,hide:w.hide,setEnabled:P=>{z2(s,P?"setEnabled":"setDisabled")},isEnabled:()=>!Mt.isDisabled(g.outerContainer)};return{editorContainer:g.outerContainer.element.dom,api:A}}});const AW=()=>{const t=Mn(),s=Mn(),c=Mn();return{dialogUi:t,popupUi:s,mainUi:c,getUiMotherships:()=>{const g=t.get().map(y=>y.mothership),h=s.get().map(y=>y.mothership);return g.fold(()=>h.toArray(),y=>h.fold(()=>[y],w=>Un(y.element,w.element)?[y]:[y,w]))},lazyGetInOuterOrDie:(g,h)=>()=>c.get().bind(y=>h(y.outerContainer)).getOrDie(`Could not find ${g} element in OuterContainer`)}},CI="contexttoolbar-show",wI="contexttoolbar-hide",RW=t=>({hide:()=>sn(t,Is()),getValue:()=>nt.getValue(t)}),SI=(t,s)=>Ee(ZB,(c,i)=>{const d=t.get(c),g=RW(d);s.onAction(g,i.event.buttonApi)}),DW=(t,s,c)=>{const{primary:i,...d}=s.original,g=Ne(B2({...d,type:"button",onAction:J}));return aI(g,c,[SI(t,s)])},MW=(t,s,c)=>{const{primary:i,...d}=s.original,g=Ne(F2({...d,type:"togglebutton",onAction:J}));return iI(g,c,[SI(t,s)])},BC=t=>t.type==="contextformtogglebutton",PW=(t,s,c)=>BC(s)?MW(t,s,c):DW(t,s,c),NW=(t,s,c)=>{const i=De(s,h=>On(PW(t,h,c)));return{asSpecs:()=>De(i,h=>h.asSpec()),findPrimary:h=>ir(s,(y,w)=>y.primary?k.from(i[w]).bind(E=>E.getOpt(h)).filter(Oe(Mt.isDisabled)):k.none())}},xI=(t,s)=>{const c=t.label.fold(()=>({}),g=>({"aria-label":g})),i=On(cu.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:c,selectOnFocus:!0,inputBehaviours:$e([Mt.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),os(()=>s.checkUiComponentContext("mode:design")),xt.config({mode:"special",onEnter:g=>d.findPrimary(g).map(h=>(Vu(h),!0)),onLeft:(g,h)=>(h.cut(),k.none()),onRight:(g,h)=>(h.cut(),k.none())})])})),d=NW(i,t.commands,s);return[{title:k.none(),items:[i.asSpec()]},{title:k.none(),items:d.asSpecs()}]},$W={renderContextForm:(t,s,c)=>zT({type:t,uid:ut("context-toolbar"),initGroups:xI(s,c),onEscape:k.none,cyclicKeying:!0,providers:c}),buildInitGroups:xI},zR=(t,s,c)=>s.bottom-t.y>=c&&t.bottom-s.y>=c,FW=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const c=ov(ae.fromDom(t.startContainer),t.startOffset).element;return(Dc(c)?Ma(c):k.some(c)).filter(Jn).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},UR=t=>{const s=t.selection.getRng(),c=FW(s);if(t.inline){const i=Vr();return To(i.left+c.left,i.top+c.top,c.width,c.height)}else{const i=Id(ae.fromDom(t.getBody()));return To(i.x+c.left,i.y+c.top,c.width,c.height)}},IW=(t,s)=>s.filter(c=>ra(c)&&rf(c)).map(Id).getOrThunk(()=>UR(t)),LW=(t,s,c)=>{const i=Math.max(t.x+c,s.x),d=Math.min(t.right-c,s.right);return{x:i,width:d-i}},HW=(t,s,c,i,d,g)=>{const h=ae.fromDom(t.getContainer()),y=go(h,".tox-editor-header").getOr(h),w=Vo(y),E=w.y>=s.bottom,T=i&&!E;if(t.inline&&T)return{y:Math.max(w.bottom+g,c.y),bottom:c.bottom};if(t.inline&&!T)return{y:c.y,bottom:Math.min(w.y-g,c.bottom)};const A=d==="line"?Vo(h):s;return T?{y:Math.max(w.bottom+g,c.y),bottom:Math.min(A.bottom-g,c.bottom)}:{y:Math.max(A.y+g,c.y),bottom:Math.min(w.y-g,c.bottom)}},H0=(t,s,c,i=0)=>{const d=mf(window),g=Vo(ae.fromDom(t.getContentAreaContainer())),h=Kx(t)||Xx(t)||v2(t),{x:y,width:w}=LW(g,d,i);if(t.inline&&!h)return To(y,d.y,w,d.height);{const E=s.header.isPositionedAtTop(),{y:T,bottom:A}=HW(t,g,d,E,c,i);return To(y,T,w,A-T)}},$C=12,EI={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},TI={maxHeightFunction:td(),maxWidthFunction:gR()},_I=(t,s)=>{const c=t.selection.getRng(),i=ov(ae.fromDom(c.startContainer),c.startOffset);return c.startContainer===c.endContainer&&c.startOffset===c.endOffset-1&&Un(i.element,s)},WR=(t,s,c)=>{const i=Go(t,"position");Vt(t,"position",s);const d=c(t);return i.each(g=>Vt(t,"position",g)),d},ZR=t=>t==="node",kI=(t,s,c,i,d)=>{const g=UR(t),h=i.lastElement().exists(y=>Un(c,y));if(_I(t,c))return h?$$:kl;if(h)return WR(s,i.getMode(),()=>zR(g,Vo(s),-20)&&!i.isReposition()?L9:$$);{const y=i.getMode()==="fixed"?d.y+Vr().top:d.y,w=gs(s)+$C;return y+w<=g.y?kl:_0}},VW=(t,s,c,i)=>{const d=w=>(E,T,A,P,$)=>{const V=kI(t,P,w,c,$),W={...E,y:$.y,height:$.height};return{...V(W,T,A,P,$),alwaysFit:!0}},g=w=>ZR(i)?[d(w)]:[];return s?{onLtr:w=>[is,ps,bs,or,vs,Nn].concat(g(w)),onRtl:w=>[is,bs,ps,vs,or,Nn].concat(g(w))}:{onLtr:w=>[Nn,is,or,ps,vs,bs].concat(g(w)),onRtl:w=>[Nn,is,vs,bs,or,ps].concat(g(w))}},V0=(t,s,c,i)=>s==="line"?{bubble:Ya($C,0,EI),layouts:{onLtr:()=>[ub],onRtl:()=>[fy]},overrides:TI}:{bubble:Ya(0,$C,EI,1/$C),layouts:VW(t,c,i,s),overrides:TI},z0=(t,s)=>{const c=po(s,g=>g.predicate(t.dom)),{pass:i,fail:d}=ef(c,g=>g.type==="contexttoolbar");return{contextToolbars:i,contextForms:d}},t_=t=>{if(t.length<=1)return t;{const s=g=>uc(t,h=>h.position===g),c=g=>po(t,h=>h.position===g),i=s("selection"),d=s("node");if(i||d)if(d&&i){const g=c("node"),h=De(c("selection"),y=>({...y,position:"node"}));return g.concat(h)}else return c(i?"selection":"node");else return c("line")}},jR=t=>{if(t.length<=1)return t;{const s=i=>zt(t,d=>d.position===i);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(i=>i.position).fold(()=>[],i=>po(t,d=>d.position===i))}},GR=(t,s,c)=>{const i=z0(t,s);if(i.contextForms.length>0)return k.some({elem:t,toolbars:[i.contextForms[0]]});{const d=z0(t,c);if(d.contextForms.length>0)return k.some({elem:t,toolbars:[d.contextForms[0]]});if(i.contextToolbars.length>0||d.contextToolbars.length>0){const g=t_(i.contextToolbars.concat(d.contextToolbars));return k.some({elem:t,toolbars:g})}else return k.none()}},OI=(t,s,c)=>t(s)?k.none():A1(s,i=>{if(Jn(i)){const{contextToolbars:d,contextForms:g}=z0(i,c.inNodeScope),h=g.length>0?g:jR(d);return h.length>0?k.some({elem:i,toolbars:h}):k.none()}else return k.none()},t),n_=(t,s)=>{const c=ae.fromDom(s.getBody()),i=h=>Un(h,c),d=h=>!i(h)&&!Mc(c,h),g=ae.fromDom(s.selection.getNode());return d(g)?k.none():GR(g,t.inNodeScope,t.inEditorScope).orThunk(()=>OI(i,g,t))},AI=(t,s)=>{const c={},i=[],d=[],g={},h={},y=(T,A)=>{const P=Ne(L2(A));c[T]=P,P.launch.map($=>{g["form:"+T]={...A.launch,type:$.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(P)}}}),P.scope==="editor"?d.push(P):i.push(P),h[T]=P},w=(T,A)=>{I7(A).each(P=>{A.scope==="editor"?d.push(P):i.push(P),h[T]=P})},E=Fo(t);return it(E,T=>{const A=t[T];A.type==="contextform"?y(T,A):A.type==="contexttoolbar"&&w(T,A)}),{forms:c,inNodeScope:i,inEditorScope:d,lookupTable:h,formNavigators:g}},qR=ut("forward-slide"),o_=ut("backward-slide"),KR=ut("change-slide-event"),s_="tox-pop--resizing",zW=t=>{const s=St([]);return ko.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:c=>{s.set([]),ko.getContent(c).each(i=>{Kt(i.element,"visibility")}),In(c.element,s_),Kt(c.element,"width")},inlineBehaviours:$e([Zt("context-toolbar-events",[zu(fh(),(c,i)=>{i.event.raw.propertyName==="width"&&(In(c.element,s_),Kt(c.element,"width"))}),Ee(KR,(c,i)=>{const d=c.element;Kt(d,"width");const g=tc(d);ko.setContent(c,i.event.contents),ns(d,s_);const h=tc(d);Vt(d,"width",g+"px"),ko.getContent(c).each(y=>{i.event.focus.bind(w=>(pa(w),Dr(d))).orThunk(()=>(xt.focusIn(y),ml(lr(d))))}),setTimeout(()=>{Vt(c.element,"width",h+"px")},0)}),Ee(qR,(c,i)=>{ko.getContent(c).each(d=>{s.set(s.get().concat([{bar:d,focus:ml(lr(c.element))}]))}),ht(c,KR,{contents:i.event.forwardContents,focus:k.none()})}),Ee(o_,(c,i)=>{Qp(s.get()).each(d=>{s.set(s.get().slice(0,s.get().length-1)),ht(c,KR,{contents:zc(d.bar),focus:d.focus})})})]),xt.config({mode:"special",onEscape:c=>Qp(s.get()).fold(()=>t.onEscape(),i=>(sn(c,o_),k.some(!0)))})]),lazySink:()=>tn.value(t.sink)})},YR="tox-pop--transition",r_=(t,s,c,i)=>{const d=i.backstage,g=d.shared,h=Sn().deviceType.isTouch,y=Mn(),w=Mn(),E=Mn(),T=Os(zW({sink:c,onEscape:()=>(t.focus(),k.some(!0))})),A=()=>{const Je=E.get().getOr("node"),mt=ZR(Je)?1:0;return H0(t,g,Je,mt)},P=()=>!t.removed&&!(h()&&d.isContextMenuOpen()),$=Je=>Ac(Cu(Je,y.get(),Un),!0),V=()=>{if(P()){const Je=A(),mt=Ac(E.get(),"node")?IW(t,y.get()):UR(t);return Je.height<=0||!zR(mt,Je,.01)}else return!0},W=()=>{y.clear(),w.clear(),E.clear(),ko.hide(T)},se=()=>{if(ko.isOpen(T)){const Je=T.element;Kt(Je,"display"),V()?Vt(Je,"display","none"):(w.set(0),ko.reposition(T))}},G=Je=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[Je],behaviours:$e([xt.config({mode:"acyclic"}),Zt("pop-dialog-wrap-events",[lo(mt=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>xt.focusIn(mt))}),rl(mt=>{t.shortcuts.remove("ctrl+F9")})])])}),ee=nc(()=>AI(s,Je=>{const mt=ye([Je]);ht(T,qR,{forwardContents:G(mt)})})),oe=(Je,mt)=>JT(t,{buttons:Je,toolbar:mt.items,allowToolbarGroups:!1},i.backstage,k.some(["form:"])),be=(Je,mt)=>$W.buildInitGroups(Je,mt),ye=Je=>{const{buttons:mt}=t.ui.registry.getAll(),ln=ee(),ro={...mt,...ln.formNavigators},_n=gg(t)===Ja.scrolling?Ja.scrolling:Ja.default,gt=Gt(De(Je,Me=>Me.type==="contexttoolbar"?oe(ro,Me):be(Me,g.providers)));return zT({type:_n,uid:ut("context-toolbar"),initGroups:gt,onEscape:k.none,cyclicKeying:!0,providers:g.providers})},We=(Je,mt)=>{const ln=Je==="node"?g.anchors.node(mt):g.anchors.cursor(),ro=V0(t,Je,h(),{lastElement:y.get,isReposition:()=>Ac(w.get(),0),getMode:()=>cr.getMode(c)});return zo(ln,ro)},at=(Je,mt)=>{if(lt.cancel(),!P())return;const ln=ye(Je),ro=Je[0].position,_n=We(ro,mt);E.set(ro),w.set(1);const gt=T.element;Kt(gt,"display"),$(mt)||(In(gt,YR),cr.reset(c,T)),ko.showWithinBounds(T,G(ln),{anchor:_n,transition:{classes:[YR],mode:"placement"}},()=>k.some(A())),mt.fold(y.clear,y.set),V()&&Vt(gt,"display","none")};let xe=!1;const lt=iA(()=>{if(!(!t.hasFocus()||t.removed||xe))if(Wr(T.element,YR))lt.throttle();else{const Je=ee();n_(Je,t).fold(W,mt=>{at(mt.toolbars,k.some(mt.elem))})}},17);t.on("init",()=>{t.on("remove",W),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",se),t.on("click keyup focus SetContent",lt.throttle),t.on(wI,W),t.on(CI,Je=>{const mt=ee();rt(mt.lookupTable,Je.toolbarKey).each(ln=>{at([ln],$t(Je.target!==t,Je.target)),ko.getContent(T).each(xt.focusIn)})}),t.on("focusout",Je=>{mp.setEditorTimeout(t,()=>{Dr(c.element).isNone()&&Dr(T.element).isNone()&&W()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&W()}),t.on("ExecCommand",({command:Je})=>{Je.toLowerCase()==="toggleview"&&W()}),t.on("AfterProgressState",Je=>{Je.state?W():t.hasFocus()&&lt.throttle()}),t.on("dragstart",()=>{xe=!0}),t.on("dragend drop",()=>{xe=!1}),t.on("NodeChange",Je=>{Dr(T.element).fold(lt.throttle,J)})})},RI=t=>{it([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],c=>{t.ui.registry.addToggleButton(c.name,{tooltip:c.text,icon:c.icon,onAction:_a(t,c.cmd),onSetup:NE(t,c.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:qr(t),onAction:_a(t,"JustifyNone")})},DI=(t,s)=>{const c=()=>{const i=s.getOptions(t),d=s.getCurrent(t).map(s.hash),g=Mn();return De(i,h=>({type:"togglemenuitem",text:s.display(h),onSetup:y=>{const w=T=>{T&&(g.on(A=>A.setActive(!1)),g.set(y)),y.setActive(T)};w(Ac(d,s.hash(h)));const E=s.watcher(t,h,w);return()=>{g.clear(),E()}},onAction:()=>s.setCurrent(t,h)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:i=>i(c()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:c,onSetup:s.onMenuSetup})},UW=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:T5,hash:s=>qF(s,["fixed","relative","empty"]).getOr(s),display:an,watcher:(s,c,i)=>s.formatter.formatChanged("lineheight",i,!1,{value:c}).unbind,getCurrent:s=>k.from(s.queryCommandValue("LineHeight")),setCurrent:(s,c)=>s.execCommand("LineHeight",!1,c),onToolbarSetup:qr(t),onMenuSetup:qr(t)}),WW=t=>k.from(f5(t)).map(c=>({name:"language",text:"Language",icon:"language",getOptions:te(c),hash:i=>Xn(i.customCode)?i.code:`${i.code}/${i.customCode}`,display:i=>i.title,watcher:(i,d,g)=>{var h;return i.formatter.formatChanged("lang",g,!1,{value:d.code,customValue:(h=d.customCode)!==null&&h!==void 0?h:null}).unbind},getCurrent:i=>{const d=ae.fromDom(i.selection.getNode());return ua(d,g=>k.some(g).filter(Jn).bind(h=>Lo(h,"lang").map(w=>{const E=Lo(h,"data-mce-lang").getOrUndefined();return{code:w,customCode:E,title:""}})))},setCurrent:(i,d)=>i.execCommand("Lang",!1,d),onToolbarSetup:i=>{const d=la();return i.setActive(t.formatter.match("lang",{},void 0,!0)),d.set(t.formatter.formatChanged("lang",i.setActive,!0)),PE(d.clear,qr(t)(i))},onMenuSetup:qr(t)})),ZW=t=>{DI(t,UW(t)),WW(t).each(s=>DI(t,s))},jW=(t,s)=>{GT(t,s),jU(t,s),iW(t,s),VU(t,s),eI(t,s)},MI=t=>{t.ui.registry.addContext("editable",()=>t.selection.isEditable()),t.ui.registry.addContext("mode",s=>t.mode.get()===s),t.ui.registry.addContext("any",Ot),t.ui.registry.addContext("formatting",s=>t.formatter.canApply(s)),t.ui.registry.addContext("insert",s=>t.schema.isValidChild(t.selection.getNode().tagName,s))},PI=t=>kp(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),NI=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:PI(t),onAction:_a(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:qr(t),onAction:_a(t,"indent")})},BI=t=>{NI(t)},$I=(t,s)=>c=>{c.setActive(s.get());const i=d=>{s.set(d.state),c.setActive(d.state)};return t.on("PastePlainTextToggle",i),PE(()=>t.off("PastePlainTextToggle",i),qr(t)(c))},FI=t=>{const s=St(x5(t)),c=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:c,onSetup:$I(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:c,onSetup:$I(t,s)})},c_=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},GW=t=>{jm.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,c)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:NE(t,s.name),onAction:c_(t,s.name),shortcut:s.shortcut})});for(let s=1;s<=6;s++){const c="h"+s,i=`Access+${s}`;t.ui.registry.addToggleButton(c,{text:c.toUpperCase(),tooltip:"Heading "+s,onSetup:NE(t,c),onAction:c_(t,c),shortcut:i})}},uq=t=>{jm.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy",context:"any"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:_a(t,s.action),shortcut:s.shortcut,context:s.context})}),jm.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:qr(t),onAction:_a(t,s.action)})})},qW=t=>{jm.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:_a(t,s.action),onSetup:NE(t,s.name)})})},KW=t=>{GW(t),uq(t),qW(t)},YW=t=>{jm.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:_a(t,s.action),context:s.context})}),jm.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:qr(t),onAction:_a(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:qr(t),onAction:c_(t,"code")})},XW=t=>{KW(t),YW(t)},a_=(t,s)=>kp(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",c=>{c.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),JW=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:a_(t,"hasUndo"),onAction:_a(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:a_(t,"hasRedo"),onAction:_a(t,"redo")})},QW=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:a_(t,"hasUndo"),onAction:_a(t,"undo"),shortcut:"Meta+Z"}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:a_(t,"hasRedo"),onAction:_a(t,"redo"),shortcut:"Meta+Y"})},eZ=t=>{JW(t),QW(t)},tZ=t=>kp(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),nZ=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:tZ(t),onAction:_a(t,"mceToggleVisualAid"),context:"any"})},oZ=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:_a(t,"mceToggleVisualAid"),context:"any"})},sZ=t=>{oZ(t),nZ(t)},rZ=(t,s)=>{RI(t),XW(t),jW(t,s),eZ(t),AL(t),sZ(t),BI(t),ZW(t),FI(t),MI(t)},II=t=>ke(t)?t.split(/[ ,]/):t,LI=t=>s=>s.options.get(t),cZ=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:c=>c===!1?{value:[],valid:!0}:ke(c)||Bo(c,ke)?{value:II(c),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},HI=LI("contextmenu_never_use_native"),aZ=LI("contextmenu_avoid_overlap"),iZ=t=>VI(t).length===0,VI=t=>{const s=t.ui.registry.getAll().contextMenus,c=t.options.get("contextmenu");return t.options.isSet("contextmenu")?c:po(c,i=>$n(s,i))},FC=(t,s)=>({type:"makeshift",x:t,y:s}),lZ=(t,s,c)=>FC(t.x+s,t.y+c),zI=t=>t.type==="longpress"||t.type.indexOf("touch")===0,XR=t=>{if(zI(t)){const s=t.touches[0];return FC(s.pageX,s.pageY)}else return FC(t.pageX,t.pageY)},uZ=t=>{if(zI(t)){const s=t.touches[0];return FC(s.clientX,s.clientY)}else return FC(t.clientX,t.clientY)},dZ=(t,s)=>{const c=fg.DOM.getPos(t);return lZ(s,c.x,c.y)},JR=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?XR(s):dZ(t.getContentAreaContainer(),uZ(s)):QR(t),QR=t=>({type:"selection",root:ae.fromDom(t.selection.getNode())}),UI=t=>({type:"node",node:k.some(ae.fromDom(t.selection.getNode())),root:ae.fromDom(t.getBody())}),WI=(t,s,c)=>{switch(c){case"node":return UI(t);case"point":return JR(t,s);case"selection":return QR(t)}},mZ=(t,s,c,i,d,g)=>{const h=c(),y=WI(t,s,g);Rg(h,vl.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!1,search:k.none()}).map(w=>{s.preventDefault(),ko.showMenuAt(d,{anchor:y},{menu:{markers:yg("normal")},data:w})})},fZ={onLtr:()=>[is,ps,bs,or,vs,Nn,kl,_0,wC,kT,CC,_T],onRtl:()=>[is,bs,ps,vs,or,Nn,kl,_0,CC,_T,wC,kT]},gZ=12,hZ={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},eD=(t,s)=>{const c=t.selection;if(c.isCollapsed()||s.touches.length<1)return!1;{const i=s.touches[0],d=c.getRng();return jh(t.getWin(),Kf.domRange(d)).exists(h=>h.left<=i.clientX&&h.right>=i.clientX&&h.top<=i.clientY&&h.bottom>=i.clientY)}},pZ=t=>{const s=t.selection.getRng(),c=()=>{mp.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),g()};t.once("touchend",c);const i=h=>{h.preventDefault(),h.stopImmediatePropagation()};t.on("mousedown",i,!0);const d=()=>g();t.once("longpresscancel",d);const g=()=>{t.off("touchend",c),t.off("longpresscancel",d),t.off("mousedown",i)}},ZI=(t,s,c)=>{const i=WI(t,s,c);return{bubble:Ya(0,c==="point"?gZ:0,hZ),layouts:fZ,overrides:{maxWidthFunction:gR(),maxHeightFunction:td()},...i}},bZ=(t,s,c,i,d,g,h)=>{const y=ZI(t,s,g);Rg(c,vl.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!0,search:k.none()}).map(w=>{s.preventDefault();const E=h?kc.HighlightMenuAndItem:kc.HighlightNone;ko.showMenuWithinBounds(d,{anchor:y},{menu:{markers:yg("normal"),highlightOnOpen:E},data:w,type:"horizontal"},()=>k.some(H0(t,i.shared,g==="node"?"node":"selection"))),t.dispatch(wI)})},vZ=(t,s,c,i,d,g)=>{const h=Sn(),y=h.os.isiOS(),w=h.os.isMacOS(),E=h.os.isAndroid(),T=h.deviceType.isTouch(),A=()=>!(E||y||w&&T),P=()=>{const $=c();bZ(t,s,$,i,d,g,A())};if((w||y)&&g!=="node"){const $=()=>{pZ(t),P()};eD(t,s)?$():(t.once("selectionchange",$),t.once("touchend",()=>t.off("selectionchange",$)))}else P()},i_=t=>ke(t)?t==="|":t.type==="separator",tD={type:"separator"},nD=t=>{const s=c=>({text:c.text,icon:c.icon,enabled:c.enabled,shortcut:c.shortcut});if(ke(t))return t;switch(t.type){case"separator":return tD;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const i=t.getSubmenuItems();return ke(i)?i:De(i,nD)}};default:const c=t;return{type:"menuitem",...s(c),onAction:hn(c.onAction)}}},jI=(t,s)=>{if(s.length===0)return t;const i=Qp(t).filter(d=>!i_(d)).fold(()=>[],d=>[tD]);return t.concat(i).concat(s).concat([tD])},yZ=(t,s,c)=>{const i=wo(s,(d,g)=>rt(t,g.toLowerCase()).map(h=>{const y=h.update(c);if(ke(y)&&Rc(Bl(y)))return jI(d,y.split(" "));if(yt(y)&&y.length>0){const w=De(y,nD);return jI(d,w)}else return d}).getOrThunk(()=>d.concat([g])),[]);return i.length>0&&i_(i[i.length-1])&&i.pop(),i},oD=(t,s)=>s.ctrlKey&&!HI(t),CZ=t=>t.type==="longpress"||$n(t,"touches"),GI=(t,s)=>!CZ(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),qI=(t,s)=>GI(t,s)?t.selection.getStart(!0):s.target,wZ=(t,s)=>{const c=aZ(t),i=GI(t,s)?"selection":"point";if(Rc(c)){const d=qI(t,s);return Y2(ae.fromDom(d),c)?"node":i}else return i},SZ=(t,s,c)=>{const d=Sn().deviceType.isTouch,g=Os(ko.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>c.setContextMenuState(!0),onHide:()=>c.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:$e([Zt("dismissContextMenu",[Ee(Vc(),(w,E)=>{Cn.close(w),t.focus()})])])})),h=()=>ko.hide(g),y=w=>{if(HI(t)&&w.preventDefault(),oD(t,w)||iZ(t))return;const E=wZ(t,w),T=()=>{const P=qI(t,w),$=t.ui.registry.getAll(),V=VI(t);return yZ($.contextMenus,V,P)};(d()?vZ:mZ)(t,w,T,c,g,E)};t.on("init",()=>{const w="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");t.on(w,h),t.on("longpress contextmenu",y)})},l_=vc.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),u_=t=>s=>s.translate(-t.left,-t.top),d_=t=>s=>s.translate(t.left,t.top),Ym=t=>(s,c)=>wo(t,(i,d)=>d(i),Do(s,c)),m_=(t,s,c)=>t.fold(Ym([d_(c),u_(s)]),Ym([u_(s)]),Ym([])),U0=(t,s,c)=>t.fold(Ym([d_(c)]),Ym([]),Ym([d_(s)])),KI=(t,s,c)=>t.fold(Ym([]),Ym([u_(c)]),Ym([d_(s),u_(c)])),xZ=(t,s,c,i,d,g)=>{const h=U0(t,d,g),y=U0(s,d,g);return Math.abs(h.left-y.left)<=c&&Math.abs(h.top-y.top)<=i},EZ=(t,s,c,i,d,g)=>{const h=U0(t,d,g),y=U0(s,d,g),w=Math.abs(h.left-y.left),E=Math.abs(h.top-y.top);return Do(w,E)},sD=(t,s,c)=>{const i=t.fold((d,g)=>({position:k.some("absolute"),left:k.some(d+"px"),top:k.some(g+"px")}),(d,g)=>({position:k.some("absolute"),left:k.some(d-c.left+"px"),top:k.some(g-c.top+"px")}),(d,g)=>({position:k.some("fixed"),left:k.some(d+"px"),top:k.some(g+"px")}));return{right:k.none(),bottom:k.none(),...i}},TZ=(t,s,c)=>t.fold((i,d)=>g_(i+s,d+c),(i,d)=>Ng(i+s,d+c),(i,d)=>Wp(i+s,d+c)),f_=(t,s,c,i)=>{const d=(g,h)=>(y,w)=>{const E=g(s,c,i);return h(y.getOr(E.left),w.getOr(E.top))};return t.fold(d(KI,g_),d(U0,Ng),d(m_,Wp))},g_=l_.offset,Ng=l_.absolute,Wp=l_.fixed,Bg=(t,s)=>{const c=qt(t,s);return Xn(c)?NaN:parseInt(c,10)},YI=(t,s)=>{const c=t.element,i=Bg(c,s.leftAttr),d=Bg(c,s.topAttr);return isNaN(i)||isNaN(d)?k.none():k.some(Do(i,d))},_Z=(t,s,c)=>{const i=t.element;Dt(i,s.leftAttr,c.left+"px"),Dt(i,s.topAttr,c.top+"px")},kZ=(t,s)=>{const c=t.element;Ro(c,s.leftAttr),Ro(c,s.topAttr)},OZ=(t,s,c,i)=>YI(t,s).fold(()=>c,d=>Wp(d.left+i.left,d.top+i.top)),AZ=(t,s,c,i,d,g)=>{const h=OZ(t,s,c,i),y=s.mustSnap?RZ(t,s,h,d,g):DZ(t,s,h,d,g),w=m_(h,d,g);return _Z(t,s,w),y.fold(()=>({coord:Wp(w.left,w.top),extra:k.none()}),E=>({coord:E.output,extra:E.extra}))},XI=(t,s)=>{kZ(t,s)},JI=(t,s,c,i)=>ir(t,d=>{const g=d.sensor;return xZ(s,g,d.range.left,d.range.top,c,i)?k.some({output:f_(d.output,s,c,i),extra:d.extra}):k.none()}),RZ=(t,s,c,i,d)=>{const g=s.getSnapPoints(t);return JI(g,c,i,d).orThunk(()=>wo(g,(w,E)=>{const T=E.sensor,A=EZ(c,T,E.range.left,E.range.top,i,d);return w.deltas.fold(()=>({deltas:k.some(A),snap:k.some(E)}),P=>{const $=(A.left+A.top)/2,V=(P.left+P.top)/2;return $<=V?{deltas:k.some(A),snap:k.some(E)}:w})},{deltas:k.none(),snap:k.none()}).snap.map(w=>({output:f_(w.output,c,i,d),extra:w.extra})))},DZ=(t,s,c,i,d)=>{const g=s.getSnapPoints(t);return JI(g,c,i,d)},MZ=(t,s,c)=>({coord:f_(t.output,t.output,s,c),extra:t.extra});var PZ=Object.freeze({__proto__:null,snapTo:(t,s,c,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=Pc(t.element),h=Vr(g),y=j1(d),w=MZ(i,h,y),E=sD(w.coord,h,y);Na(d,E)}}});const rD="data-initial-z-index",NZ=t=>{Ma(t.element).filter(Jn).each(s=>{Lo(s,rD).fold(()=>Kt(s,"z-index"),c=>Vt(s,"z-index",c)),Ro(s,rD)})},BZ=t=>{Ma(t.element).filter(Jn).each(s=>{Go(s,"z-index").each(c=>{Dt(s,rD,c)}),Vt(s,"z-index",kr(t.element,"z-index"))})},QI=(t,s)=>{t.getSystem().addToGui(s),BZ(s)},e6=t=>{NZ(t),t.getSystem().removeFromGui(t)},cD=(t,s,c)=>t.getSystem().build(iu.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:c}));var $Z=Fs("snaps",[Te("getSnapPoints"),bn("onSensor"),Te("leftAttr"),Te("topAttr"),le("lazyViewport",Ns),le("mustSnap",!1)]);const Zp=[le("useFixed",Vn),Te("blockerClass"),le("getTarget",an),le("onDrag",J),le("repositionTarget",!0),le("onDrop",J),fo("getBounds",Ns),$Z],FZ=t=>nf(Go(t,"left"),Go(t,"top"),Go(t,"position"),(s,c,i)=>(i==="fixed"?Wp:g_)(parseInt(s,10),parseInt(c,10))).getOrThunk(()=>{const s=Ho(t);return Ng(s.left,s.top)}),IZ=(t,s,c,i,d)=>{const g=d.bounds,h=U0(s,c,i),y=Ga(h.left,g.x,g.x+g.width-d.width),w=Ga(h.top,g.y,g.y+g.height-d.height),E=Ng(y,w);return s.fold(()=>{const T=KI(E,c,i);return g_(T.left,T.top)},te(E),()=>{const T=m_(E,c,i);return Wp(T.left,T.top)})},aD=(t,s,c,i,d,g,h)=>{const y=s.fold(()=>{const w=TZ(c,g.left,g.top),E=m_(w,i,d);return Wp(E.left,E.top)},w=>{const E=AZ(t,w,c,g,i,d);return E.extra.each(T=>{w.onSensor(t,T)}),E.coord});return IZ(t,y,i,d,h)},LZ=(t,s,c,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=Pc(t.element),h=Vr(g),y=j1(d),w=FZ(d),E=aD(t,s.snaps,w,h,y,i,c),T=sD(E,h,y);Na(d,T)}s.onDrag(t,d,i)},t6=(t,s)=>({bounds:t.getBounds(),height:Xi(s.element),width:wn(s.element)}),iD=(t,s,c,i,d)=>{const g=c.update(i,d),h=c.getStartData().getOrThunk(()=>t6(s,t));g.each(y=>{LZ(t,s,h,y)})},n6=(t,s,c,i)=>{s.each(e6),c.snaps.each(g=>{XI(t,g)});const d=c.getTarget(t.element);i.reset(),c.onDrop(t,d)},lD=t=>(s,c)=>{const i=d=>{c.setStartData(t6(s,d))};return Fn([Ee(Hu(),d=>{c.getStartData().each(()=>i(d))}),...t(s,c,i)])},HZ=t=>Fn([Ee(Lc(),t.forceDrop),Ee(N1(),t.drop),Ee(mh(),(s,c)=>{t.move(c.event)}),Ee(P1(),t.delayDrop)]);var VZ=Object.freeze({__proto__:null,getData:t=>k.from(Do(t.x,t.y)),getDelta:(t,s)=>Do(s.left-t.left,s.top-t.top)});const o6=(t,s,c)=>[Ee(Lc(),(i,d)=>{if(d.event.raw.button!==0)return;d.stop();const h=()=>n6(i,k.some(E),t,s),y=TN(h,200),w={drop:h,delayDrop:y.schedule,forceDrop:h,move:A=>{y.cancel(),iD(i,t,s,VZ,A)}},E=cD(i,t.blockerClass,HZ(w));(()=>{c(i),QI(i,E)})()})],zZ=[...Zp,Qn("dragger",{handlers:lD(o6)})],UZ=t=>Fn([Ee(Ci(),t.forceDrop),Ee(qd(),t.drop),Ee(M1(),t.drop),Ee($u(),(s,c)=>{t.move(c.event)})]),WZ=t=>{const s=t[0];return k.some(Do(s.clientX,s.clientY))};var s6=Object.freeze({__proto__:null,getData:t=>{const c=t.raw.touches;return c.length===1?WZ(c):k.none()},getDelta:(t,s)=>Do(s.left-t.left,s.top-t.top)});const r6=(t,s,c)=>{const i=Mn(),d=g=>{n6(g,i.get(),t,s),i.clear()};return[Ee(Ci(),(g,h)=>{h.stop();const y=()=>d(g),w={drop:y,delayDrop:J,forceDrop:y,move:A=>{iD(g,t,s,s6,A)}},E=cD(g,t.blockerClass,UZ(w));i.set(E),(()=>{c(g),QI(g,E)})()}),Ee($u(),(g,h)=>{h.stop(),iD(g,t,s,s6,h.event)}),Ee(qd(),(g,h)=>{h.stop(),d(g)}),Ee(M1(),d)]},h_=[...Zp,Qn("dragger",{handlers:lD(r6)})],ZZ=(t,s,c)=>[...o6(t,s,c),...r6(t,s,c)],jZ=[...Zp,Qn("dragger",{handlers:lD(ZZ)})];var GZ=Object.freeze({__proto__:null,mouse:zZ,touch:h_,mouseOrTouch:jZ}),KZ=Object.freeze({__proto__:null,init:()=>{let t=k.none(),s=k.none();const c=()=>{t=k.none(),s=k.none()},i=(w,E)=>{const T=t.map(A=>w.getDelta(A,E));return t=k.some(E),T},d=(w,E)=>w.getData(E).bind(T=>i(w,T)),g=w=>{s=k.some(w)},h=()=>s,y=te({});return Ar({readState:y,reset:c,update:d,getStartData:h,setStartData:g})}});const jp=Iv({branchKey:"mode",branches:GZ,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:k.from(t.extra)})},state:KZ,apis:PZ}),uD=40,p_=uD/2,c6=(t,s,c,i,d,g)=>t.fold(()=>jp.snap({sensor:Ng(c-p_,i-p_),range:Do(d,g),output:Ng(k.some(c),k.some(i)),extra:{td:s}}),h=>{const y=c-p_,w=i-p_,E=uD,T=uD,A=h.element.dom.getBoundingClientRect();return jp.snap({sensor:Ng(y,w),range:Do(E,T),output:Ng(k.some(c-A.width/2),k.some(i-A.height/2)),extra:{td:s}})}),b_=(t,s,c)=>{const i=(d,g)=>d.exists(h=>Un(h,g));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,g)=>{const h=g.td;i(s.get(),h)||(s.set(h),c(h))},mustSnap:!0}},dD=t=>On(As.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:$e([jp.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),b0.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),YZ=(t,s)=>{const c=St([]),i=St([]),d=St(!1),g=Mn(),h=Mn(),y=at=>{const xe=Id(at);return c6($.getOpt(s),at,xe.x,xe.y,xe.width,xe.height)},w=()=>De(c.get(),at=>y(at)),E=at=>{const xe=Id(at);return c6(V.getOpt(s),at,xe.right,xe.bottom,xe.width,xe.height)},T=()=>De(i.get(),at=>E(at)),A=b_(w,g,at=>{h.get().each(xe=>{t.dispatch("TableSelectorChange",{start:at,finish:xe})})}),P=b_(T,h,at=>{g.get().each(xe=>{t.dispatch("TableSelectorChange",{start:xe,finish:at})})}),$=dD(A),V=dD(P),W=Os($.asSpec()),se=Os(V.asSpec()),G=(at,xe,lt,Je)=>{const mt=xe.dom.getBoundingClientRect();Kt(at.element,"display");const ln=Dd(ae.fromDom(t.getBody())).dom.innerHeight,ro=lt(mt),_n=Je(mt,ln);(ro||_n)&&Vt(at.element,"display","none")},ee=(at,xe,lt,Je)=>{const mt=lt(xe);jp.snapTo(at,mt),G(at,xe,_n=>_n[Je]<0,(_n,gt)=>_n[Je]>gt)},oe=at=>ee(W,at,y,"top"),be=()=>g.get().each(oe),ye=at=>ee(se,at,E,"bottom"),We=()=>h.get().each(ye);if(Sn().deviceType.isTouch()){const at=xe=>De(xe,ae.fromDom);t.on("TableSelectionChange",xe=>{d.get()||(Ql(s,W),Ql(s,se),d.set(!0));const lt=ae.fromDom(xe.start),Je=ae.fromDom(xe.finish);g.set(lt),h.set(Je),k.from(xe.otherCells).each(mt=>{c.set(at(mt.upOrLeftCells)),i.set(at(mt.downOrRightCells)),oe(lt),ye(Je)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{be(),We()}),t.on("TableSelectionClear",()=>{d.get()&&(eu(W),eu(se),d.set(!1)),g.clear(),h.clear()})}};var XZ=`<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>
`;const JZ=(t,s)=>{const c=k.from(qt(t,"id")).getOrThunk(()=>{const i=ut("aria");return Dt(s,"id",i),i});Dt(t,"aria-describedby",c)},QZ=t=>{Ro(t,"aria-describedby")},ej=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",tj=(t,s,c)=>{var i;const d=(i=s.delimiter)!==null&&i!==void 0?i:"",g=(E,T,A)=>As.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":A}},components:[xo(E)],action:P=>{t.focus(),t.selection.select(T),t.nodeChanged()},buttonBehaviours:$e([Uo.config({...c.tooltips.getConfig({tooltipText:c.translate(["Select the {0} element",T.nodeName.toLowerCase()]),onShow:(P,$)=>{JZ(P.element,$.element)},onHide:P=>{QZ(P.element)}})}),ti.button(c.isDisabled),os(()=>c.checkUiComponentContext("any"))])}),h=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[xo(` ${d} `)]}),y=E=>wo(E,(T,A,P)=>{const $=g(A.name,A.element,P);return P===0?T.concat([$]):T.concat([h(),$])},[]),w=E=>{const T=[];let A=E.length;for(;A-- >0;){const P=E[A];if(P.nodeType===1&&!ej(P)){const $=zP(t,P);if($.isDefaultPrevented()||T.push({name:$.name,element:P}),$.isPropagationStopped())break}}return T};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:$e([xt.config({mode:"flow",selector:"div[role=button]"}),Mt.config({disabled:c.isDisabled}),os(()=>c.checkUiComponentContext("any")),ho.config({}),Ht.config({}),Zt("elementPathEvents",[lo((E,T)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>xt.focusIn(E)),t.on("NodeChange",A=>{const P=w(A.parents),$=P.length>0?y(P):[];Ht.set(E,$)})})])]),components:[]}};var $g;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})($g||($g={}));const nj=(t,s,c,i,d)=>{const g={height:Up(i+s.top,gp(t),Ux(t))};return c===$g.Both&&(g.width=Up(d+s.left,r3(t),hp(t))),g},a6=(t,s,c)=>{const i=ae.fromDom(t.getContainer()),d=nj(t,s,c,gs(i),tc(i));Ms(d,(g,h)=>{uo(g)&&Vt(i,h,LR(g))}),lL(t)},oj=t=>{const s=S5(t);return s===!1?$g.None:s==="both"?$g.Both:$g.Vertical},v_=(t,s,c,i)=>{const g=Do(c*20,i*20);return a6(t,g,s),k.some(!0)},sj=(t,s)=>{const c=oj(t);if(c===$g.None)return k.none();const i=c===$g.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return k.some(Qa("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{"aria-label":s.translate(i),"data-mce-name":"resize-handle"},behaviours:[jp.config({mode:"mouse",repositionTarget:!1,onDrag:(d,g,h)=>a6(t,h,c),blockerClass:"tox-blocker"}),xt.config({mode:"special",onLeft:()=>v_(t,c,-1,0),onRight:()=>v_(t,c,1,0),onUp:()=>v_(t,c,0,-1),onDown:()=>v_(t,c,0,1)}),ho.config({}),Bt.config({}),Uo.config(s.tooltips.getConfig({tooltipText:s.translate("Resize")}))]},s.icons))},rj=(t,s)=>{const c=(i,d,g)=>Ht.set(i,[xo(s.translate(["{0} "+g,d[g]]))]);return As.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:$e([ti.button(s.isDisabled),os(()=>s.checkUiComponentContext("any")),ho.config({}),Ht.config({}),nt.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),Zt("wordcount-events",[Wl(i=>{const d=nt.getValue(i),g=d.mode==="words"?"characters":"words";nt.setValue(i,{mode:g,count:d.count}),c(i,d.count,g)}),lo(i=>{t.on("wordCountUpdate",d=>{const{mode:g}=nt.getValue(i);nt.setValue(i,{mode:g,count:d.wordCount}),c(i,d.wordCount,g)})})])]),eventOrder:{[nr()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},cj=(t,s)=>{const c=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":t.translate(["Build with {0}","TinyMCE"])},innerHtml:t.translate(["Build with {0}",XZ.trim()])},behaviours:$e([Bt.config({})])}]}),i=()=>{const y=sO("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[xo($i.translate(["Press {0} for help",y]))]}},d=()=>{const y=[];return t.hasPlugin("wordcount")&&y.push(rj(t,s)),f3(t)&&y.push(c()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:y}},g=()=>{const y=[],w=E5(t),E=w5(t),T=f3(t)||t.hasPlugin("wordcount"),A=()=>{const P="tox-statusbar__text-container--flex-start",$="tox-statusbar__text-container--flex-end",V="tox-statusbar__text-container--space-around";if(w){const W="tox-statusbar__text-container-3-cols";return!T&&!E?[W,V]:T&&!E?[W,$]:[W,P]}return[T&&!E?$:P]};return E&&y.push(tj(t,{},s)),w&&y.push(i()),T&&y.push(d()),y.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...A()]},components:y}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const y=g(),w=sj(t,s);return y.concat(w.toArray())})()}},mD=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),aj=(t,s)=>{const c=t.inline,i=c?yI:TW,d=hg(t)?sR:Ez,g=AW(),h=Mn(),y=Mn(),w=Mn(),P=Sn().deviceType.isTouch()?["tox-platform-touch"]:[],$=b3(t),V=gg(t),W=On({dom:{tag:"div",classes:["tox-anchorbar"]}}),se=On({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),G=()=>g.mainUi.get().map(wt=>wt.outerContainer).bind(so.getHeader),ee=()=>tn.fromOption(g.dialogUi.get().map(wt=>wt.sink),"UI has not been rendered"),oe=()=>tn.fromOption(g.popupUi.get().map(wt=>wt.sink),"(popup) UI has not been rendered"),be=g.lazyGetInOuterOrDie("anchor bar",W.getOpt),ye=g.lazyGetInOuterOrDie("bottom anchor bar",se.getOpt),We=g.lazyGetInOuterOrDie("toolbar",so.getToolbar),at=g.lazyGetInOuterOrDie("throbber",so.getThrobber),xe=eq({popup:oe,dialog:ee},t,be,ye),lt=()=>{const wt={attributes:{[$S]:$?ls.BottomToTop:ls.TopToBottom}},Ut=so.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:xe.popup,onEscape:()=>{t.focus()}}),jn=so.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:xe.popup.shared.getSink,providers:xe.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:Ed=>{dL(t,Ed)},type:V,lazyToolbar:We,lazyHeader:()=>G().getOrDie("Could not find header element"),...wt}),Hn=so.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:xe.popup.shared.providers,onEscape:()=>{t.focus()},type:V}),ea=v2(t),Oo=Xx(t),ai=Kx(t),Fr=qx(t),ii=Je(),li=ea||Oo||ai,Rl=()=>ea?[Hn]:Oo?[jn]:[],zC=Fr?[ii,Ut]:[Ut];return so.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(li?[]:["tox-editor-header--empty"]),...wt},components:Gt([ai?zC:[],Rl(),pl(t)?[]:[W.asSpec()]]),sticky:hg(t),editor:t,sharedBackstage:xe.popup.shared})},Je=()=>so.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),mt=()=>{const wt=so.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),Ut=so.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[wt,Ut]}},ln=()=>{const wt=v3(t),Ut=Un(mi(),wt)&&kr(wt,"display")==="grid",jn={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(P),attributes:{...$i.isRtl()?{dir:"rtl"}:{}}},behaviours:$e([cr.config({useFixed:()=>d.isDocked(G)})])},Hn={dom:{styles:{width:document.body.clientWidth+"px"}},events:Fn([Ee(Jd(),ai=>{Vt(ai.element,"width",document.body.clientWidth+"px")})])},ea=Os(zo(jn,Ut?Hn:{})),Oo=OO(ea);return y.set(Oo),{sink:ea,mothership:Oo}},ro=()=>{const wt={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(P),attributes:{...$i.isRtl()?{dir:"rtl"}:{}}},behaviours:$e([cr.config({useFixed:()=>d.isDocked(G),getBounds:()=>s.getPopupSinkBounds()})])},Ut=Os(wt),jn=OO(Ut);return w.set(jn),{sink:Ut,mothership:jn}},_n=()=>{const wt=lt(),Ut=mt(),jn=so.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:xe.popup}),Hn=so.parts.viewWrapper({backstage:xe.popup}),ea=C5(t)&&!c?k.some(cj(t,xe.popup.shared.providers)):k.none(),Oo=Gt([$?[]:[wt],c?[]:[Ut],$?[wt]:[]]),ai=so.parts.editorContainer({components:Gt([Oo,c?[]:[se.asSpec()]])}),Fr=y3(t),ii={role:"application",...$i.isRtl()?{dir:"rtl"}:{},...Fr?{"aria-hidden":"true"}:{}},li=Os(so.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(c?["tox-tinymce-inline"]:[]).concat($?["tox-tinymce--toolbar-bottom"]:[]).concat(P),styles:{visibility:"hidden",...Fr?{opacity:"0",border:"0"}:{}},attributes:ii},components:[ai,...c?[]:[Hn,...ea.toArray()],jn],behaviours:$e([os(()=>xe.popup.shared.providers.checkUiComponentContext("any")),Mt.config({disableClass:"tox-tinymce--disabled"}),xt.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),Rl=OO(li);return h.set(Rl),{mothership:Rl,outerContainer:li}},gt=wt=>{const Ut=LR(hI(t)),jn=LR(_W(t));return t.inline||(XC("div","width",jn)&&Vt(wt.element,"width",jn),XC("div","height",Ut)?Vt(wt.element,"height",Ut):Vt(wt.element,"height","400px")),Ut},Me=wt=>{t.addShortcut("alt+F9","focus menubar",()=>{so.focusMenubar(wt)}),t.addShortcut("alt+F10","focus toolbar",()=>{so.focusToolbar(wt)}),t.addCommand("ToggleToolbarDrawer",(Ut,jn)=>{jn!=null&&jn.skipFocus?so.toggleToolbarDrawerWithoutFocusing(wt):so.toggleToolbarDrawer(wt)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>so.isToolbarDrawerToggled(wt))},Ye=wt=>{const{mainUi:Ut,popupUi:jn,uiMotherships:Hn}=wt;Io(a3(t),(Yp,DD)=>{t.ui.registry.addGroupToolbarButton(DD,Yp)});const{buttons:ea,menuItems:Oo,contextToolbars:ai,sidebars:Fr,views:ii}=t.ui.registry.getAll(),li=Jx(t),Rl={menuItems:Oo,menus:_5(t),menubar:p5(t),toolbar:li.getOrThunk(()=>Zx(t)),allowToolbarGroups:V===Ja.floating,buttons:ea,sidebar:Fr,views:ii};Me(Ut.outerContainer),bz(t,Ut.mothership,Hn),d.setup(t,xe.popup.shared,G),rZ(t,xe.popup),SZ(t,xe.popup.shared.getSink,xe.popup),Hz(t),rq(t,at,xe.popup.shared),r_(t,ai,jn.sink,{backstage:xe.popup}),YZ(t,jn.sink);const zC=t.getElement(),Ed=gt(Ut.outerContainer),RD={targetNode:zC,height:Ed};return i.render(t,wt,Rl,xe.popup,RD)},It=wt=>(w.set(wt.mothership),wt),Qt=()=>{const wt=_n(),Ut=ln(),jn=Lm(t)?ro():It(Ut);g.dialogUi.set(Ut),g.popupUi.set(jn),g.mainUi.set(wt);const Hn={popupUi:jn,dialogUi:Ut,mainUi:wt,uiMotherships:g.getUiMotherships()};return Ye(Hn)};return{popups:{backstage:xe.popup,getMothership:()=>mD("popups",w)},dialogs:{backstage:xe.dialog,getMothership:()=>mD("dialogs",y)},renderUI:Qt}},ij=t=>t.dom.textContent,lj=(t,s)=>{const c=Lo(t,"id").fold(()=>{const i=ut("dialog-label");return Dt(s,"id",i),i},an);Dt(t,"aria-labelledby",c)},uj=te([Te("lazySink"),kn("dragBlockClass"),fo("getBounds",Ns),le("useTabstopAt",Ot),le("firstTabstop",0),le("eventOrder",{}),Vs("modalBehaviours",[xt]),Cr("onExecute"),Bf("onEscape")]),fD={sketch:an},dj=te([Gc({name:"draghandle",overrides:(t,s)=>({behaviours:$e([jp.config({mode:"mouse",getTarget:c=>hs(c,'[role="dialog"]').getOr(c),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),Sr({schema:[Te("dom")],name:"title"}),Sr({factory:fD,schema:[Te("dom")],name:"close"}),Sr({factory:fD,schema:[Te("dom")],name:"body"}),Gc({factory:fD,schema:[Te("dom")],name:"footer"}),Ca({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[le("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),le("components",[])],name:"blocker"})]),mj=(t,s,c,i)=>{const d=Mn(),g=V=>{d.set(V);const W=t.lazySink(V).getOrDie(),se=i.blocker(),G=W.getSystem().build({...se,components:se.components.concat([zc(V)]),behaviours:$e([Bt.config({}),Zt("dialog-blocker-events",[zu(Ua(),()=>{gu.isBlocked(V)?J():xt.focusIn(V)})])])});Ql(W,G),xt.focusIn(V)},h=V=>{d.clear(),Ma(V.element).each(W=>{V.getSystem().getByDom(W).each(se=>{eu(se)})})},y=V=>ot(V,t,"body"),w=V=>qn(V,t,"footer"),E=(V,W)=>{gu.block(V,W)},T=V=>{gu.unblock(V)},A=ut("modal-events"),P={...t.eventOrder,[rc()]:[A].concat(t.eventOrder["alloy.system.attached"]||[])},$=Sn();return{uid:t.uid,dom:t.dom,components:s,apis:{show:g,hide:h,getBody:y,getFooter:w,setIdle:T,setBusy:E},eventOrder:P,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:zs(t.modalBehaviours,[Ht.config({}),xt.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),gu.config({getRoot:d.get}),Zt(A,[lo(V=>{const W=ot(V,t,"title").element,se=ij(W);$.os.isMacOS()&&jt(se)?Dt(V.element,"aria-label",se):lj(V.element,W)})])])}},js=pr({name:"ModalDialog",configFields:uj(),partFields:dj(),factory:mj,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,c)=>{t.setBusy(s,c)},setIdle:(t,s)=>{t.setIdle(s)}}}),i6=kt([us,W3].concat(wg)),l6=La,gD=[SE("button"),ei,Qs("align","end",["start","end"]),wE,yl,k1("buttonType",["primary","secondary"]),ts("context","mode:design")],y_=[...gD,Hm],C_=[yr("type",["submit","cancel","custom"]),...y_],fj=[yr("type",["menu"]),Vm,N2,ei,Ic("items",i6),...gD],gj=[...gD,yr("type",["togglebutton"]),N2,ei,Vm,er("active",!1)],hj=Ko("type",{submit:C_,cancel:C_,custom:C_,menu:fj,togglebutton:gj}),pj=[us,Hm,yr("level",["info","warn","error","success"]),fP,le("url","")],bj=kt(pj),vj=t=>[us,t],W0=[us,Hm,yl,SE("button"),ei,P7,k1("buttonType",["primary","secondary","toolbar"]),wE,ts("context","mode:design")],yj=kt(W0),Z0=[us,W3],hu=Z0.concat([j3]),Cj=Z0.concat([Z3,yl,ts("context","mode:design")]),wj=kt(Cj),Sj=La,xj=hu.concat([vP("auto"),ts("context","mode:design")]),hD=kt(xj),IC=Cv([yp,Hm,fP]),pD=hu.concat([ts("storageKey","default"),ts("context","mode:design")]),w_=kt(pD),Gp=tt,Ej=kt(hu),u6=tt,d6=Z0.concat([ts("tag","textarea"),Ts("scriptId"),Ts("scriptUrl"),ol("onFocus"),O1("settings",void 0)]),m6=Z0.concat([ts("tag","textarea"),Va("init")]),Tj=ch(t=>_o("customeditor.old",Fc(m6),t).orThunk(()=>_o("customeditor.new",Fc(d6),t))),_j=tt,kj=hu.concat([ts("context","mode:design")]),f6=kt(kj),g6=zl(),vD=t=>[us,_1("columns"),t],Oj=[us,Ts("html"),Qs("presets","presentation",["presentation","document"]),fo("onInit",J),er("stretched",!1)],Aj=kt(Oj),Rj=hu.concat([er("border",!1),er("sandboxed",!0),er("streamContent",!1),er("transparent",!0)]),h6=kt(Rj),Dj=tt,Mj=kt(Z0.concat([_s("height")])),Pj=kt([Ts("url"),ih("zoom"),ih("cachedWidth"),ih("cachedHeight")]),yD=hu.concat([_s("inputMode"),_s("placeholder"),er("maximized",!1),yl,ts("context","mode:design")]),CD=kt(yD),Nj=tt,p6=t=>[us,Z3,t,Qs("align","start",["start","center","end"]),_s("for")],Bj=[Hm,yp],$j=[Hm,Ic("items",bf("items",()=>wD))],wD=pw([kt(Bj),kt($j)]),Fj=hu.concat([Ic("items",wD),yl,ts("context","mode:design")]),Ij=kt(Fj),qp=tt,b6=hu.concat([xv("items",[Hm,yp]),Ev("size",1),yl,ts("context","mode:design")]),Lj=kt(b6),S_=tt,j0=hu.concat([er("constrain",!0),yl,ts("context","mode:design")]),x_=kt(j0),SD=kt([Ts("width"),Ts("height")]),E_=Z0.concat([Z3,Ev("min",0),Ev("max",0)]),Xc=kt(E_),T_=Ud,v6=[us,Ic("header",tt),Ic("cells",Fa(tt))],y6=kt(v6),Hj=hu.concat([_s("placeholder"),er("maximized",!1),yl,ts("context","mode:design")]),Vj=kt(Hj),Fg=tt,zj=[yr("type",["directory","leaf"]),mP,Ts("id"),nl("menu",P0),_s("customStateIcon"),_s("customStateIconTooltip")],xD=kt(zj),G0=zj.concat([Ic("children",bf("children",()=>Wd("type",{directory:LC,leaf:xD})))]),LC=kt(G0),C6=Wd("type",{directory:LC,leaf:xD}),Uj=[us,Ic("items",C6),ol("onLeafAction"),ol("onToggleExpand"),Bu("defaultExpandedIds",[],tt),_s("defaultSelectedId")],Wj=kt(Uj),Zj=hu.concat([Qs("filetype","file",["image","media","file"]),yl,_s("picker_text"),ts("context","mode:design")]),jj=kt(Zj),q0=kt([yp,q3]),w6=t=>$s("items","items",Qi(),Fa(ch(s=>_o(`Checking item of ${t}`,ED,s).fold(c=>tn.error(Zd(c)),c=>tn.value(c))))),ED=Es(()=>Wd("type",{alertbanner:bj,bar:kt(vj(w6("bar"))),button:yj,checkbox:wj,colorinput:w_,colorpicker:Ej,dropzone:f6,grid:kt(vD(w6("grid"))),iframe:h6,input:CD,listbox:Ij,selectbox:Lj,sizeinput:x_,slider:Xc,textarea:Vj,urlinput:jj,customeditor:Tj,htmlpanel:Aj,imagepreview:Mj,collection:hD,label:kt(p6(w6("label"))),table:y6,tree:Wj,panel:qj})),Gj=[us,le("classes",[]),Ic("items",ED)],qj=kt(Gj),Kj=[SE("tab"),mP,Ic("items",ED)],Yj=[us,xv("tabs",Kj)],HC=kt(Yj),Xj=y_,Jj=hj,S6=kt([Ts("title"),Dn("body",Wd("type",{panel:qj,tabpanel:HC})),ts("size","normal"),Bu("buttons",[],Jj),le("initialData",{}),fo("onAction",J),fo("onChange",J),fo("onSubmit",J),fo("onClose",J),fo("onCancel",J),fo("onTabChange",J)]),Qj=t=>_o("dialog",S6,t),Cq=kt([yr("type",["cancel","custom"]),...Xj]),e=kt([Ts("title"),Ts("url"),ih("height"),ih("width"),lh("buttons",Cq),fo("onAction",J),fo("onCancel",J),fo("onClose",J),fo("onMessage",J)]),n=t=>_o("dialog",e,t),o=t=>At(t)?[t].concat(Se(X0(t),o)):yt(t)?Se(t,o):[],r=t=>ke(t.type)&&ke(t.name),a={checkbox:Sj,colorinput:Gp,colorpicker:u6,dropzone:g6,input:Nj,iframe:Dj,imagepreview:Pj,selectbox:S_,sizeinput:SD,slider:T_,listbox:qp,size:SD,textarea:Fg,urlinput:q0,customeditor:_j,collection:IC,togglemenuitem:l6},u=t=>k.from(a[t.type]),f=t=>po(o(t),r),b=t=>{const s=f(t),c=Se(s,i=>u(i).fold(()=>[],d=>[Dn(i.name,d)]));return kt(c)},C=t=>{var s;const c=Ne(Qj(t)),i=b(t),d=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:c,dataValidator:i,initialData:d}},S={open:(t,s)=>{const c=C(s);return t(c.internalDialog,c.initialData,c.dataValidator)},openUrl:(t,s)=>{const c=Ne(n(s));return t(c)},redial:t=>C(t)};var R=Object.freeze({__proto__:null,events:(t,s)=>{const c=(i,d)=>{t.updateState.each(g=>{const h=g(i,d);s.set(h)}),t.renderComponents.each(g=>{const h=g(d,s.get());(t.reuseDom?r0:HM)(i,h)})};return Fn([Ee(xi(),(i,d)=>{const g=d;if(!g.universal){const h=t.channel;$o(g.channels,h)&&c(i,g.data)}}),lo((i,d)=>{t.initialData.each(g=>{c(i,g)})})])}}),I=Object.freeze({__proto__:null,getState:(t,s,c)=>c}),z=[Te("channel"),kn("renderComponents"),kn("updateState"),kn("initialData"),er("reuseDom",!0)],Z=Object.freeze({__proto__:null,init:()=>{const t=St(k.none()),s=()=>t.set(k.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const Y=Ls({fields:z,name:"reflecting",active:R,apis:I,state:Z}),re=t=>{const s=[],c={};return Ms(t,(i,d)=>{i.fold(()=>{s.push(d)},g=>{c[d]=g})}),s.length>0?tn.error(s):tn.value(c)},ce=(t,s,c,i)=>{const d=On(S0.sketch(g=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:De(t.items,h=>HA(g,h,s,c,i))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[d.asSpec()]}],behaviours:$e([xt.config({mode:"acyclic",useTabstopAt:Oe(mC)}),Vi.memento(d),CV(d,{postprocess:g=>re(g).fold(h=>(console.error(h),{}),an)}),Zt("dialog-body-panel",[Ee(Ua(),(g,h)=>{g.getSystem().broadcastOn([fC],{newFocus:k.some(h.event.target)})})])])}},ie=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:g2(t.action),behaviours:zs(t.tabButtonBehaviours,[Bt.config({}),xt.config({mode:"execution",useSpace:!0,useEnter:!0}),nt.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),_e=Tc({name:"TabButton",configFields:[le("uid",void 0),Te("value"),$s("dom","dom",C1(()=>({attributes:{role:"tab",id:ut("aria"),"aria-selected":"false"}})),Ia()),kn("action"),le("domModification",{}),Vs("tabButtonBehaviours",[Bt,xt,nt]),Te("view")],factory:ie}),Ie=te([Te("tabs"),Te("dom"),le("clickToDismiss",!1),Vs("tabbarBehaviours",[Ze,xt]),ql(["tabClass","selectedClass"])]),st=np({factory:_e,name:"tabs",unit:"tab",overrides:t=>{const s=(i,d)=>{Ze.dehighlight(i,d),ht(i,_w(),{tabbar:i,button:d})},c=(i,d)=>{Ze.highlight(i,d),ht(i,Tw(),{tabbar:i,button:d})};return{action:i=>{const d=i.getSystem().getByUid(t.uid).getOrDie(),g=Ze.isHighlighted(d,i);(g&&t.clickToDismiss?s:g?J:c)(d,i)},domModification:{classes:[t.markers.tabClass]}}}}),we=te([st]),he=(t,s,c,i)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:zs(t.tabbarBehaviours,[Ze.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(d,g)=>{Dt(g.element,"aria-selected","true")},onDehighlight:(d,g)=>{Dt(g.element,"aria-selected","false")}}),xt.config({mode:"flow",getInitial:d=>Ze.getHighlighted(d).map(g=>g.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),Ae=pr({name:"Tabbar",configFields:Ie(),partFields:we(),factory:he}),ct=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:zs(t.tabviewBehaviours,[Ht.config({})]),domModification:{attributes:{role:"tabpanel"}}}),Ct=Tc({name:"Tabview",configFields:[Vs("tabviewBehaviours",[Ht])],factory:ct}),rn=te([le("selectFirst",!0),bn("onChangeTab"),bn("onDismissTab"),le("tabs",[]),Vs("tabSectionBehaviours",[])]),cn=Sr({factory:Ae,schema:[Te("dom"),Nu("markers",[Te("tabClass"),Te("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),Pn=Sr({factory:Ct,name:"tabview"}),zn=te([cn,Pn]),Jo=(t,s,c,i)=>{const d=h=>{const y=nt.getValue(h);qn(h,t,"tabview").each(w=>{zt(t.tabs,T=>T.value===y).each(T=>{const A=T.view();Lo(h.element,"id").each(P=>{Dt(w.element,"aria-labelledby",P)}),Ht.set(w,A),t.onChangeTab(w,h,A)})})},g=(h,y)=>{qn(h,t,"tabbar").each(w=>{y(w).each(Vu)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:Ib(t.tabSectionBehaviours),events:Fn(Gt([t.selectFirst?[lo((h,y)=>{g(h,Ze.getFirst)})]:[],[Ee(Tw(),(h,y)=>{const w=y.event.button;d(w)}),Ee(_w(),(h,y)=>{const w=y.event.button;t.onDismissTab(h,w)})]])),apis:{getViewItems:h=>qn(h,t,"tabview").map(y=>Ht.contents(y)).getOr([]),showTab:(h,y)=>{g(h,E=>{const T=Ze.getCandidates(E);return zt(T,P=>nt.getValue(P)===y).filter(P=>!Ze.isHighlighted(E,P))})}}}},Cs=pr({name:"TabSection",configFields:rn(),partFields:zn(),factory:Jo,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,c)=>{t.showTab(s,c)}}}),ar=(t,s,c)=>De(t,(i,d)=>{Ht.set(c,t[d].view());const g=s.dom.getBoundingClientRect();return Ht.set(c,[]),g.height}),Ge=t=>dc(Ug(t,(s,c)=>s>c?-1:s<c?1:0)),vt=(t,s,c)=>{const i=s1(t).dom,d=hs(t,".tox-dialog-wrap").getOr(t),g=kr(d,"position")==="fixed";let h;g?h=Math.max(i.clientHeight,window.innerHeight):h=Math.max(i.offsetHeight,i.scrollHeight);const y=gs(s),E=s.dom.offsetLeft>=c.dom.offsetLeft+tc(c)?Math.max(gs(c),y):y,T=parseInt(kr(t,"margin-top"),10)||0,A=parseInt(kr(t,"margin-bottom"),10)||0,$=gs(t)+T+A-E;return h-$},Tn=(t,s)=>{dc(t).each(c=>Cs.showTab(s,c.value))},et=(t,s)=>{Vt(t,"height",s+"px"),Vt(t,"flex-basis",s+"px")},_t=(t,s,c)=>{hs(t,'[role="dialog"]').each(i=>{go(i,'[role="tablist"]').each(d=>{c.get().map(g=>(Vt(s,"height","0"),Vt(s,"flex-basis","0"),Math.min(g,vt(i,s,d)))).each(g=>{et(s,g)})})})},Pt=t=>go(t,'[role="tabpanel"]'),Qe=t=>{const s=Mn();return{extraEvents:[lo(d=>{const g=d.element;Pt(g).each(h=>{Vt(h,"visibility","hidden"),d.getSystem().getByDom(h).toOptional().each(y=>{const w=ar(t,h,y);Ge(w).fold(s.clear,s.set)}),_t(g,h,s),Kt(h,"visibility"),Tn(t,d),requestAnimationFrame(()=>{_t(g,h,s)})})}),Ee(Jd(),d=>{const g=d.element;Pt(g).each(h=>{_t(g,h,s)})}),Ee(FN,(d,g)=>{const h=d.element;Pt(h).each(y=>{const w=ml(lr(y));Vt(y,"visibility","hidden");const E=Go(y,"height").map(P=>parseInt(P,10));Kt(y,"height"),Kt(y,"flex-basis");const T=y.dom.getBoundingClientRect().height;E.forall(P=>T>P)?(s.set(T),_t(h,y,s)):E.each(P=>{et(y,P)}),Kt(y,"visibility"),w.each(pa)})})],selectFirst:!1}},on="send-data-to-section",dn="send-data-to-view",Rs=(t,s,c,i)=>{const d=St({}),g=T=>{const A=nt.getValue(T),P=re(A).getOr({}),$=d.get(),V=zo($,P);d.set(V)},h=T=>{const A=d.get();nt.setValue(T,A)},y=St(null),w=De(t.tabs,T=>({value:T.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[xo(c.shared.providers.translate(T.title))],view:()=>[S0.sketch(A=>({dom:{tag:"div",classes:["tox-form"]},components:De(T.items,P=>HA(A,P,s,c,i)),formBehaviours:$e([xt.config({mode:"acyclic",useTabstopAt:Oe(mC)}),Zt("TabView.form.events",[lo(h),rl(g)]),wc.config({channels:vf([{key:on,value:{onReceive:g}},{key:dn,value:{onReceive:h}}])})])}))]})),E=Qe(w);return Cs.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(T,A,P)=>{const $=nt.getValue(A);ht(T,$N,{name:$,oldName:y.get()}),y.set($)},tabs:w,components:[Cs.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[Ae.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:$e([ho.config({})])}),Cs.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:E.selectFirst,tabSectionBehaviours:$e([Zt("tabpanel",E.extraEvents),xt.config({mode:"acyclic"}),fn.config({find:T=>dc(Cs.getViewItems(T))}),Fp(k.none(),T=>(T.getSystem().broadcastOn([on],{}),d.get()),(T,A)=>{d.set(A),T.getSystem().broadcastOn([dn],{})})])})},Zn=(t,s,c,i,d,g)=>{const h=E=>{const T=E.body;switch(T.type){case"tabpanel":return[Rs(T,E.initialData,i,g)];default:return[ce(T,E.initialData,i,g)]}},y=(E,T)=>k.some({isTabPanel:()=>T.body.type==="tabpanel"}),w={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...c.map(E=>({id:E})).getOr({}),...d?w:{}}},components:[],behaviours:$e([Vi.childAt(0),Y.config({channel:`${LB}-${s}`,updateState:y,renderComponents:h,initialData:t})])}},Br=(t,s,c,i,d,g)=>Zn(t,s,k.some(c),i,d,g),Jc=(t,s,c,i)=>{const d=Zn(t,s,k.none(),c,!1,i);return js.parts.body(d)},pu=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[$B(k.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:$e([ho.config({}),Bt.config({})])})]}],behaviours:$e([xt.config({mode:"acyclic",useTabstopAt:Oe(mC)})])};return js.parts.body(s)},Yr=fp.deviceType.isTouch(),Oa=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),Ui=(t,s)=>js.parts.close(As.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:$e([ho.config({})])})),$r=()=>js.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),Qc=(t,s)=>js.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:ou(`<p>${L5(s.translate(t))}</p>`)}]}]}),pt=t=>js.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),xn=(t,s)=>[iu.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),iu.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],Mo=t=>{const s="tox-dialog",c=s+"-wrap",i=c+"__backdrop",d=s+"__disable-scroll";return js.sketch({lazySink:t.lazySink,onEscape:g=>(t.onEscape(g),k.some(!0)),useTabstopAt:g=>!mC(g),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:ou(`<div class="${c}"></div>`),components:[{dom:{tag:"div",classes:Yr?[i,i+"--opaque"]:[i]}}]}},dragBlockClass:c,modalBehaviours:$e([Bt.config({}),Zt("dialog-events",t.dialogEvents.concat([zu(Ua(),(g,h)=>{gu.isBlocked(g)?J():xt.focusIn(g)}),Ee(ph(),(g,h)=>{g.getSystem().broadcastOn([fC],{newFocus:h.event.newFocus})})])),Zt("scroll-lock",[lo(()=>{ns(mi(),d)}),rl(()=>{In(mi(),d)})]),...t.extraBehaviours]),eventOrder:{[nr()]:["dialog-events"],[rc()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[Hc()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},Ds=t=>As.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:$e([ho.config({}),Uo.config(t.tooltips.getConfig({tooltipText:t.translate("Close")}))]),components:[Qa("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:s=>{sn(s,_g)}}),Gs=(t,s,c,i)=>{const d=g=>[xo(i.translate(g.title))];return{dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...c.map(g=>({id:g})).getOr({})}},components:[],behaviours:$e([Y.config({channel:`${IB}-${s}`,initialData:t,renderComponents:d})])}},ws=()=>({dom:ou('<div class="tox-dialog__draghandle"></div>')}),Po=(t,s,c,i)=>iu.sketch({dom:ou('<div class="tox-dialog__header"></div>'),components:[Gs(t,s,k.some(c),i),ws(),Ds(i)],containerBehaviours:$e([jp.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>ul(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),No=(t,s,c)=>{const i=js.parts.title(Gs(t,s,k.none(),c)),d=js.parts.draghandle(ws()),g=js.parts.close(Ds(c)),h=[i].concat(t.draggable?[d]:[]).concat([g]);return iu.sketch({dom:ou('<div class="tox-dialog__header"></div>'),components:h})},ac=(t,s,c)=>No({title:c.shared.providers.translate(t),draggable:c.dialog.isDraggableModal()},s,c.shared.providers),Wi=(t,s,c,i)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":c.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${i.getOr(0)}px`,position:"absolute"}},behaviours:s,components:[{dom:ou('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),bu=(t,s,c)=>({onClose:()=>c.closeWindow(),onBlock:i=>{const d=go(t().element,".tox-dialog__header").map(g=>gs(g));js.setBusy(t(),(g,h)=>Wi(i.message,h,s,d))},onUnblock:()=>{js.setIdle(t())}}),Ol="tox-dialog--fullscreen",Ig="tox-dialog--width-lg",Lg="tox-dialog--width-md",xd=t=>{switch(t){case"large":return k.some(Ig);case"medium":return k.some(Lg);default:return k.none()}},Zi=(t,s)=>{const c=ae.fromDom(s.element.dom);Wr(c,Ol)||(Ti(c,[Ig,Lg]),xd(t).each(i=>ns(c,i)))},Xm=(t,s)=>{const c=ae.fromDom(t.element.dom),i=Mw(c),d=zt(i,g=>g===Ig||g===Lg).or(xd(s));zD(c,[Ol,...d.toArray()])},K0=(t,s,c)=>Os(Mo({...t,firstTabstop:1,lazySink:c.shared.getSink,extraBehaviours:[dT({}),...t.extraBehaviours],onEscape:i=>{sn(i,_g)},dialogEvents:s,eventOrder:{[xi()]:[Y.name(),wc.name()],[rc()]:["scroll-lock",Y.name(),"messages","dialog-events","alloy.base.behaviour"],[Hc()]:["alloy.base.behaviour","dialog-events","messages",Y.name(),"scroll-lock"]}})),Hg=(t,s={})=>{const c=i=>{const d=De(i.items,g=>{const h=rt(s,g.name).getOr(St(!1));return{...g,storage:h}});return{...i,items:d}};return De(t,i=>i.type==="menu"?c(i):i)},TD=t=>wo(t,(s,c)=>c.type==="menu"?wo(c.items,(d,g)=>(d[g.name]=g.storage,d),s):s,{}),Kp=(t,s)=>[z1(Ua(),FB),t(eC,(c,i,d,g)=>{ml(lr(g.element)).fold(J,zf),s.onClose(),i.onClose()}),t(_g,(c,i,d,g)=>{i.onCancel(c),sn(g,eC)}),Ee(qE,(c,i)=>s.onUnblock()),Ee(GE,(c,i)=>s.onBlock(i.event))],x6=(t,s)=>{const c=(d,g)=>Ee(d,(h,y)=>{i(h,(w,E)=>{g(t(),w,y.event,h)})}),i=(d,g)=>{Y.getState(d).get().each(h=>{g(h,d)})};return[...Kp(c,s),c(Cd,(d,g,h)=>{g.onAction(d,{name:h.name})})]},_D=(t,s,c)=>{const i=(g,h)=>Ee(g,(y,w)=>{d(y,(E,T)=>{h(t(),E,w.event,y)})}),d=(g,h)=>{Y.getState(g).get().each(y=>{h(y.internalDialog,g)})};return[...Kp(i,s),i(tC,(g,h)=>h.onSubmit(g)),i(Kc,(g,h,y)=>{h.onChange(g,{name:y.name})}),i(Cd,(g,h,y,w)=>{const E=()=>w.getSystem().isConnected()?xt.focusIn(w):void 0,T=$=>rv($,"disabled")||Lo($,"aria-disabled").exists(V=>V==="true"),A=lr(w.element),P=ml(A);h.onAction(g,{name:y.name,value:y.value}),ml(A).fold(E,$=>{T($)||P.exists(V=>Mc($,V)&&T(V))?E():c().toOptional().filter(V=>!Mc(V.element,$)).each(E)})}),i($N,(g,h,y)=>{h.onTabChange(g,{newTabName:y.name,oldTabName:y.oldName})}),rl(g=>{const h=t();nt.setValue(g,h.getData())})]},Xr=(t,s)=>TT(t,t.type,s),ji=(t,s,c)=>zt(s,i=>i.name===c).bind(i=>i.memento.getOpt(t)),__=(t,s)=>{const c=s.map(y=>y.footerButtons).getOr([]),i=ef(c,y=>y.align==="start"),d=(y,w)=>iu.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${y}`]},components:De(w,E=>E.memento.asSpec())}),g=d("start",i.pass),h=d("end",i.fail);return[g,h]},me=(t,s,c)=>{const i=(d,g)=>{const h=De(g.buttons,w=>{const E=On(Xr(w,c));return{name:w.name,align:w.align,memento:E}}),y=w=>ji(d,h,w);return k.some({lookupByName:y,footerButtons:h})};return{dom:ou('<div class="tox-dialog__footer"></div>'),components:[],behaviours:$e([Y.config({channel:`${dA}-${s}`,initialData:t,updateState:i,renderComponents:__})])}},ge=(t,s,c)=>me(t,s,c),je=(t,s,c)=>js.parts.footer(me(t,s,c)),Fe=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const i=fn.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return S0.getField(i,s).orThunk(()=>t.getFooter().bind(h=>Y.getState(h).get()).bind(h=>h.lookupByName(s)))}else return k.none()},Nt=(t,s)=>{const c=t.getRoot();return Y.getState(c).get().map(i=>Ne(_o("data",i.dataValidator,s))).getOr(s)},En=(t,s,c)=>{const i=V=>{const W=t.getRoot();W.getSystem().isConnected()&&V(W)},$={getData:()=>{const V=t.getRoot(),W=V.getSystem().isConnected()?t.getFormWrapper():V,se=nt.getValue(W),G=Io(c,ee=>ee.get());return{...se,...G}},setData:V=>{i(W=>{const se=$.getData(),G=zo(se,V),ee=Nt(t,G),oe=t.getFormWrapper();nt.setValue(oe,ee),Ms(c,(be,ye)=>{$n(G,ye)&&be.set(G[ye])})})},setEnabled:(V,W)=>{Fe(t,V).each(W?Mt.enable:Mt.disable)},focus:V=>{Fe(t,V).each(Bt.focus)},block:V=>{if(!ke(V))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");i(W=>{ht(W,GE,{message:V})})},unblock:()=>{i(V=>{sn(V,qE)})},showTab:V=>{i(W=>{const se=t.getBody();Y.getState(se).get().exists(ee=>ee.isTabPanel())&&fn.getCurrent(se).each(ee=>{Cs.showTab(ee,V)})})},redial:V=>{i(W=>{const se=t.getId(),G=s(V),ee=Hg(G.internalDialog.buttons,c);W.getSystem().broadcastOn([`${gT}-${se}`],G),W.getSystem().broadcastOn([`${IB}-${se}`],G.internalDialog),W.getSystem().broadcastOn([`${LB}-${se}`],G.internalDialog),W.getSystem().broadcastOn([`${dA}-${se}`],{...G.internalDialog,buttons:ee}),$.setData(G.initialData)})},close:()=>{i(V=>{sn(V,eC)})},toggleFullscreen:t.toggleFullscreen};return $},Qo=(t,s,c)=>{const i=ut("dialog"),d=t.internalDialog,g=ac(d.title,i,c),h=St(d.size),y=oe=>Fe(G,oe),w=xd(h.get()).toArray(),E=(oe,be)=>(h.set(be.internalDialog.size),Zi(be.internalDialog.size,oe),k.some(be)),T=Jc({body:d.body,initialData:d.initialData},i,c,y),A=Hg(d.buttons),P=TD(A),$=$t(A.length!==0,je({buttons:A},i,c)),V=_D(()=>ee,bu(()=>se,c.shared.providers,s),c.shared.getSink),W={id:i,header:g,body:T,footer:$,extraClasses:w,extraBehaviours:[Y.config({channel:`${gT}-${i}`,updateState:E,initialData:t})],extraStyles:{}},se=K0(W,V,c),G=(()=>{const oe=()=>{const ye=js.getBody(se);return fn.getCurrent(ye).getOr(ye)},be=()=>{Xm(se,h.get())};return{getId:te(i),getRoot:te(se),getBody:()=>js.getBody(se),getFooter:()=>js.getFooter(se),getFormWrapper:oe,toggleFullscreen:be}})(),ee=En(G,s.redial,P);return{dialog:se,instanceApi:ee}},Al=(t,s,c,i=!1,d)=>{const g=ut("dialog"),h=ut("dialog-label"),y=ut("dialog-content"),w=t.internalDialog,E=lt=>Fe(at,lt),T=St(w.size),A=xd(T.get()).toArray(),P=(lt,Je)=>(T.set(Je.internalDialog.size),Zi(Je.internalDialog.size,lt),d(),k.some(Je)),$=On(Po({title:w.title,draggable:!0},g,h,c.shared.providers)),V=On(Br({body:w.body,initialData:w.initialData},g,y,c,i,E)),W=Hg(w.buttons),se=TD(W),G=$t(W.length!==0,On(ge({buttons:W},g,c))),ee=_D(()=>xe,{onBlock:lt=>{gu.block(ye,(Je,mt)=>{const ln=$.getOpt(ye).map(ro=>gs(ro.element));return Wi(lt.message,mt,c.shared.providers,ln)})},onUnblock:()=>{gu.unblock(ye)},onClose:()=>s.closeWindow()},c.shared.getSink),oe="tox-dialog-inline",be=Sn().os,ye=Os({dom:{tag:"div",classes:["tox-dialog",oe,...A],attributes:{role:"dialog",...be.isMacOS()?{"aria-label":w.title}:{"aria-labelledby":h}}},eventOrder:{[xi()]:[Y.name(),wc.name()],[nr()]:["execute-on-form"],[rc()]:["reflecting","execute-on-form"]},behaviours:$e([xt.config({mode:"cyclic",onEscape:lt=>(sn(lt,eC),k.some(!0)),useTabstopAt:lt=>!mC(lt)&&(Da(lt)!=="button"||qt(lt,"disabled")!=="disabled"),firstTabstop:1}),Y.config({channel:`${gT}-${g}`,updateState:P,initialData:t}),Bt.config({}),Zt("execute-on-form",ee.concat([zu(Ua(),(lt,Je)=>{xt.focusIn(lt)}),Ee(ph(),(lt,Je)=>{lt.getSystem().broadcastOn([fC],{newFocus:Je.event.newFocus})})])),gu.config({getRoot:()=>k.some(ye)}),Ht.config({}),dT({})]),components:[$.asSpec(),V.asSpec(),...G.map(lt=>lt.asSpec()).toArray()]}),We=()=>{Xm(ye,T.get())},at={getId:te(g),getRoot:te(ye),getFooter:()=>G.map(lt=>lt.get(ye)),getBody:()=>V.get(ye),getFormWrapper:()=>{const lt=V.get(ye);return fn.getCurrent(lt).getOr(lt)},toggleFullscreen:We},xe=En(at,s.redial,se);return{dialog:ye,instanceApi:xe}};var ci=tinymce.util.Tools.resolve("tinymce.util.URI");const VC=t=>{const s=h=>{t.getSystem().isConnected()&&h(t)};return{block:h=>{if(!ke(h))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(y=>{ht(y,GE,{message:h})})},unblock:()=>{s(h=>{sn(h,qE)})},close:()=>{s(h=>{sn(h,eC)})},sendMessage:h=>{s(y=>{y.getSystem().broadcastOn([HB],h)})}}},E6=["insertContent","setContent","execCommand","close","block","unblock"],kD=t=>At(t)&&E6.indexOf(t.mceAction)!==-1,T6=t=>!kD(t)&&At(t)&&$n(t,"mceAction"),_6=(t,s,c)=>{switch(c.mceAction){case"insertContent":t.insertContent(c.content);break;case"setContent":t.setContent(c.content);break;case"execCommand":const i=Co(c.ui)?c.ui:!1;t.execCommand(c.cmd,i,c.value);break;case"close":s.close();break;case"block":s.block(c.message);break;case"unblock":s.unblock();break}},Jm=(t,s,c,i)=>{const d=ut("dialog"),g=ac(t.title,d,i),h=pu(t),y=t.buttons.bind(oe=>oe.length===0?k.none():k.some(je({buttons:oe},d,i))),w=x6(()=>ee,bu(()=>G,i.shared.providers,s)),E={...t.height.fold(()=>({}),oe=>({height:oe+"px","max-height":oe+"px"})),...t.width.fold(()=>({}),oe=>({width:oe+"px","max-width":oe+"px"}))},T=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],A=new ci(t.url,{base_uri:new ci(window.location.href)}),P=`${A.protocol}://${A.host}${A.port?":"+A.port:""}`,$=la(),V=(oe,be)=>k.some(be),W=[Y.config({channel:`${gT}-${d}`,updateState:V,initialData:t}),Zt("messages",[lo(()=>{const oe=Zr(ae.fromDom(window),"message",be=>{if(A.isSameOrigin(new ci(be.raw.origin))){const ye=be.raw.data;kD(ye)?_6(c,ee,ye):T6(ye)&&t.onMessage(ee,ye)}});$.set(oe)}),rl($.clear)]),wc.config({channels:{[HB]:{onReceive:(oe,be)=>{go(oe.element,"iframe").each(ye=>{const We=ye.dom.contentWindow;jt(We)&&We.postMessage(be,P)})}}}})],G=K0({id:d,header:g,body:h,footer:y,extraClasses:T,extraBehaviours:W,extraStyles:E},w,i),ee=VC(G);return{dialog:G,instanceApi:ee}},k6=t=>{const s=t.shared;return{open:(i,d)=>{const g=()=>{js.hide(E),d()},h=On(TT({context:"any",name:"close-alert",text:"OK",primary:!0,buttonType:k.some("primary"),align:"end",enabled:!0,icon:k.none()},"cancel",t)),y=$r(),w=Ui(g,s.providers),E=Os(Mo({lazySink:()=>s.getSink(),header:Oa(y,w),body:Qc(i,s.providers),footer:k.some(pt(xn([],[h.asSpec()]))),onEscape:g,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Ee(_g,g)],eventOrder:{}}));js.show(E);const T=h.get(E);Bt.focus(T)}}},O6=t=>{const s=t.shared;return{open:(i,d)=>{const g=P=>{js.hide(T),d(P)},h=On(TT({context:"any",name:"yes",text:"Yes",primary:!0,buttonType:k.some("primary"),align:"end",enabled:!0,icon:k.none()},"submit",t)),y=TT({context:"any",name:"no",text:"No",primary:!1,buttonType:k.some("secondary"),align:"end",enabled:!0,icon:k.none()},"cancel",t),w=$r(),E=Ui(()=>g(!1),s.providers),T=Os(Mo({lazySink:()=>s.getSink(),header:Oa(w,E),body:Qc(i,s.providers),footer:k.some(pt(xn([],[y,h.asSpec()]))),onEscape:()=>g(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Ee(_g,()=>g(!1)),Ee(tC,()=>g(!0))],eventOrder:{}}));js.show(T);const A=h.get(T);Bt.focus(A)}}},OD=(t,s)=>Ne(_o("data",s,t)),AD=t=>Y2(t,".tox-alert-dialog")||Y2(t,".tox-confirm-dialog"),eG=(t,s,c)=>s&&c?[]:[eo.config({contextual:{lazyContext:()=>k.some(Vo(ae.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:i=>pg(t,i.element).map(g=>({bounds:bg(g),optScrollEnv:k.some({currentScrollTop:g.element.dom.scrollTop,scrollElmTop:Ho(g.element).top})})).getOrThunk(()=>({bounds:Ns(),optScrollEnv:k.none()}))})],mn=t=>{const s=t.editor,c=hg(s),i=k6(t.backstages.dialog),d=O6(t.backstages.dialog),g=(V,W,se)=>{if(!Xn(W)){if(W.inline==="toolbar")return E(V,t.backstages.popup.shared.anchors.inlineDialog(),se,W);if(W.inline==="bottom")return T(V,t.backstages.popup.shared.anchors.inlineBottomDialog(),se,W);if(W.inline==="cursor")return E(V,t.backstages.popup.shared.anchors.cursor(),se,W)}return w(V,se)},h=(V,W)=>y(V,W),y=(V,W)=>{const se=G=>{const ee=Jm(G,{closeWindow:()=>{js.hide(ee.dialog),W(ee.instanceApi)}},s,t.backstages.dialog);return js.show(ee.dialog),ee.instanceApi};return S.openUrl(se,V)},w=(V,W)=>{const se=(G,ee,oe)=>{const be=ee,We=Qo({dataValidator:oe,initialData:be,internalDialog:G},{redial:S.redial,closeWindow:()=>{js.hide(We.dialog),W(We.instanceApi)}},t.backstages.dialog);return js.show(We.dialog),We.instanceApi.setData(be),We.instanceApi};return S.open(se,V)},E=(V,W,se,G)=>{const ee=(oe,be,ye)=>{const We=OD(be,ye),at=Mn(),xe=t.backstages.popup.shared.header.isPositionedAtTop(),lt={dataValidator:ye,initialData:We,internalDialog:oe},Je=()=>at.on(_n=>{ko.reposition(_n),(!c||!xe)&&eo.refresh(_n)}),mt=Al(lt,{redial:S.redial,closeWindow:()=>{at.on(ko.hide),s.off("ResizeEditor",Je),at.clear(),se(mt.instanceApi)}},t.backstages.popup,G.ariaAttrs,Je),ln=Os(ko.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:G.persistent?{event:"doNotDismissYet"}:{},...xe?{}:{fireRepositionEventInstead:{}},inlineBehaviours:$e([Zt("window-manager-inline-events",[Ee(Vc(),(_n,gt)=>{sn(mt.dialog,_g)})]),...eG(s,c,xe)]),isExtraPart:(_n,gt)=>AD(gt)}));at.set(ln);const ro=()=>{const _n=s.inline?mi():ae.fromDom(s.getContainer()),gt=Vo(_n);return k.some(gt)};return ko.showWithinBounds(ln,zc(mt.dialog),{anchor:W},ro),(!c||!xe)&&(eo.refresh(ln),s.on("ResizeEditor",Je)),mt.instanceApi.setData(We),xt.focusIn(mt.dialog),mt.instanceApi};return S.open(ee,V)},T=(V,W,se,G)=>{const ee=(oe,be,ye)=>{const We=OD(be,ye),at=Mn(),xe=t.backstages.popup.shared.header.isPositionedAtTop(),lt={dataValidator:ye,initialData:We,internalDialog:oe},Je=()=>at.on(_n=>{ko.reposition(_n),eo.refresh(_n)}),mt=Al(lt,{redial:S.redial,closeWindow:()=>{at.on(ko.hide),s.off("ResizeEditor ScrollWindow ElementScroll",Je),at.clear(),se(mt.instanceApi)}},t.backstages.popup,G.ariaAttrs,Je),ln=Os(ko.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:G.persistent?{event:"doNotDismissYet"}:{},...xe?{}:{fireRepositionEventInstead:{}},inlineBehaviours:$e([Zt("window-manager-inline-events",[Ee(Vc(),(_n,gt)=>{sn(mt.dialog,_g)})]),eo.config({contextual:{lazyContext:()=>k.some(Vo(ae.fromDom(s.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:_n=>pg(s,_n.element).map(Me=>({bounds:bg(Me),optScrollEnv:k.some({currentScrollTop:Me.element.dom.scrollTop,scrollElmTop:Ho(Me.element).top})})).getOrThunk(()=>({bounds:Ns(),optScrollEnv:k.none()}))})]),isExtraPart:(_n,gt)=>AD(gt)}));at.set(ln);const ro=()=>t.backstages.popup.shared.getSink().toOptional().bind(_n=>{const gt=pg(s,_n.element),Me=15,Ye=gt.map(wt=>bg(wt)).getOr(Ns()),It=Vo(ae.fromDom(s.getContentAreaContainer())),Qt=Au(It,Ye);return k.some(To(Qt.x,Qt.y,Qt.width,Qt.height-Me))});return ko.showWithinBounds(ln,zc(mt.dialog),{anchor:W},ro),eo.refresh(ln),s.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",Je),mt.instanceApi.setData(We),xt.focusIn(mt.dialog),mt.instanceApi};return S.open(ee,V)};return{open:g,openUrl:h,alert:(V,W)=>{i.open(V,W)},close:V=>{V.close()},confirm:(V,W)=>{d.open(V,W)}}},pe=t=>{l5(t),wL(t),cZ(t)};var Et=()=>{Ld.add("silver",t=>{pe(t);let s=()=>Ns();const{dialogs:c,popups:i,renderUI:d}=aj(t,{getPopupSinkBounds:()=>s()}),g=()=>{const E=d();return pg(t,i.getMothership().element).each(A=>{s=()=>bg(A)}),E};EN.register(t,i.backstage.shared);const h=mn({editor:t,backstages:{popup:i.backstage,dialog:c.backstage}}),y=Mn(),w=()=>Z5(t,{backstage:i.backstage},i.getMothership(),y);return{renderUI:g,getWindowManagerImpl:te(h),getNotificationManagerImpl:w}})};Et()})();(function(){var B=tinymce.util.Tools.resolve("tinymce.ModelManager");const L=(l,m,p)=>{var v;return p(l,m.prototype)?!0:((v=l.constructor)===null||v===void 0?void 0:v.name)===m.name},j=l=>{const m=typeof l;return l===null?"null":m==="object"&&Array.isArray(l)?"array":m==="object"&&L(l,String,(p,v)=>v.isPrototypeOf(p))?"string":m},q=l=>m=>j(m)===l,ne=l=>m=>typeof m===l,de=l=>m=>l===m,fe=q("string"),ke=q("object"),At=q("array"),bt=de(null),yt=ne("boolean"),Yt=de(void 0),Co=l=>l==null,Xn=l=>!Co(l),Xt=ne("function"),jt=ne("number"),He=()=>{},uo=(l,m)=>(...p)=>l(m.apply(null,p)),Bo=(l,m)=>p=>l(m(p)),J=l=>()=>l,hn=l=>l,Ks=(l,m)=>l===m;function yn(l,...m){return(...p)=>{const v=m.concat(p);return l.apply(null,v)}}const te=l=>m=>!l(m),an=l=>()=>{throw new Error(l)},ss=l=>l(),An=J(!1),Oe=J(!0);class Q{constructor(m,p){this.tag=m,this.value=p}static some(m){return new Q(!0,m)}static none(){return Q.singletonNone}fold(m,p){return this.tag?p(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?Q.some(m(this.value)):Q.none()}bind(m){return this.tag?m(this.value):Q.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:Q.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m??"Called getOrDie on None")}static from(m){return Xn(m)?Q.some(m):Q.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Q.singletonNone=new Q(!1);const lc=Array.prototype.slice,Vn=Array.prototype.indexOf,Ot=Array.prototype.push,k=(l,m)=>Vn.call(l,m),rs=(l,m)=>k(l,m)>-1,Ke=(l,m)=>{for(let p=0,v=l.length;p<v;p++){const x=l[p];if(m(x,p))return!0}return!1},Wo=(l,m)=>{const p=[];for(let v=0;v<l;v++)p.push(m(v));return p},Wt=(l,m)=>{const p=l.length,v=new Array(p);for(let x=0;x<p;x++){const _=l[x];v[x]=m(_,x)}return v},Be=(l,m)=>{for(let p=0,v=l.length;p<v;p++){const x=l[p];m(x,p)}},$o=(l,m)=>{for(let p=l.length-1;p>=0;p--){const v=l[p];m(v,p)}},uc=(l,m)=>{const p=[],v=[];for(let x=0,_=l.length;x<_;x++){const M=l[x];(m(M,x)?p:v).push(M)}return{pass:p,fail:v}},cs=(l,m)=>{const p=[];for(let v=0,x=l.length;v<x;v++){const _=l[v];m(_,v)&&p.push(_)}return p},Jr=(l,m,p)=>($o(l,(v,x)=>{p=m(p,v,x)}),p),De=(l,m,p)=>(Be(l,(v,x)=>{p=m(p,v,x)}),p),it=(l,m,p)=>{for(let v=0,x=l.length;v<x;v++){const _=l[v];if(m(_,v))return Q.some(_);if(p(_,v))break}return Q.none()},N=(l,m)=>it(l,m,An),ef=(l,m)=>{for(let p=0,v=l.length;p<v;p++){const x=l[p];if(m(x,p))return Q.some(p)}return Q.none()},po=l=>{const m=[];for(let p=0,v=l.length;p<v;++p){if(!At(l[p]))throw new Error("Arr.flatten item "+p+" was not an array, input: "+l);Ot.apply(m,l[p])}return m},Ss=(l,m)=>po(Wt(l,m)),wo=(l,m)=>{for(let p=0,v=l.length;p<v;++p){const x=l[p];if(m(x,p)!==!0)return!1}return!0},N_=l=>{const m=lc.call(l,0);return m.reverse(),m},zt=(l,m)=>{const p={};for(let v=0,x=l.length;v<x;v++){const _=l[v];p[String(_)]=m(_,v)}return p},mo=(l,m)=>{const p=lc.call(l,0);return p.sort(m),p},Gt=(l,m)=>m>=0&&m<l.length?Q.some(l[m]):Q.none(),Se=l=>Gt(l,0),yu=l=>Gt(l,l.length-1),Er=(l,m)=>{for(let p=0;p<l.length;p++){const v=m(l[p],p);if(v.isSome())return v}return Q.none()},Rt=Object.keys,Td=Object.hasOwnProperty,Zo=(l,m)=>{const p=Rt(l);for(let v=0,x=p.length;v<x;v++){const _=p[v],M=l[_];m(M,_)}},Ug=(l,m)=>as(l,(p,v)=>({k:v,v:m(p,v)})),as=(l,m)=>{const p={};return Zo(l,(v,x)=>{const _=m(v,x);p[_.k]=_.v}),p},dc=l=>(m,p)=>{l[p]=m},Qp=(l,m,p,v)=>{Zo(l,(x,_)=>{(m(x,_)?p:v)(x,_)})},oa=(l,m)=>{const p={};return Qp(l,m,dc(p),He),p},ir=(l,m)=>{const p=[];return Zo(l,(v,x)=>{p.push(m(v,x))}),p},Fo=l=>ir(l,hn),e1=(l,m)=>Ms(l,m)?Q.from(l[m]):Q.none(),Ms=(l,m)=>Td.call(l,m),Io=(l,m)=>Ms(l,m)&&l[m]!==void 0&&l[m]!==null,tf=l=>{for(const m in l)if(Td.call(l,m))return!1;return!0},Tr=typeof window<"u"?window:Function("return this;")(),Nl=(l,m)=>{let p=m??Tr;for(let v=0;v<l.length&&p!==void 0&&p!==null;++v)p=p[l[v]];return p},mc=(l,m)=>{const p=l.split(".");return Nl(p,m)},_d=(l,m)=>mc(l,m),Wg=(l,m)=>{const p=_d(l,m);if(p==null)throw new Error(l+" not available on this browser");return p},Ir=Object.getPrototypeOf,X0=l=>Wg("HTMLElement",l),rt=l=>{const m=mc("ownerDocument.defaultView",l);return ke(l)&&(X0(m).prototype.isPrototypeOf(l)||/^HTML\w*Element$/.test(Ir(l).constructor.name))},$n=8,sa=9,Ac=11,t1=1,kd=3,Eo=l=>l.dom.nodeName.toLowerCase(),Cu=l=>l.dom.nodeType,nf=l=>m=>Cu(m)===l,bo=l=>Cu(l)===$n||Eo(l)==="#comment",$t=l=>fc(l)&&rt(l.dom),fc=nf(t1),Od=nf(kd),n1=nf(sa),J0=nf(Ac),Qr=l=>m=>fc(m)&&Eo(m)===l,_r=(l,m,p)=>{if(fe(p)||yt(p)||jt(p))l.setAttribute(m,p+"");else throw console.error("Invalid call to Attribute.set. Key ",m,":: Value ",p,":: Element ",l),new Error("Attribute value was not simple")},ms=(l,m,p)=>{_r(l.dom,m,p)},Gi=(l,m)=>{const p=l.dom;Zo(m,(v,x)=>{_r(p,x,v)})},o1=(l,m)=>{Zo(m,(p,v)=>{p.fold(()=>{Ao(l,v)},x=>{_r(l.dom,v,x)})})},Bl=(l,m)=>{const p=l.dom.getAttribute(m);return p===null?void 0:p},Rc=(l,m)=>Q.from(Bl(l,m)),Ao=(l,m)=>{l.dom.removeAttribute(m)},Ra=l=>De(l.dom.attributes,(m,p)=>(m[p.name]=p.value,m),{}),qi=(l,m)=>{const v=(m||document).createElement("div");if(v.innerHTML=l,!v.hasChildNodes()||v.childNodes.length>1){const x="HTML does not have a single root node";throw console.error(x,l),new Error(x)}return $l(v.childNodes[0])},B_=(l,m)=>{const v=(m||document).createElement(l);return $l(v)},$_=(l,m)=>{const v=(m||document).createTextNode(l);return $l(v)},$l=l=>{if(l==null)throw new Error("Node cannot be null or undefined");return{dom:l}},ae={fromHtml:qi,fromTag:B_,fromText:$_,fromDom:$l,fromPoint:(l,m,p)=>Q.from(l.dom.elementFromPoint(m,p)).map($l)},gc=(l,m)=>{const p=l.dom;if(p.nodeType!==t1)return!1;{const v=p;if(v.matches!==void 0)return v.matches(m);if(v.msMatchesSelector!==void 0)return v.msMatchesSelector(m);if(v.webkitMatchesSelector!==void 0)return v.webkitMatchesSelector(m);if(v.mozMatchesSelector!==void 0)return v.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},of=l=>l.nodeType!==t1&&l.nodeType!==sa&&l.nodeType!==Ac||l.childElementCount===0,jC=(l,m)=>{const p=m===void 0?document:m.dom;return of(p)?[]:Wt(p.querySelectorAll(l),ae.fromDom)},Q0=(l,m)=>{const p=m===void 0?document:m.dom;return of(p)?Q.none():Q.from(p.querySelector(l)).map(ae.fromDom)},So=(l,m)=>l.dom===m.dom,ev=(l,m)=>{const p=l.dom,v=m.dom;return p===v?!1:p.contains(v)},F_=gc,Zg=l=>ae.fromDom(l.dom.ownerDocument),sf=l=>n1(l)?l:Zg(l),br=l=>ae.fromDom(sf(l).dom.documentElement),fs=l=>ae.fromDom(sf(l).dom.defaultView),Fl=l=>Q.from(l.dom.parentNode).map(ae.fromDom),Da=l=>Q.from(l.dom.parentElement).map(ae.fromDom),Ad=(l,m)=>{const p=Xt(m)?m:An;let v=l.dom;const x=[];for(;v.parentNode!==null&&v.parentNode!==void 0;){const _=v.parentNode,M=ae.fromDom(_);if(x.push(M),p(M)===!0)break;v=_}return x},jg=l=>Q.from(l.dom.previousSibling).map(ae.fromDom),rf=l=>Q.from(l.dom.nextSibling).map(ae.fromDom),Jn=l=>Wt(l.dom.childNodes,ae.fromDom),Dc=(l,m)=>{const p=l.dom.childNodes;return Q.from(p[m]).map(ae.fromDom)},I_=l=>Dc(l,0),Rd=(l,m)=>{Fl(l).each(v=>{v.dom.insertBefore(m.dom,l.dom)})},wu=(l,m)=>{rf(l).fold(()=>{Fl(l).each(x=>{jo(x,m)})},v=>{Rd(v,m)})},ec=(l,m)=>{I_(l).fold(()=>{jo(l,m)},v=>{l.dom.insertBefore(m.dom,v.dom)})},jo=(l,m)=>{l.dom.appendChild(m.dom)},L_=(l,m,p)=>{Dc(l,p).fold(()=>{jo(l,m)},v=>{Rd(v,m)})},tv=(l,m)=>{Rd(l,m),jo(m,l)},Un=(l,m)=>{Be(m,(p,v)=>{const x=v===0?l:m[v-1];wu(x,p)})},Mc=(l,m)=>{Be(m,p=>{jo(l,p)})},Pc=l=>{l.dom.textContent="",Be(Jn(l),m=>{vr(m)})},vr=l=>{const m=l.dom;m.parentNode!==null&&m.parentNode.removeChild(m)},s1=l=>{const m=Jn(l);m.length>0&&Un(l,m),vr(l)},Dd=(l,m)=>ae.fromDom(l.dom.cloneNode(m)),Ma=l=>Dd(l,!1),Md=l=>Dd(l,!0),di=(l,m)=>{const p=ae.fromTag(m),v=Ra(l);return Gi(p,v),p},GC=(l,m)=>{const p=di(l,m),v=Jn(Md(l));return Mc(p,v),p},nv=(l,m)=>{const p=di(l,m);wu(l,p);const v=Jn(l);return Mc(p,v),vr(l),p},qC=["tfoot","thead","tbody","colgroup"],Pa=l=>rs(qC,l),Su=(l,m)=>({rows:l,columns:m}),r1=(l,m)=>({row:l,column:m}),c1=(l,m,p)=>({element:l,rowspan:m,colspan:p}),ov=(l,m,p,v)=>({element:l,rowspan:m,colspan:p,isNew:v}),sv=(l,m,p,v,x,_)=>({element:l,rowspan:m,colspan:p,row:v,column:x,isLocked:_}),lr=(l,m,p)=>({element:l,cells:m,section:p}),Pd=(l,m,p,v)=>({element:l,cells:m,section:p,isNew:v}),Nc=(l,m,p)=>({element:l,isNew:m,isLocked:p}),Il=(l,m,p,v)=>({element:l,cells:m,section:p,isNew:v}),KC=(l,m,p,v)=>({startRow:l,startCol:m,finishRow:p,finishCol:v}),H_=(l,m,p)=>({element:l,colspan:m,column:p}),Ki=(l,m)=>({element:l,columns:m}),ra=l=>J0(l)&&Xn(l.dom.host),mi=l=>ae.fromDom(l.dom.getRootNode()),Yi=l=>ra(l)?l:ae.fromDom(sf(l).dom.body),fi=l=>{const m=mi(l);return ra(m)?Q.some(m):Q.none()},Dt=l=>ae.fromDom(l.dom.host),YC=l=>{if(Xn(l.target)){const m=ae.fromDom(l.target);if(fc(m)&&qt(m)&&l.composed&&l.composedPath){const p=l.composedPath();if(p)return Se(p)}}return Q.from(l.target)},qt=l=>Xn(l.dom.shadowRoot),Lo=l=>{const m=Od(l)?l.dom.parentNode:l.dom;if(m==null||m.ownerDocument===null)return!1;const p=m.ownerDocument;return fi(ae.fromDom(m)).fold(()=>p.body.contains(m),Bo(Lo,Dt))},rv=()=>Ro(ae.fromDom(document)),Ro=l=>{const m=l.dom.body;if(m==null)throw new Error("Body is not available yet");return ae.fromDom(m)},V_=(l,m,p)=>cs(Ad(l,p),m),cv=(l,m)=>cs(Jn(l),m),av=(l,m)=>{let p=[];return Be(Jn(l),v=>{m(v)&&(p=p.concat([v])),p=p.concat(av(v,m))}),p},Vt=(l,m,p)=>V_(l,v=>gc(v,m),p),Ll=(l,m)=>cv(l,p=>gc(p,m)),Na=(l,m)=>jC(m,l);var kr=(l,m,p,v,x)=>l(p,v)?Q.some(p):Xt(x)&&x(p)?Q.none():m(p,v,x);const Ve=(l,m,p)=>{let v=l.dom;const x=Xt(p)?p:An;for(;v.parentNode;){v=v.parentNode;const _=ae.fromDom(v);if(m(_))return Q.some(_);if(x(_))break}return Q.none()},Go=(l,m,p)=>kr((x,_)=>_(x),Ve,l,m,p),iv=(l,m)=>{const p=x=>m(ae.fromDom(x));return N(l.dom.childNodes,p).map(ae.fromDom)},XC=(l,m)=>{const p=v=>{for(let x=0;x<v.childNodes.length;x++){const _=ae.fromDom(v.childNodes[x]);if(m(_))return Q.some(_);const M=p(v.childNodes[x]);if(M.isSome())return M}return Q.none()};return p(l.dom)},Kt=(l,m,p)=>Ve(l,v=>gc(v,m),p),Nd=(l,m)=>iv(l,p=>gc(p,m)),gi=(l,m)=>Q0(m,l),Ys=(l,m,p)=>kr((x,_)=>gc(x,_),Kt,l,m,p),gs=(l,m,p=Ks)=>l.exists(v=>p(v,m)),Xi=l=>{const m=[],p=v=>{m.push(v)};for(let v=0;v<l.length;v++)l[v].each(p);return m},z_=(l,m)=>l!=null?m(l):Q.none(),a1=(l,m)=>l?Q.some(m):Q.none(),Do=(l,m)=>l.substring(m),JC=(l,m,p)=>m===""||l.length>=m.length&&l.substr(p,p+m.length)===m,i1=(l,m)=>xu(l,m)?Do(l,m.length):l,Ho=(l,m,p=0,v)=>{const x=l.indexOf(m,p);return x!==-1?Yt(v)?!0:x+m.length<=v:!1},xu=(l,m)=>JC(l,m,0),Eu=(l,m)=>JC(l,m,l.length-m.length),tc=(l=>m=>m.replace(l,""))(/^\s+|\s+$/g),wn=l=>l.length>0,QC=l=>{const m=parseFloat(l);return isNaN(m)?Q.none():Q.some(m)},nc=l=>l.style!==void 0&&Xt(l.style.getPropertyValue),ew=(l,m,p)=>{if(!fe(p))throw console.error("Invalid call to CSS.set. Property ",m,":: Value ",p,":: Element ",l),new Error("CSS value must be a string: "+p);nc(l)&&l.style.setProperty(m,p)},u1=(l,m)=>{nc(l)&&l.style.removeProperty(m)},vo=(l,m,p)=>{const v=l.dom;ew(v,m,p)},Xs=(l,m)=>{const p=l.dom;Zo(m,(v,x)=>{ew(p,x,v)})},Tu=(l,m)=>{const p=l.dom,x=window.getComputedStyle(p).getPropertyValue(m);return x===""&&!Lo(l)?d1(p,m):x},d1=(l,m)=>nc(l)?l.style.getPropertyValue(m):"",Ji=(l,m)=>{const p=l.dom,v=d1(p,m);return Q.from(v).filter(x=>x.length>0)},hi=(l,m)=>{const p=l.dom;u1(p,m),gs(Rc(l,"style").map(tc),"")&&Ao(l,"style")},ur=(l,m)=>{const p=l.dom,v=m.dom;nc(p)&&nc(v)&&(v.style.cssText=p.style.cssText)},Lr=(l,m,p=0)=>Rc(l,m).map(v=>parseInt(v,10)).getOr(p),oc=(l,m)=>Lr(l,m,1),ca=l=>Qr("col")(l)?Lr(l,"span",1)>1:oc(l,"colspan")>1,aa=l=>oc(l,"rowspan")>1,Ps=(l,m)=>parseInt(Tu(l,m),10),Gg=J(10),m1=J(10),Bd=(l,m)=>f1(l,m,Oe),f1=(l,m,p)=>Ss(Jn(l),v=>gc(v,m)?p(v)?[v]:[]:f1(v,m,p)),tw=(l,m,p=An)=>{if(p(m))return Q.none();if(rs(l,Eo(m)))return Q.some(m);const v=x=>gc(x,"table")||p(x);return Kt(m,l.join(","),v)},$d=(l,m)=>tw(["td","th"],l,m),_u=l=>Bd(l,"th,td"),qg=l=>gc(l,"colgroup")?Ll(l,"col"):Ss(ku(l),m=>Ll(m,"col")),hc=(l,m)=>Ys(l,"table",m),lv=l=>Bd(l,"tr"),ku=l=>hc(l).fold(J([]),m=>Ll(m,"colgroup")),g1=(l,m)=>Wt(l,p=>{if(Eo(p)==="colgroup"){const v=Wt(qg(p),x=>{const _=Lr(x,"span",1);return c1(x,1,_)});return lr(p,v,"colgroup")}else{const v=Wt(_u(p),x=>{const _=Lr(x,"rowspan",1),M=Lr(x,"colspan",1);return c1(x,_,M)});return lr(p,v,m(p))}}),cf=l=>Fl(l).map(m=>{const p=Eo(m);return Pa(p)?p:"tbody"}).getOr("tbody"),uv=l=>{const m=lv(l),v=[...ku(l),...m];return g1(v,cf)},h1=(l,m)=>g1(l,()=>m),af=l=>{let m=!1,p;return(...v)=>(m||(m=!0,p=l.apply(null,v)),p)},nw=(l,m,p,v)=>{const x=l.isiOS()&&/ipad/i.test(p)===!0,_=l.isiOS()&&!x,M=l.isiOS()||l.isAndroid(),F=M||v("(pointer:coarse)"),U=x||!_&&M&&v("(min-device-width:768px)"),X=_||M&&!U,ue=m.isSafari()&&l.isiOS()&&/safari/i.test(p)===!1,Pe=!X&&!U&&!ue;return{isiPad:J(x),isiPhone:J(_),isTablet:J(U),isPhone:J(X),isTouch:J(F),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:J(ue),isDesktop:J(Pe)}},ow=(l,m)=>{for(let p=0;p<l.length;p++){const v=l[p];if(v.test(m))return v}},lf=(l,m)=>{const p=ow(l,m);if(!p)return{major:0,minor:0};const v=x=>Number(m.replace(p,"$"+x));return Kg(v(1),v(2))},HD=(l,m)=>{const p=String(m).toLowerCase();return l.length===0?K():lf(l,p)},K=()=>Kg(0,0),Kg=(l,m)=>({major:l,minor:m}),Bc={nu:Kg,detect:HD,unknown:K},sw=(l,m)=>Er(m.brands,p=>{const v=p.brand.toLowerCase();return N(l,x=>{var _;return v===((_=x.brand)===null||_===void 0?void 0:_.toLowerCase())}).map(x=>({current:x.name,version:Bc.nu(parseInt(p.version,10),0)}))}),rw=(l,m)=>{const p=String(m).toLowerCase();return N(l,v=>v.search(p))},U_=(l,m)=>rw(l,m).map(p=>{const v=Bc.detect(p.versionRegexes,m);return{current:p.name,version:v}}),Sn=(l,m)=>rw(l,m).map(p=>{const v=Bc.detect(p.versionRegexes,m);return{current:p.name,version:v}}),ia=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,pi=l=>m=>Ho(m,l),Ou=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:l=>Ho(l,"edge/")&&Ho(l,"chrome")&&Ho(l,"safari")&&Ho(l,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ia],search:l=>Ho(l,"chrome")&&!Ho(l,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:l=>Ho(l,"msie")||Ho(l,"trident")},{name:"Opera",versionRegexes:[ia,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:pi("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:pi("firefox")},{name:"Safari",versionRegexes:[ia,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:l=>(Ho(l,"safari")||Ho(l,"mobile/"))&&Ho(l,"applewebkit")}],cw=[{name:"Windows",search:pi("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:l=>Ho(l,"iphone")||Ho(l,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:pi("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:pi("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:pi("linux"),versionRegexes:[]},{name:"Solaris",search:pi("sunos"),versionRegexes:[]},{name:"FreeBSD",search:pi("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:pi("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],uf={browsers:J(Ou),oses:J(cw)},Ba="Edge",Yg="Chromium",Fd="IE",aw="Opera",Hl="Firefox",Hr="Safari",iw=()=>p1({current:void 0,version:Bc.unknown()}),p1=l=>{const m=l.current,p=l.version,v=x=>()=>m===x;return{current:m,version:p,isEdge:v(Ba),isChromium:v(Yg),isIE:v(Fd),isOpera:v(aw),isFirefox:v(Hl),isSafari:v(Hr)}},Js={unknown:iw,nu:p1,edge:J(Ba),chromium:J(Yg),ie:J(Fd),opera:J(aw),firefox:J(Hl),safari:J(Hr)},pc="Windows",Vr="iOS",df="Android",b1="Linux",dv="macOS",mf="Solaris",bi="FreeBSD",Xg="ChromeOS",W_=()=>Z_({current:void 0,version:Bc.unknown()}),Z_=l=>{const m=l.current,p=l.version,v=x=>()=>m===x;return{current:m,version:p,isWindows:v(pc),isiOS:v(Vr),isAndroid:v(df),isMacOS:v(dv),isLinux:v(b1),isSolaris:v(mf),isFreeBSD:v(bi),isChromeOS:v(Xg)}},j_={unknown:W_,nu:Z_,windows:J(pc),ios:J(Vr),android:J(df),linux:J(b1),macos:J(dv),solaris:J(mf),freebsd:J(bi),chromeos:J(Xg)},mv={detect:(l,m,p)=>{const v=uf.browsers(),x=uf.oses(),_=m.bind(U=>sw(v,U)).orThunk(()=>U_(v,l)).fold(Js.unknown,Js.nu),M=Sn(x,l).fold(j_.unknown,j_.nu),F=nw(M,_,l,p);return{browser:_,os:M,deviceType:F}}},ff=l=>window.matchMedia(l).matches;let lw=af(()=>mv.detect(window.navigator.userAgent,Q.from(window.navigator.userAgentData),ff));const To=()=>lw(),Vo=(l,m)=>{const p=(F,U)=>{if(!jt(U)&&!U.match(/^[0-9]+$/))throw new Error(l+".set accepts only positive integer values. Value was "+U);const X=F.dom;nc(X)&&(X.style[l]=U+"px")},v=F=>{const U=m(F);if(U<=0||U===null){const X=Tu(F,l);return parseFloat(X)||0}return U},x=v,_=(F,U)=>De(U,(X,ue)=>{const Pe=Tu(F,ue),Xe=Pe===void 0?0:parseInt(Pe,10);return isNaN(Xe)?X:X+Xe},0);return{set:p,get:v,getOuter:x,aggregate:_,max:(F,U,X)=>{const ue=_(F,X);return U>ue?U-ue:0}}},Id=(l,m)=>QC(l).getOr(m),Au=(l,m,p)=>Id(Tu(l,m),p),fv=(l,m,p,v)=>{const x=Au(l,`padding-${p}`,0),_=Au(l,`padding-${v}`,0),M=Au(l,`border-${p}-width`,0),F=Au(l,`border-${v}-width`,0);return m-x-_-M-F},Ns=(l,m)=>{const p=l.dom,v=p.getBoundingClientRect().width||p.offsetWidth;return m==="border-box"?v:fv(l,v,"left","right")},St=l=>Au(l,"height",l.dom.offsetHeight),Ru=l=>Au(l,"width",l.dom.offsetWidth),q_=l=>Ns(l,"content-box"),la=Vo("width",l=>l.dom.offsetWidth),Mn=l=>la.get(l),Ld=l=>la.getOuter(l),Jg=q_,uw=Ru,gv=(l,m,p)=>{const v=l.cells,x=v.slice(0,m),_=v.slice(m),M=x.concat(p).concat(_);return Qg(l,M)},tn=(l,m,p)=>gv(l,m,[p]),es=(l,m,p)=>{const v=l.cells;v[m]=p},Qg=(l,m)=>Il(l.element,m,l.section,l.isNew),v1=(l,m)=>{const p=l.cells,v=Wt(p,m);return Il(l.element,v,l.section,l.isNew)},$c=(l,m)=>l.cells[m],bc=(l,m)=>$c(l,m).element,$a=l=>l.cells.length,co=l=>{const m=uc(l,p=>p.section==="colgroup");return{rows:m.fail,cols:m.pass}},vi=(l,m,p)=>{const v=Wt(l.cells,p);return Il(m(l.element),v,l.section,!0)},Hd="data-snooker-locked-cols",Bs=l=>Rc(l,Hd).bind(m=>Q.from(m.match(/\d+/g))).map(m=>zt(m,Oe)),Vd=l=>{const m=De(co(l).rows,(v,x)=>(Be(x.cells,(_,M)=>{_.isLocked&&(v[M]=!0)}),v),{}),p=ir(m,(v,x)=>parseInt(x,10));return mo(p)},qo=(l,m)=>l+","+m,Du=(l,m,p)=>Q.from(l.access[qo(m,p)]),gf=(l,m,p)=>{const v=ao(l,x=>p(m,x.element));return v.length>0?Q.some(v[0]):Q.none()},ao=(l,m)=>{const p=Ss(l.all,v=>v.cells);return cs(p,m)},Mu=l=>{const m={};let p=0;return Be(l.cells,v=>{const x=v.colspan;Wo(x,_=>{const M=p+_;m[M]=H_(v.element,x,M)}),p+=x}),m},dw=l=>{const m={},p=[],x=Se(l).map(qe=>qe.element).bind(hc).bind(Bs).getOr({});let _=0,M=0,F=0;const{pass:U,fail:X}=uc(l,qe=>qe.section==="colgroup");Be(X,qe=>{const ze=[];Be(qe.cells,ft=>{let Re=0;for(;m[qo(F,Re)]!==void 0;)Re++;const Ue=Io(x,Re.toString()),Ze=sv(ft.element,ft.rowspan,ft.colspan,F,Re,Ue);for(let Ft=0;Ft<ft.colspan;Ft++)for(let gn=0;gn<ft.rowspan;gn++){const Ln=F+gn,to=Re+Ft,yo=qo(Ln,to);m[yo]=Ze,M=Math.max(M,to+1)}ze.push(Ze)}),_++,p.push(lr(qe.element,ze,qe.section)),F++});const{columns:ue,colgroups:Pe}=yu(U).map(qe=>{const ze=Mu(qe);return{colgroups:[Ki(qe.element,Fo(ze))],columns:ze}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:Su(_,M),access:m,all:p,columns:ue,colgroups:Pe}},pn={fromTable:l=>{const m=uv(l);return dw(m)},generate:dw,getAt:Du,findItem:gf,filterItems:ao,justCells:l=>Ss(l.all,m=>m.cells),justColumns:l=>Fo(l.columns),hasColumns:l=>Rt(l.columns).length>0,getColumnAt:(l,m)=>Q.from(l.columns[m])},eh=(l,m=Oe)=>{const p=l.grid,v=Wo(p.columns,hn),x=Wo(p.rows,hn);return Wt(v,_=>C1(()=>Ss(x,X=>pn.getAt(l,X,_).filter(ue=>ue.column===_).toArray()),X=>X.colspan===1&&m(X.element),()=>pn.getAt(l,0,_)))},C1=(l,m,p)=>{const v=l();return N(v,m).orThunk(()=>Q.from(v[0]).orThunk(p)).map(M=>M.element)},mw=l=>{const m=l.grid,p=Wo(m.rows,hn),v=Wo(m.columns,hn);return Wt(p,x=>C1(()=>Ss(v,U=>pn.getAt(l,x,U).filter(X=>X.row===x).fold(J([]),X=>[X])),U=>U.rowspan===1,()=>pn.getAt(l,x,0)))},K_=(l,m)=>{if(m<0||m>=l.length-1)return Q.none();const p=l[m].fold(()=>{const x=N_(l.slice(0,m));return Er(x,(_,M)=>_.map(F=>({value:F,delta:M+1})))},x=>Q.some({value:x,delta:0})),v=l[m+1].fold(()=>{const x=l.slice(m+1);return Er(x,(_,M)=>_.map(F=>({value:F,delta:M+1})))},x=>Q.some({value:x,delta:1}));return p.bind(x=>v.map(_=>{const M=_.delta+x.delta;return Math.abs(_.value-x.value)/M}))},w1=(l,m)=>p=>th(p)==="rtl"?m:l,th=l=>Tu(l,"direction")==="rtl"?"rtl":"ltr",Y_=Vo("height",l=>{const m=l.dom;return Lo(l)?m.getBoundingClientRect().height:m.offsetHeight}),Vl=l=>Y_.get(l),S1=l=>Y_.getOuter(l),bv=St,Pu=(l,m)=>({left:l,top:m,translate:(v,x)=>Pu(l+v,m+x)}),el=Pu,fw=l=>{const m=l.getBoundingClientRect();return el(m.left,m.top)},x1=(l,m)=>l!==void 0?l:m!==void 0?m:0,hf=l=>{const m=l.dom.ownerDocument,p=m.body,v=m.defaultView,x=m.documentElement;if(p===l.dom)return el(p.offsetLeft,p.offsetTop);const _=x1(v==null?void 0:v.pageYOffset,x.scrollTop),M=x1(v==null?void 0:v.pageXOffset,x.scrollLeft),F=x1(x.clientTop,p.clientTop),U=x1(x.clientLeft,p.clientLeft);return gw(l).translate(M-U,_-F)},gw=l=>{const m=l.dom,v=m.ownerDocument.body;return v===m?el(v.offsetLeft,v.offsetTop):Lo(l)?fw(m):el(0,0)},zd=(l,m)=>({row:l,y:m}),E1=(l,m)=>({col:l,x:m}),zr=l=>hf(l).left+Ld(l),T1=l=>hf(l).left,hw=(l,m)=>E1(l,T1(m)),vv=(l,m)=>E1(l,zr(m)),xs=l=>hf(l).top,nh=(l,m)=>zd(l,xs(m)),Es=(l,m)=>zd(l,xs(m)+S1(m)),oh=(l,m,p)=>{if(p.length===0)return[];const v=Wt(p.slice(1),(_,M)=>_.map(F=>l(M,F))),x=p[p.length-1].map(_=>m(p.length-1,_));return v.concat([x])},Fc=l=>-l,kt={delta:hn,positions:l=>oh(nh,Es,l),edge:xs},yv=w1({delta:hn,edge:T1,positions:l=>oh(hw,vv,l)},{delta:Fc,edge:zr,positions:l=>oh(vv,hw,l)}),sh={delta:(l,m)=>yv(m).delta(l,m),positions:(l,m)=>yv(m).positions(l,m),edge:l=>yv(l).edge(l)},Cv={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Ia=(()=>{const l="[0-9]+",p="[eE]"+("[+-]?"+l),v="\\.",x=F=>`(?:${F})?`,M=`[+-]?(?:${["Infinity",l+v+x(l)+x(p),v+l+x(p),l+x(p)].join("|")})`;return new RegExp(`^(${M})(.*)$`)})(),tl=(l,m)=>Ke(m,p=>Ke(Cv[p],v=>l===v)),Ud=(l,m)=>Q.from(Ia.exec(l)).bind(v=>{const x=Number(v[1]),_=v[2];return tl(_,m)?Q.some({value:x,unit:_}):Q.none()}),tt=/(\d+(\.\d+)?)%/,La=/(\d+(\.\d+)?)px|em/,wv=Qr("col"),pf=Qr("tr"),Ha=(l,m,p)=>{const v=Da(l).getOrThunk(()=>Ro(Zg(l)));return m(l)/p(v)*100},rh=(l,m)=>{vo(l,"width",m+"px")},Wd=(l,m)=>{vo(l,"width",m+"%")},zl=(l,m)=>{vo(l,"height",m+"px")},ch=l=>{hi(l,"height")},yi=l=>bv(l)+"px",bw=(l,m,p,v)=>{const x=hc(l).map(_=>{const M=p(_);return Math.floor(m/100*M)}).getOr(m);return v(l,x),x},_o=(l,m,p,v)=>{const x=parseFloat(l);return Eu(l,"%")&&Eo(m)!=="table"?bw(m,x,p,v):x},Ne=l=>{const m=yi(l);return m?_o(m,l,Vl,zl):Vl(l)},sc=(l,m,p)=>{const v=p(l),x=oc(l,m);return v/x},Zd=(l,m)=>Ji(l,m).orThunk(()=>Rc(l,m).map(p=>p+"px")),Ko=l=>Zd(l,"width"),bf=l=>Zd(l,"height"),$s=l=>Ha(l,Mn,Jg),Rn=l=>wv(l)?Mn(l):uw(l),ah=l=>pf(l)?Vl(l):sc(l,"rowspan",Ne),Te=l=>Ko(l).bind(p=>Ud(p,["fixed","relative","empty"])),Dn=(l,m,p)=>{vo(l,"width",m+p)},_1=l=>Mn(l)+"px",Ts=l=>Vl(l)+"px",yr=l=>Ha(l,Mn,Jg)+"%",Va=l=>Ko(l).exists(m=>tt.test(m)),Sv=l=>Ko(l).exists(m=>La.test(m)),Nu=l=>Ko(l).isNone(),xv=J(tt),Ic=Qr("col"),kn=l=>Ko(l).getOrThunk(()=>Rn(l)+"px"),nl=l=>bf(l).getOrThunk(()=>ah(l)+"px"),ih=l=>Wt(pn.justColumns(l),m=>Q.from(m.element)),_s=l=>{const m=To().browser,p=m.isChromium()||m.isFirefox();return Ic(l)?p:!0},k1=(l,m,p,v,x,_)=>l.filter(v).fold(()=>_(K_(p,m)),M=>x(M)),ol=(l,m,p,v)=>{const x=eh(l),_=pn.hasColumns(l)?ih(l):x,M=[Q.some(sh.edge(m))].concat(Wt(sh.positions(x,m),U=>U.map(X=>X.x))),F=te(ca);return Wt(_,(U,X)=>k1(U,X,M,F,ue=>{if(_s(ue))return p(ue);{const Pe=z_(x[X],hn);return k1(Pe,X,M,F,Xe=>v(Q.some(Mn(Xe))),v)}},v))},lh=l=>l.map(m=>m+"px").getOr(""),Fs=(l,m)=>ol(l,m,kn,lh),Or=(l,m,p)=>ol(l,m,$s,v=>v.fold(()=>p.minCellWidth(),x=>x/p.pixelWidth()*100)),le=(l,m,p)=>ol(l,m,Rn,v=>v.getOrThunk(p.minCellWidth)),io=(l,m,p,v)=>{const x=mw(l),_=Wt(l.all,F=>Q.some(F.element)),M=[Q.some(kt.edge(m))].concat(Wt(kt.positions(x,m),F=>F.map(U=>U.y)));return Wt(_,(F,U)=>k1(F,U,M,Oe,p,v))},Ev=(l,m)=>io(l,m,ah,p=>p.getOrThunk(m1)),ts=(l,m)=>io(l,m,nl,lh),Qs=(l,m)=>()=>Lo(l)?m(l):parseFloat(Ji(l,"width").getOr("0")),er=l=>{const m=Qs(l,Mn),p=J(0);return{width:m,pixelWidth:m,getWidths:(x,_)=>le(x,l,_),getCellDelta:p,singleColumnWidth:J([0]),minCellWidth:p,setElementWidth:He,adjustTableWidth:He,isRelative:!0,label:"none"}},fo=l=>{const m=Qs(l,U=>parseFloat(yr(U))),p=Qs(l,Mn);return{width:m,pixelWidth:p,getWidths:(U,X)=>Or(U,l,X),getCellDelta:U=>U/p()*100,singleColumnWidth:(U,X)=>[100-U],minCellWidth:()=>Gg()/p()*100,setElementWidth:Wd,adjustTableWidth:U=>{const X=m(),ue=U/100*X,Pe=X+ue;Wd(l,Pe)},isRelative:!0,label:"percent"}},O1=l=>{const m=Qs(l,Mn);return{width:m,pixelWidth:m,getWidths:(M,F)=>le(M,l,F),getCellDelta:hn,singleColumnWidth:(M,F)=>[Math.max(Gg(),M+F)-M],minCellWidth:Gg,setElementWidth:rh,adjustTableWidth:M=>{const F=m()+M;rh(l,F)},isRelative:!1,label:"pixel"}},Bu=(l,m)=>xv().exec(m)!==null?fo(l):O1(l),uh={getTableSize:l=>Ko(l).fold(()=>er(l),p=>Bu(l,p)),pixelSize:O1,percentageSize:fo,noneSize:er},vc=(l,m,p,v,x,_)=>({minRow:l,minCol:m,maxRow:p,maxCol:v,allCells:x,selectedCells:_}),X_=(l,m)=>{const p=l.grid.columns;let x=l.grid.rows,_=p,M=0,F=0;const U=[],X=[];return Zo(l.access,ue=>{if(U.push(ue),m(ue)){X.push(ue);const Pe=ue.row,Xe=Pe+ue.rowspan-1,qe=ue.column,ze=qe+ue.colspan-1;Pe<x?x=Pe:Xe>M&&(M=Xe),qe<_?_=qe:ze>F&&(F=ze)}}),vc(x,_,M,F,U,X)},Tv=(l,m,p)=>{const v=l[p].element,x=ae.fromTag("td");jo(x,ae.fromTag("br")),(m?jo:ec)(v,x)},yw=(l,m,p,v)=>{const x=cs(l,F=>F.section!=="colgroup"),_=m.grid.columns,M=m.grid.rows;for(let F=0;F<M;F++){let U=!1;for(let X=0;X<_;X++)F<p.minRow||F>p.maxRow||X<p.minCol||X>p.maxCol||(pn.getAt(m,F,X).filter(v).isNone()?Tv(x,U,F):U=!0)}},Cw=(l,m,p,v)=>{Zo(p.columns,M=>{(M.column<m.minCol||M.column>m.maxCol)&&vr(M.element)});const x=cs(Bd(l,"tr"),M=>M.dom.childElementCount===0);Be(x,vr),(m.minCol===m.maxCol||m.minRow===m.maxRow)&&Be(Bd(l,"th,td"),M=>{Ao(M,"rowspan"),Ao(M,"colspan")}),Ao(l,Hd),Ao(l,"data-snooker-col-series"),uh.getTableSize(l).adjustTableWidth(v)},ww=(l,m,p,v)=>{if(v.minCol===0&&m.grid.columns===v.maxCol+1)return 0;const x=le(m,l,p),_=De(x,(X,ue)=>X+ue,0),U=De(x.slice(v.minCol,v.maxCol+1),(X,ue)=>X+ue,0)/_*p.pixelWidth()-p.pixelWidth();return p.getCellDelta(U)},jd=(l,m)=>{const p=Xe=>gc(Xe.element,m),v=Md(l),x=uv(v),_=uh.getTableSize(l),M=pn.generate(x),F=X_(M,p),U="th:not("+m+"),td:not("+m+")",X=f1(v,"th,td",Xe=>gc(Xe,U));Be(X,vr),yw(x,M,F,p);const ue=pn.fromTable(l),Pe=ww(l,ue,_,F);return Cw(v,F,M,Pe),v},vf="",dh=((l,m)=>{const p=_=>{if(!l(_))throw new Error("Can only get "+m+" value of a "+m+" node");return v(_).getOr("")},v=_=>l(_)?Q.from(_.dom.nodeValue):Q.none();return{get:p,getOption:v,set:(_,M)=>{if(!l(_))throw new Error("Can only set raw "+m+" value of a "+m+" node");_.dom.nodeValue=M}}})(Od,"text"),_v=l=>dh.get(l),kv=l=>dh.getOption(l),A1=(l,m)=>dh.set(l,m),ua=l=>Eo(l)==="img"?1:kv(l).fold(()=>Jn(l).length,m=>m.length),R1=l=>kv(l).filter(m=>m.trim().length!==0||m.indexOf(vf)>-1).isSome(),Gd=l=>$t(l)&&Bl(l,"contenteditable")==="false",yf=["img","br"],D1=l=>R1(l)||rs(yf,Eo(l))||Gd(l),Sw=l=>XC(l,D1),Ov=l=>J_(l,D1),J_=(l,m)=>{const p=v=>{const x=Jn(v);for(let _=x.length-1;_>=0;_--){const M=x[_];if(m(M))return Q.some(M);const F=p(M);if(F.isSome())return F}return Q.none()};return p(l)},tr={scope:["row","col"]},Ci=l=>()=>{const m=ae.fromTag("td",l.dom);return jo(m,ae.fromTag("br",l.dom)),m},$u=l=>()=>ae.fromTag("col",l.dom),qd=l=>()=>ae.fromTag("colgroup",l.dom),M1=l=>()=>ae.fromTag("tr",l.dom),Lc=(l,m,p)=>{const v=GC(l,m);return Zo(p,(x,_)=>{x===null?Ao(v,_):ms(v,_,x)}),v},mh=l=>l,P1=(l,m,p)=>Sw(l).map(x=>{const _=p.join(","),M=Vt(x,_,F=>So(F,l));return Jr(M,(F,U)=>{const X=Ma(U);return jo(F,X),X},m)}).getOr(m),N1=(l,m)=>{Zo(tr,(p,v)=>Rc(l,v).filter(x=>rs(p,x)).each(x=>ms(m,v,x)))},za=(l,m,p)=>{const v=(M,F)=>{ur(M.element,F),hi(F,"height"),M.colspan!==1&&hi(F,"width")},x=M=>{const F=ae.fromTag(Eo(M.element),m.dom),U=p.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),X=U.length>0?P1(M.element,F,U):F;return jo(X,ae.fromTag("br")),v(M,F),N1(M.element,F),l(M.element,F),F};return{col:M=>{const F=ae.fromTag(Eo(M.element),m.dom);return v(M,F),l(M.element,F),F},colgroup:qd(m),row:M1(m),cell:x,replace:Lc,colGap:$u(m),gap:Ci(m)}},Ua=l=>({col:$u(l),colgroup:qd(l),row:M1(l),cell:Ci(l),replace:mh,colGap:$u(l),gap:Ci(l)}),xw=(l,m)=>{const v=document.createElement("div");return v.innerHTML=l,Jn(ae.fromDom(v))},da=l=>Wt(l,ae.fromDom),Kd=l=>m=>m.options.get(l),wi="100%",sl=l=>{var m;const p=l.dom,v=(m=p.getParent(l.selection.getStart(),p.isBlock))!==null&&m!==void 0?m:l.getBody();return Jg(ae.fromDom(v))+"px"},Yd=(l,m)=>Iu(l)||!Lu(l)?m:nr(l)?{...m,width:sl(l)}:{...m,width:wi},Q_=(l,m)=>Iu(l)||Lu(l)?m:nr(l)?{...m,width:sl(l)}:{...m,width:wi},fh=l=>{const m=l.options.register;m("table_clone_elements",{processor:"string[]"}),m("table_use_colgroups",{processor:"boolean",default:!0}),m("table_header_type",{processor:p=>{const v=rs(["section","cells","sectionCells","auto"],p);return v?{value:p,valid:v}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),m("table_sizing_mode",{processor:"string",default:"auto"}),m("table_default_attributes",{processor:"object",default:{border:"1"}}),m("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),m("table_column_resizing",{processor:p=>{const v=rs(["preservetable","resizetable"],p);return v?{value:p,valid:v}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),m("table_resize_bars",{processor:"boolean",default:!0}),m("table_style_by_css",{processor:"boolean",default:!0}),m("table_merge_content_on_paste",{processor:"boolean",default:!0})},Fu=l=>Q.from(l.options.get("table_clone_elements")),ek=l=>{const m=l.options.get("object_resizing");return rs(m.split(","),"table")},Yo=Kd("table_header_type"),B1=Kd("table_column_resizing"),Si=l=>B1(l)==="preservetable",Xd=l=>B1(l)==="resizetable",gh=Kd("table_sizing_mode"),xi=l=>gh(l)==="relative",nr=l=>gh(l)==="fixed",Iu=l=>gh(l)==="responsive",$1=Kd("table_resize_bars"),Lu=Kd("table_style_by_css"),Is=Kd("table_merge_content_on_paste"),F1=l=>{const m=l.options,p=m.get("table_default_attributes");return m.isSet("table_default_attributes")?p:Q_(l,p)},I1=l=>{const m=l.options,p=m.get("table_default_styles");return m.isSet("table_default_styles")?p:Yd(l,p)},tk=Kd("table_use_colgroups"),Ew=l=>Ys(l,"[contenteditable]"),Hu=(l,m=!1)=>Lo(l)?l.dom.isContentEditable:Ew(l).fold(J(m),p=>Jd(p)==="true"),Jd=l=>l.dom.contentEditable,rc=l=>ae.fromDom(l.getBody()),Hc=l=>m=>So(m,rc(l)),Vc=l=>{Ao(l,"data-mce-style");const m=p=>Ao(p,"data-mce-style");Be(_u(l),m),Be(qg(l),m),Be(lv(l),m)},hh=l=>ae.fromDom(l.selection.getStart()),ph=l=>l.getBoundingClientRect().width,Cf=l=>l.getBoundingClientRect().height,Av=l=>(m,p)=>{const v=m.dom.getStyle(p,l)||m.dom.getAttrib(p,l);return Q.from(v).filter(wn)},Tw=Av("width"),_w=Av("height"),Rv=l=>/^(\d+(\.\d+)?)%$/.test(l),wf=l=>/^(\d+(\.\d+)?)px$/.test(l),sn=l=>Go(l,Qr("table")).exists(Hu),ht=(l,m)=>{const p=m.column,v=m.column+m.colspan-1,x=m.row,_=m.row+m.rowspan-1;return p<=l.finishCol&&v>=l.startCol&&x<=l.finishRow&&_>=l.startRow},Vu=(l,m)=>m.column>=l.startCol&&m.column+m.colspan-1<=l.finishCol&&m.row>=l.startRow&&m.row+m.rowspan-1<=l.finishRow,L1=(l,m)=>{let p=!0;const v=yn(Vu,m);for(let x=m.startRow;x<=m.finishRow;x++)for(let _=m.startCol;_<=m.finishCol;_++)p=p&&pn.getAt(l,x,_).exists(v);return p?Q.some(m):Q.none()},H1=(l,m)=>KC(Math.min(l.row,m.row),Math.min(l.column,m.column),Math.max(l.row+l.rowspan-1,m.row+m.rowspan-1),Math.max(l.column+l.colspan-1,m.column+m.colspan-1)),Dv=(l,m,p)=>{const v=pn.findItem(l,m,So),x=pn.findItem(l,p,So);return v.bind(_=>x.map(M=>H1(_,M)))},V1=(l,m,p)=>Dv(l,m,p).bind(v=>L1(l,v)),Fn=(l,m,p,v)=>pn.findItem(l,m,So).bind(x=>{const _=p>0?x.row+x.rowspan-1:x.row,M=v>0?x.column+x.colspan-1:x.column;return pn.getAt(l,_+p,M+v).map(U=>U.element)}),Mv=(l,m,p)=>Dv(l,m,p).map(v=>{const x=pn.filterItems(l,yn(ht,v));return Wt(x,_=>_.element)}),kw=(l,m)=>{const p=(v,x)=>ev(x,v);return pn.findItem(l,m,p).map(v=>v.element)},Pv=(l,m,p)=>hc(l).bind(v=>{const x=Qd(v);return Fn(x,l,m,p)}),Ee=(l,m,p)=>{const v=Qd(l);return Mv(v,m,p)},Sf=(l,m,p,v,x)=>{const _=Qd(l),M=So(l,p)?Q.some(m):kw(_,m),F=So(l,x)?Q.some(v):kw(_,v);return M.bind(U=>F.bind(X=>Mv(_,U,X)))},Ow=(l,m,p)=>{const v=Qd(l);return V1(v,m,p)},Qd=pn.fromTable;var Aw=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Ul=()=>{const l=X=>ae.fromDom(X.dom.cloneNode(!1)),m=X=>sf(X).dom,p=X=>fc(X)?Eo(X)==="body"?!0:rs(Aw,Eo(X)):!1,v=X=>fc(X)?rs(["br","img","hr","input"],Eo(X)):!1,x=X=>fc(X)&&Bl(X,"contenteditable")==="false",_=(X,ue)=>X.dom.compareDocumentPosition(ue.dom),M=(X,ue)=>{const Pe=Ra(X);Gi(ue,Pe)},F=X=>{const ue=Eo(X);return rs(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],ue)},U=X=>fc(X)?Rc(X,"lang"):Q.none();return{up:J({selector:Kt,closest:Ys,predicate:Ve,all:Ad}),down:J({selector:Na,predicate:av}),styles:J({get:Tu,getRaw:Ji,set:vo,remove:hi}),attrs:J({get:Bl,set:ms,remove:Ao,copyTo:M}),insert:J({before:Rd,after:wu,afterAll:Un,append:jo,appendAll:Mc,prepend:ec,wrap:tv}),remove:J({unwrap:s1,remove:vr}),create:J({nu:ae.fromTag,clone:l,text:ae.fromText}),query:J({comparePosition:_,prevSibling:jg,nextSibling:rf}),property:J({children:Jn,name:Eo,parent:Fl,document:m,isText:Od,isComment:bo,isElement:fc,isSpecial:F,getLanguage:U,getText:_v,setText:A1,isBoundary:p,isEmptyTag:v,isNonEditable:x}),eq:So,is:F_}};const z1=(l,m,p,v)=>{const x=p[0],_=p.slice(1);return v(l,m,x,_)},em=(l,m,p)=>p.length>0?z1(l,m,p,bh):Q.none(),bh=(l,m,p,v)=>{const x=m(l,p);return Jr(v,(_,M)=>{const F=m(l,M);return zu(l,_,F)},x)},zu=(l,m,p)=>m.bind(v=>p.filter(yn(l.eq,v))),lo=(l,m)=>yn(l.eq,m),rl=(l,m,p,v=An)=>{const x=[m].concat(l.up().all(m)),_=[p].concat(l.up().all(p)),M=ue=>ef(ue,v).fold(()=>ue,Xe=>ue.slice(0,Xe+1)),F=M(x),U=M(_),X=N(F,ue=>Ke(U,lo(l,ue)));return{firstpath:F,secondpath:U,shared:X}},Rw=em,Wl=rl,Nv=Ul(),tm=(l,m)=>Rw(Nv,(p,v)=>l(v),m),Bv=(l,m,p)=>Wl(Nv,l,m,p),$v=l=>Kt(l,"table"),Ur=(l,m,p)=>{const v=x=>_=>p!==void 0&&p(_)||So(_,x);return So(l,m)?Q.some({boxes:Q.some([l]),start:l,finish:m}):$v(l).bind(x=>$v(m).bind(_=>{if(So(x,_))return Q.some({boxes:Ee(x,l,m),start:l,finish:m});if(ev(x,_)){const M=Vt(m,"td,th",v(x)),F=M.length>0?M[M.length-1]:m;return Q.some({boxes:Sf(x,l,x,m,_),start:l,finish:F})}else if(ev(_,x)){const M=Vt(l,"td,th",v(_)),F=M.length>0?M[M.length-1]:l;return Q.some({boxes:Sf(_,l,x,m,_),start:l,finish:F})}else return Bv(l,m).shared.bind(M=>Ys(M,"table",p).bind(F=>{const U=Vt(m,"td,th",v(F)),X=U.length>0?U[U.length-1]:m,ue=Vt(l,"td,th",v(F)),Pe=ue.length>0?ue[ue.length-1]:l;return Q.some({boxes:Sf(F,l,x,m,_),start:Pe,finish:X})}))}))},xf=(l,m)=>{const p=Na(l,m);return p.length>0?Q.some(p):Q.none()},nk=(l,m)=>N(l,p=>gc(p,m)),Uu=(l,m,p)=>gi(l,m).bind(v=>gi(l,p).bind(x=>tm($v,[v,x]).map(_=>({first:v,last:x,table:_})))),ok=(l,m)=>Kt(l,"table").bind(p=>gi(p,m).bind(v=>Ur(v,l).bind(x=>x.boxes.map(_=>({boxes:_,start:x.start,finish:x.finish}))))),nm=(l,m,p,v,x)=>nk(l,x).bind(_=>Pv(_,m,p).bind(M=>ok(M,v))),U1=(l,m)=>xf(l,m),sk=(l,m,p)=>Uu(l,m,p).bind(v=>{const x=U=>So(l,U),_="thead,tfoot,tbody,table",M=Kt(v.first,_,x),F=Kt(v.last,_,x);return M.bind(U=>F.bind(X=>So(U,X)?Ow(v.table,v.first,v.last):Q.none()))}),vh=hn,Ei=l=>{const m=(v,x)=>Rc(v,x).exists(_=>parseInt(_,10)>1),p=v=>m(v,"rowspan")||m(v,"colspan");return l.length>0&&wo(l,p)?Q.some(l):Q.none()},Ar=(l,m,p)=>m.length<=1?Q.none():sk(l,p.firstSelectedSelector,p.lastSelectedSelector).map(v=>({bounds:v,cells:m})),$e="data-mce-selected",Ef="td["+$e+"],th["+$e+"]",Ls="["+$e+"]",Fv="data-mce-first-selected",Iv="td["+Fv+"],th["+Fv+"]",Lv="data-mce-last-selected",Yn="td["+Lv+"],th["+Lv+"]",rk=Ls,om={selected:$e,selectedSelector:Ef,firstSelected:Fv,firstSelectedSelector:Iv,lastSelected:Lv,lastSelectedSelector:Yn},Zl=(l,m,p)=>({element:p,mergable:Ar(m,l,om),unmergable:Ei(l),selection:vh(l)}),Tf=(l,m,p)=>({element:l,clipboard:m,generators:p}),Hv=(l,m,p,v)=>({selection:vh(l),clipboard:p,generators:v}),cl=l=>hc(l).bind(m=>U1(m,om.firstSelectedSelector)).fold(J(l),m=>m[0]),Dw=l=>(m,p)=>{const v=Eo(m),x=v==="col"||v==="colgroup"?cl(m):m;return Ys(x,l,p)},ns=Dw("th,td,caption"),W1=Dw("th,td"),In=l=>da(l.model.table.getSelectedCells()),Vv=l=>cs(In(l),m=>gc(m,om.selectedSelector)),Wr=l=>hc(l[0]).map(m=>{const p=jd(m,rk);return Vc(p),[p]}),_f=(l,m)=>Wt(m,p=>l.selection.serializer.serialize(p.dom,{})).join(""),Ti=(l,m)=>{const p=l.getDoc(),v=mi(ae.fromDom(l.getBody())),x=ae.fromTag("div",p);ms(x,"data-mce-bogus","all"),Xs(x,{position:"fixed",left:"-9999999px",top:"0",overflow:"hidden",opacity:"0"});const _=Yi(v);Mc(x,m),jo(_,x);const M=x.dom.innerText;return vr(x),M},zD=(l,m)=>{l.on("BeforeGetContent",p=>{const v=x=>{p.preventDefault(),Wr(x).each(_=>{const M=p.format==="text"?Ti(l,_):_f(l,_);p.content=M})};if(p.selection===!0){const x=Vv(l);x.length>=1&&v(x)}}),l.on("BeforeSetContent",p=>{if(p.selection===!0&&p.paste===!0){const v=In(l);Se(v).each(x=>{hc(x).each(_=>{const M=cs(xw(p.content),U=>Eo(U)!=="meta"),F=Qr("table");if(Is(l)&&M.length===1&&F(M[0])){p.preventDefault();const U=ae.fromDom(l.getDoc()),X=Ua(U),ue=Tf(x,M[0],X);m.pasteCells(_,ue).each(()=>{l.focus()})}})})}})},Z1=(l,m)=>({element:l,offset:m}),ck=(l,m,p)=>l.property().isText(m)&&l.property().getText(m).trim().length===0||l.property().isComment(m)?p(m).bind(v=>ck(l,v,p).orThunk(()=>Q.some(v))):Q.none(),Mw=(l,m)=>l.property().isText(m)?l.property().getText(m).length:l.property().children(m).length,Wa=(l,m)=>{const p=ck(l,m,l.query().prevSibling).getOr(m);if(l.property().isText(p))return Z1(p,Mw(l,p));const v=l.property().children(p);return v.length>0?Wa(l,v[v.length-1]):Z1(p,Mw(l,p))},_i=Wa,Rr=Ul(),kf=l=>_i(Rr,l),j1=(l,m)=>{ca(l)||Te(l).each(v=>{const x=v.value/2;Dn(l,x,v.unit),Dn(m,x,v.unit)})},G1=l=>Wt(l,J(0)),Of=(l,m,p,v,x)=>x(l.slice(0,m)).concat(v).concat(x(l.slice(p))),Wu=l=>(m,p,v,x)=>{if(l(v)){const _=Math.max(x,m[p]-Math.abs(v)),M=Math.abs(_-m[p]);return v>=0?M:-M}else return v},al=Wu(l=>l<0),Af=Wu(Oe),Zu=()=>{const l=(F,U,X,ue,Pe)=>{const Xe=al(F,U,ue,Pe);return Of(F,U,X+1,[Xe,0],G1)},m=(F,U,X,ue)=>{const Pe=(100+X)/100,Xe=Math.max(ue,(F[U]+X)/Pe);return Wt(F,(qe,ze)=>(ze===U?Xe:qe/Pe)-qe)},p=(F,U,X,ue,Pe,Xe)=>Xe?m(F,U,ue,Pe):l(F,U,X,ue,Pe);return{resizeTable:(F,U)=>F(U),clampTableDelta:al,calcLeftEdgeDeltas:p,calcMiddleDeltas:(F,U,X,ue,Pe,Xe,qe)=>p(F,X,ue,Pe,Xe,qe),calcRightEdgeDeltas:(F,U,X,ue,Pe,Xe)=>{if(Xe)return m(F,X,ue,Pe);{const qe=al(F,X,ue,Pe);return G1(F.slice(0,X)).concat([qe])}},calcRedestributedWidths:(F,U,X,ue)=>{if(ue){const Xe=(U+X)/U,qe=Wt(F,ze=>ze/Xe);return{delta:Xe*100-100,newSizes:qe}}else return{delta:X,newSizes:F}}}},jl=()=>{const l=(M,F,U,X,ue)=>{const Pe=X>=0?U:F,Xe=Af(M,Pe,X,ue);return Of(M,F,U+1,[Xe,-Xe],G1)};return{resizeTable:(M,F,U)=>{U&&M(F)},clampTableDelta:(M,F,U,X,ue)=>{if(ue){if(U>=0)return U;{const Pe=De(M,(Xe,qe)=>Xe+qe-X,0);return Math.max(-Pe,U)}}else return al(M,F,U,X)},calcLeftEdgeDeltas:l,calcMiddleDeltas:(M,F,U,X,ue,Pe)=>l(M,U,X,ue,Pe),calcRightEdgeDeltas:(M,F,U,X,ue,Pe)=>{if(Pe)return G1(M);{const Xe=X/M.length;return Wt(M,J(Xe))}},calcRedestributedWidths:(M,F,U,X)=>({delta:0,newSizes:M})}},sm=l=>pn.fromTable(l).grid,yh=Qr("th"),q1=l=>wo(l,m=>yh(m.element)),Pw=(l,m)=>l&&m?"sectionCells":l?"section":"cells",zv=l=>{const m=l.section==="thead",p=gs(Rf(l.cells),"th");return l.section==="tfoot"?{type:"footer"}:m||p?{type:"header",subType:Pw(m,p)}:{type:"body"}},Rf=l=>{const m=cs(l,p=>yh(p.element));return m.length===0?Q.some("td"):m.length===l.length?Q.some("th"):Q.none()},Nw=l=>{const m=Wt(l,x=>zv(x).type),p=rs(m,"header"),v=rs(m,"footer");if(!p&&!v)return Q.some("body");{const x=rs(m,"body");return p&&!x&&!v?Q.some("header"):!p&&!x&&v?Q.some("footer"):Q.none()}},ak=l=>Er(l.all,m=>{const p=zv(m);return p.type==="header"?Q.from(p.subType):Q.none()}),K1=(l,m,p)=>Nc(p(l.element,m),!0,l.isLocked),Uv=(l,m)=>l.section!==m?Il(l.element,l.cells,m,l.isNew):l,Ch=()=>({transformRow:Uv,transformCell:(l,m,p)=>{const v=p(l.element,m),x=Eo(v)!=="td"?nv(v,"td"):v;return Nc(x,l.isNew,l.isLocked)}}),Wv=()=>({transformRow:Uv,transformCell:K1}),Df=()=>({transformRow:(l,m)=>Uv(l,m==="thead"?"tbody":m),transformCell:K1}),Mf={getTableSectionType:(l,m)=>{const p=pn.fromTable(l);switch(ak(p).getOr(m)){case"section":return Ch();case"sectionCells":return Wv();case"cells":return Df()}},section:Ch,sectionCells:Wv,cells:Df,fallback:()=>({transformRow:hn,transformCell:K1})},Za=(l,m,p,v)=>{p===v?Ao(l,m):ms(l,m,p)},wh=(l,m,p)=>{yu(Ll(l,m)).fold(()=>ec(l,p),v=>wu(v,p))},Bw=(l,m)=>{const p=Nd(l,m).getOrThunk(()=>{const v=ae.fromTag(m,Zg(l).dom);return m==="thead"?wh(l,"caption,colgroup",v):m==="colgroup"?wh(l,"caption",v):jo(l,v),v});return Pc(p),p},$w=(l,m)=>{const p=[],v=[],x=qe=>Wt(qe,ze=>{ze.isNew&&p.push(ze.element);const ft=ze.element;return Pc(ft),Be(ze.cells,Re=>{Re.isNew&&v.push(Re.element),Za(Re.element,"colspan",Re.colspan,1),Za(Re.element,"rowspan",Re.rowspan,1),jo(ft,Re.element)}),ft}),_=qe=>Ss(qe,ze=>Wt(ze.cells,ft=>(Za(ft.element,"span",ft.colspan,1),ft.element))),M=(qe,ze)=>{const ft=Bw(l,ze),Ue=(ze==="colgroup"?_:x)(qe);Mc(ft,Ue)},F=qe=>{Nd(l,qe).each(vr)},U=(qe,ze)=>{qe.length>0?M(qe,ze):F(ze)},X=[],ue=[],Pe=[],Xe=[];return Be(m,qe=>{switch(qe.section){case"thead":X.push(qe);break;case"tbody":ue.push(qe);break;case"tfoot":Pe.push(qe);break;case"colgroup":Xe.push(qe);break}}),U(Xe,"colgroup"),U(X,"thead"),U(ue,"tbody"),U(Pe,"tfoot"),{newRows:p,newCells:v}},Fw=l=>Wt(l,m=>{const p=Ma(m.element);return Be(m.cells,v=>{const x=Md(v.element);Za(x,"colspan",v.colspan,1),Za(x,"rowspan",v.rowspan,1),jo(p,x)}),p}),rm=(l,m)=>Wt(l,p=>$c(p,m)),ZD=(l,m)=>l[m],cm=(l,m)=>{if(l.length===0)return 0;const p=l[0];return ef(l,x=>!m(p.element,x.element)).getOr(l.length)},Pf=(l,m,p,v)=>{const x=ZD(l,m),_=x.section==="colgroup",M=cm(x.cells.slice(p),v),F=_?1:cm(rm(l.slice(m),p),v);return{colspan:M,rowspan:F}},Iw=(l,m)=>{const p=Wt(l,x=>Wt(x.cells,An)),v=(x,_,M,F)=>{for(let U=x;U<x+M;U++)for(let X=_;X<_+F;X++)p[U][X]=!0};return Wt(l,(x,_)=>{const M=Ss(x.cells,(F,U)=>{if(p[_][U]===!1){const X=Pf(l,_,U,m);return v(_,U,X.rowspan,X.colspan),[ov(F.element,X.rowspan,X.colspan,F.isNew)]}else return[]});return Pd(x.element,M,x.section,x.isNew)})},Nf=(l,m,p)=>{const v=[];Be(l.colgroups,x=>{const _=[];for(let M=0;M<l.grid.columns;M++){const F=pn.getColumnAt(l,M).map(U=>Nc(U.element,p,!1)).getOrThunk(()=>Nc(m.colGap(),!0,!1));_.push(F)}v.push(Il(x.element,_,"colgroup",p))});for(let x=0;x<l.grid.rows;x++){const _=[];for(let U=0;U<l.grid.columns;U++){const X=pn.getAt(l,x,U).map(ue=>Nc(ue.element,p,ue.isLocked)).getOrThunk(()=>Nc(m.gap(),!0,!1));_.push(X)}const M=l.all[x],F=Il(M.element,_,M.section,p);v.push(F)}return v},ik=(l,m)=>Nf(l,m,!1),Zv=l=>Iw(l,So),Lw=(l,m)=>Er(l.all,p=>N(p.cells,v=>So(m,v.element))),Hw=(l,m,p)=>{const v=Wt(m.selection,_=>$d(_).bind(M=>Lw(l,M)).filter(p)),x=Xi(v);return a1(x.length>0,x)},dr=(l,m,p,v,x)=>(_,M,F,U)=>{const X=pn.fromTable(_),ue=Q.from(U==null?void 0:U.section).getOrThunk(Mf.fallback);return m(X,M).map(Xe=>{const qe=ik(X,F),ze=l(qe,Xe,So,x(F),ue),ft=Vd(ze.grid),Re=Zv(ze.grid);return{info:Xe,grid:Re,cursor:ze.cursor,lockedColumns:ft}}).bind(Xe=>{const qe=$w(_,Xe.grid),ze=Q.from(U==null?void 0:U.sizing).getOrThunk(()=>uh.getTableSize(_)),ft=Q.from(U==null?void 0:U.resize).getOrThunk(jl);return p(_,Xe.grid,Xe.info,{sizing:ze,resize:ft,section:ue}),v(_),Ao(_,Hd),Xe.lockedColumns.length>0&&ms(_,Hd,Xe.lockedColumns.join(",")),Q.some({cursor:Xe.cursor,newRows:qe.newRows,newCells:qe.newCells})})},jD=(l,m)=>$d(m.element).bind(p=>Lw(l,p).map(v=>({...v,generators:m.generators,clipboard:m.clipboard}))),ju=(l,m)=>Hw(l,m,Oe).map(p=>({cells:p,generators:m.generators,clipboard:m.clipboard})),lk=(l,m)=>m.mergable,Gl=(l,m)=>m.unmergable,yc=(l,m)=>Hw(l,m,Oe),ki=(l,m)=>Hw(l,m,p=>!p.isLocked),am=(l,m)=>Lw(l,m).exists(p=>!p.isLocked),Vw=(l,m)=>wo(m,p=>am(l,p)),Sh=(l,m)=>lk(l,m).filter(p=>Vw(l,p.cells)),Y1=(l,m)=>Gl(l,m).filter(p=>Vw(l,p)),Gu=(l,m,p,v)=>{const x=co(l).rows;if(x.length===0)return l;for(let _=m.startRow;_<=m.finishRow;_++)for(let M=m.startCol;M<=m.finishCol;M++){const F=x[_],U=$c(F,M).isLocked;es(F,M,Nc(v(),!1,U))}return l},jv=(l,m,p,v)=>{const x=co(l).rows;let _=!0;for(let M=0;M<x.length;M++)for(let F=0;F<$a(x[0]);F++){const U=x[M],X=$c(U,F),ue=X.element,Pe=p(ue,m);Pe&&!_?es(U,F,Nc(v(),!0,X.isLocked)):Pe&&(_=!1)}return l},Oi=(l,m)=>De(l,(p,v)=>Ke(p,x=>m(x.element,v.element))?p:p.concat([v]),[]),il=(l,m,p,v)=>(m>0&&m<l[0].cells.length&&Be(l,x=>{const _=x.cells[m-1];let M=0;const F=v();for(;x.cells.length>m+M&&p(_.element,x.cells[m+M].element);)es(x,m+M,Nc(F,!0,x.cells[m+M].isLocked)),M++}),l),uk=(l,m,p,v)=>{const x=co(l).rows;if(m>0&&m<x.length){const _=x[m-1].cells,M=Oi(_,p);Be(M,F=>{let U=Q.none();for(let X=m;X<x.length;X++)for(let ue=0;ue<$a(x[0]);ue++){const Pe=x[X],Xe=$c(Pe,ue);p(Xe.element,F.element)&&(U.isNone()&&(U=Q.some(v())),U.each(ze=>{es(Pe,ue,Nc(ze,!0,Xe.isLocked))}))}})}return l},ks=l=>{const m=_=>_(l),p=J(l),v=()=>x,x={tag:!0,inner:l,fold:(_,M)=>M(l),isValue:Oe,isError:An,map:_=>X1.value(_(l)),mapError:v,bind:m,exists:m,forall:m,getOr:p,or:v,getOrThunk:p,orThunk:v,getOrDie:p,each:_=>{_(l)},toOptional:()=>Q.some(l)};return x},xh=l=>{const m=()=>p,p={tag:!1,inner:l,fold:(v,x)=>v(l),isValue:An,isError:Oe,map:m,mapError:v=>X1.error(v(l)),bind:m,exists:An,forall:Oe,getOr:hn,or:hn,getOrThunk:ss,orThunk:ss,getOrDie:an(String(l)),each:He,toOptional:Q.none};return p},X1={value:ks,error:xh,fromOption:(l,m)=>l.fold(()=>xh(m),ks)},Gv=(l,m,p)=>{if(l.row>=m.length||l.column>$a(m[0]))return X1.error("invalid start address out of table bounds, row: "+l.row+", column: "+l.column);const v=m.slice(l.row),x=v[0].cells.slice(l.column),_=$a(p[0]),M=p.length;return X1.value({rowDelta:v.length-M,colDelta:x.length-_})},im=(l,m)=>{const p=$a(l[0]),v=$a(m[0]);return{rowDelta:0,colDelta:p-v}},qu=(l,m)=>{const p=l.length,v=m.length;return{rowDelta:p-v,colDelta:0}},ja=(l,m,p,v)=>{const x=m.section==="colgroup"?p.col:p.cell;return Wo(l,_=>Nc(x(),!0,v(_)))},fa=(l,m,p,v)=>{const x=l[l.length-1];return l.concat(Wo(m,()=>{const _=x.section==="colgroup"?p.colgroup:p.row,M=vi(x,_,hn),F=ja(M.cells.length,M,p,U=>Ms(v,U.toString()));return Qg(M,F)}))},zw=(l,m,p,v)=>Wt(l,x=>{const _=ja(m,x,p,An);return gv(x,v,_)}),dk=(l,m,p)=>Wt(l,v=>De(p,(x,_)=>{const M=ja(1,v,m,Oe)[0];return tn(x,_,M)},v)),ll=(l,m,p)=>{const v=m.colDelta<0?zw:hn,x=m.rowDelta<0?fa:hn,_=Vd(l),M=$a(l[0]),F=Ke(_,ue=>ue===M-1),U=v(l,Math.abs(m.colDelta),p,F?M-1:M),X=Vd(U);return x(U,Math.abs(m.rowDelta),p,zt(X,Oe))},ql=(l,m,p,v)=>{const x=$c(l[m],p),_=yn(v,x.element),M=l[m];return l.length>1&&$a(M)>1&&(p>0&&_(bc(M,p-1))||p<M.cells.length-1&&_(bc(M,p+1))||m>0&&_(bc(l[m-1],p))||m<l.length-1&&_(bc(l[m+1],p)))},J1=(l,m,p,v,x,_)=>{const M=l.row,F=l.column,U=p.length,X=$a(p[0]),ue=M+U,Pe=F+X+_.length,Xe=zt(_,Oe);for(let qe=M;qe<ue;qe++){let ze=0;for(let ft=F;ft<Pe;ft++){if(Xe[ft]){ze++;continue}ql(m,qe,ft,x)&&jv(m,bc(m[qe],ft),x,v.cell);const Re=ft-F-ze,Ue=$c(p[qe-M],Re),Ze=Ue.element,Ft=v.replace(Ze);es(m[qe],ft,Nc(Ft,!0,Ue.isLocked))}}return m},bn=(l,m,p)=>{const v=$a(m[0]),x=co(m).cols.length+l.row,_=Wo(v-l.column,F=>F+l.column),M=N(_,F=>wo(p,U=>U!==F)).getOr(v-1);return{row:x,column:M}},Cr=(l,m,p)=>cs(p,v=>v>=l.column&&v<=$a(m[0])+l.column),lm=(l,m,p,v,x)=>{const _=Vd(m),M=bn(l,m,_),F=co(p).rows,U=Cr(M,F,_);return Gv(M,m,F).map(ue=>{const Pe={...ue,colDelta:ue.colDelta-U.length},Xe=ll(m,Pe,v),qe=Vd(Xe),ze=Cr(M,F,qe);return J1(M,Xe,F,v,x,ze)})},Bf=(l,m,p,v,x)=>{il(m,l,x,v.cell);const _=qu(p,m),M=ll(p,_,v),F=qu(m,M),U=ll(m,F,v);return Wt(U,(X,ue)=>gv(X,l,M[ue].cells))},Qn=(l,m,p,v,x)=>{uk(m,l,x,v.cell);const _=Vd(m),M=im(m,p),F={...M,colDelta:M.colDelta-_.length},U=ll(m,F,v),{cols:X,rows:ue}=co(U),Pe=Vd(U),Xe=im(p,m),qe={...Xe,colDelta:Xe.colDelta+Pe.length},ze=dk(p,v,Pe),ft=ll(ze,qe,v);return[...X,...ue.slice(0,l),...ft,...ue.slice(l,ue.length)]},um=(l,m,p,v)=>vi(l,x=>v(x,p),m),Kl=(l,m,p,v,x)=>{const{rows:_,cols:M}=co(l),F=_.slice(0,m),U=_.slice(m),X=um(_[p],(ue,Pe)=>m>0&&m<_.length&&v(bc(_[m-1],Pe),bc(_[m],Pe))?$c(_[m],Pe):Nc(x(ue.element,v),!0,ue.isLocked),v,x);return[...M,...F,X,...U]},Uw=(l,m,p,v,x,_,M)=>{if(p==="colgroup"||!v){const F=$c(l,x);return Nc(M(F.element,_),!0,!1)}else return $c(l,m)},mk=(l,m,p,v,x)=>Wt(l,_=>{const M=m>0&&m<$a(_)&&v(bc(_,m-1),bc(_,m)),F=Uw(_,m,_.section,M,p,v,x);return tn(_,m,F)}),Ww=(l,m)=>Ss(l,p=>{const v=p.cells,x=Jr(m,(_,M)=>M>=0&&M<_.length?_.slice(0,M).concat(_.slice(M+1)):_,v);return x.length>0?[Il(p.element,x,p.section,p.isNew)]:[]}),eo=(l,m,p)=>{const{rows:v,cols:x}=co(l);return[...x,...v.slice(0,m),...v.slice(p+1)]},Eh=(l,m,p,v)=>bc(l[m],p)!==void 0&&m>0&&v(bc(l[m-1],p),bc(l[m],p)),fk=(l,m,p)=>m>0&&p(bc(l,m-1),bc(l,m)),Zw=(l,m,p,v)=>Eh(l,m,p,v)||fk(l[m],p,v),dm=(l,m)=>wo(m,hn)&&q1(l.cells)?Oe:(v,x,_)=>!(Eo(v.element)==="th"&&m[_]),Ga=(l,m)=>wo(m,hn)&&q1(l)?Oe:(v,x,_)=>!(Eo(v.element)==="th"&&m[x]),Th=(l,m,p,v)=>{const x=M=>M==="row"?aa(m):ca(m),_=M=>x(M)?`${M}group`:M;return l?yh(m)?_(p):null:v&&yh(m)?_(p==="row"?"col":"row"):null},Yl=(l,m)=>(p,v,x)=>Q.some(Th(l,p.element,"col",m[x])),ut=(l,m)=>(p,v)=>Q.some(Th(l,p.element,"row",m[v])),jw=(l,m,p)=>Nc(p(l.element,m),!0,l.isLocked),Q1=(l,m,p,v,x,_,M)=>{const F=U=>Ke(m,X=>p(U.element,X.element));return Wt(l,(U,X)=>v1(U,(ue,Pe)=>{if(F(ue)){const Xe=M(ue,X,Pe)?x(ue,p,v):ue;return _(Xe,X,Pe).each(qe=>{o1(Xe.element,{scope:Q.from(qe)})}),Xe}else return ue}))},Gw=(l,m,p)=>Ss(l,(v,x)=>Zw(l,x,m,p)?[]:[$c(v,m)]),qw=(l,m,p)=>{const v=l[m];return Ss(v.cells,(x,_)=>Zw(l,m,_,p)?[]:[x])},qv=(l,m,p,v,x)=>{const _=co(l).rows,M=Ss(m,ue=>Gw(_,ue,v)),F=Wt(_,ue=>q1(ue.cells)),U=Ga(M,F),X=ut(p,F);return Q1(l,M,v,x,jw,X,U)},Kv=(l,m,p,v,x,_,M)=>{const{cols:F,rows:U}=co(l),X=U[m[0]],ue=Ss(m,Re=>qw(U,Re,x)),Pe=Wt(X.cells,(Re,Ue)=>q1(Gw(U,Ue,x))),Xe=[...U];Be(m,Re=>{Xe[Re]=M.transformRow(U[Re],p)});const qe=[...F,...Xe],ze=dm(X,Pe),ft=Yl(v,Pe);return Q1(qe,ue,x,_,M.transformCell,ft,ze)},$f=(l,m,p,v)=>{const x=co(l).rows,_=Wt(m,M=>$c(x[M.row],M.column));return Q1(l,_,p,v,jw,Q.none,Oe)},mm={generate:l=>{if(!At(l))throw new Error("cases must be an array");if(l.length===0)throw new Error("there must be at least one case");const m=[],p={};return Be(l,(v,x)=>{const _=Rt(v);if(_.length!==1)throw new Error("one and only one name per case");const M=_[0],F=v[M];if(p[M]!==void 0)throw new Error("duplicate key detected:"+M);if(M==="cata")throw new Error("cannot have a case named cata (sorry)");if(!At(F))throw new Error("case arguments must be an array");m.push(M),p[M]=(...U)=>{const X=U.length;if(X!==F.length)throw new Error("Wrong number of arguments to case "+M+". Expected "+F.length+" ("+F+"), got "+X);return{fold:(...Pe)=>{if(Pe.length!==l.length)throw new Error("Wrong number of arguments to fold. Expected "+l.length+", got "+Pe.length);return Pe[x].apply(null,U)},match:Pe=>{const Xe=Rt(Pe);if(m.length!==Xe.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+`
Actual: `+Xe.join(","));if(!wo(m,ze=>rs(Xe,ze)))throw new Error("Not all branches were specified when using match. Specified: "+Xe.join(", ")+`
Required: `+m.join(", "));return Pe[M].apply(null,U)},log:Pe=>{console.log(Pe,{constructors:m,constructor:M,params:U})}}}}),p}},Ff={...mm.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},tb=(l,m)=>l.length===0?Ff.none():l.length===1?Ff.only(0):m===0?Ff.left(0,1):m===l.length-1?Ff.right(m-1,m):m>0&&m<l.length-1?Ff.middle(m-1,m,m+1):Ff.none(),qa=(l,m,p,v,x)=>{const _=l.slice(0),M=tb(l,m),F=J(Wt(_,J(0))),U=Xe=>v.singleColumnWidth(_[Xe],p),X=(Xe,qe)=>x.calcLeftEdgeDeltas(_,Xe,qe,p,v.minCellWidth(),v.isRelative),ue=(Xe,qe,ze)=>x.calcMiddleDeltas(_,Xe,qe,ze,p,v.minCellWidth(),v.isRelative),Pe=(Xe,qe)=>x.calcRightEdgeDeltas(_,Xe,qe,p,v.minCellWidth(),v.isRelative);return M.fold(F,U,X,ue,Pe)},gk=(l,m,p)=>{let v=0;for(let x=l;x<m;x++)v+=p[x]!==void 0?p[x]:0;return v},nb=(l,m)=>{const p=pn.justCells(l);return Wt(p,v=>{const x=gk(v.column,v.column+v.colspan,m);return{element:v.element,width:x,colspan:v.colspan}})},ob=(l,m)=>{const p=pn.justColumns(l);return Wt(p,(v,x)=>({element:v.element,width:m[x],colspan:v.colspan}))},hk=(l,m)=>Wt(l.all,(p,v)=>({element:p.element,height:m[v]})),pk=l=>Jr(l,(m,p)=>m+p,0),Kw=(l,m)=>pn.hasColumns(l)?ob(l,m):nb(l,m),kh=(l,m,p)=>{const v=Kw(l,m);Be(v,x=>{p.setElementWidth(x.element,x.width)})},Yw=(l,m,p,v,x)=>{const _=pn.fromTable(l),M=x.getCellDelta(m),F=x.getWidths(_,x),U=p===_.grid.columns-1,X=v.clampTableDelta(F,p,M,x.minCellWidth(),U),ue=qa(F,p,X,x,v),Pe=Wt(ue,(Xe,qe)=>Xe+F[qe]);kh(_,Pe,x),v.resizeTable(x.adjustTableWidth,X,U)},Yv=(l,m,p)=>{const v=pn.fromTable(l),x=Ev(v,l),_=Wt(x,(U,X)=>p===X?Math.max(m+U,m1()):U),M=hk(v,_);Be(M,U=>{zl(U.element,U.height)}),Be(pn.justCells(v),U=>{ch(U.element)});const F=pk(_);zl(l,F)},bk=(l,m,p,v,x)=>{const _=pn.generate(m),M=v.getWidths(_,v),F=v.pixelWidth(),{newSizes:U,delta:X}=x.calcRedestributedWidths(M,F,p.pixelDelta,v.isRelative);kh(_,U,v),v.adjustTableWidth(X)},Oh=(l,m,p,v)=>{const x=pn.generate(m),_=v.getWidths(x,v);kh(x,_,v)},If=l=>De(l,(p,v)=>Ke(p,_=>_.column===v.column)?p:p.concat([v]),[]).sort((p,v)=>p.column-v.column),Ku=Qr("col"),sb=Qr("colgroup"),Xv=l=>Eo(l)==="tr"||sb(l),rb=l=>{const m=Lr(l,"colspan",1),p=Lr(l,"rowspan",1);return{element:l,colspan:m,rowspan:p}},Jv=(l,m=rb)=>{const p=F=>Ku(F.element)?l.col(F):l.cell(F),v=F=>sb(F.element)?l.colgroup(F):l.row(F),x=F=>{if(Xv(F))return v({element:F});{const U=F,X=p(m(U));return _=Q.some({item:U,replacement:X}),X}};let _=Q.none();return{getOrInit:(F,U)=>_.fold(()=>x(F),X=>U(F,X.item)?X.replacement:x(F))}},Qv=l=>m=>{const p=[],v=(M,F)=>N(p,U=>F(U.item,M)),x=M=>{const F=l==="td"?{scope:null}:{},U=m.replace(M,l,F);return p.push({item:M,sub:U}),U};return{replaceOrInit:(M,F)=>{if(Xv(M)||Ku(M))return M;{const U=M;return v(U,F).fold(()=>x(U),X=>F(M,X.item)?X.sub:x(U))}}}},ey=l=>Rc(l,"scope").map(m=>m.substr(0,3)),Cc={modification:Jv,transform:Qv,merging:l=>({unmerge:v=>{const x=ey(v);return x.each(_=>ms(v,"scope",_)),()=>{const _=l.cell({element:v,colspan:1,rowspan:1});return hi(_,"width"),hi(v,"width"),x.each(M=>ms(_,"scope",M)),_}},merge:v=>{const x=()=>{const _=Xi(Wt(v,ey));if(_.length===0)return Q.none();{const M=_[0],F=["row","col"];return Ke(_,X=>X!==M&&rs(F,X))?Q.none():Q.from(M)}};return hi(v[0],"width"),x().fold(()=>Ao(v[0],"scope"),_=>ms(v[0],"scope",_+"group")),J(v[0])}})},fm=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Jw=(l,m)=>{const p=l.property().name(m);return rs(["ol","ul"],p)},Yu=(l,m)=>{const p=l.property().name(m);return rs(fm,p)},gm=(l,m)=>rs(["br","img","hr","input"],l.property().name(m)),ty=Ul(),Ce=l=>Yu(ty,l),Ka=l=>Jw(ty,l),hm=l=>gm(ty,l),vk=l=>{const m=Qr("br"),p=U=>wo(U,X=>m(X)||Od(X)&&_v(X).trim().length===0),v=U=>Eo(U)==="li"||Ve(U,Ka).isSome(),x=U=>rf(U).map(X=>Ce(X)?!0:hm(X)?Eo(X)!=="img":!1).getOr(!1),_=U=>Ov(U).bind(X=>{const ue=x(X);return Fl(X).map(Pe=>ue===!0||v(Pe)||m(X)||Ce(Pe)&&!So(U,Pe)?[]:[ae.fromTag("br")])}).getOr([]),F=(()=>{const U=Ss(l,X=>{const ue=Jn(X);return p(ue)?[]:ue.concat(_(X))});return U.length===0?[ae.fromTag("br")]:U})();Pc(l[0]),Mc(l[0],F)},Ah=l=>Hu(l,!0),ga=l=>{_u(l).length===0&&vr(l)},Lf=(l,m)=>({grid:l,cursor:m}),Qw=l=>Er(l,m=>Er(m.cells,p=>{const v=p.element;return a1(Ah(v),v)})),eS=(l,m,p)=>{var v,x;const _=co(l).rows;return Q.from((x=(v=_[m])===null||v===void 0?void 0:v.cells[p])===null||x===void 0?void 0:x.element).filter(Ah).orThunk(()=>Qw(_))},wr=(l,m,p)=>{const v=eS(l,m,p);return Lf(l,v)},cb=l=>De(l,(p,v)=>Ke(p,_=>_.row===v.row)?p:p.concat([v]),[]).sort((p,v)=>p.row-v.row),tS=(l,m,p,v)=>{const x=m[0].row,_=cb(m),M=Jr(_,(F,U)=>({grid:Kl(F.grid,x,U.row+F.delta,p,v.getOrInit),delta:F.delta+1}),{grid:l,delta:0}).grid;return wr(M,x,m[0].column)},yk=(l,m,p,v)=>{const x=cb(m),_=x[x.length-1],M=_.row+_.rowspan,F=Jr(x,(U,X)=>Kl(U,M,X.row,p,v.getOrInit),l);return wr(F,M,m[0].column)},nS=(l,m,p,v)=>{const x=m.details,_=If(x),M=_[0].column,F=Jr(_,(U,X)=>({grid:mk(U.grid,M,X.column+U.delta,p,v.getOrInit),delta:U.delta+1}),{grid:l,delta:0}).grid;return wr(F,x[0].row,M)},Ck=(l,m,p,v)=>{const x=m.details,_=x[x.length-1],M=_.column+_.colspan,F=If(x),U=Jr(F,(X,ue)=>mk(X,M,ue.column,p,v.getOrInit),l);return wr(U,x[0].row,M)},oS=(l,m,p,v)=>{const x=If(m),_=Wt(x,F=>F.column),M=qv(l,_,!0,p,v.replaceOrInit);return wr(M,m[0].row,m[0].column)},wk=(l,m,p,v)=>{const x=$f(l,m,p,v.replaceOrInit);return wr(x,m[0].row,m[0].column)},Sk=(l,m,p,v)=>{const x=If(m),_=Wt(x,F=>F.column),M=qv(l,_,!1,p,v.replaceOrInit);return wr(M,m[0].row,m[0].column)},sS=(l,m,p,v)=>{const x=$f(l,m,p,v.replaceOrInit);return wr(x,m[0].row,m[0].column)},Hf=(l,m)=>(p,v,x,_,M)=>{const F=cb(v),U=Wt(F,ue=>ue.row),X=Kv(p,U,l,m,x,_.replaceOrInit,M);return wr(X,v[0].row,v[0].column)},xk=Hf("thead",!0),rS=Hf("tbody",!1),Ek=Hf("tfoot",!1),xo=(l,m,p,v)=>{const x=If(m.details),_=Ww(l,Wt(x,F=>F.column)),M=_.length>0?_[0].cells.length-1:0;return wr(_,x[0].row,Math.min(x[0].column,M))},ny=(l,m,p,v)=>{const x=cb(m),_=eo(l,x[0].row,x[x.length-1].row),M=Math.max(co(_).rows.length-1,0);return wr(_,Math.min(m[0].row,M),m[0].column)},cS=(l,m,p,v)=>{const x=m.cells;vk(x);const _=Gu(l,m.bounds,p,v.merge(x));return Lf(_,Q.from(x[0]))},aS=(l,m,p,v)=>{const _=Jr(m,(M,F)=>jv(M,F,p,v.unmerge(F)),l);return Lf(_,Q.from(m[0]))},oy=(l,m,p,v)=>{const _=((U,X)=>{const ue=pn.fromTable(U);return Nf(ue,X,!0)})(m.clipboard,m.generators),M=r1(m.row,m.column);return lm(M,l,_,m.generators,p).fold(()=>Lf(l,Q.some(m.element)),U=>wr(U,m.row,m.column))},Os=(l,m,p)=>{const v=h1(l,p.section),x=pn.generate(v);return Nf(x,m,!0)},zc=(l,m,p,v)=>{const x=co(l).rows,_=m.cells[0].column,M=x[m.cells[0].row],F=Os(m.clipboard,m.generators,M),U=Bf(_,l,F,m.generators,p);return wr(U,m.cells[0].row,m.cells[0].column)},iS=(l,m,p,v)=>{const x=co(l).rows,_=m.cells[m.cells.length-1].column+m.cells[m.cells.length-1].colspan,M=x[m.cells[0].row],F=Os(m.clipboard,m.generators,M),U=Bf(_,l,F,m.generators,p);return wr(U,m.cells[0].row,_)},sy=(l,m,p,v)=>{const x=co(l).rows,_=m.cells[0].row,M=x[_],F=Os(m.clipboard,m.generators,M),U=Qn(_,l,F,m.generators,p);return wr(U,m.cells[0].row,m.cells[0].column)},ry=(l,m,p,v)=>{const x=co(l).rows,_=m.cells[m.cells.length-1].row+m.cells[m.cells.length-1].rowspan,M=x[m.cells[0].row],F=Os(m.clipboard,m.generators,M),U=Qn(_,l,F,m.generators,p);return wr(U,_,m.cells[0].column)},Tk=(l,m)=>{const p=pn.fromTable(l);return yc(p,m).bind(x=>{const _=x[x.length-1],M=x[0].column,F=_.column+_.colspan,U=po(Wt(p.all,X=>cs(X.cells,ue=>ue.column>=M&&ue.column<F)));return Rf(U)}).getOr("")},ab=(l,m)=>{const p=pn.fromTable(l);return yc(p,m).bind(Rf).getOr("")},lS=(l,m)=>{const p=pn.fromTable(l);return yc(p,m).bind(x=>{const _=x[x.length-1],M=x[0].row,F=_.row+_.rowspan,U=p.all.slice(M,F);return Nw(U)}).getOr("")},Rh=(l,m,p,v)=>Oh(l,m,p,v.sizing),uS=(l,m,p,v)=>bk(l,m,p,v.sizing,v.resize),hs=(l,m)=>Ke(m,p=>p.column===0&&p.isLocked),_k=(l,m)=>Ke(m,p=>p.column+p.colspan>=l.grid.columns&&p.isLocked),ha=(l,m)=>{const p=eh(l),v=If(m);return De(v,(x,_)=>{const F=p[_.column].map(Ld).getOr(0);return x+F},0)},go=l=>(m,p)=>yc(m,p).filter(v=>!(l?hs:_k)(m,v)).map(v=>({details:v,pixelDelta:ha(m,v)})),ul=(l,m)=>ki(l,m).map(p=>({details:p,pixelDelta:-ha(l,p)})),Vf=l=>(m,p)=>ju(m,p).filter(v=>!(l?hs:_k)(m,v.cells)),cy=Cc.transform("th"),Dh=Cc.transform("td"),dS=dr(tS,yc,He,He,Cc.modification),Xu=dr(yk,yc,He,He,Cc.modification),mr=dr(nS,go(!0),uS,He,Cc.modification),dl=dr(Ck,go(!1),uS,He,Cc.modification),mS=dr(xo,ul,uS,ga,Cc.modification),kk=dr(ny,yc,He,ga,Cc.modification),ay=dr(oS,ki,He,He,cy),ib=dr(Sk,ki,He,He,Dh),iy=dr(xk,ki,He,He,cy),ly=dr(rS,ki,He,He,Dh),lb=dr(Ek,ki,He,He,Dh),dt=dr(wk,ki,He,He,cy),Mh=dr(sS,ki,He,He,Dh),uy=dr(cS,Sh,Rh,He,Cc.merging),fS=dr(aS,Y1,Rh,He,Cc.merging),Ok=dr(oy,jD,Rh,He,Cc.modification),fr=dr(zc,Vf(!0),He,He,Cc.modification),gS=dr(iS,Vf(!1),He,He,Cc.modification),Ju=dr(sy,ju,He,He,Cc.modification),hS=dr(ry,ju,He,He,Cc.modification),dy=Tk,pS=ab,gr=lS,Qu=(l,m)=>l.dispatch("NewRow",{node:m}),my=(l,m)=>l.dispatch("NewCell",{node:m}),pm=(l,m,p)=>{l.dispatch("TableModified",{...p,table:m})},Ak=(l,m,p,v,x)=>{l.dispatch("TableSelectionChange",{cells:m,start:p,finish:v,otherCells:x})},ps=l=>{l.dispatch("TableSelectionClear")},bs=(l,m,p,v,x)=>{l.dispatch("ObjectResizeStart",{target:m,width:p,height:v,origin:x})},or=(l,m,p,v,x)=>{l.dispatch("ObjectResized",{target:m,width:p,height:v,origin:x})},vs={structure:!1,style:!0},Nn={structure:!0,style:!1},is={structure:!0,style:!0},ub=(l,m)=>xi(l)?uh.percentageSize(m):nr(l)?uh.pixelSize(m):uh.getTableSize(m),fy=(l,m,p)=>{const v=ys=>Eo(rc(ys))==="table",x=ys=>!v(l)||sm(ys).rows>1,_=ys=>!v(l)||sm(ys).columns>1,M=Fu(l),F=Xd(l)?He:j1,U=ys=>{switch(Yo(l)){case"section":return Mf.section();case"sectionCells":return Mf.sectionCells();case"cells":return Mf.cells();default:return Mf.getTableSectionType(ys,"section")}},X=(ys,Jb)=>Jb.cursor.fold(()=>{const nu=_u(ys);return Se(nu).filter(Lo).map(nn=>{p.clearSelectedCells(ys.dom);const xr=l.dom.createRng();return xr.selectNode(nn.dom),l.selection.setRng(xr),ms(nn,"data-mce-selected","1"),xr})},nu=>{const nn=kf(nu),xr=l.dom.createRng();return xr.setStart(nn.element.dom,nn.offset),xr.setEnd(nn.element.dom,nn.offset),l.selection.setRng(xr),p.clearSelectedCells(ys.dom),Q.some(xr)}),ue=(ys,Jb,nu,nn)=>(xr,Qb,e0=!1)=>{Vc(xr);const _x=ae.fromDom(l.getDoc()),fd=za(nu,_x,M),$m={sizing:ub(l,xr),resize:Xd(l)?Zu():jl(),section:U(xr)};return Jb(xr)?ys(xr,Qb,fd,$m).bind(t0=>{m.refresh(xr.dom),Be(t0.newRows,ap=>{Qu(l,ap.dom)}),Be(t0.newCells,ap=>{my(l,ap.dom)});const A4=X(xr,t0);return Lo(xr)&&(Vc(xr),e0||pm(l,xr.dom,nn)),A4.map(ap=>({rng:ap,effect:nn}))}):Q.none()},Pe=ue(kk,x,He,Nn),Xe=ue(mS,_,He,Nn),qe=ue(dS,Oe,He,Nn),ze=ue(Xu,Oe,He,Nn),ft=ue(mr,Oe,F,Nn),Re=ue(dl,Oe,F,Nn),Ue=ue(uy,Oe,He,Nn),Ze=ue(fS,Oe,He,Nn),Ft=ue(fr,Oe,He,Nn),gn=ue(gS,Oe,He,Nn),Ln=ue(Ju,Oe,He,Nn),to=ue(hS,Oe,He,Nn),yo=ue(Ok,Oe,He,is),qc=ue(dt,Oe,He,Nn),Pi=ue(Mh,Oe,He,Nn),Bm=ue(ay,Oe,He,Nn),hl=ue(ib,Oe,He,Nn),Kn=ue(iy,Oe,He,Nn),jr=ue(ly,Oe,He,Nn),Gr=ue(lb,Oe,He,Nn);return{deleteRow:Pe,deleteColumn:Xe,insertRowsBefore:qe,insertRowsAfter:ze,insertColumnsBefore:ft,insertColumnsAfter:Re,mergeCells:Ue,unmergeCells:Ze,pasteColsBefore:Ft,pasteColsAfter:gn,pasteRowsBefore:Ln,pasteRowsAfter:to,pasteCells:yo,makeCellsHeader:qc,unmakeCellsHeader:Pi,makeColumnsHeader:Bm,unmakeColumnsHeader:hl,makeRowsHeader:Kn,makeRowsBody:jr,makeRowsFooter:Gr,getTableRowType:gr,getTableCellType:pS,getTableColType:dy}},gy=(l,m,p)=>{const v=Lr(l,m,1);p===1||v<=1?Ao(l,m):ms(l,m,Math.min(p,v))},hy=(l,m)=>p=>{const v=p.column+p.colspan-1,x=p.column;return v>=l&&x<m},bS=(l,m,p)=>{if(pn.hasColumns(l)){const v=cs(pn.justColumns(l),hy(m,p)),x=Wt(v,M=>{const F=Md(M.element);return gy(F,"span",p-m),F}),_=ae.fromTag("colgroup");return Mc(_,x),[_]}else return[]},vS=(l,m,p)=>Wt(l.all,v=>{const x=cs(v.cells,hy(m,p)),_=Wt(x,F=>{const U=Md(F.element);return gy(U,"colspan",p-m),U}),M=ae.fromTag("tr");return Mc(M,_),M}),Ph=(l,m)=>{const p=pn.fromTable(l);return ki(p,m).map(x=>{const _=x[x.length-1],M=x[0].column,F=_.column+_.colspan,U=bS(p,M,F),X=vS(p,M,F);return[...U,...X]})},db=(l,m,p)=>{const v=pn.fromTable(l);return yc(v,m).bind(_=>{const M=Nf(v,p,!1),U=co(M).rows.slice(_[0].row,_[_.length-1].row+_[_.length-1].rowspan),X=Ss(U,Pe=>{const Xe=cs(Pe.cells,qe=>!qe.isLocked);return Xe.length>0?[{...Pe,cells:Xe}]:[]}),ue=Zv(X);return a1(ue.length>0,ue)}).map(_=>Fw(_))},Nh=mm.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),yS=(l,m,p)=>{const v=p.substring(0,p.length-l.length),x=parseFloat(v);return v===x.toString()?m(x):Nh.invalid(p)},bm={...Nh,from:l=>Eu(l,"%")?yS("%",Nh.percent,l):Eu(l,"px")?yS("px",Nh.pixels,l):Nh.invalid(l)},wc=(l,m)=>Wt(l,p=>bm.from(p).fold(()=>p,x=>x/m*100+"%",x=>x+"%")),Rk=(l,m,p)=>{const v=p/m;return Wt(l,x=>bm.from(x).fold(()=>x,M=>M*v+"px",M=>M/100*p+"px"))},Dk=(l,m)=>{const p=l.fold(()=>J(""),v=>{const x=v/m;return J(x+"px")},()=>{const v=100/m;return J(v+"%")});return Wo(m,p)},pa=(l,m,p)=>l.fold(()=>m,v=>Rk(m,p,v),v=>wc(m,p)),zf=(l,m,p)=>{const v=bm.from(p),x=wo(l,_=>_==="0px")?Dk(v,l.length):pa(v,l,m);return py(x)},Uf=(l,m)=>l.length===0?m:Jr(l,(p,v)=>bm.from(v).fold(J(0),hn,hn)+p,0),ml=(l,m)=>{const p=Math.floor(l);return{value:p+m,remainder:l-p}},Dr=(l,m)=>bm.from(l).fold(J(l),p=>p+m+"px",p=>p+m+"%"),py=l=>{if(l.length===0)return l;const m=Jr(l,(v,x)=>{const _=bm.from(x).fold(()=>({value:x,remainder:0}),M=>ml(M,"px"),M=>({value:M+"%",remainder:0}));return{output:[_.value].concat(v.output),remainder:v.remainder+_.remainder}},{output:[],remainder:0}),p=m.output;return p.slice(0,p.length-1).concat([Dr(p[p.length-1],Math.round(m.remainder))])},ed=bm.from,CS=(l,m,p)=>{Be(m,v=>{const x=l.slice(v.column,v.colspan+v.column),_=Uf(x,Gg());vo(v.element,"width",_+p)})},mb=(l,m,p)=>{Be(m,(v,x)=>{const _=Uf([l[x]],Gg());vo(v.element,"width",_+p)})},by=(l,m,p)=>{Be(p,v=>{hi(v.element,"height")}),Be(m,(v,x)=>{vo(v.element,"height",l[x])})},Bh=l=>ed(l).fold(J("px"),J("px"),J("%")),fb=(l,m,p)=>{const v=pn.fromTable(l),x=v.all,_=pn.justCells(v),M=pn.justColumns(v);m.each(F=>{const U=Bh(F),X=Mn(l),ue=Fs(v,l),Pe=zf(ue,X,F);pn.hasColumns(v)?mb(Pe,M,U):CS(Pe,_,U),vo(l,"width",F)}),p.each(F=>{const U=Vl(l),X=ts(v,l),ue=zf(X,U,F);by(ue,x,_),vo(l,"height",F)})},wS=Va,SS=Sv,xS=Nu,$h=l=>{Ao(l,"width"),Ao(l,"height")},vm=l=>{const m=yr(l);fb(l,Q.some(m),Q.none()),$h(l)},Fh=l=>{const m=_1(l);fb(l,Q.some(m),Q.none()),$h(l)},Mk=l=>{const m=Ts(l);fb(l,Q.none(),Q.some(m)),$h(l)},vy=l=>{hi(l,"width");const m=qg(l),p=m.length>0?m:_u(l);Be(p,v=>{hi(v,"width"),$h(v)}),$h(l)},Pk={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},gb=()=>ae.fromTag("th"),Nk=()=>ae.fromTag("td"),ES=()=>ae.fromTag("col"),Bk=(l,m,p,v)=>{const x=ae.fromTag("tr");for(let _=0;_<l;_++){const M=v<m||_<p?gb():Nk();_<p&&ms(M,"scope","row"),v<m&&ms(M,"scope","col"),jo(M,ae.fromTag("br")),jo(x,M)}return x},TS=l=>{const m=ae.fromTag("colgroup");return Wo(l,()=>jo(m,ES())),m},Ih=(l,m,p,v)=>Wo(l,x=>Bk(m,p,v,x)),_S=(l,m,p,v,x,_=Pk)=>{const M=ae.fromTag("table"),F=x!=="cells";Xs(M,_.styles),Gi(M,_.attributes),_.colGroups&&jo(M,TS(m));const U=Math.min(l,p);if(F&&p>0){const qe=ae.fromTag("thead");jo(M,qe);const ft=Ih(p,m,x==="sectionCells"?U:0,v);Mc(qe,ft)}const X=ae.fromTag("tbody");jo(M,X);const ue=F?l-U:l,Xe=Ih(ue,m,F?0:p,v);return Mc(X,Xe),M},Zr=l=>l.dom.innerHTML,yy=l=>{const m=ae.fromTag("div"),p=ae.fromDom(l.dom.cloneNode(!0));return jo(m,p),Zr(m)},kS=(l,m)=>{l.selection.select(m.dom,!0),l.selection.collapse(!0)},Cy=(l,m)=>{gi(m,"td,th").each(yn(kS,l))},Lh=(l,m)=>{Be(Na(m,"tr"),p=>{Qu(l,p.dom),Be(Na(p,"th,td"),v=>{my(l,v.dom)})})},$k=l=>fe(l)&&l.indexOf("%")!==-1,Fk=(l,m,p,v,x)=>{const _=I1(l),M={styles:_,attributes:F1(l),colGroups:tk(l)};return l.undoManager.ignore(()=>{const F=_S(p,m,x,v,Yo(l),M);ms(F,"data-mce-id","__mce");const U=yy(F);l.insertContent(U),l.addVisual()}),gi(rc(l),'table[data-mce-id="__mce"]').map(F=>(nr(l)?Fh(F):Iu(l)?vy(F):(xi(l)||$k(_.width))&&vm(F),Vc(F),Ao(F,"data-mce-id"),Lh(l,F),Cy(l,F),F.dom)).getOrNull()},Ik=(l,m,p,v={})=>{const x=_=>jt(_)&&_>0;if(x(m)&&x(p)){const _=v.headerRows||0,M=v.headerColumns||0;return Fk(l,p,m,M,_)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var hb=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const OS="x-tinymce/dom-table-",wy=OS+"rows",Sy=OS+"columns",Hh=l=>{const m=hb.FakeClipboardItem(l);hb.write([m])},xy=l=>{var m;const p=(m=hb.read())!==null&&m!==void 0?m:[];return Er(p,v=>Q.from(v.getType(l)))},AS=l=>{xy(l).isSome()&&hb.clear()},RS=l=>{l.fold(Lk,m=>Hh({[wy]:m}))},DS=()=>xy(wy),Lk=()=>AS(wy),MS=l=>{l.fold(PS,m=>Hh({[Sy]:m}))},Ey=()=>xy(Sy),PS=()=>AS(Sy),td=l=>ns(hh(l),Hc(l)).filter(sn),NS=l=>W1(hh(l),Hc(l)).filter(sn),Hk=(l,m)=>{const p=Hc(l),v=()=>td(l).each(Re=>{hc(Re,p).filter(te(p)).each(Ue=>{const Ze=ae.fromText("");if(wu(Ue,Ze),vr(Ue),l.dom.isEmpty(l.getBody()))l.setContent(""),l.selection.setCursorLocation();else{const Ft=l.dom.createRng();Ft.setStart(Ze.dom,0),Ft.setEnd(Ze.dom,0),l.selection.setRng(Ft),l.nodeChanged()}})}),x=Re=>td(l).each(Ue=>{Iu(l)||nr(l)||xi(l)||hc(Ue,p).each(Ft=>{Re==="relative"&&!wS(Ft)?vm(Ft):Re==="fixed"&&!SS(Ft)?Fh(Ft):Re==="responsive"&&!xS(Ft)&&vy(Ft),Vc(Ft),pm(l,Ft.dom,Nn)})}),_=Re=>hc(Re,p),M=Re=>NS(l).bind(Ue=>_(Ue).map(Ze=>Re(Ze,Ue))),F=(Re,Ue)=>{M(Ze=>{l.formatter.toggle("tableclass",{value:Ue},Ze.dom),pm(l,Ze.dom,vs)})},U=(Re,Ue)=>{M(Ze=>{const Ft=In(l),Ln=wo(Ft,to=>l.formatter.match("tablecellclass",{value:Ue},to.dom))?l.formatter.remove:l.formatter.apply;Be(Ft,to=>Ln("tablecellclass",{value:Ue},to.dom)),pm(l,Ze.dom,vs)})},X=()=>{td(l).each(Re=>{hc(Re,p).each(Ue=>{Nd(Ue,"caption").fold(()=>{const Ze=ae.fromTag("caption");jo(Ze,ae.fromText("Caption")),L_(Ue,Ze,0),l.selection.setCursorLocation(Ze.dom,0)},Ze=>{Qr("caption")(Re)&&Q0("td",Ue).each(Ft=>l.selection.setCursorLocation(Ft.dom,0)),vr(Ze)}),pm(l,Ue.dom,Nn)})})},ue=Re=>{l.focus()},Pe=(Re,Ue=!1)=>M((Ze,Ft)=>{const gn=Zl(In(l),Ze,Ft);Re(Ze,gn,Ue).each(ue)}),Xe=()=>M((Re,Ue)=>{const Ze=Zl(In(l),Re,Ue),Ft=za(He,ae.fromDom(l.getDoc()),Q.none());return db(Re,Ze,Ft)}),qe=()=>M((Re,Ue)=>{const Ze=Zl(In(l),Re,Ue);return Ph(Re,Ze)}),ze=(Re,Ue)=>Ue().each(Ze=>{const Ft=Wt(Ze,gn=>Md(gn));M((gn,Ln)=>{const to=Ua(ae.fromDom(l.getDoc())),yo=Hv(In(l),Ln,Ft,to);Re(gn,yo).each(ue)})}),ft=Re=>(Ue,Ze)=>e1(Ze,"type").each(Ft=>{Pe(Re(Ft),Ze.no_events)});Zo({mceTableSplitCells:()=>Pe(m.unmergeCells),mceTableMergeCells:()=>Pe(m.mergeCells),mceTableInsertRowBefore:()=>Pe(m.insertRowsBefore),mceTableInsertRowAfter:()=>Pe(m.insertRowsAfter),mceTableInsertColBefore:()=>Pe(m.insertColumnsBefore),mceTableInsertColAfter:()=>Pe(m.insertColumnsAfter),mceTableDeleteCol:()=>Pe(m.deleteColumn),mceTableDeleteRow:()=>Pe(m.deleteRow),mceTableCutCol:()=>qe().each(Re=>{MS(Re),Pe(m.deleteColumn)}),mceTableCutRow:()=>Xe().each(Re=>{RS(Re),Pe(m.deleteRow)}),mceTableCopyCol:()=>qe().each(Re=>MS(Re)),mceTableCopyRow:()=>Xe().each(Re=>RS(Re)),mceTablePasteColBefore:()=>ze(m.pasteColsBefore,Ey),mceTablePasteColAfter:()=>ze(m.pasteColsAfter,Ey),mceTablePasteRowBefore:()=>ze(m.pasteRowsBefore,DS),mceTablePasteRowAfter:()=>ze(m.pasteRowsAfter,DS),mceTableDelete:v,mceTableCellToggleClass:U,mceTableToggleClass:F,mceTableToggleCaption:X,mceTableSizingMode:(Re,Ue)=>x(Ue),mceTableCellType:ft(Re=>Re==="th"?m.makeCellsHeader:m.unmakeCellsHeader),mceTableColType:ft(Re=>Re==="th"?m.makeColumnsHeader:m.unmakeColumnsHeader),mceTableRowType:ft(Re=>{switch(Re){case"header":return m.makeRowsHeader;case"footer":return m.makeRowsFooter;default:return m.makeRowsBody}})},(Re,Ue)=>l.addCommand(Ue,Re)),l.addCommand("mceInsertTable",(Re,Ue)=>{Ik(l,Ue.rows,Ue.columns,Ue.options)}),l.addCommand("mceTableApplyCellStyle",(Re,Ue)=>{const Ze=Ln=>"tablecell"+Ln.toLowerCase().replace("-","");if(!ke(Ue))return;const Ft=cs(In(l),sn);if(Ft.length===0)return;const gn=oa(Ue,(Ln,to)=>l.formatter.has(Ze(to))&&fe(Ln));tf(gn)||(Zo(gn,(Ln,to)=>{const yo=Ze(to);Be(Ft,qc=>{Ln===""?l.formatter.remove(yo,{value:null},qc.dom,!0):l.formatter.apply(yo,{value:Ln},qc.dom)})}),_(Ft[0]).each(Ln=>pm(l,Ln.dom,vs)))})},Vk=(l,m)=>{const p=Hc(l),v=x=>W1(hh(l)).bind(_=>hc(_,p).map(M=>{const F=Zl(In(l),M,_);return x(M,F)})).getOr("");Zo({mceTableRowType:()=>v(m.getTableRowType),mceTableCellType:()=>v(m.getTableCellType),mceTableColType:()=>v(m.getTableColType)},(x,_)=>l.addQueryValueHandler(_,x))},pb=mm.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Ya=(l,m,p,v)=>l.fold(m,p,v),bb=l=>l.fold(hn,hn,hn),vb=pb.before,Ty=pb.on,BS=pb.after,ls={before:vb,on:Ty,after:BS,cata:Ya,getStart:bb},Wf={create:(l,m)=>({selection:l,kill:m})},nd=(l,m)=>{const p=l.document.createRange();return p.selectNode(m.dom),p},yb=(l,m)=>{const p=l.document.createRange();return FS(p,m),p},FS=(l,m)=>l.selectNodeContents(m.dom),zk=(l,m)=>{m.fold(p=>{l.setStartBefore(p.dom)},(p,v)=>{l.setStart(p.dom,v)},p=>{l.setStartAfter(p.dom)})},Uk=(l,m)=>{m.fold(p=>{l.setEndBefore(p.dom)},(p,v)=>{l.setEnd(p.dom,v)},p=>{l.setEndAfter(p.dom)})},IS=(l,m,p)=>{const v=l.document.createRange();return zk(v,m),Uk(v,p),v},Vh=(l,m,p,v,x)=>{const _=l.document.createRange();return _.setStart(m.dom,p),_.setEnd(v.dom,x),_},_y=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom,width:l.width,height:l.height}),Wk=l=>{const m=l.getClientRects(),p=m.length>0?m[0]:l.getBoundingClientRect();return p.width>0||p.height>0?Q.some(p).map(_y):Q.none()},Zf=mm.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),LS=(l,m,p)=>m(ae.fromDom(p.startContainer),p.startOffset,ae.fromDom(p.endContainer),p.endOffset),HS=(l,m)=>m.match({domRange:p=>({ltr:J(p),rtl:Q.none}),relative:(p,v)=>({ltr:af(()=>IS(l,p,v)),rtl:af(()=>Q.some(IS(l,v,p)))}),exact:(p,v,x,_)=>({ltr:af(()=>Vh(l,p,v,x,_)),rtl:af(()=>Q.some(Vh(l,x,_,p,v)))})}),VS=(l,m)=>{const p=m.ltr();return p.collapsed?m.rtl().filter(x=>x.collapsed===!1).map(x=>Zf.rtl(ae.fromDom(x.endContainer),x.endOffset,ae.fromDom(x.startContainer),x.startOffset)).getOrThunk(()=>LS(l,Zf.ltr,p)):LS(l,Zf.ltr,p)},ky=(l,m)=>{const p=HS(l,m);return VS(l,p)},Cb=(l,m)=>ky(l,m).match({ltr:(v,x,_,M)=>{const F=l.document.createRange();return F.setStart(v.dom,x),F.setEnd(_.dom,M),F},rtl:(v,x,_,M)=>{const F=l.document.createRange();return F.setStart(_.dom,M),F.setEnd(v.dom,x),F}});Zf.ltr,Zf.rtl;const od={create:(l,m,p,v)=>({start:l,soffset:m,finish:p,foffset:v})},US={create:(l,m,p,v)=>({start:ls.on(l,m),finish:ls.on(p,v)})},WS=(l,m)=>{const p=Cb(l,m);return od.create(ae.fromDom(p.startContainer),p.startOffset,ae.fromDom(p.endContainer),p.endOffset)},wb=US.create,jk=(l,m,p,v,x,_,M)=>So(p,x)&&v===_?Q.none():Ys(p,"td,th",m).bind(F=>Ys(x,"td,th",m).bind(U=>ym(l,m,F,U,M))),ym=(l,m,p,v,x)=>So(p,v)?Q.none():Ur(p,v,m).bind(_=>{const M=_.boxes.getOr([]);return M.length>1?(x(l,M,_.start,_.finish),Q.some(Wf.create(Q.some(wb(p,0,p,ua(p))),!0))):Q.none()}),Sb=(l,m,p,v,x)=>{const _=M=>(x.clearBeforeUpdate(p),x.selectRange(p,M.boxes,M.start,M.finish),M.boxes);return nm(v,l,m,x.firstSelectedSelector,x.lastSelectedSelector).map(_)},zh=(l,m)=>({item:l,mode:m}),ZS=(l,m,p,v=jf)=>l.property().parent(m).map(x=>zh(x,v)),jf=(l,m,p,v=Gf)=>p.sibling(l,m).map(x=>zh(x,v)),Gf=(l,m,p,v=Gf)=>{const x=l.property().children(m);return p.first(x).map(M=>zh(M,v))},Gk=[{current:ZS,next:jf,fallback:Q.none()},{current:jf,next:Gf,fallback:Q.some(ZS)},{current:Gf,next:Gf,fallback:Q.some(jf)}],jS=(l,m,p,v,x=Gk)=>N(x,M=>M.current===p).bind(M=>M.current(l,m,v,M.next).orThunk(()=>M.fallback.bind(F=>jS(l,m,F,v)))),qf={left:()=>({sibling:(p,v)=>p.query().prevSibling(v),first:p=>p.length>0?Q.some(p[p.length-1]):Q.none()}),right:()=>({sibling:(p,v)=>p.query().nextSibling(v),first:p=>p.length>0?Q.some(p[0]):Q.none()})},Oy=(l,m,p,v,x,_)=>jS(l,m,v,x).bind(F=>_(F.item)?Q.none():p(F.item)?Q.some(F.item):Oy(l,F.item,p,F.mode,x,_)),Ay=(l,m,p,v)=>Oy(l,m,p,jf,qf.left(),v),Kk=(l,m,p,v)=>Oy(l,m,p,jf,qf.right(),v),Ry=l=>m=>l.property().children(m).length===0,GS=(l,m,p)=>Kf(l,m,Ry(l),p),qS=(l,m,p)=>KS(l,m,Ry(l),p),Kf=Ay,KS=Kk,xb=Ul(),sd=(l,m)=>GS(xb,l,m),Xl=(l,m)=>qS(xb,l,m),Uh=(l,m,p)=>Kf(xb,l,m,p),Wh=(l,m,p)=>KS(xb,l,m,p),Yk=(l,m,p)=>Ve(l,m,p).isSome(),Sc=mm.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Ai=(l,m,p)=>{const v=l.getRect(m),x=l.getRect(p);return x.right>v.left&&x.left<v.right},Dy=l=>Ys(l,"tr"),rd={...Sc,verify:(l,m,p,v,x,_,M)=>Ys(v,"td,th",M).bind(F=>Ys(m,"td,th",M).map(U=>So(F,U)?So(v,F)&&ua(F)===x?_(U):Sc.none("in same cell"):tm(Dy,[F,U]).fold(()=>Ai(l,U,F)?Sc.success():_(U),X=>_(U)))).getOr(Sc.none("default")),cata:(l,m,p,v,x)=>l.fold(m,p,v,x)},Yf=(l,m,p,v)=>({parent:l,children:m,element:p,index:v}),sr=l=>Fl(l).bind(m=>{const p=Jn(m);return My(p,l).map(v=>Yf(m,p,l,v))}),My=(l,m)=>ef(l,yn(So,m)),Eb=Qr("br"),wm=(l,m,p)=>m(l,p).bind(v=>Od(v)&&_v(v).trim().length===0?wm(v,m,p):Q.some(v)),Zh=(l,m,p)=>p.traverse(m).orThunk(()=>wm(m,p.gather,l)).map(p.relative),Jk=(l,m)=>Dc(l,m).filter(Eb).orThunk(()=>Dc(l,m-1).filter(Eb)),Py=(l,m,p,v)=>Jk(m,p).bind(x=>v.traverse(x).fold(()=>wm(x,v.gather,l).map(v.relative),_=>sr(_).map(M=>ls.on(M.parent,M.index)))),jh=(l,m,p,v)=>(Eb(m)?Zh(l,m,v):Py(l,m,p,v)).map(_=>({start:_,finish:_})),rr=l=>rd.cata(l,m=>Q.none(),()=>Q.none(),m=>Q.some(Z1(m,0)),m=>Q.some(Z1(m,ua(m)))),Ny=(l,m)=>({left:l.left,top:l.top+m,right:l.right,bottom:l.bottom+m}),ba=(l,m)=>({left:l.left,top:l.top-m,right:l.right,bottom:l.bottom-m}),By=(l,m,p)=>({left:l.left+m,top:l.top+p,right:l.right+m,bottom:l.bottom+p}),Xf=l=>l.top,Jf=l=>l.bottom,$y=(l,m,p)=>p>=0&&p<ua(m)?l.getRangedRect(m,p,m,p+1):p>0?l.getRangedRect(m,p-1,m,p):Q.none(),Jl=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom}),Fy=(l,m)=>Q.some(l.getRect(m)),Iy=(l,m,p)=>fc(m)?Fy(l,m).map(Jl):Od(m)?$y(l,m,p).map(Jl):Q.none(),Ly=(l,m)=>fc(m)?Fy(l,m).map(Jl):Od(m)?l.getRangedRect(m,0,m,ua(m)).map(Jl):Q.none(),fl=5,Tb=100,hr=mm.generate([{none:[]},{retry:["caret"]}]),YS=(l,m)=>l.left<m.left||Math.abs(m.right-l.left)<1||l.left>m.right,Hy=(l,m,p)=>Go(m,Ce).fold(An,v=>Ly(l,v).exists(x=>YS(p,x))),Vy=(l,m,p,v,x)=>{const _=Ny(x,fl);return Math.abs(p.bottom-v.bottom)<1||p.top>x.bottom?hr.retry(_):p.top===x.bottom?hr.retry(Ny(x,1)):Hy(l,m,x)?hr.retry(By(_,fl,0)):hr.none()},zy={point:Xf,adjuster:(l,m,p,v,x)=>{const _=ba(x,fl);return Math.abs(p.top-v.top)<1||p.bottom<x.top?hr.retry(_):p.bottom===x.top?hr.retry(ba(x,1)):Hy(l,m,x)?hr.retry(By(_,fl,0)):hr.none()},move:ba,gather:sd},JS={point:Jf,adjuster:Vy,move:Ny,gather:Xl},QS=(l,m,p)=>l.elementFromPoint(m,p).filter(v=>Eo(v)==="table").isSome(),Uc=(l,m,p,v,x)=>cd(l,m,p,m.move(v,fl),x),cd=(l,m,p,v,x)=>x===0?Q.some(v):QS(l,v.left,m.point(v))?Uc(l,m,p,v,x-1):l.situsFromPoint(v.left,m.point(v)).bind(_=>_.start.fold(Q.none,M=>Ly(l,M).bind(F=>m.adjuster(l,M,F,p,v).fold(Q.none,U=>cd(l,m,p,U,x-1))).orThunk(()=>Q.some(v)),Q.none)),ex=(l,m,p)=>l.point(m)>p.getInnerHeight()?Q.some(l.point(m)-p.getInnerHeight()):l.point(m)<0?Q.some(-l.point(m)):Q.none(),Sm=(l,m,p)=>{const v=l.move(p,fl),x=cd(m,l,p,v,Tb).getOr(v);return ex(l,x,m).fold(()=>m.situsFromPoint(x.left,l.point(x)),_=>(m.scrollBy(0,_),m.situsFromPoint(x.left,l.point(x)-_)))},Mr={tryUp:yn(Sm,zy),tryDown:yn(Sm,JS),getJumpSize:J(fl)},xc=20,Pr=(l,m,p)=>l.getSelection().bind(v=>jh(m,v.finish,v.foffset,p).fold(()=>Q.some(Z1(v.finish,v.foffset)),x=>{const _=l.fromSitus(x),M=rd.verify(l,v.finish,v.foffset,_.finish,_.foffset,p.failure,m);return rr(M)})),Wc=(l,m,p,v,x,_)=>_===0?Q.none():xm(l,m,p,v,x).bind(M=>{const F=l.fromSitus(M),U=rd.verify(l,p,v,F.finish,F.foffset,x.failure,m);return rd.cata(U,()=>Q.none(),()=>Q.some(M),X=>So(p,X)&&v===0?_b(l,p,v,ba,x):Wc(l,m,X,0,x,_-1),X=>So(p,X)&&v===ua(X)?_b(l,p,v,Ny,x):Wc(l,m,X,ua(X),x,_-1))}),_b=(l,m,p,v,x)=>Iy(l,m,p).bind(_=>Zc(l,x,v(_,Mr.getJumpSize()))),Zc=(l,m,p)=>{const v=To().browser;return v.isChromium()||v.isSafari()||v.isFirefox()?m.retry(l,p):Q.none()},xm=(l,m,p,v,x)=>Iy(l,p,v).bind(_=>Zc(l,x,_)),tx=(l,m,p)=>Pr(l,m,p).bind(v=>Wc(l,m,v.element,v.offset,p,xc).map(l.fromSitus)),KD=(l,m)=>Yk(l,p=>Fl(p).exists(v=>So(v,m))),Qk=(l,m,p,v,x)=>Ys(v,"td,th",m).bind(_=>Ys(_,"table",m).bind(M=>KD(x,M)?tx(l,m,p).bind(F=>Ys(F.finish,"td,th",m).map(U=>({start:_,finish:U,range:F}))):Q.none())),Uy=(l,m,p,v,x,_)=>_(v,m).orThunk(()=>Qk(l,m,p,v,x).map(M=>{const F=M.range;return Wf.create(Q.some(wb(F.start,F.soffset,F.finish,F.foffset)),!0)})),e4=(l,m)=>Ys(l,"tr",m).bind(p=>Ys(p,"table",m).bind(v=>{const x=Na(v,"tr");return So(p,x[0])?Uh(v,_=>Ov(_).isSome(),m).map(_=>{const M=ua(_);return Wf.create(Q.some(wb(_,M,_,M)),!0)}):Q.none()})),kb=(l,m)=>Ys(l,"tr",m).bind(p=>Ys(p,"table",m).bind(v=>{const x=Na(v,"tr");return So(p,x[x.length-1])?Wh(v,_=>Sw(_).isSome(),m).map(_=>Wf.create(Q.some(wb(_,0,_,0)),!0)):Q.none()})),cr=(l,m,p,v,x,_,M)=>Qk(l,p,v,x,_).bind(F=>ym(m,p,F.start,F.finish,M)),Gh=l=>{let m=l;return{get:()=>m,set:x=>{m=x}}},qh=l=>{const m=Gh(Q.none()),p=()=>m.get().each(l);return{clear:()=>{p(),m.set(Q.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:F=>{p(),m.set(Q.some(F))}}},ad=()=>{const l=qh(He);return{...l,on:p=>l.get().each(p)}},Wy=(l,m)=>Ys(l,"td,th",m),Ob=l=>Da(l).exists(Hu),Zy=(l,m,p,v)=>{const x=ad(),_=x.clear,M=ue=>{x.on(Pe=>{v.clearBeforeUpdate(m),Wy(ue.target,p).each(Xe=>{Ur(Pe,Xe,p).each(qe=>{const ze=qe.boxes.getOr([]);if(ze.length===1){const ft=ze[0],Re=Jd(ft)==="false",Ue=gs(Ew(ue.target),ft,So);Re&&Ue&&v.selectRange(m,ze,ft,ft)}else ze.length>1&&(v.selectRange(m,ze,qe.start,qe.finish),l.selectContents(Xe))})})})};return{clearstate:_,mousedown:ue=>{v.clear(m),Wy(ue.target,p).filter(Ob).each(x.set)},mouseover:ue=>{M(ue)},mouseup:ue=>{M(ue),_()}}},Ab={traverse:rf,gather:Xl,relative:ls.before,retry:Mr.tryDown,failure:rd.failedDown},jy={traverse:jg,gather:sd,relative:ls.before,retry:Mr.tryUp,failure:rd.failedUp},Qf=l=>m=>m===l,Ql=Qf(38),Kh=Qf(40),Em=l=>l>=37&&l<=40,eu={isBackward:Qf(37),isForward:Qf(39)},nx={isBackward:Qf(39),isForward:Qf(37)},Ec=l=>{const m=l!==void 0?l.dom:document,p=m.body.scrollLeft||m.documentElement.scrollLeft,v=m.body.scrollTop||m.documentElement.scrollTop;return el(p,v)},Gy=(l,m,p)=>{const x=(p!==void 0?p.dom:document).defaultView;x&&x.scrollBy(l,m)},id=mm.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Tm=l=>id.exact(l.start,l.soffset,l.finish,l.foffset),Rb=l=>l.match({domRange:m=>ae.fromDom(m.startContainer),relative:(m,p)=>ls.getStart(m),exact:(m,p,v,x)=>m}),Db=id.domRange,t4=id.relative,n4=id.exact,ox=l=>{const m=Rb(l);return fs(m)},sx=od.create,_m={domRange:Db,relative:t4,exact:n4,exactFromRange:Tm,getWin:ox,range:sx},eg=(l,m,p)=>{var v;return Q.from((v=l.caretPositionFromPoint)===null||v===void 0?void 0:v.call(l,m,p)).bind(x=>{if(x.offsetNode===null)return Q.none();const _=l.createRange();return _.setStart(x.offsetNode,x.offset),_.collapse(),Q.some(_)})},Yh=(l,m,p)=>{var v;return Q.from((v=l.caretRangeFromPoint)===null||v===void 0?void 0:v.call(l,m,p))},o4=(l,m,p)=>l.caretPositionFromPoint?eg(l,m,p):l.caretRangeFromPoint?Yh(l,m,p):Q.none(),rx=(l,m,p)=>{const v=l.document;return o4(v,m,p).map(x=>od.create(ae.fromDom(x.startContainer),x.startOffset,ae.fromDom(x.endContainer),x.endOffset))},Xh=(l,m)=>{const p=Eo(l);return p==="input"?ls.after(l):rs(["br","img"],p)?m===0?ls.before(l):ls.after(l):ls.on(l,m)},Mb=(l,m)=>{const p=l.fold(ls.before,Xh,ls.after),v=m.fold(ls.before,Xh,ls.after);return _m.relative(p,v)},qy=(l,m,p,v)=>{const x=Xh(l,m),_=Xh(p,v);return _m.relative(x,_)},cx=(l,m,p,v)=>{const _=Zg(l).dom.createRange();return _.setStart(l.dom,m),_.setEnd(p.dom,v),_},Pb=(l,m,p,v)=>{const x=cx(l,m,p,v),_=So(l,p)&&m===v;return x.collapsed&&!_},tg=l=>Q.from(l.getSelection()),ax=(l,m)=>{tg(l).each(p=>{p.removeAllRanges(),p.addRange(m)})},km=(l,m,p,v,x)=>{const _=Vh(l,m,p,v,x);ax(l,_)},Cn=(l,m,p,v,x,_)=>{m.collapse(p.dom,v),m.extend(x.dom,_)},tu=(l,m)=>ky(l,m).match({ltr:(p,v,x,_)=>{km(l,p,v,x,_)},rtl:(p,v,x,_)=>{tg(l).each(M=>{if(M.setBaseAndExtent)M.setBaseAndExtent(p.dom,v,x.dom,_);else if(M.extend)try{Cn(l,M,p,v,x,_)}catch{km(l,x,_,p,v)}else km(l,x,_,p,v)})}}),ld=(l,m,p,v,x)=>{const _=qy(m,p,v,x);tu(l,_)},Nb=(l,m,p)=>{const v=Mb(m,p);tu(l,v)},Ky=l=>{if(l.rangeCount>0){const m=l.getRangeAt(0),p=l.getRangeAt(l.rangeCount-1);return Q.some(od.create(ae.fromDom(m.startContainer),m.startOffset,ae.fromDom(p.endContainer),p.endOffset))}else return Q.none()},Jh=l=>{if(l.anchorNode===null||l.focusNode===null)return Ky(l);{const m=ae.fromDom(l.anchorNode),p=ae.fromDom(l.focusNode);return Pb(m,l.anchorOffset,p,l.focusOffset)?Q.some(od.create(m,l.anchorOffset,p,l.focusOffset)):Ky(l)}},Om=(l,m,p=!0)=>{const x=(p?yb:nd)(l,m);ax(l,x)},Qh=l=>tg(l).filter(m=>m.rangeCount>0).bind(Jh),Bb=l=>Qh(l).map(m=>_m.exact(m.start,m.soffset,m.finish,m.foffset)),ix=(l,m)=>{const p=Cb(l,m);return Wk(p)},s4=(l,m,p)=>rx(l,m,p),Am=l=>{tg(l).each(m=>m.removeAllRanges())},$b=l=>({elementFromPoint:(Re,Ue)=>ae.fromPoint(ae.fromDom(l.document),Re,Ue),getRect:Re=>Re.dom.getBoundingClientRect(),getRangedRect:(Re,Ue,Ze,Ft)=>{const gn=_m.exact(Re,Ue,Ze,Ft);return ix(l,gn)},getSelection:()=>Bb(l).map(Re=>WS(l,Re)),fromSitus:Re=>{const Ue=_m.relative(Re.start,Re.finish);return WS(l,Ue)},situsFromPoint:(Re,Ue)=>s4(l,Re,Ue).map(Ze=>US.create(Ze.start,Ze.soffset,Ze.finish,Ze.foffset)),clearSelection:()=>{Am(l)},collapseSelection:(Re=!1)=>{Bb(l).each(Ue=>Ue.fold(Ze=>Ze.collapse(Re),(Ze,Ft)=>{const gn=Re?Ze:Ft;Nb(l,gn,gn)},(Ze,Ft,gn,Ln)=>{const to=Re?Ze:gn,yo=Re?Ft:Ln;ld(l,to,yo,to,yo)}))},setSelection:Re=>{ld(l,Re.start,Re.soffset,Re.finish,Re.foffset)},setRelativeSelection:(Re,Ue)=>{Nb(l,Re,Ue)},selectNode:Re=>{Om(l,Re,!1)},selectContents:Re=>{Om(l,Re)},getInnerHeight:()=>l.innerHeight,getScrollY:()=>Ec(ae.fromDom(l.document)).top,scrollBy:(Re,Ue)=>{Gy(Re,Ue,ae.fromDom(l.document))}}),ud=(l,m)=>({rows:l,cols:m}),Yy=(l,m,p,v)=>{const x=$b(l),_=Zy(x,m,p,v);return{clearstate:_.clearstate,mousedown:_.mousedown,mouseover:_.mouseover,mouseup:_.mouseup}},Xy=l=>Go(l,$t).exists(Hu),Rm=(l,m)=>Xy(l)||Xy(m),Jy=(l,m,p,v)=>{const x=$b(l),_=()=>(v.clear(m),Q.none());return{keydown:(U,X,ue,Pe,Xe,qe)=>{const ze=U.raw,ft=ze.which,Re=ze.shiftKey===!0;return xf(m,v.selectedSelector).fold(()=>(Em(ft)&&!Re&&v.clearBeforeUpdate(m),Em(ft)&&Re&&!Rm(X,Pe)?Q.none:Kh(ft)&&Re?yn(cr,x,m,p,Ab,Pe,X,v.selectRange):Ql(ft)&&Re?yn(cr,x,m,p,jy,Pe,X,v.selectRange):Kh(ft)?yn(Uy,x,p,Ab,Pe,X,kb):Ql(ft)?yn(Uy,x,p,jy,Pe,X,e4):Q.none),Ze=>{const Ft=gn=>()=>Er(gn,to=>Sb(to.rows,to.cols,m,Ze,v)).fold(()=>Uu(m,v.firstSelectedSelector,v.lastSelectedSelector).map(to=>{const yo=Kh(ft)||qe.isForward(ft)?ls.after:ls.before;return x.setRelativeSelection(ls.on(to.first,0),yo(to.table)),v.clear(m),Wf.create(Q.none(),!0)}),to=>Q.some(Wf.create(Q.none(),!0)));return Em(ft)&&Re&&!Rm(X,Pe)?Q.none:Kh(ft)&&Re?Ft([ud(1,0)]):Ql(ft)&&Re?Ft([ud(-1,0)]):qe.isBackward(ft)&&Re?Ft([ud(0,-1),ud(-1,0)]):qe.isForward(ft)&&Re?Ft([ud(0,1),ud(1,0)]):Em(ft)&&!Re?_:Q.none})()},keyup:(U,X,ue,Pe,Xe)=>xf(m,v.selectedSelector).fold(()=>{const qe=U.raw,ze=qe.which;return qe.shiftKey===!0&&Em(ze)&&Rm(X,Pe)?jk(m,p,X,ue,Pe,Xe,v.selectRange):Q.none()},Q.none)}},lx=(l,m,p,v)=>{const x=$b(l);return(_,M)=>{v.clearBeforeUpdate(m),Ur(_,M,p).each(F=>{const U=F.boxes.getOr([]);v.selectRange(m,U,F.start,F.finish),x.selectContents(M),x.collapseSelection()})}},ux=(l,m)=>{const p=Bl(l,m);return p===void 0||p===""?[]:p.split(" ")},gl=(l,m,p)=>{const x=ux(l,m).concat([p]);return ms(l,m,x.join(" ")),!0},dx=(l,m,p)=>{const v=cs(ux(l,m),x=>x!==p);return v.length>0?ms(l,m,v.join(" ")):Ao(l,m),!1},Fb=l=>l.dom.classList!==void 0,va=l=>ux(l,"class"),Hs=(l,m)=>gl(l,"class",m),r4=(l,m)=>dx(l,"class",m),Ri=(l,m)=>{Fb(l)?l.dom.classList.add(m):Hs(l,m)},c4=l=>{(Fb(l)?l.dom.classList:va(l)).length===0&&Ao(l,"class")},mx=(l,m)=>{Fb(l)?l.dom.classList.remove(m):r4(l,m),c4(l)},ep=(l,m)=>Fb(l)&&l.dom.classList.contains(m),ng=(l,m)=>{Be(m,p=>{mx(l,p)})},fx=l=>m=>{Ri(m,l)},gx=l=>m=>{ng(m,l)},hx={byClass:l=>{const m=fx(l.selected),p=gx([l.selected,l.lastSelected,l.firstSelected]),v=_=>{const M=Na(_,l.selectedSelector);Be(M,p)};return{clearBeforeUpdate:v,clear:v,selectRange:(_,M,F,U)=>{v(_),Be(M,m),Ri(F,l.firstSelected),Ri(U,l.lastSelected)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}},byAttr:(l,m,p)=>{const v=U=>{Ao(U,l.selected),Ao(U,l.firstSelected),Ao(U,l.lastSelected)},x=U=>{ms(U,l.selected,"1")},_=U=>{M(U),p()},M=U=>{const X=Na(U,`${l.selectedSelector},${l.firstSelectedSelector},${l.lastSelectedSelector}`);Be(X,v)};return{clearBeforeUpdate:M,clear:_,selectRange:(U,X,ue,Pe)=>{_(U),Be(X,x),ms(ue,l.firstSelected,"1"),ms(Pe,l.lastSelected,"1"),m(X,ue,Pe)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}}},nt=(l,m,p,v)=>{switch(l.tag){case"none":return m();case"single":return v(l.element);case"multiple":return p(l.elements)}},Vs=()=>({tag:"none"}),Ib=l=>({tag:"multiple",elements:l}),zs=l=>({tag:"single",element:l}),ya=(l,m,p)=>({get:()=>U1(l(),p).fold(()=>m().fold(Vs,zs),Ib)}),Qy=(l,m)=>{const p=l.slice(0,m[m.length-1].row+1),v=Zv(p);return Ss(v,x=>{const _=x.cells.slice(0,m[m.length-1].column+1);return Wt(_,M=>M.element)})},tp=(l,m)=>{const p=l.slice(m[0].row+m[0].rowspan-1,l.length),v=Zv(p);return Ss(v,x=>{const _=x.cells.slice(m[0].column+m[0].colspan-1,x.cells.length);return Wt(_,M=>M.element)})},og=(l,m,p)=>{const v=pn.fromTable(l);return yc(v,m).map(_=>{const M=Nf(v,p,!1),{rows:F}=co(M),U=Qy(F,_),X=tp(F,_);return{upOrLeftCells:U,downOrRightCells:X}})},px=(l,m,p,v,x,_,M)=>({target:l,x:m,y:p,stop:v,prevent:x,kill:_,raw:M}),dd=l=>{const m=ae.fromDom(YC(l).getOr(l.target)),p=()=>l.stopPropagation(),v=()=>l.preventDefault(),x=uo(v,p);return px(m,l.clientX,l.clientY,p,v,x,l)},sg=(l,m)=>p=>{l(p)&&m(dd(p))},a4=(l,m,p,v,x)=>{const _=sg(p,v);return l.dom.addEventListener(m,_,x),{unbind:yn(l4,l,m,_,x)}},i4=(l,m,p,v)=>a4(l,m,p,v,!1),l4=(l,m,p,v)=>{l.dom.removeEventListener(m,p,v)},bx=Oe,Dm=(l,m,p)=>i4(l,m,bx,p),rg=dd,Mm=l=>!ep(ae.fromDom(l.target),"ephox-snooker-resizer-bar"),Lb=(l,m)=>{const p=ya(()=>ae.fromDom(l.getBody()),()=>W1(hh(l),Hc(l)),om.selectedSelector),v=(U,X,ue)=>{hc(X).each(Xe=>{const qe=Wt(U,Ze=>Ze.dom),ze=Fu(l),ft=za(He,ae.fromDom(l.getDoc()),ze),Re=In(l),Ue=og(Xe,{selection:Re},ft).map(Ze=>Ug(Ze,Ft=>Wt(Ft,gn=>gn.dom))).getOrUndefined();Ak(l,qe,X.dom,ue.dom,Ue)})},x=()=>ps(l),_=hx.byAttr(om,v,x);return l.on("init",U=>{const X=l.getWin(),ue=rc(l),Pe=Hc(l),Xe=()=>{const Kn=l.selection,jr=ae.fromDom(Kn.getStart()),Gr=ae.fromDom(Kn.getEnd());tm(hc,[jr,Gr]).fold(()=>_.clear(ue),He)},qe=Yy(X,ue,Pe,_),ze=Jy(X,ue,Pe,_),ft=lx(X,ue,Pe,_),Re=Kn=>Kn.raw.shiftKey===!0;l.on("TableSelectorChange",Kn=>ft(Kn.start,Kn.finish));const Ue=(Kn,jr)=>{Re(Kn)&&(jr.kill&&Kn.kill(),jr.selection.each(Gr=>{const wa=_m.relative(Gr.start,Gr.finish),Jt=Cb(X,wa);l.selection.setRng(Jt)}))},Ze=Kn=>{const jr=rg(Kn);if(jr.raw.shiftKey&&Em(jr.raw.which)){const Gr=l.selection.getRng(),wa=ae.fromDom(Gr.startContainer),Jt=ae.fromDom(Gr.endContainer);ze.keyup(jr,wa,Gr.startOffset,Jt,Gr.endOffset).each(cc=>{Ue(jr,cc)})}},Ft=Kn=>{const jr=rg(Kn);m.hide();const Gr=l.selection.getRng(),wa=ae.fromDom(Gr.startContainer),Jt=ae.fromDom(Gr.endContainer),cc=w1(eu,nx)(ae.fromDom(l.selection.getStart()));ze.keydown(jr,wa,Gr.startOffset,Jt,Gr.endOffset,cc).each(ys=>{Ue(jr,ys)}),m.show()},gn=Kn=>Kn.button===0,Ln=Kn=>Kn.buttons===void 0?!0:(Kn.buttons&1)!==0,to=Kn=>{qe.clearstate()},yo=Kn=>{gn(Kn)&&Mm(Kn)&&qe.mousedown(rg(Kn))},qc=Kn=>{Ln(Kn)&&Mm(Kn)&&qe.mouseover(rg(Kn))},Pi=Kn=>{gn(Kn)&&Mm(Kn)&&qe.mouseup(rg(Kn))},hl=(()=>{const Kn=Gh(ae.fromDom(ue)),jr=Gh(0);return{touchEnd:wa=>{const Jt=ae.fromDom(wa.target);if(Qr("td")(Jt)||Qr("th")(Jt)){const cc=Kn.get(),ys=jr.get();So(cc,Jt)&&wa.timeStamp-ys<300&&(wa.preventDefault(),ft(Jt,Jt))}Kn.set(Jt),jr.set(wa.timeStamp)}}})();l.on("dragstart",to),l.on("mousedown",yo),l.on("mouseover",qc),l.on("mouseup",Pi),l.on("touchend",hl.touchEnd),l.on("keyup",Ze),l.on("keydown",Ft),l.on("NodeChange",Xe)}),l.on("PreInit",()=>{l.serializer.addTempAttr(om.firstSelected),l.serializer.addTempAttr(om.lastSelected)}),{getSelectedCells:()=>nt(p.get(),J([]),U=>Wt(U,X=>X.dom),U=>[U.dom]),clearSelectedCells:U=>_.clear(ae.fromDom(U))}},jc=l=>{let m=[];return{bind:_=>{if(_===void 0)throw new Error("Event bind error: undefined handler");m.push(_)},unbind:_=>{m=cs(m,M=>M!==_)},trigger:(..._)=>{const M={};Be(l,(F,U)=>{M[F]=_[U]}),Be(m,F=>{F(M)})}}},Di=l=>{const m=Ug(l,v=>({bind:v.bind,unbind:v.unbind})),p=Ug(l,v=>v.trigger);return{registry:m,trigger:p}},Pm=(l,m)=>{let p=null;const v=()=>{bt(p)||(clearTimeout(p),p=null)};return{cancel:v,throttle:(..._)=>{v(),p=setTimeout(()=>{p=null,l.apply(null,_)},m)}}},cg=l=>l.slice(0).sort(),Hb=(l,m)=>{throw new Error("All required keys ("+cg(l).join(", ")+") were not specified. Specified keys were: "+cg(m).join(", ")+".")},Vb=l=>{throw new Error("Unsupported keys for object: "+cg(l).join(", "))},u4=(l,m)=>{if(!At(m))throw new Error("The "+l+" fields must be an array. Was: "+m+".");Be(m,p=>{if(!fe(p))throw new Error("The value "+p+" in the "+l+" fields was not a string.")})},d4=(l,m)=>{throw new Error("All values need to be of type: "+m+". Keys ("+cg(l).join(", ")+") were not.")},m4=l=>{const m=cg(l);N(m,(v,x)=>x<m.length-1&&v===m[x+1]).each(v=>{throw new Error("The field: "+v+" occurs more than once in the combined fields: ["+m.join(", ")+"].")})},f4=(l,m)=>vx(l,m,{validate:Xt,label:"function"}),vx=(l,m,p)=>{if(m.length===0)throw new Error("You must specify at least one required field.");return u4("required",m),m4(m),v=>{const x=Rt(v);wo(m,F=>rs(x,F))||Hb(m,x),l(m,x);const M=cs(m,F=>!p.validate(v[F],F));return M.length>0&&d4(M,p.label),v}},yx=(l,m)=>{const p=cs(m,v=>!rs(l,v));p.length>0&&Vb(p)},e2=l=>f4(yx,l),zb=e2(["compare","extract","mutate","sink"]),Sr=e2(["element","start","stop","destroy"]),Ca=e2(["forceDrop","drop","move","delayDrop"]),Gc=()=>{let l=Q.none();const m=()=>{l=Q.none()},p=(_,M)=>{const F=l.map(U=>_.compare(U,M));return l=Q.some(M),F},v=(_,M)=>{M.extract(_).each(U=>{p(M,U).each(ue=>{x.trigger.move(ue)})})},x=Di({move:jc(["info"])});return{onEvent:v,reset:m,events:x.registry}},np=()=>{const l=Di({move:jc(["info"])});return{onEvent:He,reset:He,events:l.registry}},t2=()=>{const l=np(),m=Gc();let p=l;return{on:()=>{p.reset(),p=m},off:()=>{p.reset(),p=l},isOn:()=>p===m,onEvent:(F,U)=>{p.onEvent(F,U)},events:m.events}},Cx=(l,m,p)=>{let v=!1;const x=Di({start:jc([]),stop:jc([])}),_=t2(),M=()=>{ze.stop(),_.isOn()&&(_.off(),x.trigger.stop())},F=Pm(M,200),U=Re=>{ze.start(Re),_.on(),x.trigger.start()},X=Re=>{F.cancel(),_.onEvent(Re,m)};_.events.move.bind(Re=>{m.mutate(l,Re.info)});const ue=()=>{v=!0},Pe=()=>{v=!1},Xe=()=>v,qe=Re=>(...Ue)=>{v&&Re.apply(null,Ue)},ze=m.sink(Ca({forceDrop:M,drop:qe(M),move:qe(X),delayDrop:qe(F.throttle)}),p),ft=()=>{ze.destroy()};return{element:ze.element,go:U,on:ue,off:Pe,isActive:Xe,destroy:ft,events:x.registry}},Ub=l=>{const m=l.replace(/\./g,"-");return{resolve:v=>m+"-"+v}},Wb=Ub("ephox-dragster").resolve,h4=l=>{const m={layerClass:Wb("blocker"),...l},p=ae.fromTag("div");return ms(p,"role","presentation"),Xs(p,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Ri(p,Wb("blocker")),Ri(p,m.layerClass),{element:J(p),destroy:()=>{vr(p)}}};var jb=zb({compare:(l,m)=>el(m.left-l.left,m.top-l.top),extract:l=>Q.some(el(l.x,l.y)),sink:(l,m)=>{const p=h4(m),v=Dm(p.element(),"mousedown",l.forceDrop),x=Dm(p.element(),"mouseup",l.drop),_=Dm(p.element(),"mousemove",l.move),M=Dm(p.element(),"mouseout",l.delayDrop),F=()=>{p.destroy(),x.unbind(),_.unbind(),M.unbind(),v.unbind()},U=ue=>{jo(ue,p.element())},X=()=>{vr(p.element())};return Sr({element:p.element,start:U,stop:X,destroy:F})},mutate:(l,m)=>{l.mutate(m.left,m.top)}});const qn=(l,m={})=>{var p;const v=(p=m.mode)!==null&&p!==void 0?p:jb;return Cx(l,v,m)},Mi=Ub("ephox-snooker").resolve,Sx=()=>{const l=Di({drag:jc(["xDelta","yDelta"])});return{mutate:(p,v)=>{l.trigger.drag(p,v)},events:l.registry}},n2=()=>{const l=Di({drag:jc(["xDelta","yDelta","target"])});let m=Q.none();const p=Sx();return p.events.drag.bind(_=>{m.each(M=>{l.trigger.drag(_.xDelta,_.yDelta,M)})}),{assign:_=>{m=Q.some(_)},get:()=>m,mutate:p.mutate,events:l.registry}},ag=(l,m,p,v,x)=>{const _=ae.fromTag("div");return Xs(_,{position:"absolute",left:m-v/2+"px",top:p+"px",height:x+"px",width:v+"px"}),Gi(_,{"data-column":l,role:"presentation"}),_},Gb=(l,m,p,v,x)=>{const _=ae.fromTag("div");return Xs(_,{position:"absolute",left:m+"px",top:p-x/2+"px",height:x+"px",width:v+"px"}),Gi(_,{"data-row":l,role:"presentation"}),_},op=Mi("resizer-bar"),o2=Mi("resizer-rows"),xx=Mi("resizer-cols"),s2=7,Ex=(l,m)=>Ss(l.all,(p,v)=>m(p.element)?[v]:[]),sp=(l,m)=>{const p=[];return Wo(l.grid.columns,v=>{pn.getColumnAt(l,v).map(_=>_.element).forall(m)&&p.push(v)}),cs(p,v=>{const x=pn.filterItems(l,_=>_.column===v);return wo(x,_=>m(_.element))})},Nm=l=>{const m=Na(l.parent(),"."+op);Be(m,vr)},qb=(l,m,p)=>{const v=l.origin();Be(m,x=>{x.each(_=>{const M=p(v,_);Ri(M,op),jo(l.parent(),M)})})},v4=(l,m,p,v)=>{qb(l,m,(x,_)=>{const M=ag(_.col,_.x-x.left,p.top-x.top,s2,v);return Ri(M,xx),M})},y4=(l,m,p,v)=>{qb(l,m,(x,_)=>{const M=Gb(_.row,p.left-x.left,_.y-x.top,v,s2);return Ri(M,o2),M})},C4=(l,m,p,v,x)=>{const _=hf(p),M=m.isResizable,F=v.length>0?kt.positions(v,p):[],U=F.length>0?Ex(l,M):[],X=cs(F,(qe,ze)=>Ke(U,ft=>ze===ft));y4(m,X,_,Ld(p));const ue=x.length>0?sh.positions(x,p):[],Pe=ue.length>0?sp(l,M):[],Xe=cs(ue,(qe,ze)=>Ke(Pe,ft=>ze===ft));v4(m,Xe,_,S1(p))},Tc=(l,m)=>{if(Nm(l),l.isResizable(m)){const p=pn.fromTable(m),v=mw(p),x=eh(p);C4(p,l,m,v,x)}},pr=(l,m)=>{const p=Na(l.parent(),"."+op);Be(p,m)},ig=l=>{pr(l,m=>{vo(m,"display","none")})},JD=l=>{pr(l,m=>{vo(m,"display","block")})},w4=l=>ep(l,o2),S4=l=>ep(l,xx),fn=Mi("resizer-bar-dragging"),x4=l=>{const m=n2(),p=qn(m,{});let v=Q.none();const x=(ze,ft)=>Q.from(Bl(ze,ft));m.events.drag.bind(ze=>{x(ze.target,"data-row").each(ft=>{const Re=Ps(ze.target,"top");vo(ze.target,"top",Re+ze.yDelta+"px")}),x(ze.target,"data-column").each(ft=>{const Re=Ps(ze.target,"left");vo(ze.target,"left",Re+ze.xDelta+"px")})});const _=(ze,ft)=>{const Re=Ps(ze,ft),Ue=Lr(ze,"data-initial-"+ft,0);return Re-Ue};p.events.stop.bind(()=>{m.get().each(ze=>{v.each(ft=>{x(ze,"data-row").each(Re=>{const Ue=_(ze,"top");Ao(ze,"data-initial-top"),qe.trigger.adjustHeight(ft,Ue,parseInt(Re,10))}),x(ze,"data-column").each(Re=>{const Ue=_(ze,"left");Ao(ze,"data-initial-left"),qe.trigger.adjustWidth(ft,Ue,parseInt(Re,10))}),Tc(l,ft)})})});const M=(ze,ft)=>{qe.trigger.startAdjust(),m.assign(ze),ms(ze,"data-initial-"+ft,Ps(ze,ft)),Ri(ze,fn),vo(ze,"opacity","0.2"),p.go(l.parent())},F=Dm(l.parent(),"mousedown",ze=>{w4(ze.target)&&M(ze.target,"top"),S4(ze.target)&&M(ze.target,"left")}),U=ze=>So(ze,l.view()),X=ze=>Ys(ze,"table",U).filter(Hu),ue=Dm(l.view(),"mouseover",ze=>{X(ze.target).fold(()=>{Lo(ze.target)&&Nm(l)},ft=>{p.isActive()&&(v=Q.some(ft),Tc(l,ft))})}),Pe=()=>{F.unbind(),ue.unbind(),p.destroy(),Nm(l)},Xe=ze=>{Tc(l,ze)},qe=Di({adjustHeight:jc(["table","delta","row"]),adjustWidth:jc(["table","delta","column"]),startAdjust:jc([])});return{destroy:Pe,refresh:Xe,on:p.on,off:p.off,hideBars:yn(ig,l),showBars:yn(JD,l),events:qe.registry}},r2={create:(l,m,p)=>{const v=kt,x=sh,_=x4(l),M=Di({beforeResize:jc(["table","type"]),afterResize:jc(["table","type"]),startDrag:jc([])});return _.events.adjustHeight.bind(F=>{const U=F.table;M.trigger.beforeResize(U,"row");const X=v.delta(F.delta,U);Yv(U,X,F.row),M.trigger.afterResize(U,"row")}),_.events.startAdjust.bind(F=>{M.trigger.startDrag()}),_.events.adjustWidth.bind(F=>{const U=F.table;M.trigger.beforeResize(U,"col");const X=x.delta(F.delta,U),ue=p(U);Yw(U,X,F.column,m,ue),M.trigger.afterResize(U,"col")}),{on:_.on,off:_.off,refreshBars:_.refresh,hideBars:_.hideBars,showBars:_.showBars,destroy:_.destroy,events:M.registry}}},rp={only:(l,m)=>{const p=n1(l)?br(l):l;return{parent:J(p),view:J(l),origin:J(el(0,0)),isResizable:m}},detached:(l,m,p)=>{const v=()=>hf(m);return{parent:J(m),view:J(l),origin:v,isResizable:p}},body:(l,m,p)=>({parent:J(m),view:J(l),origin:J(el(0,0)),isResizable:p})},T4=()=>{const l=ae.fromTag("div");return Xs(l,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),jo(rv(),l),l},_4=(l,m)=>l.inline?rp.body(ae.fromDom(l.getBody()),T4(),m):rp.only(ae.fromDom(l.getDoc()),m),c2=(l,m)=>{l.inline&&vr(m.parent())},Kb=l=>Xn(l)&&l.nodeName==="TABLE",Yb="bar-",tM=l=>Bl(l,"data-mce-resize")!=="false",k4=l=>{const m=pn.fromTable(l);pn.hasColumns(m)||Be(_u(l),p=>{const v=Tu(p,"width");vo(p,"width",v),Ao(p,"width")})},cp=l=>xu(l,"corner-"),a2=l=>i1(l,"corner-"),O4=l=>{const m=ad(),p=ad(),v=ad();let x,_,M,F;const U=Ue=>ub(l,Ue),X=()=>Si(l)?jl():Zu(),ue=Ue=>sm(Ue).columns,Pe=Ue=>sm(Ue).rows,Xe=(Ue,Ze,Ft,gn)=>{const Ln=a2(Ze),to=Eu(Ln,"e"),yo=xu(Ln,"n");if(_===""&&vm(Ue),F===""&&Mk(Ue),Ft!==x&&_!==""){vo(Ue,"width",_);const qc=X(),Pi=U(Ue),Bm=Si(l)||to?ue(Ue)-1:0;Yw(Ue,Ft-x,Bm,qc,Pi)}else if(Rv(_)){const qc=parseFloat(_.replace("%","")),Pi=Ft*qc/x;vo(Ue,"width",Pi+"%")}if(wf(_)&&k4(Ue),gn!==M&&F!==""){vo(Ue,"height",F);const qc=yo?0:Pe(Ue)-1;Yv(Ue,gn-M,qc)}},qe=()=>{p.on(Ue=>{Ue.destroy()}),v.on(Ue=>{c2(l,Ue)})};return l.on("init",()=>{const Ue=_4(l,tM);if(v.set(Ue),ek(l)&&$1(l)){const Ze=X(),Ft=r2.create(Ue,Ze,U);l.mode.isReadOnly()||Ft.on(),Ft.events.startDrag.bind(gn=>{m.set(l.selection.getRng())}),Ft.events.beforeResize.bind(gn=>{const Ln=gn.table.dom;bs(l,Ln,ph(Ln),Cf(Ln),Yb+gn.type)}),Ft.events.afterResize.bind(gn=>{const Ln=gn.table,to=Ln.dom;Vc(Ln),m.on(yo=>{l.selection.setRng(yo),l.focus()}),or(l,to,ph(to),Cf(to),Yb+gn.type),l.undoManager.add()}),p.set(Ft)}}),l.on("ObjectResizeStart",Ue=>{const Ze=Ue.target;if(Kb(Ze)&&!l.mode.isReadOnly()){const Ft=ae.fromDom(Ze);Be(l.dom.select(".mce-clonedresizable"),gn=>{l.dom.addClass(gn,"mce-"+B1(l)+"-columns")}),!SS(Ft)&&nr(l)?Fh(Ft):!wS(Ft)&&xi(l)&&vm(Ft),xS(Ft)&&xu(Ue.origin,Yb)&&vm(Ft),x=Ue.width,_=Iu(l)?"":Tw(l,Ze).getOr(""),M=Ue.height,F=_w(l,Ze).getOr("")}}),l.on("ObjectResized",Ue=>{const Ze=Ue.target;if(Kb(Ze)){const Ft=ae.fromDom(Ze),gn=Ue.origin;cp(gn)&&Xe(Ft,gn,Ue.width,Ue.height),Vc(Ft),pm(l,Ft.dom,vs)}}),l.on("SwitchMode",()=>{p.on(Ue=>{l.mode.isReadOnly()?(Ue.off(),Ue.hideBars()):(Ue.on(),Ue.showBars())})}),l.on("dragstart dragend",Ue=>{p.on(Ze=>{Ue.type==="dragstart"?(Ze.hideBars(),Ze.off()):(Ze.on(),Ze.showBars())})}),l.on("remove",()=>{qe()}),{refresh:Ue=>{p.on(Ze=>Ze.refreshBars(ae.fromDom(Ue)))},hide:()=>{p.on(Ue=>Ue.hideBars())},show:()=>{p.on(Ue=>Ue.showBars())}}},Tx=l=>{fh(l);const m=O4(l),p=Lb(l,m),v=fy(l,m,p);return Hk(l,v),Vk(l,v),zD(l,v),{getSelectedCells:p.getSelectedCells,clearSelectedCells:p.clearSelectedCells}},Mt=l=>({table:Tx(l)});var Xb=()=>{B.add("dom",Mt)};Xb()})();var gX=function(B){[{directive:"request"},{directive:"post",method:"POST"},{directive:"get",method:"GET"}].forEach(ne=>{B.directive(ne.directive,(de,{expression:fe},{evaluate:ke,cleanup:At})=>{let bt=q(fe,ke);de.addEventListener("click",()=>{j({el:de,method:ne.method,...bt})}),At(()=>observer.disconnect())}),B.magic(ne.directive,(de,{evaluate:fe})=>ke=>{let At=q(ke,fe);j({el:de,method:ne.method,...At})})});function j({el:ne,method:de,route:fe,headers:ke,body:At}){console.log({el:ne,method:de,route:fe,headers:ke,body:At}),fetch(fe,{method:de??"POST",headers:ke,body:At}).then(bt=>{ne.dispatchEvent(new CustomEvent("request",{detail:{state:"success",response:bt}})),ne.dispatchEvent(new CustomEvent((de??"post").toLowerCase(),{detail:{state:"success",response:bt}}))}).catch(bt=>{console.warn(bt),ne.dispatchEvent(new CustomEvent("request",{detail:{state:"error",response}})),ne.dispatchEvent(new CustomEvent((de??"post").toLowerCase(),{detail:{state:"error",response}}))})}function q(ne,de){let fe={};return typeof ne!="string"?fe=ne:ne.startsWith("{")?fe=de(ne):fe.route=ne,fe}},hX=gX,pX=hX;Alpine.plugin(pX);
